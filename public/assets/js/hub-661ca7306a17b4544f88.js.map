{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/systems/userinput/paths.js","webpack:///./src/react-components/wrap-with-audio.js","webpack:///./src/react-components/dialog-container.js","webpack:///./src/utils/media-utils.js","webpack:///./src/utils/phoenix-utils.js","webpack:///./src/utils/three-utils.js","webpack:///./src/systems/userinput/sets.js","webpack:///./src/telemetry.js","webpack:///./src/utils/i18n.js","webpack:///./src/object-types.js","webpack:///./src/assets/avatars/avatars.js","webpack:///./src/systems/userinput/pose.js","webpack:///./src/systems/userinput/bindings/xforms.js","webpack:///./src/systems/userinput/bindings/utils.js","webpack:///./src/utils/next-tick.js","webpack:///./src/storage/store.js","webpack:///./src/assets/images/hub-preview-light-no-shadow.png","webpack:///./src/components/gltf-model-plus.js","webpack:///./src/utils/scene-graph.js","webpack:///./src/utils/identity.js","webpack:///./src/utils/qs_truthy.js","webpack:///./src/utils/webgl.js","webpack:///./src/components/animation-mixer.js","webpack:///./src/components/audio-feedback.js","webpack:///./src/materials/MobileStandardMaterial.js","webpack:///./src/assets/images/cubemap/posx.jpg","webpack:///./src/assets/images/cubemap/negx.jpg","webpack:///./src/assets/images/cubemap/posy.jpg","webpack:///./src/assets/images/cubemap/negy.jpg","webpack:///./src/assets/images/cubemap/posz.jpg","webpack:///./src/assets/images/cubemap/negz.jpg","webpack:///./src/utils/media-highlight-frag.glsl","webpack:///./src/components/layers.js","webpack:///./src/components/loop-animation.js","webpack:///./src/utils/vr-caps-detect.js","webpack:///./src/utils/disable-ios-zoom.js","webpack:///./src/gltf-component-mappings.js","webpack:///./src/App.js","webpack:///./src/utils/animation.js","webpack:///./src/utils/auto-box-collider.js","webpack:///./src/components/hand-controls2.js","webpack:///./src/react-components/chat-message.js","webpack:///./src/utils/logging.js","webpack:///./src/utils/threejs-world-update.js","webpack:///./src/components/scene-components.js","webpack:///./src/components/ambient-light.js","webpack:///./src/components/css-class.js","webpack:///./src/components/directional-light.js","webpack:///./src/utils/resizeShadowCameraFrustum.js","webpack:///./src/components/duck.js","webpack:///./src/components/heightfield.js","webpack:///./src/components/hemisphere-light.js","webpack:///./src/components/hide-when-quality.js","webpack:///./src/components/media-loader.js","webpack:///./src/assets/LoadingObject_Atom.glb","webpack:///./src/components/point-light.js","webpack:///./src/components/quack.js","webpack:///./src/components/scene-preview-camera.js","webpack:///./src/components/skybox.js","webpack:///./src/components/spawn-controller.js","webpack:///./src/components/spot-light.js","webpack:///./src/components/sticky-object.js","webpack:///./src/components/super-spawner.js","webpack:///./src/utils/async-utils.js","webpack:///./src/components/water.js","webpack:///./src/components/debug.js","webpack:///./src/components/gamma-factor.js","webpack:///./src/components/scene-sound.js","webpack:///./src/assets/images/generic_vr_entry.svg","webpack:///./src/assets/images/hub-preview-white.png","webpack:///./src/utils/link-channel.js","webpack:///./src/utils/crypto.js","webpack:///./src/systems/nav.js","webpack:///./src/components/event-repeater.js","webpack:///./src/components/controls-shape-offset.js","webpack:///./src/systems/app-mode.js","webpack:///./src/utils/share.js","webpack:///./src/utils/serialize-element.js","webpack:///./src/hub.js","webpack:///./src/utils/debug-log.js","webpack:///./src/components/teleport-controls-matrix-auto-update.js","webpack:///./src/utils/audio-context-fix.js","webpack:///./src/utils/threejs-positional-audio-updatematrixworld.js","webpack:///./src/components/wasd-to-analog2d.js","webpack:///./src/components/mute-mic.js","webpack:///./src/components/bone-mute-state-indicator.js","webpack:///./src/components/bone-visibility.js","webpack:///./src/components/in-world-hud.js","webpack:///./src/components/virtual-gamepad-controls.js","webpack:///./src/components/ik-controller.js","webpack:///./src/components/character-controller.js","webpack:///./src/components/hoverable-visuals.js","webpack:///./src/components/hover-visuals.js","webpack:///./src/components/haptic-feedback.js","webpack:///./src/components/offset-relative-to.js","webpack:///./src/components/player-info.js","webpack:///./src/components/hand-poses.js","webpack:///./src/components/gltf-bundle.js","webpack:///./src/components/hud-controller.js","webpack:///./src/components/freeze-controller.js","webpack:///./src/components/icon-button.js","webpack:///./src/components/text-button.js","webpack:///./src/components/block-button.js","webpack:///./src/components/visibility-while-frozen.js","webpack:///./src/components/stats-plus.js","webpack:///./src/components/networked-avatar.js","webpack:///./src/components/avatar-replay.js","webpack:///./src/components/media-views.js","webpack:///./src/assets/images/media-error.gif","webpack:///./src/components/pinch-to-move.js","webpack:///./src/components/pitch-yaw-rotator.js","webpack:///./src/components/auto-scale-cannon-physics-body.js","webpack:///./src/components/position-at-box-shape-border.js","webpack:///./src/components/pinnable.js","webpack:///./src/components/pin-networked-object-button.js","webpack:///./src/components/remove-networked-object-button.js","webpack:///./src/components/camera-focus-button.js","webpack:///./src/components/mirror-camera-button.js","webpack:///./src/components/unmute-video-button.js","webpack:///./src/components/destroy-at-extreme-distances.js","webpack:///./src/components/visible-to-owner.js","webpack:///./src/components/camera-tool.js","webpack:///./src/assets/camera_tool.glb","webpack:///./src/components/emit-state-change.js","webpack:///./src/components/action-to-event.js","webpack:///./src/components/emit-scene-event-on-remove.js","webpack:///./src/components/stop-event-propagation.js","webpack:///./src/components/animation.js","webpack:///./src/components/follow-in-lower-fov.js","webpack:///./src/components/matrix-auto-update.js","webpack:///./src/components/clone-media-button.js","webpack:///./src/components/open-media-button.js","webpack:///./src/react-components/ui-root.js","webpack:///./src/assets/images/logo.svg","webpack:///./src/assets/images/account.svg","webpack:///./src/assets/images/mic_denied.png","webpack:///./src/assets/images/mic_denied@2x.png","webpack:///./src/assets/images/mic_granted.png","webpack:///./src/assets/images/mic_granted@2x.png","webpack:///./src/assets/images/level_background.png","webpack:///./src/assets/images/level_background@2x.png","webpack:///./src/assets/images/level_fill.png","webpack:///./src/assets/images/level_fill@2x.png","webpack:///./src/assets/images/mic_level.png","webpack:///./src/assets/images/mic_level@2x.png","webpack:///./src/assets/images/speaker_level.png","webpack:///./src/assets/images/speaker_level@2x.png","webpack:///./src/assets/images/mic_small.png","webpack:///./src/assets/images/mic_small@2x.png","webpack:///./src/assets/images/dropdown_arrow.png","webpack:///./src/assets/images/dropdown_arrow@2x.png","webpack:///./src/assets/images/warning_icon.png","webpack:///./src/assets/images/warning_icon@2x.png","webpack:///./src/react-components/auto-exit-warning.js","webpack:///./src/react-components/entry-buttons.js","webpack:///./src/assets/images/mobile_screen_entry.svg","webpack:///./src/assets/images/desktop_screen_entry.svg","webpack:///./src/assets/images/gearvr_entry.svg","webpack:///./src/assets/images/daydream_entry.svg","webpack:///./src/assets/images/device_entry.svg","webpack:///./src/react-components/profile-entry-panel.js","webpack:///./src/react-components/create-object-dialog.js","webpack:///./src/assets/images/giphy_logo.png","webpack:///./src/react-components/help-dialog.js","webpack:///./src/react-components/invite-dialog.js","webpack:///./src/react-components/invite-team-dialog.js","webpack:///./src/react-components/link-dialog.js","webpack:///./src/assets/images/link_dialog_header.svg","webpack:///./src/react-components/safari-dialog.js","webpack:///./src/react-components/safari-mic-dialog.js","webpack:///./src/react-components/sign-in-dialog.js","webpack:///./src/react-components/webrtc-screenshare-unsupported-dialog.js","webpack:///./src/react-components/webvr-recommend-dialog.js","webpack:///./src/react-components/presence-log.js","webpack:///./src/react-components/photo-message.js","webpack:///./src/react-components/presence-list.js","webpack:///./src/assets/images/presence_phone.png","webpack:///./src/assets/images/presence_desktop.png","webpack:///./src/assets/images/presence_vr.png","webpack:///./src/utils/mask-email.js","webpack:///./src/react-components/2d-hud.js","webpack:///./src/react-components/chat-command-help.js","webpack:///./src/assets/sfx/tone.webm","webpack:///./src/assets/sfx/tone.mp3","webpack:///./src/assets/sfx/tone.ogg","webpack:///./src/assets/sfx/tone.wav","webpack:///./src/utils/auth-channel.js","webpack:///./src/utils/hub-channel.js","webpack:///./src/message-dispatch.js","webpack:///./src/scene-entry-manager.js","webpack:///./src/utils/pinned-entity-to-gltf.js","webpack:///./src/subscriptions.js","webpack:///./src/systems/personal-space-bubble.js","webpack:///./src/systems/exit-on-blur.js","webpack:///./src/systems/camera-tools.js","webpack:///./src/systems/userinput/userinput.js","webpack:///./src/systems/userinput/devices/mouse.js","webpack:///./src/systems/userinput/devices/keyboard.js","webpack:///./src/systems/userinput/devices/hud.js","webpack:///./src/systems/userinput/devices/xbox-controller.js","webpack:///./src/systems/userinput/devices/oculus-go-controller.js","webpack:///./src/systems/userinput/devices/gear-vr-controller.js","webpack:///./src/systems/userinput/devices/oculus-touch-controller.js","webpack:///./src/systems/userinput/devices/daydream-controller.js","webpack:///./src/systems/userinput/devices/vive-controller.js","webpack:///./src/systems/userinput/devices/windows-mixed-reality-controller.js","webpack:///./src/systems/userinput/devices/gyro.js","webpack:///./src/systems/userinput/devices/app-aware-mouse.js","webpack:///./src/systems/userinput/devices/app-aware-touchscreen.js","webpack:///./src/systems/userinput/devices/touchscreen/assignments.js","webpack:///./src/systems/userinput/bindings/keyboard-mouse-user.js","webpack:///./src/utils/dpad.js","webpack:///./src/systems/userinput/bindings/touchscreen-user.js","webpack:///./src/systems/userinput/bindings/keyboard-debugging.js","webpack:///./src/systems/userinput/bindings/oculus-touch-user.js","webpack:///./src/systems/userinput/bindings/vive-user.js","webpack:///./src/systems/userinput/bindings/windows-mixed-reality-user.js","webpack:///./src/systems/userinput/bindings/xbox-controller-user.js","webpack:///./src/systems/userinput/bindings/daydream-user.js","webpack:///./src/systems/userinput/bindings/oculus-go-user.js","webpack:///./src/systems/userinput/resolve-action-sets.js","webpack:///./src/systems/userinput/devices/gamepad.js","webpack:///./src/systems/userinput/bindings/generic-gamepad.js","webpack:///./src/systems/camera-mirror.js","webpack:///./src/systems/userinput/userinput-debug.js","webpack:///./src/systems/frame-scheduler.js","webpack:///./src/components/super-networked-interactable.js","webpack:///./src/components/networked-counter.js","webpack:///./src/components/set-yxz-order.js","webpack:///./src/components/set-sounds-invisible.js","webpack:///./src/components/cardboard-controls.js","webpack:///./src/components/cursor-controller.js","webpack:///./src/components/nav-mesh-helper.js","webpack:///./src/components/tools/pen.js","webpack:///./src/components/tools/networked-drawing.js","webpack:///./src/utils/sharedbuffergeometrymanager.js","webpack:///./src/utils/sharedbuffergeometry.js","webpack:///./src/components/tools/drawing-manager.js","webpack:///./src/network-schemas.js","webpack:///./src/utils/concurrent-load-detector.js","webpack:///./src/assets/stylesheets/hub.scss","webpack:///./src/components/virtual-gamepad-controls.css","webpack:///./src/assets/stylesheets/ui-root.scss","webpack:///./src/assets/stylesheets/entry.scss","webpack:///./src/assets/stylesheets/profile.scss","webpack:///./src/assets/stylesheets/create-object-dialog.scss","webpack:///./src/assets/stylesheets/invite-dialog.scss","webpack:///./src/assets/stylesheets/link-dialog.scss","webpack:///./src/assets/stylesheets/sign-in-dialog.scss","webpack:///./src/assets/stylesheets/presence-log.scss","webpack:///./src/assets/stylesheets/presence-list.scss","webpack:///./src/assets/stylesheets/2d-hud.scss","webpack:///./src/assets/stylesheets/chat-command-help.scss"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","3","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","paths","noop","actions","log","toggleScreenShare","snapRotateLeft","snapRotateRight","logDebugFrame","cameraDelta","characterAcceleration","boost","startGazeTeleport","stopGazeTeleport","spawnPen","ensureFrozen","thaw","muteMic","focusChat","cursor","pose","grab","drop","modDelta","startDrawing","stopDrawing","undoDrawing","penNextColor","penPrevColor","scalePenTip","scaleGrabbedGrabbable","takeSnapshot","rightHand","startTeleport","stopTeleport","thumb","index","middleRingPinky","leftHand","camera","exitMirror","device","mouse","coords","movementXY","buttonLeft","buttonRight","wheel","smartMouse","cursorPose","touchscreen","touchCameraDelta","gyroCameraDelta","pinch","delta","initialDistance","currentDistance","isTouchingGrabbable","gyro","averageDeltaX","averageDeltaY","hud","penButton","keyboard","toLowerCase","gamepad","gamepadIndex","button","buttonIndex","pressed","touched","axis","axisIndex","xbox","buttonName","axisName","oculusgo","trigger","touchpad","axisX","axisY","v","gearVRController","daydream","rightOculusTouch","leftOculusTouch","side","axes","wmrController","wmr","grip","menu","joystick","vive","left","right","k","_react","_propTypes","ReactAudioContext","React","createContext","hudHoverSound","WithHoverSound","sound","children","_react2","default","createElement","Consumer","context","cloneElement","onMouseEnter","e","playSound","props","propTypes","PropTypes","string","_wrapWithAudio","DialogContainer","Component","constructor","super","this","onContainerClicked","closable","currentTarget","target","onClose","onKeyDown","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","render","className","onClick","title","node","isRequired","func","bool","defaultProps","injectCustomShaderChunks","obj","vertexRegex","fragRegex","validMaterials","shaderUniforms","Map","traverse","material","includes","type","el","classList","contains","getAttribute","clone","onBeforeCompile","shader","test","vertexShader","uniforms","hubs_EnableSweepingEffect","hubs_SweepParams","hubs_InteractorOnePos","hubs_InteractorTwoPos","hubs_HighlightInteractorOne","hubs_HighlightInteractorTwo","hubs_Time","vlines","split","vindex","findIndex","line","unshift","join","flines","fragmentShader","findex","mediaHighlightFrag","set","uuid","needsUpdate","getPromotionTokenForFile","fileId","APP","store","state","uploadPromotionTokens","find","upload","_objectTypes","_phoenixUtils","_mediaHighlightFrag","nonCorsProxyDomains","mediaAPIEndpoint","getReticulumFetchUrl","commonKnownContentTypes","gltf","glb","png","jpg","jpeg","pdf","mp4","mp3","proxiedUrlFor","url","startsWith","parsedUrl","URL","domain","hostname","endsWith","base64Url","str","btoa","encodeURIComponent","replace","_","p1","String","fromCharCode","NODE_ENV","RETICULUM_SERVER","FARSPARK_SERVER","NON_CORS_PROXY_DOMAINS","ASSET_BUNDLE_SERVER","EXTRA_ENVIRONMENTS","CORS_PROXY_SERVER","encodedUrl","method","resolveUrlCache","resolveUrl","async","cacheKey","has","resolved","fetch","headers","Content-Type","body","JSON","stringify","media","then","json","getCustomGLTFParserURLResolver","gltfUrl","path","corsProxyPrefix","originalUrl","decodeURIComponent","substring","originalUrlParts","assetUrl","guessContentType","extension","pathname","pop","file","formData","FormData","append","interactableId","addMedia","src","template","contentOrigin","resolve","resize","scene","AFRAME","scenes","entity","document","id","setAttribute","needsToBeUploaded","File","fileIsOwned","appendChild","fireLoadingTimeout","setTimeout","emit","forEach","eventName","clearTimeout","object3D","scale","setScalar","matrixNeedsUpdate","delay","dur","from","x","y","z","to","easing","orientation","Promise","callback","reader","FileReader","onload","view","DataView","getUint16","byteLength","offset","marker","getUint32","little","tags","readAsArrayBuffer","getOrientation","response","srcUrl","raw","searchParams","meta","access_token","href","file_id","update","promotionToken","promotion_token","catch","console","error","MediaStream","NAF","clientId","detail","objectType","objectTypeForOriginAndContentType","contentType","connectToReticulum","debug","qs","URLSearchParams","location","search","socketProtocol","protocol","socketHost","socketPort","retHost","retPort","socketUrl","socketSettings","params","session_id","_v2","logger","kind","msg","socket","Socket","connect","getLandingPageForPhoto","photoUrl","_v","_phoenix","absolute","getLastWorldPosition","setFromMatrixPosition","matrixWorld","getLastWorldQuaternion","decompose","tempVector3","getLastWorldScale","tempQuaternion","THREE","Vector3","Quaternion","sets","global","inputFocused","cursorHoveringOnPen","cursorHoveringOnCamera","cursorHoveringOnInteractable","cursorHoveringOnUI","cursorHoveringOnNothing","cursorHoldingPen","cursorHoldingCamera","cursorHoldingInteractable","rightHandTeleporting","rightHandHoveringOnPen","rightHandHoveringOnCamera","rightHandHoveringOnInteractable","rightHandHoveringOnNothing","rightHandHoldingPen","rightHandHoldingCamera","rightHandHoldingInteractable","leftHandTeleporting","leftHandHoveringOnPen","leftHandHoveringOnCamera","leftHandHoveringOnInteractable","leftHandHoldingPen","leftHandHoldingCamera","leftHandHoldingInteractable","leftHandHoveringOnNothing","Raven","config","install","_ravenJs","_translationsData","navigatorLang","navigator","languages","language","userLanguage","lang","localeData","messages","en","prefix","objectTypeMimePrefixLookupMap","types","objectTypeForOrigin","ObjectTypes","UNKNOWN","ObjectContentOrigins","FILE","CLIPBOARD","SPAWNER","URL_IMAGE","URL_VIDEO","URL_MODEL","URL_PDF","URL_AUDIO","FILE_IMAGE","FILE_VIDEO","FILE_MODEL","FILE_PDF","FILE_AUDIO","CLIPBOARD_IMAGE","CLIPBOARD_VIDEO","CLIPBOARD_MODEL","CLIPBOARD_PDF","CLIPBOARD_AUDIO","SPAWNER_IMAGE","SPAWNER_VIDEO","SPAWNER_MODEL","SPAWNER_PDF","SPAWNER_AUDIO","CAMERA","urlType","fileType","clipboardType","spawnerType","image/","model/","application/x-zip-compressed","video/","audio/","application/pdf","avatars","model","Pose","position","direction","fromOriginAndDirection","origin","setFromUnitVectors","forward","fromCameraProjection","normalizedX","normalizedY","unproject","sub","normalize","copy","_pose","_dpad","zeroVec2","xforms","frame","dest","scalar","undefined","deadzone","deadzoneSize","Math","abs","split_vec2","compose_vec2","negate","copyIfFalse","copyIfTrue","zeroIfDefined","true","rising","prevState","risingWithFrameDelay","values","Array","prev","falling","vec2Zero","poseFromCameraProjection","querySelector","components","vec2dpad","deadzoneRadius","invertX","invertY","deadzoneRadiusSquared","inCenter","angleTo4Direction","atan2","always","constValue","wasd_to_vec2","w","a","vec2","add_vec2","first","second","max_vec2","normalize_vec2","sqrt","all","any","touch_axis_scroll","touching","addSetsToBindings","mapping","setName","binding","_jsonschema","_deepmerge","_eventTargetShim","_identity","LOCAL_STORE_KEY","STORE_STATE_CACHE_KEY","validator","Validator","SCHEMA","definitions","profile","additionalProperties","properties","displayName","pattern","avatarId","credentials","token","email","activity","hasFoundFreeze","hasChangedName","lastEnteredAt","settings","lastUsedMicDeviceId","items","$ref","EventTarget","init","generateDefaultProfile","generateRandomName","localStorage","getItem","setItem","parse","newState","finalState","_deepmerge2","valid","validate","Error","dispatchEvent","CustomEvent","_nextTick","_sketchfabZipWorker","_MobileStandardMaterial","_posx","_negx","_posy","_negy","_posz","_negz","_mediaUtils","GLTFCache","CachedEnvMapTexture","inflateComponent","componentName","componentData","multiple","isArray","cloneSkinnedMesh","source","cloneLookup","parallelTraverse","b","sourceNode","clonedNode","sourceMesh","isSkinnedMesh","sourceBones","skeleton","bones","clonedMesh","map","sourceBone","bindMatrix","GLTFModelPlus","registerComponent","componentKey","inflator","inflateEntities","templates","isRoot","modelToWorldScale","childEntities","child","hubsComponents","userData","gltfExtensions","HUBS_components","legacyComponents","entityComponents","nodeHasBehavior","add","rotation","order","setFromQuaternion","quaternion","RAD2DEG","matrixAutoUpdate","matrix","identity","setObject3D","animations","parent","prop","attachTemplate","root","templateRoot","targetEls","querySelectorAll","cloneNode","_ref","attributes","loadGLTF","preferredTechnique","onProgress","fileMap","reject","worker","SketchfabZipWorker","onmessage","success","fileMapOrError","postMessage","getFilesFromSketchfabZip","gltfLoader","GLTFLoader","customURLResolver","setLazy","parser","load","materials","extensions","MOZ_alt_materials","altMaterialIndex","urls","cubeMapPosX","cubeMapNegX","cubeMapPosY","cubeMapNegY","cubeMapPosZ","cubeMapNegZ","texture","CubeTextureLoader","format","RGBFormat","loadEnvMap","cameras","envMap","Object3D","DefaultMatrixAutoUpdate","MobileStandardMaterial","fromStandardMaterial","keys","revokeObjectURL","schema","useCache","inflate","quality","loadTemplates","applySrc","templateEl","importNode","firstElementChild","content","[object Object]","technique","charAt","assetEl","getElementById","lastSrc","inflatedEl","warn","removeInflatedEl","loadModel","initMixer","object3DToSet","_nextTick2","rewires","f","parentNode","removeChild","findAncestorWithComponent","selectRandom","names","floor","random","avatarIds","_avatars","arr","av","param","val","patchWebGLRenderingContext","userAgent","originalGetExtension","WebGLRenderingContext","getExtension","supportsFloatTextures","renderer","WebGLRenderer","Scene","Float32Array","size","dataTexture","DataTexture","RGBAFormat","FloatType","box","Mesh","PlaneBufferGeometry","MeshBasicMaterial","Camera","getError","dispose","checkFloatTextureSupport","mixer","AnimationMixer","tick","dt","volume","prevVolume","smoothing","threshold","event","ctx","AudioContext","getContext","analyser","createAnalyser","fftSize","levels","Uint8Array","frequencyBinCount","soundSource","getByteTimeDomainData","sum","amplitude","currVolume","minScale","maxScale","visible","audioAnalyser","min","VERTEX_SHADER","FRAGMENT_SHADER","ShaderMaterial","args","_temp","isMobileStandardMaterial","parameters","uvTransform","Matrix3","diffuse","color","opacity","aoMapIntensity","aoMap","emissive","emissiveMap","fog","lights","transparent","skinning","morphTargets","mobileMaterial","Layers","reflection","inWorldHud","exclusive","oldData","layers","mask","layer","entries","oldValue","newValue","enable","disable","remove","_sceneGraph","clip","mixerEl","updateClip","clipName","action","clipAction","enabled","setLoop","LoopRepeat","Infinity","play","currentAction","destroy","stop","detectInHMD","getAvailableVREntryTypes","ua","isSamsungBrowser","browser","isWebVRCapableBrowser","hasNativeWebVRImplementation","isDaydreamCapableBrowser","isIDevice","utils","isIOS","isFirefoxBrowser","isUIWebView","mediaDevices","safari","VR_DEVICE_AVAILABILITY","maybe","yes","no","displays","getVRDisplays","isOculusBrowser","isInHMD","screen","isNonWebVRFirefox","generic","isMobile","cardboard","gearvr","isMaybeGearVRCompatibleDevice","isMaybeDaydreamCompatibleDevice","capabilities","canPresent","GENERIC_ENTRY_TYPE_DEVICE_BLACKLIST","hasDaydreamWebVRDevice","detect","isFirefoxReality","disableiOSZoom","_detectBrowser","detectOS","lastTouchAtMs","ev","preventDefault","now","Date","getTime","isDoubleTouch","mediaInflator","networked","controls","owner","persistent","networkId","mediaOptions","projection","videoPaused","autoPlay","loop","audioType","distanceModel","rolloffFactor","refDistance","maxDistance","coneInnerAngle","coneOuterAngle","coneOuterGain","euler","Euler","setFromEuler","shape","halfExtents","_componentName","nav","systems","zone","found","isMesh","loadMesh","pageIndex","paused","time","_store","App","Store","setQuality","addAnimationComponents","modelEl","getBox","boxRoot","Box3","updateMatrices","setFromObject","isEmpty","worldToLocal","max","getScaleCoefficient","dX","dY","dZ","lengthOfLongestComponent","_paths","POSES","LEFT_CONTROLLER_OFFSETS","Matrix4","oculus-touch-controls","makeTranslation","oculus-go-controls","vive-controls","compose","DEG2RAD","windows-motion-controls","daydream-controls","gearvr-controls","RIGHT_CONTROLLER_OFFSETS","getLeftControllerOffset","connectedController","getRightControllerOffset","onControllerConnected","onControllerDisconnected","prevData","hand","controlConfiguration","orientationOffset","poseForFingers","userinput","subpath","hasPose","previous","current","createInWorldLogMessage","lowResolution","blob","renderChatMessage","meshEntity","blobUrl","createObjectURL","isRawProperty","textureLoader","generateMipmaps","geometry","PlaneGeometry","mesh","meshMaterial","scaleFactor","object3DMap","image","width","height","spawnChatMessage","ChatMessage","_reactDom","_presenceLog","_classnames","_reactLinkify","_reactEmojiRender","_serializeElement","messageCanvas","emojiRegex","urlRegex","TextureLoader","messageBodyDom","multiLine","wrapStyle","styles","messageWrapMulti","messageWrap","mono","messageBodyClasses","messageBody","messageBodyMulti","messageBodyMono","words","outWords","word","wordWrap","cleanedBody","trim","messageSource","_classnames2","_reactLinkify2","rel","toArray","allowEmojiRender","isOneLine","emoji","isEmoji","match","presenceLog","presenceLogSpawn","entryDom","presenceLogEntry","presenceLogEntryOneLine","presenceLogEmoji","ReactDOM","objectScale","offsetWidth","offsetHeight","xhtml","_serializeElement2","img","Image","drawImage","toBlob","maySpawn","iconButton","spawnMessage","_debug","_qs_truthy","isDebug","_qs_truthy2","logFilter","zeroPos","zeroQuat","oneScale","bindingSetters","PropertyBinding","SetterByBindingTypeAndVersioning","Versioning","setter","MatrixWorldNeedsUpdate","arguments","targetObject","getWorldPosition","getWorldQuaternion","getWorldScale","handleMatrixModification","matrixIsModified","cachedMatrixWorld","updateMatrix","applyMatrix","forceLocalUpdate","forceWorldUpdate","skipParents","hasHadFirstMatrixUpdate","equals","matrixWorldNeedsUpdate","childrenNeedMatrixWorldUpdate","multiplyMatrices","updateMatrixWorld","includeInvisible","forceChildrenWorldUpdate","intensity","light","AmbientLight","sceneEl","registerLight","removeObject3D","_resizeShadowCameraFrustum","castShadow","shadowMapResolution","DirectionalLight","prevWidth","prevHeight","shadow","mapSize","_resizeShadowCameraFrustum2","frustumBox","makeEmpty","boundingBox","computeBoundingBox","tempBox","applyMatrix4","union","verts","inverseLightMatrixWorld","getInverse","expandByPoint","FRUSTUM_PADDING","bottom","top","near","NEAR_CLIPPING_PLANE","far","FAR_CLIPPING_PLANE","updateProjectionMatrix","initialForce","maxForce","physicsSystem","physics","hasBody","CANNON","Vec3","force","initialScale","addComponent","pause","removeComponent","beforeStep","isMine","currentScale","ratio","angle","PI","cos","sin","applyForce","generateAndAddHeightfield","mass","distance","setFromAxisAngle","mult","cannonOffset","Heightfield","elementSize","addShape","skyColor","groundColor","HemisphereLight","onQualityChanged","updateComponentState","_autoBoxCollider","_animation","_LoadingObject_Atom","loadingObject","loadingObjectSrc","onError","showLoader","clearLoadingTimeout","onMediaLoaded","shapeAdded","hasBakedShapes","setShapeAndScale","getObject3D","scaleCoefficient","multiplyScalar","shapes","removeAttribute","center","addVectors","loaderMixer","showLoaderTimeout","useFancyLoader","BoxGeometry","loadingClip","setupHoverableVisuals","hoverableVisuals","getBoundingSphere","boundingSphere","canonicalUrl","accessibleUrl","expected_content_type","fetchContentType","once","assign","dirs","toolbar","imageSrc","onNext","onPrev","_ensureUI","maxIndex","parseInt","fetchMaxContentIndex","nextButton","prevButton","pageLabel","pageSrc","repositionToolbar","range","PointLight","decay","quackPercentage","specialQuackPercentage","_handleGrabStart","rand","lerp","start","end","duration","positionOnly","startPoint","startRotation","targetPoint","targetRotDelta","targetRotation","premultiply","startTime","backwards","ranOnePass","fromRot","toRot","newRot","slerp","Sky","SkyShader","UniformsUtils","BackSide","BoxBufferGeometry","luminance","turbidity","rayleigh","mieCoefficient","mieDirectionalG","sunPosition","inclination","azimuth","sky","theta","phi","_threeUtils","loadedEvent","onLoad","spawnPoints","spawnPointIndex","round","spawnPoint","innerConeAngle","outerConeAngle","SpotLight","penumbra","dependencies","autoLockOnLoad","autoLockOnRelease","autoLockSpeedLimit","_onGrab","_onRelease","_onBodyLoaded","hasSetupBodyLoaded","setLocked","locked","is","velocity","lengthSquared","collisionResponse","grabbable","maxGrabbers","stuckTo","_unstickObject","worldQuaternion","worldPosition","dir","applyQuaternion","bootImpulsePosition","bootImpulse","_onCollisions","els","stickyObject","_setStuckObject","stuckObject","clearedEls","applyImpulse","_asyncUtils","nextGrabId","useCustomSpawnPosition","spawnPosition","useCustomSpawnRotation","spawnRotation","useCustomSpawnScale","spawnScale","grabEvents","releaseEvents","spawnCooldown","centerSpawnedObject","spawnEvent","superHand","cursorSuperHand","heldEntities","cooldownTimeout","onGrabStart","onGrabEnd","onSpawnEvent","cursorController","enableSweepingEffect","clear","leftPose","rightPose","controllerCount","using6DOF","activateCooldown","waitForEvent","targetEntity","thisGrabId","delete","eventObj","_layers","MobileWater","options","normalSampler","waterNormals","sunDirection","sunColor","Color","waterColor","eye","distortionScale","FrontSide","mirrorShader","merge","UniformsLib","ShaderChunk","Water","speed","forceMobile","normalMap","waterMesh","waterGeometry","Texture","wrapS","wrapT","RepeatWrapping","waterConfig","textureWidth","textureHeight","water","mirrorCamera","setStyle","origDispatch","firstObject","info","gammaFactor","isScene","needsShaderUpdate","on","off","attrName","stopSound","_crypto","LINK_ACTION_TIMEOUT","setSocket","generateCode","onFinished","finished","step","getLetter","code","readyToSend","leftChannel","channel","timeout","leave","cancel","incoming","_extends","generatePublicKeyAndEncryptedObject","public_key","publicKeyString","encryptedData","payload","target_session_id","reply_to_session_id","receive","attemptLink","generateKeys","privateKey","numOccupants","decryptObject","deriveKey","publicKey","crypto","subtle","public","publicKeyToString","exportKey","stringToPublicKey","importKey","namedCurve","stringToArrayBuffer","buf","charCodeAt","arrayBufferToString","keyPair","generateKey","incomingPublicKeyString","iv","incomingPublicKey","secret","encrypt","base64value","ciphertext","atob","decrypt","Pathfinding","registerSystem","pathfinder","Geometry","fromBufferGeometry","setZoneData","createZone","eventSource","events","eventListeners","_handleEvent","_handControls","additionalOffset","controller","isLeft","_handleControllerConnected","offsets","hasOffset","conjugate","AppModes","freeze","DEFAULT","HUD","setMode","newMode","invert","AppModeSystem","isModeActive","modes","actionSets","idx","indexOf","inputActions","currentInputMapping","inVRMode","class","share","opts","tweetLink","open","warmSerializeElement","defaultStylesByTagName","nodeType","Node","ELEMENT_NODE","TypeError","cssTexts","elements","noStyleTags","tagName","computedStyle","getComputedStyle","defaultStyle","getDefaultStyleByTagName","style","cssText","ii","cssPropName","outerHTML","BASE","HEAD","HTML","META","NOFRAME","NOSCRIPT","PARAM","SCRIPT","STYLE","TITLE","tagNames","computeDefaultStyleByTagName","element","toUpperCase","_webgl","_uiRoot","_authChannel","_hubChannel","_linkChannel","_disableIosZoom","_messageDispatch","_sceneEntryManager","_subscriptions","_chatMessage","_App","_networkSchemas","_telemetry","_vrCapsDetect","_concurrentLoadDetector","BUILD_VERSION","RENDER_ORDER","HUD_BACKGROUND","HUD_ICONS","CURSOR","isBotMode","isTelemetryDisabled","_telemetry2","concurrentLoadDetector","ConcurrentLoadDetector","uiProps","remountUI","disableAutoExitOnConcurrentLoad","forcedVREntryType","_uiRoot2","mountUI","detectedOS","getUserMedia","audio","showSafariMicDialog","hubId","subscriptions","Subscriptions","serviceWorker","register","ready","registration","setRegistration","setRegistrationFailed","authChannel","AuthChannel","hubChannel","HubChannel","entryManager","SceneEntryManager","onRequestAuthentication","signInMessageId","signInCompleteMessageId","signInContinueTextId","onContinueAfterSignIn","showSignInDialog","linkChannel","LinkChannel","exitVR","_networkSchemas2","enterScene","exitScene","initialIsSubscribed","isSubscribed","focus","availabilityUrl","isSupportAvailable","updateIfChanged","ok","setInterval","pollForSupportAvailability","platformUnsupportedReason","RTCDataChannelEvent","buildNumber","roomUnavailableReason","reload","availableVREntryTypes","vrDisplay","getVRDisplay","environmentScene","environmentSceneLoaded","previewCamera","getObjectByName","reorder","cameraPos","setupLobbyCamera","setAnimationLoop","connection","isConnected","enterSceneWhenLoaded","runBotMode","sessionId","mobile","hmd","retPhxChannel","hub_id","setVapidPublicKey","vapid_public_key","res","pushSubscriptionEndpoint","getCurrentEndpoint","joinPayload","push_subscription_endpoint","hubPhxChannel","presenceLogEntries","addToPresenceLog","entry","toString","expired","messageDispatch","MessageDispatch","setPhoenixChannel","signIn","setHubChannel","setSubscribed","web_push","entities","completeSync","hub","hubs","defaultSpaceTopic","topics","glbAsset","assets","asset_type","bundleAsset","sceneUrl","hasExtension","host","objectsScene","objectsUrl","objectsEl","gltfEl","hubName","hubEntryCode","entry_code","onSendMessage","dispatch","align","room","serverURL","newHostPollInterval","adapter","setReconnectionListeners","currentServerURL","serverUrl","newHubHost","getHost","newServerURL","clearInterval","reliableTransport","dataType","connectError","isFull","handleHubChannelJoined","reason","hubPhxPresence","Presence","isInitialSync","vrHudPresenceCount","onSync","presences","occupantCount","onJoin","metas","isSelf","currentMeta","presence","oldName","newName","onLeave","onData","userInfo","incomingMessage","showLog","innerHTML","debugLog","stopPropagation","debugLogInput","debugLogEval","onsubmit","eval","minimized","debugLogMinimize","onclick","scrollTop","scrollHeight","clientHeight","origConsoleLog","origConsoleError","origConsoleWarn","objs","childNodes","firstChild","firstObj","message","stack","toISOString","textContent","shouldScroll","onunhandledrejection","onerror","teleportControls","_updateMatrixNeedsUpdate","lastHitEntity","hitEntity","cameraRig","resume","PositionalAudio","setInitial","_lastPosition","_lastOrientation","_lastListenerPosition","panner","listener","Number","EPSILON","positionX","positionY","positionZ","setPosition","setOrientation","analog2dOutputAction","output","vectors","onWasd","move","onBlur","eventNames","keyEvent","down","targetMagnitude","bindAllEvents","unbindAllEvents","eventSrc","toggleEvents","muteEvents","unmuteEvents","onToggle","onMute","onUnmute","enableMicrophone","removeState","addState","unmutedBoneName","mutedBoneName","onPos","offPos","onStateToggled","unmutedBone","mutedBone","modelLoaded","updateMuteState","muted","lastVisible","haptic","raycaster","mic","pen","cameraBtn","background","renderOrder","renderORder","updateButtonStates","onStateChange","evt","onMicClick","onFreezeClick","onPenClick","onCameraClick","_nipplejs","_virtualGamepadControls","onEnterVr","onExitVr","onFirstInteraction","onMoveJoystickChanged","onMoveJoystickEnd","onLookJoystickChanged","onLookJoystickEnd","mockJoystickContainer","leftMock","mockJoystick","leftMockSmall","inner","rightMock","rightMockSmall","leftTouchZone","touchZone","leftStick","nipplejs","fadeTime","rightTouchZone","rightStick","inVr","moving","rotating","moveEvent","rotateYEvent","rotateXEvent","radian","display","leftController","rightController","leftEye","rightEye","head","neck","chest","hips","rotationSpeed","flipY","makeRotationY","cameraForward","headTransform","hipsPosition","invHipsToHeadVector","middleEyeMatrix","middleEyePosition","invMiddleEyeToHead","cameraYRotation","cameraYQuaternion","invHipsQuaternion","headQuaternion","rootToChest","invRootToChest","ikRoot","findIKRoot","hands","makeRotationFromEuler","divideScalar","setFromRotationMatrix","inverse","updateHand","handState","handObject3D","handMatrix","controllerObject3D","spaceInvader","handHiddenByPersonalSpace","invading","handControls","multiply","PI_2","groundAcc","pivot","snapRotationDegrees","fly","navZone","navGroup","navNode","accelerationInput","pendingSnapRotationMatrix","angularVelocity","_withinWarningLimit","_warningCount","setAccelerationInput","setAngularVelocity","handleTeleport","leftRotationMatrix","rightRotationMatrix","reset","newPosition","navPosition","hitPoint","resetPositionOnNavMesh","trans","transInv","pivotPos","rotationAxis","yawMatrix","rotationMatrix","rotationInvMatrix","pivotRotationMatrix","pivotRotationInvMatrix","startPos","startScale","deltaSeconds","rotationDelta","acc","makeRotationAxis","updateVelocity","lengthSq","setPositionOnNavMesh","_warnWithWarningLimit","_setNavNode","pos","getClosestNode","zones","getGroup","clampStep","dvx","dvz","pitch","interactorOneTransform","interactorTwoTransform","Sphere","sweepParams","hoverers","interactorOne","interactorTwo","hoverer","worldY","scaledRadius","radius","uniform","hovering","strengthForIntensity","low","medium","high","hapticEventName","handlePulse","getActuator","actuator","tryGetActivator","trackedControls","hapticActuators","pulse","selfDestruct","updateOffset","QUARTER_CIRCLE","offsetVector","localToWorld","rotateOnAxis","avatarSrc","applyProperties","nametagEl","thumbDown","indexDown","mrpDown","thumbUp","point","fist","NETWORK_POSES","animatePose","suffix","getNetworkedAvatar","networkedAvatar","parentEl","curr","fadeOut","fadeIn","setHandPose","_addGltfEntitiesForBundleJson","baseURL","LoaderUtils","extractUrlBase","bundleJson","loaded","asset","_appMode","TWOPI","lookCutoff","animRange","yawCutoff","showTip","isYLocked","lockedHeadPositionY","lookDir","lookEuler","yawDif","deltaAngle","clamp","hudLocked","hudOutOfView","toggleEvent","toggleFreezeDueToInput","toggleFreeze","frozen","hoverImage","activeImage","activeHoverImage","active","tooltip","tooltipText","activeTooltipText","onHover","updateButtonState","emitHapticPulse","onHoverOut","textHoverColor","textColor","backgroundHoverColor","backgroundColor","textEl","raycast","block","getNetworkedEntity","networkedEl","unblock","withinDistance","updateVisibility","camWorldPos","objWorldPos","cam","isFrozen","isVisible","isWithinDistance","distanceToSquared","shouldBeVisible","toggle","onExpand","onCollapse","stats","threeStats","aframeStats","plugins","rStats","css","fps","caption","below","groups","createStats","statsEl","statsHeaderEl","statsTitleEl","collapseEl","insertBefore","fpsEl","lastFpsUpdate","performance","lastFps","frameCount","hide","show","left_hand_pose","right_hand_pose","controlsBlacklist","recordingUrl","fetchRecording","resp","_setupController","dataLoaded","recording","cameraReplayer","startReplaying","leftControllerReplayer","rightControllerReplayer","controlsComponent","_gifparsingWorker","_mediaError","GIFTexture","frames","delays","disposals","_ctx","isVideoTexture","minFilter","NearestFilter","frameStartTime","clearRect","createVideoTexture","videoEl","autoplay","preload","crossOrigin","streamClientId","stream","getMediaStream","srcObject","getVideoTracks","createVideoEl","VideoTexture","LinearFilter","encoding","sRGBEncoding","isHLS","needsCorrectionBGRA","needsCorrectionFlipY","fitToTexture","videoHeight","videoWidth","disposeTexture","HTMLVideoElement","video","setCrossOrigin","textureCache","cache","count","retain","cacheItem","release","errorImage","errorImageSrc","errorTexture","magFilter","tickRate","syncTolerance","onPauseStateChange","tryUpdateVideoPlaybackState","_grabStart","_grabEnd","lastUpdate","updatePlaybackState","getNetworkOwner","takeOwnership","audioListener","AudioListener","cameraEl","grabStartPosition","togglePlayingIfOwner","currentTime","_playbackStateChangeTimeout","audioSource","createMediaElementSource","setDistanceModel","setRolloffFactor","setRefDistance","setMaxDistance","Audio","gain","setNodeSource","SphereBufferGeometry","DoubleSide","GIFWorker","loadCnt","arrayBuffer","rawImageData","createGIFTexture","xhr","status","statusText","pinchDelta","degToRad","radToDeg","minPitch","maxPitch","yaw","onRotateX","pendingXRotation","look","deltaPitch","deltaYaw","lookX","lookY","equalityEpsilon","debounceDelay","prevScale","nextUpdateTime","epsilon","u","updateCannonScale","HALF_PI","THREE_HALF_PI","back","halfExtent","inverseHalfExtents","_updateBox","schedule","unschedule","targetEl","opening","wasVisible","scaleChanged","previousScaleX","previousScaleY","previousScaleZ","isAnimating","targetPosition","pointOnBoxFace","tempParentWorldScale","animate","minSquareDistance","targetDir","targetHalfExtentStr","targetHalfExtent","halfExtentStr","squareDistance","setFromMatrixScale","targetScale","finalScale","pinned","_applyState","_fireEvents","_allowApplyOnceComponentsReady","_allowApply","stretchable","prevMaxGrabbers","labelSelector","hideWhenPinnedSelector","_updateUI","_updateUIOnStateChange","labelEl","wasPinned","pinnable","canPin","isPinned","hideEl","track","cameraSystem","myCamera","getMyCamera","_isMirrored","unmirror","mirror","getMirroredCameraEl","isMirrored","mediaVideo","xMin","xMax","yMin","yMax","zMin","zMax","_checkForDestroy","newOwner","_camera_tool","cameraModelPromise","cameraModelSrc","pathsMap","player-right-controller","player-left-controller","snapCanvas","previewFPS","imageWidth","imageHeight","stateAdded","renderTarget","WebGLRenderTarget","depth","stencil","PerspectiveCamera","updateRenderTargetNextTick","aspect","selfieScreen","deregister","unmirrorCameraAtEl","takeSnapshotNextTick","trackTarget","lookAt","targetPos","mirrorCameraAtEl","grabber","grabbers","tock","tempHeadScale","playerHead","headEl","playerHud","hudEl","tmpVRFlag","vr","tmpOnAfterRender","onAfterRender","snapPixels","readRenderTargetPixels","pixels","imageData","createImageData","bitmap","createImageBitmap","pixelsToPNG","transform","oneof","stateadded","stateremoved","handler","anime","colorHelperFrom","colorHelperTo","getComponentProperty","setComponentProperty","splitCache","TYPE_COLOR","STRING_COMPONENTS","STRING_OBJECT3D","toRadians","addEventListeners","removeEventListeners","splitDot","getRawProperty","setRawProperty","targetValue","propertyName","g","elasticity","startEvents","pauseEvents","resumeEvents","self","eventDetail","animation","animationIsPlaying","onStartEvent","beginAnimation","pauseAnimation","resumeAnimation","fromColor","toColor","targets","targetsArray","updateConfigForDefault","updateConfigForRawColor","complete","createAndStartAnimation","pausedWasPlaying","updateConfig","stopRelatedAnimations","waitComponentInitRawProperty","setColorConfig","lastValue","anim","animatables","isNumber","isNaN","parseFloat","isBoolean","aframeProperty","updateConfigForVector","coordinates","propType","component","getPropertyType","cb","wait","snappedRot","snappedQ","snappedXForm","snappedXFormWorld","tempVector","_applyMaskedTargetRotation","started","_updateMatrixAutoUpdate","hubsRegex","isHubsUrl","label","updateSrc","directNavigate","_copyToClipboard","_reactIntl","_en","_movingAverage","_screenfull","_entry","_i18n","_autoExitWarning","_entryButtons","_profileEntryPanel","_createObjectDialog","_helpDialog","_inviteDialog","_inviteTeamDialog","_linkDialog","_safariDialog","_safariMicDialog","_signInDialog","_webrtcScreenshareUnsupportedDialog","_webvrRecommendDialog","_presenceList","_dHud","_chatCommandHelp","_faUsers","_reactFontawesome","_faQuestion","_faChevronDown","_faChevronUp","_tone","_tone3","_tone5","_tone7","addLocaleData","ENTRY_STEPS","mic_grant","mic_granted","audio_setup","HMD_MIC_REGEXES","toneClip","canPlayType","webmTone","mp3Tone","oggTone","wavTone","UIRoot","_initialiseProps","dialog","_safariMicDialog2","componentDidUpdate","prevProps","signedIn","setState","showContextualSignInDialog","onConcurrentLoad","micLevelMovingAverage","_movingAverage2","onSceneLoaded","onAframeStateChanged","onShareVideoEnabled","onShareVideoDisabled","exit","audioContext","onMouseLeave","isExited","exited","isLoading","renderExitedPane","renderLoader","renderBotMode","startPanel","entryStep","renderEntryStartPanel","devicePanel","renderDevicePanel","micPanel","renderMicPanel","audioSetupPanel","renderAudioSetupPanel","dialogContents","entryPanelCollapsed","isWaitingForAutoExit","entryStyles","entryDialog","expand","FontAwesomeIcon","icon","faChevronUp","_autoExitWarning2","secondsRemaining","secondsRemainingBeforeAutoExit","onCancel","endAutoExitTimer","collapse","faChevronDown","dialogBoxContentsClassNames","uiInteractive","uiDialogBoxContents","backgrounded","showProfileEntry","entryFinished","showVREntryButton","textRows","pendingMessage","pendingMessageTextareaHeight","pendingMessageFieldHeight","Provider","IntlProvider","locale","ui","_profileEntryPanel2","onProfileFinished","uiDialog","_presenceLog2","inRoom","onSubmit","sendMessage","messageEntryInRoom","_chatCommandHelp2","matchingPrefix","messageEntryInput","messageEntryInputInRoom","rows","onFocus","select","onChange","keyCode","shiftKey","ctrlKey","blur","placeholder","messageEntrySubmit","messageEntrySubmitInRoom","messageEntrySpawn","showCreateObjectDialog","inviteContainer","inviteContainerBelowHud","inviteContainerInverted","showInviteDialog","videoShareMediaSource","hideSmallScreens","toggleInviteDialog","FormattedMessage","onMiniInviteClicked","inviteMiniButton","miniInviteActivated","enterVR","_inviteDialog2","allowShare","entryCode","showLinkDialog","_linkDialog2","linkCode","linkCodeCancel","showHelpDialog","helpIcon","faQuestion","showPresenceList","presenceInfo","presenceInfoSelected","faUsers","_presenceList2","onSignIn","onSignOut","signOut","_dHud2","TopHUD","spacebubble","onToggleMute","toggleMute","onToggleFreeze","onToggleSpaceBubble","toggleSpaceBubble","onSpawnPen","onSpawnCamera","onShareVideo","shareVideo","onEndShareVideo","endShareVideo","onShareVideoNotCapable","showWebRTCScreenshareUnsupportedDialog","nagCornerButton","showInviteTeamDialog","BottomHUD","onCreateObject","showPhotoPicker","onMediaPicked","createObject","number","array","enterInVR","shareScreen","requestedScreen","mediaStream","audioTrack","toneInterval","tonePlaying","micLevel","micDevices","micUpdateInterval","profileNamePending","autoExitTimerStartedAt","autoExitTimerInterval","closeAndContinue","closeDialog","showDialog","SignInDialog","authComplete","startAuthentication","authStarted","continueText","onContinue","updateSubscribedState","sceneLoaded","mediaSource","onSubscribeChanged","handleStartEntry","promptForNameAndAvatarBeforeEntry","enterDaydream","enter2D","goToEntryStep","playTestTone","testToneTimeout","stopTestTone","secondsSinceStart","checkForAutoExit","hasGrantedMicPermissions","enumerateDevices","filter","grantedMicLabels","performDirectEntryFlow","hasGrantedMic","setMediaStreamToDefault","beginOrSkipAudioSetup","showWebVRRecommendDialog","micDeviceChanged","constraints","deviceId","exact","fetchAudioTrack","setupNewMediaStream","hasAudio","ideal","getAudioTracks","fetchMicDevices","addTrack","webkitAudioContext","micLevelAudioContext","micSource","createMediaStreamSource","level","average","movingAverage","micDeviceId","micDeviceIdForMicLabel","micLabelForMediaStream","onMicGrantButton","sendProfileUpdate","onAudioReadyButton","shouldShowHmdMicWarning","hasHmdMicrophone","selectedMicLabel","selectedMicDeviceId","screenfull","request","close","DialogClass","HelpDialog","showSafariDialog","SafariDialog","InviteTeamDialog","CreateObjectDialog","onCreate","WebVRRecommendDialog","_webrtcScreenshareUnsupportedDialog2","link","_copyToClipboard2","subtitle","exitSubtitleId","_image","accept","_image2","hasPush","entryPanel","profileName","_image3","profileIcon","messageEntry","subscribe","checked","htmlFor","buttonContainer","actionButton","wideButton","TwoDEntryButton","SafariEntryButton","GenericEntryButton","DaydreamEntryButton","DeviceEntryButton","secondary","renderScreensharing","screenSharing","checkbox","setStateAndRequestScreen","_image4","srcSet","_image5","_image6","_image7","micClip","speakerClip","subtitleId","_image8","_image9","_image10","_image11","_image12","_image13","_image14","_image15","_image16","_image17","_image18","_image19","_image20","_image21","AutoExitWarning","_mobile_screen_entry","_desktop_screen_entry","_generic_vr_entry","_gearvr_entry","_daydream_entry","_device_entry","EntryButton","entryButton","iconSrc","contents","prefixMessageId","bolded","mediumMessageId","entryButtonProps","MobileScreenEntryImg","DesktopScreenEntryImg","GenericVREntryImg","GearVREntryButton","GearVREntryImg","DaydreamEntryImg","DeviceEntryImg","_profile","_hubPreviewWhite","ProfileEntryPanel","customMode","storeUpdated","nameInput","setAvatarStateFromIframeMessage","formatMessage","intl","profileEntry","saveStateAndFinish","form","darkened","formFieldText","required","spellCheck","ref","inp","avatarSelectorContainer","links","avatarSelector","ifr","formSubmit","logo","hubLogo","hasChangedNowOrPreviously","contentWindow","injectIntl","_giphy_logo","_faPaperclip","_faTimes","_dialogContainer","attributionHostnames","giphy.com","giphyLogo","media.giphy.com","DEFAULT_OBJECT_URL","instructions","references","mobileInstructions","desktopInstructions","lastUrl","fileInputId","fileName","onUrlChange","attributionImage","validity","onFileChange","files","fileInput","onCreateClicked","_props","other","_objectWithoutProperties","cancelButton","smallButton","cancelIcon","faTimes","uploadButton","uploadIcon","faPaperclip","filenameLabel","leftSideOfInput","urlInput","_dialogContainer2","addMediaForm","hideFileInput","inputBorder","buttons","textAlign","_share","InviteDialog","copyButtonActive","shareButtonActive","shareClicked","copyClicked","entryCodeString","num","pad","shortLinkText","shortLink","attachPoint","hubLinkLink","digit","readOnly","linkButton","inviteButtonText","inviteClicked","requestSupport","_link_dialog_header","LinkDialog","codeLoadingPanel","imageHeader","LinkDialogHeader","header","keepOpen","closeButton","copyLinkButtonText","copyLinkClicked","onCopyClicked","signInComplete","continueButton","signInForm","emailField","terms","flexDirection","alignItems","fontSize","_photoMessage","PresenceLog","domForEntry","entryClasses","presenceLogEntryWithButton","presenceLogChat","_chatMessage2","_photoMessage2","presenceClasses","presenceLogInRoom","PhotoMessage","landingPageUrl","onShareClicked","mediaBody","_presence_phone","_presence_desktop","_presence_vr","_maskEmail","PresenceList","domForPresence","PhoneImage","HMDImage","DesktopImage","row","selfDisplayName","presenceList","_maskEmail2","emailParts","emailIdentity","emailDomain","truncatedIdentity","showVideoShareOptions","lastActiveMediaSource","handleVideoShareClicked","buildVideoSharingButtons","videoShareExtraOptionTypes","primaryVideoShareType","showExtrasOnHover","hideVideoSharingButtonTimeout","videoShare","onMouseOver","videoShareNotify","videoShareExtraOptions","onMouseOut","videoSharingButtons","container","unselectable","uiStyles","panel","mute","spawn_pen","spawn_camera","column","up","mobileMediaPicker","large","ChatCommandHelp","commandHelp","command","MS_PER_DAY","MS_PER_MONTH","isSameMonth","da","db","getFullYear","getMonth","sendEntryEvent","entryDisplayType","isPresenting","initialOccupantCount","publisher","initialOccupants","entryTimingFlags","getEntryTimingFlags","entryEvent","isNewDaily","isNewMonthly","isNewDayWindow","isNewMonthWindow","storedLastEnteredAt","lastEntered","msSinceLastEntered","getDate","sendObjectSpawnedEvent","object_type","subscription","unsubscribe","_signedIn","err","pin","gltfNode","fileAccessToken","gltf_node","file_access_token","unpin","disconnect","DUCK_URL","dispatchCommand","activeElement","entered","click","playerRig","scales","curScale","_pinnedEntityToGltf","playerHeight","aframeInspectorUrl","requestFullscreen","isFullscreen","whenSceneLoaded","hasEntered","_entered","playerCamera","session","verbose","isCardboard","_setupPlayerRig","_setupBlocking","_setupMedia","_setupCamera","_spawnAvatar","_runBot","setLocalMediaStream","hasLoaded","localMediaStream","getTracks","_updatePlayerRigWithProfile","avatarScale","hudController","username","removeEntitiesOfClient","_pinElement","storedPromotionToken","_pinnedEntityToGltf2","spawnMediaInfrontOfPlayer","or","currentVideoShareEntity","wasInVR","continueTextId","mediaLoader","matches","clipboardData","getData","dataTransfer","isHandlingVideoShare","shareVideoMediaStream","newStream","videoTracks","frameRate","removeTrack","audioEl","audioInput","onchange","crossorigin","dataInput","captureStream","gltfComponents","equalArray","every","translation","mediaSrc","urlBase64ToUint8Array","base64String","padding","repeat","base64","rawData","outputArray","vapidPublicKey","_isSubscribed","pushManager","convertedVapidKey","permissionState","userVisibleOnly","applicationServerKey","getSubscription","endpoint","pushSubscription","has_remaining_subscriptions","invaderPos","bubblePos","createSphereGizmo","wireframe","WireframeGeometry","LineSegments","invaders","bubbles","registerBubble","bubble","unregisterBubble","registerInvader","invader","unregisterInvader","updateDebug","setInvading","distanceSquared","radiusSum","meshName","targetMesh","useMaterial","invadingOpacity","system","findInvaderMesh","radiusSquared","onTimeout","onEnterVR","enteredVR","lastTimeoutCheck","exitTimeout","cameraEls","_onOwnershipChange","_sets","_mouse","_keyboard","_hud","_xboxController","_oculusGoController","_gearVrController","_oculusTouchController","_daydreamController","_viveController","_windowsMixedRealityController","_gyro","_appAwareMouse","_appAwareTouchscreen","_keyboardMouseUser","_touchscreenUser","_keyboardDebugging","_oculusTouchUser","_viveUser","_windowsMixedRealityUser","_xboxControllerUser","_daydreamUser","_oculusGoUser","_resolveActionSets","_gamepad","_genericGamepad","oculusGoUserBindings","_oculusGoUser2","gearVRControllerUserBindings","satisfiesPath","satisfyPath","bindings","satisfiedBy","canMask","masker","masked","priority","maskerKey","maskerPath","maskedKey","maskedPath","isActive","toggleSet","pendingSetChanges","prevActiveSets","Set","activeSets","xformStates","activeDevices","HudDevice","AppAwareTouchscreenDevice","KeyboardDevice","GyroDevice","MouseDevice","AppAwareMouseDevice","registeredMappings","keyboardDebuggingBindings","registeredMappingsChanged","vrGamepadMappings","WindowsMixedRealityControllerDevice","wmrUserBindings","ViveControllerDevice","viveUserBindings","OculusTouchControllerDevice","oculusTouchUserBindings","OculusGoControllerDevice","GearVRControllerDevice","DaydreamControllerDevice","daydreamUserBindings","nonVRGamepadMappings","XboxControllerDevice","xboxControllerUserBindings","GamepadDevice","gamepadBindings","updateBindingsForVRMode","touchscreenUserBindings","keyboardMouseUserBindings","activeDevice","gamepadConnected","gamepadDevice","getGamepads","prevSortedBindings","sortedBindings","mappings","unsorted","sorted","dependencySort","masks","col","computeMasks","item","resolveActionSets","activeSetsChanged","setA","setB","_intersection","elem","intersection","actives","prevActives","prevMasked","computeExecutionStrategy","write","bindingExistedLastFrame","xform","prevFrame","modeMod","WheelEvent","DOM_DELTA_PIXEL","DOM_DELTA_LINE","DOM_DELTA_PAGE","queueEvent","canvas","process","deltaX","deltaY","deltaMode","clientX","innerWidth","clientY","innerHeight","movementX","movementY","oncontextmenu","buttonMap","buttonId","axisMap","axisId","connected","buttonPath","outpath","rayObjectRotation","rayObject","updateMatricies","rayMatrixWorld","selector","leftOculusTouchButtonMap","rightOculusTouchButtonMap","buttonMaps","devicePaths","CircularBuffer","fill","writePtr","difference","hmdEuler","hmdQuaternion","prevX","prevY","dXBuffer","dYBuffer","webvrpolyfill","getPolyfillDisplays","frameData","VRFrameData","getFrameData","fromArray","calculateCursorPose","prevButtonLeft","clickedOnAnything","prevCursorPose","prevOrigin","prevDirection","rawIntersections","intersectObjects","_assignments","MOVE_CURSOR_JOB","MOVE_CAMERA_JOB","FIRST_PINCHER_JOB","SECOND_PINCHER_JOB","x1","y1","x2","y2","dx","dy","Raycaster","assignments","touch","touchIsAssigned","assignment","findByTouch","job","unassign","jobIsAssigned","findByJob","cameraMover","isCursorGrabbing","setFromCamera","shouldMoveCursor","isFirstFrame","changedTouches","touches","identifier","_xforms","_utils","wasd_vec2","arrows_vec2","dropWithRMB","dropWithEsc","angleTo8Direction","zero","leftButton","leftAxis","rightButton","rightAxis","scaledLeftJoyX","scaledLeftJoyY","cursorDrop2","cursorDrop1","rightHandDrop2","rightGripRisingGrab","rightTriggerRisingGrab","leftGripRisingGrab","leftTriggerRisingGrab","rightDpadNorth","rightDpadSouth","rightDpadEast","rightDpadWest","rightDpadCenter","rightJoy","rightJoyY1","rightJoyY2","leftDpadNorth","leftDpadSouth","leftDpadEast","leftDpadWest","leftDpadCenter","leftJoy","leftJoyY","oculusTouchCharacterAcceleration","rightTouchSnapRight","rightTouchSnapLeft","keyboardSnapRight","keyboardSnapLeft","lowerButtons","ensureFrozenViaButtons","ensureFrozenViaKeyboard","thawViaButtons","thawViaKeyboard","leftGripPressed1","leftGripPressed2","rightGripPressed1","rightGripPressed2","leftTriggerPressed1","leftTriggerPressed2","rightTriggerPressed1","rightTriggerPressed2","north","south","east","west","override","lButton","lAxis","lPose","lJoy","lJoyScaled","lJoyXScaled","lJoyYScaled","lDpadNorth","lDpadSouth","lDpadEast","lDpadWest","lDpadCenter","lTriggerFallingStopDrawing","lGripFallingStopDrawing","lTriggerRisingGrab","lGripRisingGrab","lTouchpadRising2","lTouchpadRising1","lCharacterAcceleration","leftBoost","rButton","rAxis","rPose","rJoy","rDpadNorth","rDpadSouth","rDpadEast","rDpadWest","rDpadCenter","rDpadCenterStrip","rTouchpadRising","rTouchpadFalling","rightBoost","rTriggerRisingGrab","rGripRisingGrab","rHandDrop1","rHandDrop2","rTriggerStopTeleport","rTouchpadStopTeleport","ensureFrozenViaDpad","thawViaDpad","rSnapRight","rSnapLeft","keyboardCharacterAcceleration","keyboardBoost","leftTouchpadPressed1","leftTouchpadPressed2","leftTouchpadFallingStopTeleport","leftTriggerFallingStopTeleport","leftGripFallingWhileHoldingPen","lGripPressed","rGripPressed","rTriggerPressed","rJoyNorth","rGripRising","rTriggerRising","rGripFalling","rTriggerFalling","dpadVariables","padWest","padEast","padNorth","padSouth","padCenter","padCenterStrip","dpadBindings","neverFrozenBinding","penBindings","forCursor","padY","triggerPressed","padPressed","padTouched","padRising","padCenterStripTouched","handPoseBindings","gripPressed","holdingCameraBindings","leftPadPressed","rightPadPressed","leftPadFalling","rightPadFalling","keyboardSaceFalling","freezeBindings","rJoyWest","rJoyEast","rJoyWestRising","rJoyEastRising","keyboardQRising","keyboardERising","teleportationAndRotationBindings","lJoyXDeadzoned","lJoyYDeadzoned","characterAccelerationBindings","rPadNorthOrSouth","rPadNorthOrSouthPressed","rPadNorthOrSouthPressedY","cursorModDeltaBindings","cursorScalePenTip","touchpadRising","touchpadFalling","touchpadPressed","dpadNorth","dpadSouth","dpadEast","dpadWest","dpadCenter","brushSizeDelta","cursorModDelta","dpadSouthDrop","dpadCenterDrop","grabBinding","dropOnCenterOrSouth","triggerRising","triggerFalling","dpadCenterStrip","rightHandState","leftHandState","cursorHand","leftTeleporter","rightTeleporter","leftHandHovering","cursorGrabbing","rightHandHovering","rightHandGrabbing","nodeName","_onWindowResize","mirrorEl","directRenderFunc","_patchRenderFunc","oldEl","setSize","wasVREnabled","userinputFrameStatus","replacer","toFixed","pathsOutput","some","sb","logBindings","registry","queues","frameIndex","queue","hapticsMassVelocityFactor","counter","scrollScaleDelta","_syncCounterRegistration","_onGrabStart","_onGrabEnd","_onOwnershipLost","_changeScale","addScalar","clampScalar","stretchBody","ttl","grab_event","release_event","registeredEls","onGrabHandler","onReleaseHandler","grabEventListener","_onGrabbed","releaseEventListener","_onReleased","ts","_startTimer","_destroyOldest","oldestEl","minTs","MAX_VALUE","_destroy","positional","pool","isVR","_handleEnterVR","_handleExitVR","inVR","_getGamepad","gamepads","cursorColorHovered","cursorColorUnhovered","objects","setDirty","dirty","lineMaterial","LineBasicMaterial","lineGeometry","BufferGeometry","addAttribute","BufferAttribute","Line","observer","MutationObserver","observe","childList","subtree","populateEntities","emitIntersectionEvents","prevIntersection","currIntersection","rightHandPose","isGrabbing","ray","addScaledVector","pow","cursorColor","posePosition","cursorPosition","positionArray","computeBoundingSphere","queryCollisionEntities","drawFrequency","minDistanceBetweenPoints","drawingManager","availableColors","minRadius","maxRadius","timeSinceLastDraw","lastPosition","currentDrawing","normal","colorIndex","grabbed","createDrawing","_startDraw","_endDraw","_undoDraw","penScaleMod","_changeRadius","_changeColor","subVectors","getLastPoint","distanceTo","_getNormal","draw","directionToCamera","crossVectors","getDrawing","startDraw","endDraw","returnDrawing","drawing","undoDraw","mod","_sharedbuffergeometrymanager","copyData","fromIndex","toIndex","segments","defaultRadius","maxDrawTimeout","maxLines","maxPointsPerLine","_receiveData","networkBuffer","sendNetworkBufferQueue","drawStarted","lineStarted","remoteLineStarted","receivedBufferParts","bufferIndex","connectedToOwner","networkBufferInitialized","vertexColors","VertexColors","MeshStandardMaterial","sharedBufferGeometryManager","SharedBufferGeometryManager","maxBufferSize","addSharedBuffer","TriangleStripDrawMode","lastPoint","lastSegments","currentSegments","sharedBuffer","getSharedBuffer","prevIdx","vertexCount","networkBufferCount","currentPointCount","networkBufferHistory","onConnect","getNetworkId","drawingId","subscribeToDataChannel","unsubscribeToDataChannel","hasActiveDataChannel","sendDataGuaranteed","_broadcastDrawing","_drawFromNetwork","_sendNetworkBuffer","_deleteExpiredLines","copyArray","broadcastDataGuaranteed","buffer","didWork","setHex","_draw","_updateBuffer","drawTime","datum","idxLength","uv","parts","ceil","_addToNetworkBuffer","getHexString","capNormal","radiusMultiplier","_generateSegments","_drawCylinder","_drawEndCap","_endLine","_addDegenerateTriangle","_restartPrimitive","_drawCap","_pushToNetworkBuffer","_drawPoint","projectedDirection","projectedPoint","clock","elapsedTime","copyDirection","copyNormal","setLength","getHex","_addVertex","segmentIndex","restartPrimitive","segment","addVertex","addColor","addNormal","segmentsList","angleIncrement","_rotatePointAroundAxis","calculatedDirection","out","applyAxisAngle","_sharedbuffergeometry","sharedBuffers","primitiveMode","SharedBufferGeometry","geometries","addBuffer","componentSize","diff","undo","vertices","normals","colors","drawMode","frustumCulled","setDrawRange","setDynamic","setXYZ","_onComponentInitialized","drawingToPen","drawingEl","vectorRequiresUpdate","almostEqualVec3","schemas","requiresNetworkUpdate","instanceKey","startedAt","localStorageKey","started_at","interval","_step","currentState","maxStartedAt","ui-dialog","ui-interactive","invite-container","presence-info","profile-entry","form-submit","message-entry-submit","message-entry-in-room","message-entry-spawn","entry-button","entry-panel","button-container","action-button","help-icon","entry-dialog","nag-corner-button","message-entry-input","form-field-text","profile-name","wide-button","invite-container-inverted","screen-sharing","ui-dialog-box-contents","hide-small-screens","invite-mini-button","invite-container-below-hud","occupant-count","presence-info-selected","message-entry","message-entry-input-in-room","message-entry-submit-in-room","avatar-selector-container","avatar-selector","display-name","lobby","profile-icon","webvr-link-container","webvrLinkContainer","webvr-link","webvrLink","small-button","input-border","left-side-of-input","add-media-form","cancel-icon","upload-icon","hide-file-input","link-button","attach-point","keep-open","digit_2","digit2","digit_3","digit3","code-loading-panel","hub-link-link","close-button","email-field","next-button","continue-button","sign-in-form","sign-in-complete","presence-log","presence-log-entry","message-body","message-body-multi","message-body-mono","message-wrap","message-wrap-multi","message-source","icon-button","spawn-message","presence-log-entry-with-button","presence-log-in-room","presence-log-spawn","presence-log-entry-one-line","presence-log-emoji","presence-list","self-display-name","sign-in","video-share-notify","video-share-extra-options","small","video-share","spawnCamera","create-object","mobile-media-picker","share_camera","shareCamera","share_screen","share_window","shareWindow","command-help"],"mappings":"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,EAAI,EAAGA,EAAIi+C,EAAS/9C,OAAQF,IACnCi+C,EAASj+C,GAAGw+C,MAAMC,QAAUT,EAASh+C,GAEvC,OAAOe,GAlMT,MAAM48C,KAGAO,GACJW,MAAM,EACNC,MAAM,EACNC,MAAM,EACNC,MAAM,EACNC,SAAS,EACTC,UAAU,EACVC,OAAO,EACPC,QAAQ,EACRC,OAAO,EACPC,OAAO,GAKHC,GACJ,IACA,OACA,UACA,OACA,UACA,QACA,QACA,IACA,OACA,MACA,MACA,aACA,OACA,KACA,SACA,SACA,UACA,SACA,OACA,OACA,MACA,WACA,UACA,WACA,KACA,MACA,UACA,MACA,MACA,KACA,KACA,KACA,QACA,WACA,aACA,SACA,OACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,SACA,KACA,OACA,IACA,SACA,MACA,QACA,MACA,MACA,SACA,QACA,SACA,KACA,OACA,MACA,OACA,OACA,OACA,OACA,QACA,MACA,OACA,WACA,SACA,KACA,SACA,WACA,SACA,IACA,QACA,MACA,WACA,IACA,KACA,KACA,OACA,IACA,OACA,SACA,UACA,SACA,QACA,SACA,OACA,SACA,QACA,MACA,UACA,MACA,MACA,QACA,QACA,KACA,WACA,QACA,KACA,QACA,OACA,QACA,KACA,QACA,IACA,KACA,MACA,QACA,OAGF,SAASC,EAA6BrB,GACpC,MAAMG,KACAmB,EAAU5qC,SAASlC,KAAKwC,YAAYN,SAAS1K,cAAcg0C,IAC3DC,EAAgBC,iBAAiBoB,GACvC,IAAK,IAAIz/C,EAAI,EAAGA,EAAIo+C,EAAcl+C,OAAQF,IACxCs+C,EAAaF,EAAcp+C,IAAMo+C,EAAcA,EAAcp+C,IAG/D,OADA6U,SAASlC,KAAK0d,YAAYovB,GACnBnB,EAGT,SAASC,EAAyBJ,GAKhC,OAJAA,EAAUA,EAAQuB,cACb/B,EAAuBQ,KAC1BR,EAAuBQ,GAAWqB,EAA6BrB,IAE1DR,EAAuBQ,GAGzB,SAAST,IACd,IAAK,IAAI19C,EAAI,EAAGA,EAAIu/C,EAASr/C,OAAQF,I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","file":"assets/js/hub-661ca7306a17b4544f88.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t3: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([240,1,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export const paths = {};\npaths.noop = \"/noop\";\npaths.actions = {};\npaths.actions.log = \"/actions/log\";\npaths.actions.toggleScreenShare = \"/actions/toggleScreenShare\";\npaths.actions.snapRotateLeft = \"/actions/snapRotateLeft\";\npaths.actions.snapRotateRight = \"/actions/snapRotateRight\";\npaths.actions.logDebugFrame = \"/actions/logDebugFrame\";\npaths.actions.cameraDelta = \"/actions/cameraDelta\";\npaths.actions.characterAcceleration = \"/actions/characterAcceleration\";\npaths.actions.boost = \"/actions/boost\";\npaths.actions.startGazeTeleport = \"/actions/startTeleport\";\npaths.actions.stopGazeTeleport = \"/actions/stopTeleport\";\npaths.actions.spawnPen = \"/actions/spawnPen\";\npaths.actions.ensureFrozen = \"/actions/ensureFrozen\";\npaths.actions.thaw = \"/actions/thaw\";\npaths.actions.muteMic = \"/actions/muteMic\";\npaths.actions.focusChat = \"/actions/focusChat\";\npaths.actions.cursor = {};\npaths.actions.cursor.pose = \"/actions/cursorPose\";\npaths.actions.cursor.grab = \"/actions/cursorGrab\";\npaths.actions.cursor.drop = \"/actions/cursorDrop\";\npaths.actions.cursor.modDelta = \"/actions/cursorModDelta\";\npaths.actions.cursor.startDrawing = \"/actions/cursorStartDrawing\";\npaths.actions.cursor.stopDrawing = \"/actions/cursorStopDrawing\";\npaths.actions.cursor.undoDrawing = \"/actions/cursorUndoDrawing\";\npaths.actions.cursor.penNextColor = \"/actions/cursorPenNextColor\";\npaths.actions.cursor.penPrevColor = \"/actions/cursorPenPrevColor\";\npaths.actions.cursor.scalePenTip = \"/actions/cursorScalePenTip\";\npaths.actions.cursor.scaleGrabbedGrabbable = \"/actions/cursorScaleGrabbedGrabbable\";\npaths.actions.cursor.takeSnapshot = \"/actions/cursorTakeSnapshot\";\npaths.actions.rightHand = {};\npaths.actions.rightHand.pose = \"/actions/rightHandPose\";\npaths.actions.rightHand.grab = \"/actions/rightHandGrab\";\npaths.actions.rightHand.drop = \"/actions/rightHandDrop\";\npaths.actions.rightHand.modDelta = \"/actions/rightHandModDelta\";\npaths.actions.rightHand.startDrawing = \"/actions/rightHandStartDrawing\";\npaths.actions.rightHand.stopDrawing = \"/actions/rightHandStopDrawing\";\npaths.actions.rightHand.undoDrawing = \"/actions/rightHandUndoDrawing\";\npaths.actions.rightHand.penNextColor = \"/actions/rightHandPenNextColor\";\npaths.actions.rightHand.penPrevColor = \"/actions/rightHandPenPrevColor\";\npaths.actions.rightHand.scalePenTip = \"/actions/rightHandScalePenTip\";\npaths.actions.rightHand.startTeleport = \"/actions/rightHandStartTeleport\";\npaths.actions.rightHand.stopTeleport = \"/actions/rightHandStopTeleport\";\npaths.actions.rightHand.takeSnapshot = \"/actions/rightHandTakeSnapshot\";\npaths.actions.rightHand.thumb = \"/actions/rightHand/thumbDown\";\npaths.actions.rightHand.index = \"/actions/rightHand/indexDown\";\npaths.actions.rightHand.middleRingPinky = \"/actions/rightHand/middleRingPinkyDown\";\npaths.actions.leftHand = {};\npaths.actions.leftHand.pose = \"/actions/leftHandPose\";\npaths.actions.leftHand.grab = \"/actions/leftHandGrab\";\npaths.actions.leftHand.drop = \"/actions/leftHandDrop\";\npaths.actions.leftHand.modDelta = \"/actions/leftHandModDelta\";\npaths.actions.leftHand.startDrawing = \"/actions/leftHandStartDrawing\";\npaths.actions.leftHand.stopDrawing = \"/actions/leftHandStopDrawing\";\npaths.actions.leftHand.undoDrawing = \"/actions/leftHandUndoDrawing\";\npaths.actions.leftHand.penNextColor = \"/actions/leftHandPenNextColor\";\npaths.actions.leftHand.penPrevColor = \"/actions/leftHandPenPrevColor\";\npaths.actions.leftHand.scalePenTip = \"/actions/leftHandScalePenTip\";\npaths.actions.leftHand.startTeleport = \"/actions/leftHandStartTeleport\";\npaths.actions.leftHand.stopTeleport = \"/actions/leftHandStopTeleport\";\npaths.actions.leftHand.takeSnapshot = \"/actions/leftHandTakeSnapshot\";\npaths.actions.leftHand.thumb = \"/actions/leftHand/thumbDown\";\npaths.actions.leftHand.index = \"/actions/leftHand/indexDown\";\npaths.actions.leftHand.middleRingPinky = \"/actions/leftHand/middleRingPinkyDown\";\npaths.actions.camera = {};\npaths.actions.camera.exitMirror = \"/actions/cameraExitMirror\";\n\npaths.device = {};\npaths.device.mouse = {};\npaths.device.mouse.coords = \"/device/mouse/coords\";\npaths.device.mouse.movementXY = \"/device/mouse/movementXY\";\npaths.device.mouse.buttonLeft = \"/device/mouse/buttonLeft\";\npaths.device.mouse.buttonRight = \"/device/mouse/buttonRight\";\npaths.device.mouse.wheel = \"/device/mouse/wheel\";\npaths.device.smartMouse = {};\npaths.device.smartMouse.cursorPose = \"/device/smartMouse/cursorPose\";\npaths.device.smartMouse.cameraDelta = \"/device/smartMouse/cameraDelta\";\npaths.device.touchscreen = {};\npaths.device.touchscreen.cursorPose = \"/device/touchscreen/cursorPose\";\npaths.device.touchscreen.touchCameraDelta = \"/device/touchscreen/touchCameraDelta\";\npaths.device.touchscreen.gyroCameraDelta = \"/device/touchscreen/gyroCameraDelta\";\npaths.device.touchscreen.cameraDelta = \"/device/touchscreen/cameraDelta\";\npaths.device.touchscreen.pinch = {};\npaths.device.touchscreen.pinch.delta = \"/device/touchscreen/pinch/delta\";\npaths.device.touchscreen.pinch.initialDistance = \"/device/touchscreen/pinch/initialDistance\";\npaths.device.touchscreen.pinch.currentDistance = \"/device/touchscreen/pinch/currentDistance\";\npaths.device.touchscreen.isTouchingGrabbable = \"/device/touchscreen/isTouchingGrabbable\";\npaths.device.gyro = {};\npaths.device.gyro.averageDeltaX = \"/device/gyro/averageDeltaX\";\npaths.device.gyro.averageDeltaY = \"/device/gyro/averageDeltaY\";\npaths.device.hud = {};\npaths.device.hud.penButton = \"/device/hud/penButton\";\n\npaths.device.keyboard = {\n  key: key => {\n    return `/device/keyboard/${key.toLowerCase()}`;\n  }\n};\n\npaths.device.gamepad = gamepadIndex => ({\n  button: buttonIndex => ({\n    pressed: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/pressed`,\n    touched: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/touched`,\n    value: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/value`\n  }),\n  axis: axisIndex => `/device/gamepad/${gamepadIndex}/axis/${axisIndex}`\n});\n\nconst xbox = \"/device/xbox/\";\npaths.device.xbox = {\n  button: buttonName => ({\n    pressed: `${xbox}button/${buttonName}/pressed`,\n    touched: `${xbox}button/${buttonName}/touched`,\n    value: `${xbox}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${xbox}axis/${axisName}`;\n  }\n};\n\nconst oculusgo = \"/device/oculusgo/\";\npaths.device.oculusgo = {\n  // TODO remove these in favor of the direct accessors\n  button: buttonName => ({\n    pressed: `${oculusgo}button/${buttonName}/pressed`,\n    touched: `${oculusgo}button/${buttonName}/touched`,\n    value: `${oculusgo}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${oculusgo}axis/${axisName}`;\n  },\n  //\n  trigger: {\n    pressed: `${oculusgo}button/trigger/pressed`,\n    touched: `${oculusgo}button/trigger/touched`,\n    value: `${oculusgo}button/trigger/value`\n  },\n  touchpad: {\n    pressed: `${oculusgo}button/touchpad/pressed`,\n    touched: `${oculusgo}button/touchpad/touched`,\n    value: `${oculusgo}button/touchpad/value`,\n    axisX: `${oculusgo}axis/touchpadX`,\n    axisY: `${oculusgo}axis/touchpadY`\n  },\n  pose: `${oculusgo}pose`,\n  v: name => {\n    return `/vars/oculusgo/${name}`;\n  }\n};\n\nconst gearVRController = \"/device/gearVRController/\";\npaths.device.gearVRController = {\n  button: buttonName => ({\n    pressed: `${gearVRController}button/${buttonName}/pressed`,\n    touched: `${gearVRController}button/${buttonName}/touched`,\n    value: `${gearVRController}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${gearVRController}axis/${axisName}`;\n  },\n  pose: `${gearVRController}pose`,\n  v: name => {\n    return `/vars/gearVRController/${name}`;\n  }\n};\n\nconst daydream = \"/device/daydream/\";\npaths.device.daydream = {\n  button: buttonName => ({\n    pressed: `${daydream}button/${buttonName}/pressed`,\n    touched: `${daydream}button/${buttonName}/touched`,\n    value: `${daydream}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${daydream}axis/${axisName}`;\n  },\n  pose: `${daydream}pose`\n};\n\nconst rightOculusTouch = \"/device/rightOculusTouch/\";\npaths.device.rightOculusTouch = {\n  button: buttonName => ({\n    pressed: `${rightOculusTouch}button/${buttonName}/pressed`,\n    touched: `${rightOculusTouch}button/${buttonName}/touched`,\n    value: `${rightOculusTouch}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${rightOculusTouch}axis/${axisName}`;\n  },\n  pose: `${rightOculusTouch}pose`\n};\n\nconst leftOculusTouch = \"/device/leftOculusTouch/\";\npaths.device.leftOculusTouch = {\n  button: buttonName => ({\n    pressed: `${leftOculusTouch}button/${buttonName}/pressed`,\n    touched: `${leftOculusTouch}button/${buttonName}/touched`,\n    value: `${leftOculusTouch}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${leftOculusTouch}axis/${axisName}`;\n  },\n  pose: `${leftOculusTouch}pose`\n};\n\npaths.device.vive = {};\npaths.device.vive.left = {\n  button: buttonName => ({\n    pressed: `/device/vive/left/button/${buttonName}/pressed`,\n    touched: `/device/vive/left/button/${buttonName}/touched`,\n    value: `/device/vive/left/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/vive/left/axis/${axisName}`;\n  },\n  pose: `/device/vive/left/pose`\n};\npaths.device.vive.right = {\n  button: buttonName => ({\n    pressed: `/device/vive/right/button/${buttonName}/pressed`,\n    touched: `/device/vive/right/button/${buttonName}/touched`,\n    value: `/device/vive/right/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/vive/right/axis/${axisName}`;\n  },\n  pose: `/device/vive/right/pose`\n};\n\nfunction button(device, side, name) {\n  return {\n    pressed: `${device}${side}/button/${name}/pressed`,\n    touched: `${device}${side}/button/${name}/touched`,\n    value: `${device}${side}/button/${name}/value`\n  };\n}\n\nfunction axes(device, side, name) {\n  return {\n    axisX: `${device}${side}/axis/${name}X`,\n    axisY: `${device}${side}/axis/${name}Y`\n  };\n}\n\nfunction wmrController(side) {\n  const wmr = \"/device/wmr/\";\n  return {\n    touchpad: {\n      ...button(wmr, side, \"touchpad\"),\n      ...axes(wmr, side, \"touchpad\")\n    },\n    trigger: button(wmr, side, \"trigger\"),\n    grip: button(wmr, side, \"grip\"),\n    menu: button(wmr, side, \"menu\"),\n    joystick: axes(wmr, side, \"joystick\"),\n    pose: `${wmr}${side}/pose`\n  };\n}\npaths.device.wmr = {};\npaths.device.wmr.v = name => `/vars/wmr/${name}`;\npaths.device.wmr.k = name => `/vars/wmr/keyboard/${name}`;\npaths.device.wmr.left = wmrController(\"left\");\npaths.device.wmr.right = wmrController(\"right\");\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport const ReactAudioContext = React.createContext({});\n\nexport const hudHoverSound = \"play_sound-hud_hover_start\";\n\nexport const WithHoverSound = ({ sound, children }) => {\n  return (\n    <ReactAudioContext.Consumer>\n      {context => {\n        return React.cloneElement(children, {\n          onMouseEnter: e => {\n            if (context && context.playSound) {\n              context.playSound(sound || hudHoverSound);\n            }\n            children.props.onMouseEnter && children.props.onMouseEnter(e);\n          }\n        });\n      }}\n    </ReactAudioContext.Consumer>\n  );\n};\n\nWithHoverSound.propTypes = {\n  children: PropTypes.object,\n  sound: PropTypes.string\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class DialogContainer extends Component {\n  static propTypes = {\n    title: PropTypes.node,\n    children: PropTypes.node.isRequired,\n    onClose: PropTypes.func,\n    closable: PropTypes.bool\n  };\n\n  static defaultProps = {\n    closable: true\n  };\n\n  constructor(props) {\n    super(props);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onContainerClicked = this.onContainerClicked.bind(this);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  onKeyDown(e) {\n    if (this.props.closable && e.key === \"Escape\") {\n      this.props.onClose();\n    }\n  }\n\n  onContainerClicked = e => {\n    if (this.props.closable && e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"dialog-overlay\">\n        <div className=\"dialog\" onClick={this.onContainerClicked}>\n          <div className=\"dialog__box\">\n            <div className=\"dialog__box__contents\">\n              {this.props.closable &&\n                this.props.onClose && (\n                  <WithHoverSound>\n                    <button className=\"dialog__box__contents__close\" onClick={this.props.onClose}>\n                      <span>×</span>\n                    </button>\n                  </WithHoverSound>\n                )}\n              <div className=\"dialog__box__contents__title\">{this.props.title}</div>\n              <div className=\"dialog__box__contents__body\">{this.props.children}</div>\n              <div className=\"dialog__box__contents__button-container\" />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import { objectTypeForOriginAndContentType } from \"../object-types\";\nimport { getReticulumFetchUrl } from \"./phoenix-utils\";\nimport mediaHighlightFrag from \"./media-highlight-frag.glsl\";\n\nconst nonCorsProxyDomains = (process.env.NON_CORS_PROXY_DOMAINS || \"\").split(\",\");\nconst mediaAPIEndpoint = getReticulumFetchUrl(\"/api/v1/media\");\n\nconst commonKnownContentTypes = {\n  gltf: \"model/gltf\",\n  glb: \"model/gltf-binary\",\n  png: \"image/png\",\n  jpg: \"image/jpeg\",\n  jpeg: \"image/jpeg\",\n  pdf: \"application/pdf\",\n  mp4: \"video/mp4\",\n  mp3: \"audio/mpeg\"\n};\n\n// thanks to https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\nfunction b64EncodeUnicode(str) {\n  // first we use encodeURIComponent to get percent-encoded UTF-8, then we convert the percent-encodings\n  // into raw bytes which can be fed into btoa.\n  const CHAR_RE = /%([0-9A-F]{2})/g;\n  return btoa(encodeURIComponent(str).replace(CHAR_RE, (_, p1) => String.fromCharCode(\"0x\" + p1)));\n}\n\nexport const proxiedUrlFor = (url, index) => {\n  if (!(url.startsWith(\"http:\") || url.startsWith(\"https:\"))) return url;\n\n  // Skip known domains that do not require CORS proxying.\n  try {\n    const parsedUrl = new URL(url);\n    if (nonCorsProxyDomains.find(domain => parsedUrl.hostname.endsWith(domain))) return url;\n  } catch (e) {\n    // Ignore\n  }\n\n  // farspark doesn't know how to read '=' base64 padding characters\n  const base64Url = b64EncodeUnicode(url).replace(/=+$/g, \"\");\n\n  if (index != null || !process.env.CORS_PROXY_SERVER) {\n    // translate base64 + to - and / to _ for URL safety\n    const encodedUrl = base64Url.replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\n    const method = index != null ? \"extract\" : \"raw\";\n    return `https://${process.env.FARSPARK_SERVER}/0/${method}/0/0/0/${index || 0}/${encodedUrl}`;\n  } else {\n    const encodedUrl = encodeURIComponent(url);\n    return `https://${process.env.CORS_PROXY_SERVER}/${encodedUrl}`;\n  }\n};\n\nconst resolveUrlCache = new Map();\nexport const resolveUrl = async (url, index) => {\n  const cacheKey = `${url}|${index}`;\n  if (resolveUrlCache.has(cacheKey)) return resolveUrlCache.get(cacheKey);\n  const resolved = await fetch(mediaAPIEndpoint, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ media: { url, index } })\n  }).then(r => r.json());\n  resolveUrlCache.set(cacheKey, resolved);\n  return resolved;\n};\n\nexport const getCustomGLTFParserURLResolver = gltfUrl => (url, path) => {\n  if (typeof url !== \"string\" || url === \"\") return \"\";\n  if (/^(https?:)?\\/\\//i.test(url)) return url;\n  if (/^data:.*,.*$/i.test(url)) return url;\n  if (/^blob:.*$/i.test(url)) return url;\n\n  if (process.env.CORS_PROXY_SERVER) {\n    // For absolute paths with a CORS proxied gltf URL, re-write the url properly to be proxied\n    const corsProxyPrefix = `https://${process.env.CORS_PROXY_SERVER}/`;\n\n    if (gltfUrl.startsWith(corsProxyPrefix)) {\n      const originalUrl = decodeURIComponent(gltfUrl.substring(corsProxyPrefix.length));\n      const originalUrlParts = originalUrl.split(\"/\");\n\n      // Drop the .gltf filename\n      const assetUrl = originalUrlParts.slice(0, originalUrlParts.length - 1).join(\"/\") + \"/\" + url;\n      return corsProxyPrefix + encodeURIComponent(assetUrl);\n    }\n  }\n\n  return path + url;\n};\n\nexport const guessContentType = url => {\n  if (url.startsWith(\"hubs://\") && url.endsWith(\"/video\")) return \"video/vnd.hubs-webrtc\";\n  const extension = new URL(url).pathname.split(\".\").pop();\n  return commonKnownContentTypes[extension];\n};\n\nexport const upload = file => {\n  const formData = new FormData();\n  formData.append(\"media\", file);\n  formData.append(\"promotion_mode\", \"with_token\");\n  return fetch(mediaAPIEndpoint, {\n    method: \"POST\",\n    body: formData\n  }).then(r => r.json());\n};\n\n// https://stackoverflow.com/questions/7584794/accessing-jpeg-exif-rotation-data-in-javascript-on-the-client-side/32490603#32490603\nfunction getOrientation(file, callback) {\n  const reader = new FileReader();\n  reader.onload = function(e) {\n    const view = new DataView(e.target.result);\n    if (view.getUint16(0, false) != 0xffd8) {\n      return callback(-2);\n    }\n    const length = view.byteLength;\n    let offset = 2;\n    while (offset < length) {\n      if (view.getUint16(offset + 2, false) <= 8) return callback(-1);\n      const marker = view.getUint16(offset, false);\n      offset += 2;\n      if (marker == 0xffe1) {\n        if (view.getUint32((offset += 2), false) != 0x45786966) {\n          return callback(-1);\n        }\n\n        const little = view.getUint16((offset += 6), false) == 0x4949;\n        offset += view.getUint32(offset + 4, little);\n        const tags = view.getUint16(offset, little);\n        offset += 2;\n        for (let i = 0; i < tags; i++) {\n          if (view.getUint16(offset + i * 12, little) == 0x0112) {\n            return callback(view.getUint16(offset + i * 12 + 8, little));\n          }\n        }\n      } else if ((marker & 0xff00) != 0xff00) {\n        break;\n      } else {\n        offset += view.getUint16(offset, false);\n      }\n    }\n    return callback(-1);\n  };\n  reader.readAsArrayBuffer(file);\n}\n\nlet interactableId = 0;\nexport const addMedia = (src, template, contentOrigin, resolve = false, resize = false) => {\n  const scene = AFRAME.scenes[0];\n\n  const entity = document.createElement(\"a-entity\");\n  entity.id = \"interactable-media-\" + interactableId++;\n  entity.setAttribute(\"networked\", { template: template });\n  const needsToBeUploaded = src instanceof File;\n  entity.setAttribute(\"media-loader\", {\n    resize,\n    resolve,\n    src: typeof src === \"string\" ? src : \"\",\n    fileIsOwned: !needsToBeUploaded\n  });\n  scene.appendChild(entity);\n\n  const fireLoadingTimeout = setTimeout(() => {\n    scene.emit(\"media-loading\", { src: src });\n  }, 100);\n\n  [\"model-loaded\", \"video-loaded\", \"image-loaded\"].forEach(eventName => {\n    entity.addEventListener(eventName, () => {\n      clearTimeout(fireLoadingTimeout);\n\n      if (!entity.classList.contains(\"pen\") && !entity.getAttribute(\"animation__spawn-start\")) {\n        entity.object3D.scale.setScalar(0.5);\n        entity.matrixNeedsUpdate = true;\n\n        entity.setAttribute(\"animation__spawn-start\", {\n          property: \"scale\",\n          delay: 50,\n          dur: 300,\n          from: { x: 0.5, y: 0.5, z: 0.5 },\n          to: { x: 1.0, y: 1.0, z: 1.0 },\n          easing: \"easeOutElastic\"\n        });\n      }\n\n      scene.emit(\"media-loaded\", { src: src });\n    });\n  });\n\n  const orientation = new Promise(function(resolve) {\n    if (needsToBeUploaded) {\n      getOrientation(src, x => {\n        resolve(x);\n      });\n    } else {\n      resolve(1);\n    }\n  });\n  if (needsToBeUploaded) {\n    upload(src)\n      .then(response => {\n        const srcUrl = new URL(response.raw);\n        srcUrl.searchParams.set(\"token\", response.meta.access_token);\n        entity.setAttribute(\"media-loader\", { resolve: false, src: srcUrl.href, fileId: response.file_id });\n        window.APP.store.update({\n          uploadPromotionTokens: [{ fileId: response.file_id, promotionToken: response.meta.promotion_token }]\n        });\n      })\n      .catch(e => {\n        console.error(\"Media upload failed\", e);\n        entity.setAttribute(\"media-loader\", { src: \"error\" });\n      });\n  } else if (src instanceof MediaStream) {\n    entity.setAttribute(\"media-loader\", { src: `hubs://clients/${NAF.clientId}/video` });\n  }\n\n  if (contentOrigin) {\n    entity.addEventListener(\"media_resolved\", ({ detail }) => {\n      const objectType = objectTypeForOriginAndContentType(contentOrigin, detail.contentType);\n      scene.emit(\"object_spawned\", { objectType });\n    });\n  }\n\n  return { entity, orientation };\n};\n\nexport function injectCustomShaderChunks(obj) {\n  const vertexRegex = /\\bskinning_vertex\\b/;\n  const fragRegex = /\\bgl_FragColor\\b/;\n  const validMaterials = [\"MeshStandardMaterial\", \"MeshBasicMaterial\", \"MobileStandardMaterial\"];\n\n  const shaderUniforms = new Map();\n\n  obj.traverse(object => {\n    if (!object.material || !validMaterials.includes(object.material.type)) {\n      return;\n    }\n\n    // HACK, this routine inadvertently leaves the A-Frame shaders wired to the old, dark\n    // material, so maps cannot be updated at runtime. This breaks UI elements who have\n    // hover/toggle state, so for now just skip these while we figure out a more correct\n    // solution.\n    if (object.el.classList.contains(\"ui\")) return;\n    if (object.el.classList.contains(\"hud\")) return;\n    if (object.el.getAttribute(\"text-button\")) return;\n\n    object.material = object.material.clone();\n    object.material.onBeforeCompile = shader => {\n      if (!vertexRegex.test(shader.vertexShader)) return;\n\n      shader.uniforms.hubs_EnableSweepingEffect = { value: false };\n      shader.uniforms.hubs_SweepParams = { value: [0, 0] };\n      shader.uniforms.hubs_InteractorOnePos = { value: [0, 0, 0] };\n      shader.uniforms.hubs_InteractorTwoPos = { value: [0, 0, 0] };\n      shader.uniforms.hubs_HighlightInteractorOne = { value: false };\n      shader.uniforms.hubs_HighlightInteractorTwo = { value: false };\n      shader.uniforms.hubs_Time = { value: 0 };\n\n      const vchunk = `\n        if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo) {\n          vec4 wt = modelMatrix * vec4(transformed, 1);\n\n          // Used in the fragment shader below.\n          hubs_WorldPosition = wt.xyz;\n        }\n      `;\n\n      const vlines = shader.vertexShader.split(\"\\n\");\n      const vindex = vlines.findIndex(line => vertexRegex.test(line));\n      vlines.splice(vindex + 1, 0, vchunk);\n      vlines.unshift(\"varying vec3 hubs_WorldPosition;\");\n      vlines.unshift(\"uniform bool hubs_HighlightInteractorOne;\");\n      vlines.unshift(\"uniform bool hubs_HighlightInteractorTwo;\");\n      shader.vertexShader = vlines.join(\"\\n\");\n\n      const flines = shader.fragmentShader.split(\"\\n\");\n      const findex = flines.findIndex(line => fragRegex.test(line));\n      flines.splice(findex + 1, 0, mediaHighlightFrag);\n      flines.unshift(\"varying vec3 hubs_WorldPosition;\");\n      flines.unshift(\"uniform bool hubs_EnableSweepingEffect;\");\n      flines.unshift(\"uniform vec2 hubs_SweepParams;\");\n      flines.unshift(\"uniform bool hubs_HighlightInteractorOne;\");\n      flines.unshift(\"uniform vec3 hubs_InteractorOnePos;\");\n      flines.unshift(\"uniform bool hubs_HighlightInteractorTwo;\");\n      flines.unshift(\"uniform vec3 hubs_InteractorTwoPos;\");\n      flines.unshift(\"uniform float hubs_Time;\");\n      shader.fragmentShader = flines.join(\"\\n\");\n\n      shaderUniforms.set(object.material.uuid, shader.uniforms);\n    };\n    object.material.needsUpdate = true;\n  });\n\n  return shaderUniforms;\n}\n\nexport function getPromotionTokenForFile(fileId) {\n  return window.APP.store.state.uploadPromotionTokens.find(upload => upload.fileId === fileId);\n}\n","import uuid from \"uuid/v4\";\nimport { Socket } from \"phoenix\";\n\nexport function connectToReticulum(debug = false) {\n  const qs = new URLSearchParams(location.search);\n\n  const socketProtocol = qs.get(\"phx_protocol\") || (document.location.protocol === \"https:\" ? \"wss:\" : \"ws:\");\n  let socketHost = qs.get(\"phx_host\");\n  let socketPort = qs.get(\"phx_port\");\n\n  if (process.env.RETICULUM_SERVER) {\n    const [retHost, retPort] = process.env.RETICULUM_SERVER.split(\":\");\n    socketHost = socketHost || retHost || \"\";\n    socketPort = socketPort || retPort || \"443\";\n  } else {\n    socketHost = socketHost || document.location.hostname || \"\";\n    socketPort = socketPort || document.location.port || \"443\";\n  }\n\n  const socketUrl = `${socketProtocol}//${socketHost}${socketPort ? `:${socketPort}` : \"\"}/socket`;\n  console.log(`Phoenix Socket URL: ${socketUrl}`);\n\n  const socketSettings = {\n    params: { session_id: uuid() }\n  };\n\n  if (debug) {\n    socketSettings.logger = (kind, msg, data) => {\n      console.log(`${kind}: ${msg}`, data);\n    };\n  }\n\n  const socket = new Socket(socketUrl, socketSettings);\n  socket.connect();\n\n  return socket;\n}\n\nconst resolverLink = document.createElement(\"a\");\nexport function getReticulumFetchUrl(path, absolute = false) {\n  if (process.env.RETICULUM_SERVER) {\n    return `https://${process.env.RETICULUM_SERVER}${path}`;\n  } else if (absolute) {\n    resolverLink.href = path;\n    return resolverLink.href;\n  } else {\n    return path;\n  }\n}\n\nexport function getLandingPageForPhoto(photoUrl) {\n  const parsedUrl = new URL(photoUrl);\n  return getReticulumFetchUrl(parsedUrl.pathname.replace(\".png\", \".html\") + parsedUrl.search, true);\n}\n","const tempVector3 = new THREE.Vector3();\nconst tempQuaternion = new THREE.Quaternion();\n\nexport function getLastWorldPosition(src, target) {\n  target.setFromMatrixPosition(src.matrixWorld);\n  return target;\n}\n\nexport function getLastWorldQuaternion(src, target) {\n  src.matrixWorld.decompose(tempVector3, target, tempVector3);\n  return target;\n}\n\nexport function getLastWorldScale(src, target) {\n  src.matrixWorld.decompose(tempVector3, tempQuaternion, target);\n  return target;\n}\n","export const sets = {};\nsets.global = \"global\";\nsets.inputFocused = \"inputFocused\";\nsets.cursorHoveringOnPen = \"cursorHoveringOnPen\";\nsets.cursorHoveringOnCamera = \"cursorHoveringOnCamera\";\nsets.cursorHoveringOnInteractable = \"cursorHoveringOnInteractable\";\nsets.cursorHoveringOnUI = \"cursorHoveringOnUI\";\nsets.cursorHoveringOnNothing = \"cursorHoveringOnNothing\";\nsets.cursorHoldingPen = \"cursorHoldingPen\";\nsets.cursorHoldingCamera = \"cursorHoldingCamera\";\nsets.cursorHoldingInteractable = \"cursorHoldingInteractable\";\nsets.rightHandTeleporting = \"rightHandTeleporting\";\nsets.rightHandHoveringOnPen = \"rightHandHoveringOnPen\";\nsets.rightHandHoveringOnCamera = \"rightHandHoveringOnCamera\";\nsets.rightHandHoveringOnInteractable = \"rightHandHoveringOnInteractable\";\nsets.rightHandHoveringOnNothing = \"rightHandHoveringOnNothing\";\nsets.rightHandHoldingPen = \"rightHandHoldingPen\";\nsets.rightHandHoldingCamera = \"rightHandHoldingCamera\";\nsets.rightHandHoldingInteractable = \"rightHandHoldingInteractable\";\nsets.leftHandTeleporting = \"leftHandTeleporting\";\nsets.leftHandHoveringOnPen = \"leftHandHoveringOnPen\";\nsets.leftHandHoveringOnCamera = \"leftHandHoveringOnCamera\";\nsets.leftHandHoveringOnInteractable = \"leftHandHoveringOnInteractable\";\nsets.leftHandHoldingPen = \"leftHandHoldingPen\";\nsets.leftHandHoldingCamera = \"leftHandHoldingCamera\";\nsets.leftHandHoldingInteractable = \"leftHandHoldingInteractable\";\nsets.leftHandHoveringOnNothing = \"leftHandHoveringOnNothing\";\n","import Raven from \"raven-js\";\n\nexport default function registerTelemetry() {\n  if (process.env.NODE_ENV === \"production\") {\n    Raven.config(\"https://013d6a364fed43cdb0539a61d520597a@sentry.prod.mozaws.net/370\").install();\n  }\n}\n","import localeData from \"../assets/translations.data.json\";\nconst navigatorLang = ((navigator.languages && navigator.languages[0]) || navigator.language || navigator.userLanguage)\n  .toLowerCase()\n  .split(/[_-]+/)[0];\nexport const lang = (localeData[navigatorLang] && navigatorLang) || \"en\";\nexport const messages = localeData[lang] || localeData.en;\n","// Enumeration of spawned object content origins. URL means the content is\n// fetched from a URL, FILE means it was an uploaded/dropped file, and\n// CLIPBOARD means it was raw data pasted in from the clipboard, SPAWNER means\n// it was copied over from a spawner.\nexport const ObjectContentOrigins = {\n  URL: 1,\n  FILE: 2,\n  CLIPBOARD: 3,\n  SPAWNER: 4\n};\n\n// Enumeration of spawnable object types, used for telemetry, which encapsulates\n// both the origin of the content for the object and also the type of content\n// contained in the object.\nexport const ObjectTypes = {\n  URL_IMAGE: 0,\n  URL_VIDEO: 1,\n  URL_MODEL: 2,\n  URL_PDF: 3,\n  URL_AUDIO: 4,\n  //URL_TEXT: 5,\n  //URL_TELEPORTER: 6,\n  FILE_IMAGE: 8,\n  FILE_VIDEO: 9,\n  FILE_MODEL: 10,\n  FILE_PDF: 11,\n  FILE_AUDIO: 12,\n  //FILE_TEXT: 13,\n  CLIPBOARD_IMAGE: 16,\n  CLIPBOARD_VIDEO: 17,\n  CLIPBOARD_MODEL: 18,\n  CLIPBOARD_PDF: 19,\n  CLIPBOARD_AUDIO: 20,\n  //CLIPBOARD_TEXT: 21,\n  SPAWNER_IMAGE: 24,\n  SPAWNER_VIDEO: 25,\n  SPAWNER_MODEL: 26,\n  SPAWNER_PDF: 27,\n  SPAWNER_AUDIO: 28,\n  //SPAWNER_TEXT: 29,\n  CAMERA: 30,\n  UNKNOWN: 31\n};\n\n// Given an origin and three object type values for URL, FILE, and CLIPBOARD\n// origins respectively, return the appropriate one\nfunction objectTypeForOrigin(contentOrigin, urlType, fileType, clipboardType, spawnerType) {\n  if (contentOrigin === ObjectContentOrigins.URL) {\n    return urlType;\n  } else if (contentOrigin === ObjectContentOrigins.FILE) {\n    return fileType;\n  } else if (contentOrigin === ObjectContentOrigins.CLIPBOARD) {\n    return clipboardType;\n  } else {\n    return spawnerType;\n  }\n}\n\n// Lookup table of mime-type prefixes to the set of object types that we should use\n// for objects spawned matching their underlying Content-Type.\nconst objectTypeMimePrefixLookupMap = {\n  \"image/\": [ObjectTypes.URL_IMAGE, ObjectTypes.FILE_IMAGE, ObjectTypes.CLIPBOARD_IMAGE, ObjectTypes.SPAWNER_IMAGE],\n  \"model/\": [ObjectTypes.URL_MODEL, ObjectTypes.FILE_MODEL, ObjectTypes.CLIPBOARD_MODEL, ObjectTypes.SPAWNER_MODEL],\n  \"application/x-zip-compressed\": [\n    ObjectTypes.URL_MODEL,\n    ObjectTypes.FILE_MODEL,\n    ObjectTypes.CLIPBOARD_MODEL,\n    ObjectTypes.SPAWNER_MODEL\n  ],\n  \"video/\": [ObjectTypes.URL_VIDEO, ObjectTypes.FILE_VIDEO, ObjectTypes.CLIPBOARD_VIDEO, ObjectTypes.SPAWNER_VIDEO],\n  \"audio/\": [ObjectTypes.URL_AUDIO, ObjectTypes.FILE_AUDIO, ObjectTypes.CLIPBOARD_AUDIO, ObjectTypes.SPAWNER_AUDIO],\n  \"application/pdf\": [ObjectTypes.URL_PDF, ObjectTypes.FILE_PDF, ObjectTypes.CLIPBOARD_PDF, ObjectTypes.SPAWNER_PDF]\n};\n\n// Given an content origin and the resolved mime type of a piece of content, return\n// the ObjectType, if any, for that content.\nexport function objectTypeForOriginAndContentType(contentOrigin, contentType) {\n  for (const prefix in objectTypeMimePrefixLookupMap) {\n    if (contentType.startsWith(prefix)) {\n      const types = objectTypeMimePrefixLookupMap[prefix];\n      return objectTypeForOrigin(contentOrigin, ...types);\n    }\n  }\n\n  return ObjectTypes.UNKNOWN;\n}\n","export const avatars = [\n  {\n    id: \"botdefault\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotDefault_Avatar-9f71f8ff22.gltf\"\n  },\n  {\n    id: \"botbobo\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotBobo_Avatar-f9740a010b.gltf\"\n  },\n  {\n    id: \"botdom\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotDom_Avatar-0c48bf15a5.gltf\"\n  },\n  {\n    id: \"botgreg\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotGreg_Avatar-98d39797bb.gltf\"\n  },\n  {\n    id: \"botguest\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotGuest_Avatar-78cd857332.gltf\"\n  },\n  {\n    id: \"botjim\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotJim_Avatar-d28005a687.gltf\"\n  },\n  {\n    id: \"botkev\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotKev_Avatar-a95787bb51.gltf\"\n  },\n  {\n    id: \"botpinky\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotPinky_Avatar-b0b93f8675.gltf\"\n  },\n  {\n    id: \"botrobert\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotRobert_Avatar-e9554880f3.gltf\"\n  },\n  {\n    id: \"botwoody\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotWoody_Avatar-0140485a23.gltf\"\n  }\n];\n","const THREE = typeof window !== \"undefined\" && window.THREE;\nconst Vector3 = (THREE && THREE.Vector3) || function() {};\nconst Quaternion = (THREE && THREE.Quaternion) || function() {};\nconst forward = typeof window !== \"undefined\" && window.THREE && new THREE.Vector3(0, 0, -1);\nexport function Pose() {\n  return {\n    position: new Vector3(),\n    direction: new Vector3(),\n    orientation: new Quaternion(),\n    fromOriginAndDirection: function(origin, direction) {\n      this.position = origin;\n      this.direction = direction;\n      this.orientation = this.orientation.setFromUnitVectors(forward, direction);\n      return this;\n    },\n    fromCameraProjection: function(camera, normalizedX, normalizedY) {\n      this.position.setFromMatrixPosition(camera.matrixWorld);\n      this.direction\n        .set(normalizedX, normalizedY, 0.5)\n        .unproject(camera)\n        .sub(this.position)\n        .normalize();\n      this.fromOriginAndDirection(this.position, this.direction);\n      return this;\n    },\n    copy: function(pose) {\n      this.position.copy(pose.position);\n      this.direction.copy(pose.direction);\n      this.orientation.copy(pose.orientation);\n    }\n  };\n}\n","import { Pose } from \"../pose\";\nimport { angleTo4Direction } from \"../../../utils/dpad\";\n\nconst zeroVec2 = [0, 0];\nexport const xforms = {\n  noop: function() {},\n  copy: function(frame, src, dest) {\n    frame[dest.value] = frame[src.value];\n  },\n  scale: function(scalar) {\n    return function scale(frame, src, dest) {\n      if (frame[src.value] !== undefined) {\n        frame[dest.value] = frame[src.value] * scalar;\n      }\n    };\n  },\n  deadzone: function(deadzoneSize) {\n    return function deadzone(frame, src, dest) {\n      frame[dest.value] = Math.abs(frame[src.value]) < deadzoneSize ? 0 : frame[src.value];\n    };\n  },\n  split_vec2: function(frame, src, dest) {\n    if (frame[src.value] !== undefined) {\n      frame[dest.x] = frame[src.value][0];\n      frame[dest.y] = frame[src.value][1];\n    }\n  },\n  compose_vec2: function(frame, src, dest) {\n    if (frame[src.x] !== undefined && frame[src.y] !== undefined) {\n      frame[dest.value] = [frame[src.x], frame[src.y]];\n    }\n  },\n  negate: function(frame, src, dest) {\n    frame[dest.value] = -frame[src.value];\n  },\n  copyIfFalse: function(frame, src, dest) {\n    frame[dest.value] = frame[src.bool] ? undefined : frame[src.value];\n  },\n  copyIfTrue: function(frame, src, dest) {\n    frame[dest.value] = frame[src.bool] ? frame[src.value] : undefined;\n  },\n  zeroIfDefined: function(frame, src, dest) {\n    frame[dest.value] = frame[src.bool] !== undefined ? 0 : frame[src.value];\n  },\n  true: function(frame, src, dest) {\n    frame[dest.value] = true;\n  },\n  rising: function rising(frame, src, dest, prevState) {\n    frame[dest.value] = frame[src.value] && prevState === false;\n    return !!frame[src.value];\n  },\n  risingWithFrameDelay: function(n) {\n    return function risingWithFrameDelay(frame, src, dest, state = { values: new Array(n) }) {\n      frame[dest.value] = state.values.shift();\n      state.values.push(frame[src.value] && !state.prev);\n      state.prev = frame[src.value];\n      return state;\n    };\n  },\n  falling: function falling(frame, src, dest, prevState) {\n    frame[dest.value] = !frame[src.value] && prevState;\n    return !!frame[src.value];\n  },\n  vec2Zero: function(frame, _, dest) {\n    frame[dest.value] = zeroVec2;\n  },\n  poseFromCameraProjection: function() {\n    let camera;\n    const pose = new Pose();\n    return function poseFromCameraProjection(frame, src, dest) {\n      if (!camera) {\n        camera = document.querySelector(\"#player-camera\").components.camera.camera;\n      }\n      frame[dest.value] = pose.fromCameraProjection(camera, frame[src.value][0], frame[src.value][1]);\n    };\n  },\n  vec2dpad: function(deadzoneRadius, invertX = false, invertY = false) {\n    const deadzoneRadiusSquared = deadzoneRadius * deadzoneRadius;\n\n    return function vec2dpad(frame, src, dest) {\n      if (!frame[src.value]) return;\n      const [x, y] = frame[src.value];\n      const inCenter = x * x + y * y < deadzoneRadiusSquared;\n      const direction = inCenter ? \"center\" : angleTo4Direction(Math.atan2(invertX ? -x : x, invertY ? -y : y));\n      if (!dest[direction]) return;\n      frame[dest[direction]] = true;\n    };\n  },\n  always: function(constValue) {\n    return function always(frame, _, dest) {\n      frame[dest.value] = constValue;\n    };\n  },\n  wasd_to_vec2: function(frame, { w, a, s, d }, { vec2 }) {\n    let x = 0;\n    let y = 0;\n    if (frame[a]) x -= 1;\n    if (frame[d]) x += 1;\n    if (frame[w]) y += 1;\n    if (frame[s]) y -= 1;\n    frame[vec2] = [x, y];\n  },\n  add_vec2: function(frame, src, dest) {\n    const first = frame[src.first];\n    const second = frame[src.second];\n    if (first && second) {\n      frame[dest.value] = [first[0] + second[0], first[1] + second[1]];\n    } else if (second) {\n      frame[dest.value] = second;\n    } else if (first) {\n      frame[dest.value] = first;\n    }\n  },\n  max_vec2: function(frame, src, dest) {\n    const first = frame[src.first];\n    const second = frame[src.second];\n    if (first && second) {\n      frame[dest.value] =\n        first[0] * first[0] + first[1] * first[1] > second[0] * second[0] + second[1] * second[1] ? first : second;\n    } else if (second) {\n      frame[dest.value] = second;\n    } else if (first) {\n      frame[dest.value] = first;\n    }\n  },\n  normalize_vec2: function(frame, src, dest) {\n    const vec2 = frame[src.value];\n    if (vec2) {\n      if (vec2[0] === 0 && vec2[0] === 0) {\n        frame[dest.value] = vec2;\n      } else {\n        const l = Math.sqrt(vec2[0] * vec2[0] + vec2[1] * vec2[1]);\n        frame[dest.value] = [vec2[0] / l, vec2[1] / l];\n      }\n    }\n  },\n  all: function(frame, src, dest) {\n    for (const path in src) {\n      if (!frame[src[path]]) {\n        frame[dest.value] = false;\n        return;\n      }\n    }\n    frame[dest.value] = true;\n  },\n  any: function(frame, src, dest) {\n    for (const path in src) {\n      if (frame[src[path]]) {\n        frame[dest.value] = true;\n        return;\n      }\n    }\n    frame[dest.value] = false;\n  },\n  touch_axis_scroll(scale = 1) {\n    return function touch_axis_scroll(frame, src, dest, state = { value: 0, touching: false }) {\n      frame[dest.value] = state.touching && frame[src.touching] ? scale * (frame[src.value] - state.value) : 0;\n      state.value = frame[src.value];\n      state.touching = frame[src.touching];\n      return state;\n    };\n  }\n};\n","export const addSetsToBindings = mapping => {\n  for (const setName in mapping) {\n    for (const binding of mapping[setName]) {\n      if (!binding.sets) {\n        binding.sets = [];\n      }\n      binding.sets.push(setName);\n    }\n  }\n  return mapping;\n};\n","export default function nextTick() {\n  return new Promise(resolve => {\n    setTimeout(resolve, 0);\n  });\n}\n","import { Validator } from \"jsonschema\";\nimport merge from \"deepmerge\";\n\nconst LOCAL_STORE_KEY = \"___hubs_store\";\nconst STORE_STATE_CACHE_KEY = Symbol();\nconst validator = new Validator();\nimport { EventTarget } from \"event-target-shim\";\nimport { generateDefaultProfile, generateRandomName } from \"../utils/identity.js\";\n\n// Durable (via local-storage) schema-enforced state that is meant to be consumed via forward data flow.\n// (Think flux but with way less incidental complexity, at least for now :))\nexport const SCHEMA = {\n  id: \"/HubsStore\",\n\n  definitions: {\n    profile: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        displayName: { type: \"string\", pattern: \"^[A-Za-z0-9-]{3,32}$\" },\n        avatarId: { type: \"string\" }\n      }\n    },\n\n    credentials: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        token: { type: [\"null\", \"string\"] },\n        email: { type: [\"null\", \"string\"] }\n      }\n    },\n\n    activity: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        hasFoundFreeze: { type: \"boolean\" },\n        hasChangedName: { type: \"boolean\" },\n        lastEnteredAt: { type: \"string\" }\n      }\n    },\n\n    settings: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        lastUsedMicDeviceId: { type: \"string\" }\n      }\n    },\n\n    uploadPromotionTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          fileId: { type: \"string\" },\n          promotionToken: { type: \"string\" }\n        }\n      }\n    }\n  },\n\n  type: \"object\",\n\n  properties: {\n    profile: { $ref: \"#/definitions/profile\" },\n    credentials: { $ref: \"#/definitions/credentials\" },\n    activity: { $ref: \"#/definitions/activity\" },\n    settings: { $ref: \"#/definitions/settings\" },\n    uploadPromotionTokens: { $ref: \"#/definitions/uploadPromotionTokens\" }\n  },\n\n  additionalProperties: false\n};\n\nexport default class Store extends EventTarget {\n  constructor() {\n    super();\n\n    if (localStorage.getItem(LOCAL_STORE_KEY) === null) {\n      localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify({}));\n    }\n    this.update({\n      activity: {},\n      settings: {},\n      credentials: {},\n      profile: {},\n      uploadPromotionTokens: []\n    });\n  }\n\n  // Initializes store with any default bits\n  init = () => {\n    this.update({\n      profile: { ...generateDefaultProfile(), ...(this.state.profile || {}) }\n    });\n\n    // Regenerate name to encourage users to change it.\n    if (!this.state.activity.hasChangedName) {\n      this.update({ profile: { displayName: generateRandomName() } });\n    }\n  };\n\n  get state() {\n    if (!this.hasOwnProperty(STORE_STATE_CACHE_KEY)) {\n      this[STORE_STATE_CACHE_KEY] = JSON.parse(localStorage.getItem(LOCAL_STORE_KEY));\n    }\n\n    return this[STORE_STATE_CACHE_KEY];\n  }\n\n  update(newState) {\n    const finalState = merge(this.state, newState);\n    const { valid } = validator.validate(finalState, SCHEMA);\n\n    if (!valid) {\n      // Intentionally not including details about the state or validation result here, since we don't want to leak\n      // sensitive data in the error message.\n      throw new Error(`Write to store failed schema validation.`);\n    }\n\n    localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify(finalState));\n    delete this[STORE_STATE_CACHE_KEY];\n\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    return finalState;\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/images/hub-preview-light-no-shadow-5ebb166e8580d819b445892173ec0286.png\";","import nextTick from \"../utils/next-tick\";\nimport SketchfabZipWorker from \"../workers/sketchfab-zip.worker.js\";\nimport MobileStandardMaterial from \"../materials/MobileStandardMaterial\";\nimport cubeMapPosX from \"../assets/images/cubemap/posx.jpg\";\nimport cubeMapNegX from \"../assets/images/cubemap/negx.jpg\";\nimport cubeMapPosY from \"../assets/images/cubemap/posy.jpg\";\nimport cubeMapNegY from \"../assets/images/cubemap/negy.jpg\";\nimport cubeMapPosZ from \"../assets/images/cubemap/posz.jpg\";\nimport cubeMapNegZ from \"../assets/images/cubemap/negz.jpg\";\nimport { getCustomGLTFParserURLResolver } from \"../utils/media-utils\";\n\nconst GLTFCache = {};\nlet CachedEnvMapTexture = null;\n\nfunction inflateComponent(el, componentName, componentData) {\n  if (!AFRAME.components[componentName]) {\n    throw new Error(`Inflator failed. \"${componentName}\" component does not exist.`);\n  }\n  if (AFRAME.components[componentName].multiple && Array.isArray(componentData)) {\n    for (let i = 0; i < componentData.length; i++) {\n      el.setAttribute(componentName + \"__\" + i, componentData[i]);\n    }\n  } else {\n    el.setAttribute(componentName, componentData);\n  }\n}\n\nAFRAME.GLTFModelPlus = {\n  // eslint-disable-next-line no-unused-vars\n  components: {},\n  registerComponent(componentKey, componentName, inflator) {\n    inflator = inflator || inflateComponent;\n    AFRAME.GLTFModelPlus.components[componentKey] = { inflator, componentName };\n  }\n};\n\nfunction parallelTraverse(a, b, callback) {\n  callback(a, b);\n\n  for (let i = 0; i < a.children.length; i++) {\n    parallelTraverse(a.children[i], b.children[i], callback);\n  }\n}\n\n// Modified version of Don McCurdy's AnimationUtils.clone\n// https://github.com/mrdoob/three.js/pull/14494\nfunction cloneSkinnedMesh(source) {\n  const cloneLookup = new Map();\n\n  const clone = source.clone();\n\n  parallelTraverse(source, clone, function(sourceNode, clonedNode) {\n    cloneLookup.set(sourceNode, clonedNode);\n  });\n\n  source.traverse(function(sourceMesh) {\n    if (!sourceMesh.isSkinnedMesh) return;\n\n    const sourceBones = sourceMesh.skeleton.bones;\n    const clonedMesh = cloneLookup.get(sourceMesh);\n\n    clonedMesh.skeleton = sourceMesh.skeleton.clone();\n\n    clonedMesh.skeleton.bones = sourceBones.map(function(sourceBone) {\n      if (!cloneLookup.has(sourceBone)) {\n        throw new Error(\"Required bones are not descendants of the given object.\");\n      }\n\n      return cloneLookup.get(sourceBone);\n    });\n\n    clonedMesh.bind(clonedMesh.skeleton, sourceMesh.bindMatrix);\n  });\n\n  return clone;\n}\n\nfunction cloneGltf(gltf) {\n  return {\n    animations: gltf.animations,\n    scene: cloneSkinnedMesh(gltf.scene)\n  };\n}\n\n/// Walks the tree of three.js objects starting at the given node, using the GLTF data\n/// and template data to construct A-Frame entities and components when necessary.\n/// (It's unnecessary to construct entities for subtrees that have no component data\n/// or templates associated with any of their nodes.)\n///\n/// Returns the A-Frame entity associated with the given node, if one was constructed.\nconst inflateEntities = function(node, templates, isRoot, modelToWorldScale) {\n  // TODO: Remove this once we update the legacy avatars to the new node names\n  if (node.name === \"Chest\") {\n    node.name = \"Spine\";\n  } else if (node.name === \"Root Scene\") {\n    node.name = \"AvatarRoot\";\n  } else if (node.name === \"Bot_Skinned\") {\n    node.name = \"AvatarMesh\";\n  }\n\n  // inflate subtrees first so that we can determine whether or not this node needs to be inflated\n  const childEntities = [];\n  const children = node.children.slice(0); // setObject3D mutates the node's parent, so we have to copy\n  for (const child of children) {\n    const el = inflateEntities(child, templates);\n    if (el) {\n      childEntities.push(el);\n    }\n  }\n\n  const hubsComponents = node.userData.gltfExtensions && node.userData.gltfExtensions.HUBS_components;\n\n  // We can remove support for legacy components when our environment, avatar and interactable models are\n  // updated to match Spoke output.\n  const legacyComponents = node.userData.components;\n\n  const entityComponents = hubsComponents || legacyComponents;\n\n  const nodeHasBehavior = !!entityComponents || node.name in templates;\n  if (!nodeHasBehavior && !childEntities.length && !isRoot) {\n    return null; // we don't need an entity for this node\n  }\n\n  const el = document.createElement(\"a-entity\");\n  el.append.apply(el, childEntities);\n\n  // Remove invalid CSS class name characters.\n  const className = (node.name || node.uuid).replace(/[^\\w-]/g, \"\");\n  el.classList.add(className);\n\n  // AFRAME rotation component expects rotations in YXZ, convert it\n  if (node.rotation.order !== \"YXZ\") {\n    node.rotation.setFromQuaternion(node.quaternion, \"YXZ\");\n  }\n\n  // Copy over the object's transform to the THREE.Group and reset the actual transform of the Object3D\n  // all updates to the object should be done through the THREE.Group wrapper\n  el.setAttribute(\"position\", {\n    x: node.position.x,\n    y: node.position.y,\n    z: node.position.z\n  });\n  el.setAttribute(\"rotation\", {\n    x: node.rotation.x * THREE.Math.RAD2DEG,\n    y: node.rotation.y * THREE.Math.RAD2DEG,\n    z: node.rotation.z * THREE.Math.RAD2DEG\n  });\n  el.setAttribute(\"scale\", {\n    x: node.scale.x * (modelToWorldScale !== undefined ? modelToWorldScale : 1),\n    y: node.scale.y * (modelToWorldScale !== undefined ? modelToWorldScale : 1),\n    z: node.scale.z * (modelToWorldScale !== undefined ? modelToWorldScale : 1)\n  });\n\n  node.matrixAutoUpdate = false;\n  node.matrix.identity();\n  node.matrix.decompose(node.position, node.rotation, node.scale);\n  el.object3D.matrixNeedsUpdate = true;\n\n  el.setObject3D(node.type.toLowerCase(), node);\n  if (entityComponents && \"nav-mesh\" in entityComponents) {\n    el.setObject3D(\"mesh\", node);\n  }\n\n  // Set the name of the `THREE.Group` to match the name of the node,\n  // so that `THREE.PropertyBinding` will find (and later animate)\n  // the group. See `PropertyBinding.findNode`:\n  // https://github.com/mrdoob/three.js/blob/dev/src/animation/PropertyBinding.js#L211\n  el.object3D.name = node.name;\n  if (node.animations) {\n    // Pass animations up to the group object so that when we can pass the group as\n    // the optional root in `THREE.AnimationMixer.clipAction` and use the hierarchy\n    // preserved under the group (but not the node). Otherwise `clipArray` will be\n    // `null` in `THREE.AnimationClip.findByName`.\n    node.parent.animations = node.animations;\n  }\n\n  if (entityComponents) {\n    for (const prop in entityComponents) {\n      if (entityComponents.hasOwnProperty(prop) && AFRAME.GLTFModelPlus.components.hasOwnProperty(prop)) {\n        const { componentName, inflator } = AFRAME.GLTFModelPlus.components[prop];\n        inflator(el, componentName, entityComponents[prop], entityComponents);\n      }\n    }\n  }\n\n  return el;\n};\n\nfunction attachTemplate(root, name, templateRoot) {\n  const targetEls = root.querySelectorAll(\".\" + name);\n  for (const el of targetEls) {\n    const root = templateRoot.cloneNode(true);\n    // Merge root element attributes with the target element\n    for (const { name, value } of root.attributes) {\n      el.setAttribute(name, value);\n    }\n\n    // Append all child elements\n    while (root.children.length > 0) {\n      el.appendChild(root.children[0]);\n    }\n  }\n}\n\nfunction getFilesFromSketchfabZip(src) {\n  return new Promise((resolve, reject) => {\n    const worker = new SketchfabZipWorker();\n    worker.onmessage = e => {\n      const [success, fileMapOrError] = e.data;\n      (success ? resolve : reject)(fileMapOrError);\n    };\n    worker.postMessage(src);\n  });\n}\n\nasync function loadEnvMap() {\n  const urls = [cubeMapPosX, cubeMapNegX, cubeMapPosY, cubeMapNegY, cubeMapPosZ, cubeMapNegZ];\n  const texture = await new THREE.CubeTextureLoader().load(urls);\n  texture.format = THREE.RGBFormat;\n  return texture;\n}\n\nasync function loadGLTF(src, contentType, preferredTechnique, onProgress) {\n  let gltfUrl = src;\n  let fileMap;\n\n  if (contentType.includes(\"model/gltf+zip\") || contentType.includes(\"application/x-zip-compressed\")) {\n    fileMap = await getFilesFromSketchfabZip(gltfUrl);\n    gltfUrl = fileMap[\"scene.gtlf\"];\n  }\n\n  const gltfLoader = new THREE.GLTFLoader();\n  gltfLoader.customURLResolver = getCustomGLTFParserURLResolver(gltfUrl);\n  gltfLoader.setLazy(true);\n\n  const { parser } = await new Promise((resolve, reject) => gltfLoader.load(gltfUrl, resolve, onProgress, reject));\n\n  const materials = parser.json.materials;\n  if (materials) {\n    for (let i = 0; i < materials.length; i++) {\n      const material = materials[i];\n\n      if (\n        material.extensions &&\n        material.extensions.MOZ_alt_materials &&\n        material.extensions.MOZ_alt_materials[preferredTechnique] !== undefined\n      ) {\n        const altMaterialIndex = material.extensions.MOZ_alt_materials[preferredTechnique];\n        materials[i] = materials[altMaterialIndex];\n      }\n    }\n  }\n\n  if (!CachedEnvMapTexture) {\n    CachedEnvMapTexture = loadEnvMap();\n  }\n\n  const gltf = await new Promise((resolve, reject) =>\n    parser.parse(\n      (scene, scenes, cameras, animations, json) => {\n        resolve({ scene, scenes, cameras, animations, json });\n      },\n      e => {\n        reject(e);\n      }\n    )\n  );\n\n  const envMap = await CachedEnvMapTexture;\n\n  gltf.scene.traverse(object => {\n    // GLTFLoader sets matrixAutoUpdate on animated objects, we want to keep the defaults\n    object.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate;\n\n    if (object.material && object.material.type === \"MeshStandardMaterial\") {\n      if (preferredTechnique === \"KHR_materials_unlit\") {\n        object.material = MobileStandardMaterial.fromStandardMaterial(object.material);\n      } else {\n        object.material.envMap = envMap;\n        object.material.needsUpdate = true;\n      }\n    }\n  });\n\n  if (fileMap) {\n    // The GLTF is now cached as a THREE object, we can get rid of the original blobs\n    Object.keys(fileMap).forEach(URL.revokeObjectURL);\n  }\n\n  return gltf;\n}\n\n/**\n * Loads a GLTF model, optionally recursively \"inflates\" the child nodes of a model into a-entities and sets\n * whitelisted components on them if defined in the node's extras.\n * @namespace gltf\n * @component gltf-model-plus\n */\nAFRAME.registerComponent(\"gltf-model-plus\", {\n  schema: {\n    src: { type: \"string\" },\n    contentType: { type: \"string\" },\n    useCache: { default: true },\n    inflate: { default: false },\n    modelToWorldScale: { type: \"number\", default: 1 }\n  },\n\n  init() {\n    this.preferredTechnique =\n      window.APP && window.APP.quality === \"low\" ? \"KHR_materials_unlit\" : \"pbrMetallicRoughness\";\n    this.loadTemplates();\n  },\n\n  update() {\n    this.applySrc(this.data.src, this.data.contentType);\n  },\n\n  loadTemplates() {\n    this.templates = {};\n    this.el.querySelectorAll(\":scope > template\").forEach(templateEl => {\n      const root = document.importNode(templateEl.firstElementChild || templateEl.content.firstElementChild, true);\n      this.templates[templateEl.getAttribute(\"data-name\")] = root;\n    });\n  },\n\n  async loadModel(src, contentType, technique, useCache) {\n    if (useCache) {\n      if (!GLTFCache[src]) {\n        GLTFCache[src] = await loadGLTF(src, contentType, technique);\n      }\n\n      return cloneGltf(GLTFCache[src]);\n    } else {\n      return await loadGLTF(src, contentType, technique);\n    }\n  },\n\n  async applySrc(src, contentType) {\n    try {\n      // If the src attribute is a selector, get the url from the asset item.\n      if (src && src.charAt(0) === \"#\") {\n        const assetEl = document.getElementById(src.substring(1));\n        src = assetEl.getAttribute(\"src\");\n      }\n\n      if (src === this.lastSrc) return;\n      this.lastSrc = src;\n\n      if (!src) {\n        if (this.inflatedEl) {\n          console.warn(\"gltf-model-plus set to an empty source, unloading inflated model.\");\n          this.removeInflatedEl();\n        }\n        return;\n      }\n\n      const gltf = await this.loadModel(src, contentType, this.preferredTechnique, this.data.useCache);\n\n      // If we started loading something else already\n      // TODO: there should be a way to cancel loading instead\n      if (src != this.lastSrc) return;\n\n      // If we had inflated something already before, clean that up\n      this.removeInflatedEl();\n\n      this.model = gltf.scene || gltf.scenes[0];\n      this.model.animations = gltf.animations;\n\n      if (gltf.animations.length > 0) {\n        this.el.setAttribute(\"animation-mixer\", {});\n        this.el.components[\"animation-mixer\"].initMixer(gltf.animations);\n      }\n\n      let object3DToSet = this.model;\n      if (\n        this.data.inflate &&\n        (this.inflatedEl = inflateEntities(this.model, this.templates, true, this.data.modelToWorldScale))\n      ) {\n        this.el.appendChild(this.inflatedEl);\n\n        object3DToSet = this.inflatedEl.object3D;\n        // TODO: Still don't fully understand the lifecycle here and how it differs between browsers, we should dig in more\n        // Wait one tick for the appended custom elements to be connected before attaching templates\n        await nextTick();\n        if (src != this.lastSrc) return; // TODO: there must be a nicer pattern for this\n        for (const name in this.templates) {\n          attachTemplate(this.el, name, this.templates[name]);\n        }\n      }\n\n      // The call to setObject3D below recursively clobbers any `el` backreferences to entities\n      // in the entire inflated entity graph to point to `object3DToSet`.\n      //\n      // We don't want those overwritten, since lots of code assumes `object3d.el` points to the relevant\n      // A-Frame entity for that three.js object, so we back them up and re-wire them here. If we didn't do\n      // this, all the `el` properties on these object3ds would point to the `object3DToSet` which is either\n      // the model or the root GLTF inflated entity.\n      const rewires = [];\n\n      object3DToSet.traverse(o => {\n        const el = o.el;\n        if (el) rewires.push(() => (o.el = el));\n      });\n\n      this.el.setObject3D(\"mesh\", object3DToSet);\n\n      rewires.forEach(f => f());\n\n      this.el.emit(\"model-loaded\", { format: \"gltf\", model: this.model });\n    } catch (e) {\n      delete GLTFCache[src];\n      console.error(\"Failed to load glTF model\", e, this);\n      this.el.emit(\"model-error\", { format: \"gltf\", src });\n    }\n  },\n\n  removeInflatedEl() {\n    if (this.inflatedEl) {\n      this.inflatedEl.parentNode.removeChild(this.inflatedEl);\n      delete this.inflatedEl;\n    }\n  }\n});\n","export function findAncestorWithComponent(entity, componentName) {\n  while (entity && !(entity.components && entity.components[componentName])) {\n    entity = entity.parentNode;\n  }\n  return entity;\n}\n","import { avatars } from \"../assets/avatars/avatars.js\";\n\nconst names = [\n  \"Baers-Pochard\",\n  \"Baikal-Teal\",\n  \"Barrows-Goldeneye\",\n  \"Blue-Billed\",\n  \"Blue-Duck\",\n  \"Blue-Winged\",\n  \"Brown-Teal\",\n  \"Bufflehead\",\n  \"Canvasback\",\n  \"Cape-Shoveler\",\n  \"Chestnut-Teal\",\n  \"Chiloe-Wigeon\",\n  \"Cinnamon-Teal\",\n  \"Comb-Duck\",\n  \"Common-Eider\",\n  \"Common-Goldeneye\",\n  \"Common-Merganser\",\n  \"Common-Pochard\",\n  \"Common-Scoter\",\n  \"Common-Shelduck\",\n  \"Cotton-Pygmy\",\n  \"Crested-Duck\",\n  \"Crested-Shelduck\",\n  \"Eatons-Pintail\",\n  \"Falcated\",\n  \"Ferruginous\",\n  \"Freckled-Duck\",\n  \"Gadwall\",\n  \"Garganey\",\n  \"Greater-Scaup\",\n  \"Green-Pygmy\",\n  \"Grey-Teal\",\n  \"Hardhead\",\n  \"Harlequin\",\n  \"Hartlaubs\",\n  \"Hooded-Merganser\",\n  \"Hottentot-Teal\",\n  \"Kelp-Goose\",\n  \"King-Eider\",\n  \"Lake-Duck\",\n  \"Laysan-Duck\",\n  \"Lesser-Scaup\",\n  \"Long-Tailed\",\n  \"Maccoa-Duck\",\n  \"Mallard\",\n  \"Mandarin\",\n  \"Marbled-Teal\",\n  \"Mellers-Duck\",\n  \"Merganser\",\n  \"Northern-Pintail\",\n  \"Orinoco-Goose\",\n  \"Paradise-Shelduck\",\n  \"Plumed-Whistler\",\n  \"Puna-Teal\",\n  \"Pygmy-Goose\",\n  \"Radjah-Shelduck\",\n  \"Red-Billed\",\n  \"Red-Crested\",\n  \"Red-Shoveler\",\n  \"Ring-Necked\",\n  \"Ringed-Teal\",\n  \"Rosy-Billed\",\n  \"Ruddy-Shelduck\",\n  \"Salvadoris-Teal\",\n  \"Scaly-Sided\",\n  \"Shelduck\",\n  \"Shoveler\",\n  \"Silver-Teal\",\n  \"Smew\",\n  \"Spectacled-Eider\",\n  \"Spot-Billed\",\n  \"Spotted-Whistler\",\n  \"Steamerduck\",\n  \"Stellers-Eider\",\n  \"Sunda-Teal\",\n  \"Surf-Scoter\",\n  \"Tufted-Duck\",\n  \"Velvet-Scoter\",\n  \"Wandering-Whistler\",\n  \"Whistling-duck\",\n  \"White-Backed\",\n  \"White-Cheeked\",\n  \"White-Winged\",\n  \"Wigeon\",\n  \"Wood-Duck\",\n  \"Yellow-Billed\"\n];\n\nfunction selectRandom(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexport function generateRandomName() {\n  return `${selectRandom(names)}-${Math.floor(10000 + Math.random() * 10000)}`;\n}\n\nexport const avatarIds = avatars.map(av => av.id);\n\nexport function generateDefaultProfile() {\n  return {\n    avatarId: selectRandom(avatarIds)\n  };\n}\n","const qs = new URLSearchParams(location.search);\n\nexport default function qsTruthy(param) {\n  const val = qs.get(param);\n  // if the param exists but is not set (e.g. \"?foo&bar\"), its value is the empty string.\n  return val === \"\" || /1|on|true/i.test(val);\n}\n","const THREE = AFRAME.THREE;\n\nfunction checkFloatTextureSupport() {\n  const renderer = new THREE.WebGLRenderer();\n\n  const scene = new THREE.Scene();\n  const size = 2;\n  const data = new Float32Array(size * size * 4);\n  const dataTexture = new THREE.DataTexture(data, size, size, THREE.RGBAFormat, THREE.FloatType);\n  const box = new THREE.Mesh(new THREE.PlaneBufferGeometry(1, 1), new THREE.MeshBasicMaterial({ map: dataTexture }));\n  box.material.map.needsUpdate = true;\n  scene.add(box);\n\n  renderer.render(scene, new THREE.Camera());\n  const result = renderer.context.getError() === 0;\n  renderer.dispose();\n  return result;\n}\n\nexport function patchWebGLRenderingContext() {\n  if (/Android.+Firefox/.test(navigator.userAgent)) {\n    // It appears that Galaxy S6 devices falsely report that they support\n    // OES_texture_float in Firefox. This workaround disables float textures\n    // for those devices.\n    // See https://github.com/mozilla/hubs/issues/32 and\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1338656\n    const originalGetExtension = WebGLRenderingContext.prototype.getExtension;\n    const supportsFloatTextures = checkFloatTextureSupport();\n    WebGLRenderingContext.prototype.getExtension = function patchedGetExtension(name) {\n      if (name === \"OES_texture_float\" && !supportsFloatTextures) {\n        return null;\n      }\n      return originalGetExtension.call(this, name);\n    };\n  }\n}\n","/**\n * Instantiates and updates a THREE.AnimationMixer on an entity.\n * @component animation-mixer\n */\nAFRAME.registerComponent(\"animation-mixer\", {\n  initMixer(animations) {\n    this.mixer = new THREE.AnimationMixer(this.el.object3D);\n    this.el.object3D.animations = animations;\n    this.animations = animations;\n  },\n\n  tick: function(t, dt) {\n    if (this.mixer) {\n      this.mixer.update(dt / 1000);\n    }\n  }\n});\n","/**\n * Emits audioFrequencyChange events based on a networked audio source\n * @namespace avatar\n * @component networked-audio-analyser\n */\nAFRAME.registerComponent(\"networked-audio-analyser\", {\n  async init() {\n    this.volume = 0;\n    this.prevVolume = 0;\n    this.smoothing = 0.3;\n    this.threshold = 0.01;\n    this.el.addEventListener(\"sound-source-set\", event => {\n      const ctx = THREE.AudioContext.getContext();\n      this.analyser = ctx.createAnalyser();\n      this.analyser.fftSize = 32;\n      this.levels = new Uint8Array(this.analyser.frequencyBinCount);\n      event.detail.soundSource.connect(this.analyser);\n    });\n  },\n\n  tick: function() {\n    if (!this.analyser) return;\n\n    // take care with compatibility, e.g. safari doesn't support getFloatTimeDomainData\n    this.analyser.getByteTimeDomainData(this.levels);\n\n    let sum = 0;\n    for (let i = 0; i < this.levels.length; i++) {\n      const amplitude = (this.levels[i] - 128) / 128;\n      sum += amplitude * amplitude;\n    }\n    let currVolume = Math.sqrt(sum / this.levels.length);\n    if (currVolume < this.threshold) {\n      currVolume = 0;\n    }\n    this.volume = this.smoothing * currVolume + (1 - this.smoothing) * this.prevVolume;\n    this.prevVolume = this.volume;\n  }\n});\n\n/**\n * Sets an entity's scale base on audioFrequencyChange events.\n * @namespace avatar\n * @component scale-audio-feedback\n */\nAFRAME.registerComponent(\"scale-audio-feedback\", {\n  schema: {\n    minScale: { default: 1 },\n    maxScale: { default: 1.5 }\n  },\n\n  tick() {\n    // TODO: come up with a cleaner way to handle this.\n    // bone's are \"hidden\" by scaling them with bone-visibility, without this we would overwrite that.\n    if (!this.el.object3D.visible) return;\n\n    const { minScale, maxScale } = this.data;\n\n    const audioAnalyser = this.el.components[\"networked-audio-analyser\"];\n\n    if (!audioAnalyser) return;\n\n    const scale = Math.min(maxScale, minScale + (maxScale - minScale) * audioAnalyser.volume * 8);\n    this.el.object3D.scale.setScalar(scale);\n    this.el.object3D.matrixNeedsUpdate = true;\n  }\n});\n","const VERTEX_SHADER = `\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n  #include <uv_vertex>\n  #include <uv2_vertex>\n  #include <color_vertex>\n  #include <skinbase_vertex>\n\n  #include <begin_vertex>\n  #include <morphtarget_vertex>\n  #include <skinning_vertex>\n  #include <project_vertex>\n  #include <logdepthbuf_vertex>\n\n  #include <worldpos_vertex>\n  #include <clipping_planes_vertex>\n  #include <fog_vertex>\n}\n`;\n\nconst FRAGMENT_SHADER = `\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <aomap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n  #include <clipping_planes_fragment>\n\n  vec4 diffuseColor = vec4(diffuse, opacity);\n  ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n  vec3 totalEmissiveRadiance = emissive;\n\n  #include <logdepthbuf_fragment>\n  #include <map_fragment>\n  #include <color_fragment>\n  #include <alphatest_fragment>\n  #include <emissivemap_fragment>\n\n  reflectedLight.indirectDiffuse += vec3(1.0);\n\n  #include <aomap_fragment>\n\n  reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n  vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n  gl_FragColor = vec4(outgoingLight, diffuseColor.a);\n\n  #include <premultiplied_alpha_fragment>\n  #include <tonemapping_fragment>\n  #include <encodings_fragment>\n  #include <fog_fragment>\n}\n`;\n\nexport default class MobileStandardMaterial extends THREE.ShaderMaterial {\n  type = \"MobileStandardMaterial\";\n  isMobileStandardMaterial = true;\n  static fromStandardMaterial(material) {\n    const parameters = {\n      vertexShader: VERTEX_SHADER,\n      fragmentShader: FRAGMENT_SHADER,\n      uniforms: {\n        uvTransform: { value: new THREE.Matrix3() },\n        diffuse: { value: material.color },\n        opacity: { value: material.opacity },\n        map: { value: material.map },\n        aoMapIntensity: { value: material.aoMapIntensity },\n        aoMap: { value: material.aoMap },\n        emissive: { value: material.emissive },\n        emissiveMap: { value: material.emissiveMap }\n      },\n      fog: true,\n      lights: false,\n      opacity: material.opacity,\n      transparent: material.transparent,\n      skinning: material.skinning,\n      morphTargets: material.morphTargets\n    };\n\n    const mobileMaterial = new MobileStandardMaterial(parameters);\n\n    mobileMaterial.color = material.color;\n    mobileMaterial.map = material.map;\n    mobileMaterial.aoMap = material.aoMap;\n    mobileMaterial.aoMapIntensity = material.aoMapIntensity;\n    mobileMaterial.emissive = material.emissive;\n    mobileMaterial.emissiveMap = material.emissiveMap;\n\n    return mobileMaterial;\n  }\n  clone() {\n    return MobileStandardMaterial.fromStandardMaterial(this);\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posx-d235fb97df77b607be04b84125f40e7c.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negx-35034574e114423babdea92b6a2eb97a.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posy-d0c4e1e7979d75923d4d8b49c191bc6e.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negy-35808d21d1d17ac1b84d3184e365093b.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posz-de29aa8396196e4b040cd5305e351dbe.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negz-d73d18a8b7994524dc39a6ea3fcf43fc.jpg\";","module.exports = \"if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo) {\\n  float ratio = 0.0;\\n\\n  if (hubs_EnableSweepingEffect) {\\n    float size = hubs_SweepParams.t - hubs_SweepParams.s;\\n    float line = mod(hubs_Time / 3000.0 * size, size * 2.0) + hubs_SweepParams.s - size / 2.0;\\n\\n    if (hubs_WorldPosition.y < line) {\\n      // Highlight with a sweeping gradient.\\n      ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / size * 3.0);\\n    }\\n  }\\n\\n  // Highlight with a gradient falling off with distance.\\n  float pulse = 9.0 + 3.0 * (sin(hubs_Time / 1000.0) + 1.0);\\n\\n  if (hubs_HighlightInteractorOne) {\\n    float dist1 = distance(hubs_WorldPosition, hubs_InteractorOnePos);\\n    ratio += -min(1.0, pow(dist1 * pulse, 3.0)) + 1.0;\\n  } \\n\\n  if (hubs_HighlightInteractorTwo) {\\n    float dist2 = distance(hubs_WorldPosition, hubs_InteractorTwoPos);\\n    ratio += -min(1.0, pow(dist2 * pulse, 3.0)) + 1.0;\\n  }\\n\\n  ratio = min(1.0, ratio);\\n\\n  // Gamma corrected highlight color\\n  vec3 highlightColor = vec3(0.184, 0.499, 0.933);\\n\\n  gl_FragColor.rgb = (gl_FragColor.rgb * (1.0 - ratio)) + (highlightColor * ratio);\\n}\\n\"","export const Layers = {\n  // Layers 0 - 2 reserverd by ThreeJS and AFrame.\n  reflection: 3\n};\n\n/**\n * Sets layer flags on the underlying Object3D\n * @namespace environment\n * @component layers\n */\nAFRAME.registerComponent(\"layers\", {\n  schema: {\n    reflection: { type: \"boolean\", default: false },\n    inWorldHud: { type: \"boolean\", default: false },\n    exclusive: { type: \"boolean\", default: false } // if true, only these layers will be set\n  },\n  init() {\n    this.update = this.update.bind(this);\n    this.el.addEventListener(\"model-loaded\", this.update);\n  },\n  update(oldData) {\n    const obj = this.el.object3D;\n\n    if (this.data.exclusive) {\n      obj.traverse(o => (o.layers.mask = 0));\n    }\n\n    for (const [name, layer] of Object.entries(Layers)) {\n      const oldValue = oldData[name];\n      const newValue = this.data[name];\n\n      if (oldValue !== newValue) {\n        if (newValue) {\n          obj.traverse(o => o.layers.enable(layer));\n        } else {\n          obj.traverse(o => o.layers.disable(layer));\n        }\n      }\n    }\n  },\n  remove() {\n    this.el.removeEventListener(\"model-loaded\", this.update);\n  }\n});\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\n/**\n * Loops the given clip using this entity's animation mixer\n * @component loop-animation\n */\nAFRAME.registerComponent(\"loop-animation\", {\n  schema: {\n    clip: { type: \"string\" }\n  },\n\n  init() {\n    this.mixerEl = findAncestorWithComponent(this.el, \"animation-mixer\");\n\n    if (!this.mixerEl) {\n      console.warn(\"loop-animation component could not find an animation-mixer in its ancestors.\");\n      return;\n    }\n\n    this.updateClip();\n  },\n\n  update(oldData) {\n    if (oldData.clip !== this.data.clip && this.mixerEl) {\n      this.updateClip();\n    }\n  },\n\n  updateClip() {\n    const { mixer, animations } = this.mixerEl.components[\"animation-mixer\"];\n    const clipName = this.data.clip;\n\n    if (animations.length === 0) {\n      return;\n    }\n\n    let clip;\n\n    if (!clipName) {\n      clip = animations[0];\n    } else {\n      clip = animations.find(({ name }) => name === clipName);\n    }\n\n    if (!clip) {\n      return;\n    }\n\n    const action = mixer.clipAction(clip, this.el.object3D);\n    action.enabled = true;\n    action.setLoop(THREE.LoopRepeat, Infinity).play();\n    this.currentAction = action;\n  },\n\n  destroy() {\n    if (this.currentAction) {\n      this.currentAction.enabled = false;\n      this.currentAction.stop();\n    }\n  }\n});\n","const { detect } = require(\"detect-browser\");\n\nconst browser = detect();\n\n// Precision on device detection is fuzzy -- we can sometimes know if a device is definitely\n// available, or definitely *not* available, and assume it may be available otherwise.\nexport const VR_DEVICE_AVAILABILITY = {\n  yes: \"yes\", // Implies VR can be launched into on this device immediately, in this browser\n  no: \"no\", // Implies this VR device is definitely not supported regardless of browser\n  maybe: \"maybe\" // Implies this device may support this VR platform, but may not be installed or in a compatible browser\n};\n\nfunction isMaybeGearVRCompatibleDevice(ua) {\n  return /\\WAndroid\\W/.test(ua);\n}\n\nfunction isMaybeDaydreamCompatibleDevice(ua) {\n  return /\\WAndroid\\W/.test(ua);\n}\n\n// Blacklist of VR device name regex matchers that we do not want to consider as valid VR devices\n// that can be entered into as a \"generic\" entry flow.\nconst GENERIC_ENTRY_TYPE_DEVICE_BLACKLIST = [/cardboard/i];\n\nexport function detectInHMD() {\n  const ua = navigator.userAgent;\n  const isFirefoxReality = /Firefox/.test(ua) && /Android/.test(ua) && window.hasNativeWebVRImplementation;\n  const isOculusBrowser = /Oculus/.test(ua);\n  return isOculusBrowser || isFirefoxReality;\n}\n\n// Tries to determine VR entry compatibility regardless of the current browser.\n//\n// For each VR \"entry type\", returns VR_DEVICE_AVAILABILITY.yes if that type can be launched into directly from this browser\n// on this device, returns VR_DEVICE_AVAILABILITY.no if that type is known to not be possible to ever use on this device no matter what,\n// and VR_DEVICE_AVAILABILITY.maybe if the device potentially could support that type if a different browser was running, or if\n// the software was setup, an HMD was purchased, etc.\n//\n// When \"yes\" or \"maybe\", we should present the option. If \"maybe\", when chosen try to get them into a compatible browser.\n// Once in a compatible browser, we should assume it will work (if it doesn't, it's because they don't have the headset,\n// haven't installed the software, our guess about their phone was wrong, etc.)\n//\n// At the time of this writing there are the following VR \"entry types\" that will be validated by this method:\n//\n// - screen: Enter \"on-screen\" in 2D\n// - generic: Generic WebVR (platform/OS agnostic indicator if a general 'Enter VR' option should be presented.)\n// - daydream: Google Daydream\n// - gearvr: Oculus GearVR\n// - cardboard: Google Cardboard\n//\n// This function also detects if the user is already in a headset, and returns the isInHMD key to be `true` if so.\nexport async function getAvailableVREntryTypes() {\n  const ua = navigator.userAgent;\n  const isSamsungBrowser = browser.name === \"chrome\" && /SamsungBrowser/.test(ua);\n\n  // This needs to be kept up-to-date with the latest browsers that can support VR and Hubs.\n  // Checking for navigator.getVRDisplays always passes b/c of polyfill.\n  const isWebVRCapableBrowser = window.hasNativeWebVRImplementation;\n\n  const isDaydreamCapableBrowser = !!(isWebVRCapableBrowser && browser.name === \"chrome\" && !isSamsungBrowser);\n  const isIDevice = AFRAME.utils.device.isIOS();\n  const isFirefoxBrowser = browser.name === \"firefox\";\n  const isUIWebView = typeof navigator.mediaDevices === \"undefined\";\n\n  const safari = isIDevice\n    ? !isUIWebView\n      ? VR_DEVICE_AVAILABILITY.yes\n      : VR_DEVICE_AVAILABILITY.maybe\n    : VR_DEVICE_AVAILABILITY.no;\n\n  const displays = isWebVRCapableBrowser ? await navigator.getVRDisplays() : [];\n\n  const isOculusBrowser = /Oculus/.test(ua);\n  const isInHMD = detectInHMD();\n\n  const screen = isInHMD\n    ? VR_DEVICE_AVAILABILITY.no\n    : isIDevice && isUIWebView\n      ? VR_DEVICE_AVAILABILITY.maybe\n      : VR_DEVICE_AVAILABILITY.yes;\n\n  // HACK -- we prompt the user to install firefox if they click the VR button on a non-WebVR compatible\n  // browser. once we change this (ie when Chrome has VR support) then this check can be removed. Without this\n  // check if you have FF on Mac/Linux you'll get the confusing flow of having a VR button but then\n  // being asked to download FF.\n  const isNonWebVRFirefox = !isWebVRCapableBrowser && isFirefoxBrowser;\n  let generic =\n    AFRAME.utils.device.isMobile() || isNonWebVRFirefox ? VR_DEVICE_AVAILABILITY.no : VR_DEVICE_AVAILABILITY.maybe;\n  let cardboard = VR_DEVICE_AVAILABILITY.no;\n\n  // We only consider GearVR support as \"maybe\" and never \"yes\". The only browser\n  // that will detect GearVR outside of VR is Samsung Internet, and we'd prefer to launch into Oculus\n  // Browser for now since Samsung Internet requires an additional WebVR installation + flag, so return \"maybe\".\n  //\n  // If we are in Oculus Browser (ie, we are literally wearing a GearVR) then return 'yes'.\n  let gearvr = VR_DEVICE_AVAILABILITY.no;\n  if (isMaybeGearVRCompatibleDevice(ua)) {\n    gearvr = isOculusBrowser ? VR_DEVICE_AVAILABILITY.yes : VR_DEVICE_AVAILABILITY.maybe;\n  }\n\n  // For daydream detection, we first check if they are on an Android compatible device, and assume they\n  // may support daydream *unless* this browser has WebVR capabilities, in which case we can do better.\n  let daydream =\n    isMaybeDaydreamCompatibleDevice(ua) && !isInHMD ? VR_DEVICE_AVAILABILITY.maybe : VR_DEVICE_AVAILABILITY.no;\n\n  if (isWebVRCapableBrowser) {\n    // Generic is supported for non-blacklisted devices and presentable HMDs.\n    generic = displays.find(\n      d => d.capabilities.canPresent && !GENERIC_ENTRY_TYPE_DEVICE_BLACKLIST.find(r => r.test(d.displayName))\n    )\n      ? VR_DEVICE_AVAILABILITY.yes\n      : VR_DEVICE_AVAILABILITY.no;\n\n    cardboard =\n      !isIDevice &&\n      !isFirefoxBrowser &&\n      displays.find(d => d.capabilities.canPresent && /cardboard/i.test(d.displayName))\n        ? VR_DEVICE_AVAILABILITY.yes\n        : VR_DEVICE_AVAILABILITY.no;\n\n    // For daydream detection, in a WebVR browser we can increase confidence in daydream compatibility.\n    const hasDaydreamWebVRDevice = displays.find(d => /daydream/i.test(d.displayName));\n\n    if (hasDaydreamWebVRDevice) {\n      // If we detected daydream via WebVR\n      daydream = VR_DEVICE_AVAILABILITY.yes;\n      generic = VR_DEVICE_AVAILABILITY.no;\n    } else if (isDaydreamCapableBrowser) {\n      // If we didn't detect daydream in a daydream capable browser, we definitely can't run daydream at all.\n      daydream = VR_DEVICE_AVAILABILITY.no;\n    }\n  }\n\n  return { screen, generic, gearvr, daydream, cardboard, isInHMD, safari };\n}\n","import { detectOS } from \"detect-browser\";\n\nexport function disableiOSZoom() {\n  if (detectOS(navigator.userAgent) !== \"iOS\") return;\n\n  let lastTouchAtMs = 0;\n\n  document.addEventListener(\"touchmove\", ev => {\n    if (ev.scale === 1) return;\n\n    ev.preventDefault();\n  });\n\n  document.addEventListener(\"touchend\", ev => {\n    const now = new Date().getTime();\n    const isDoubleTouch = now - lastTouchAtMs <= 300;\n    lastTouchAtMs = now;\n\n    if (isDoubleTouch) {\n      ev.preventDefault();\n    }\n  });\n}\n","import \"./components/gltf-model-plus\";\n\nAFRAME.GLTFModelPlus.registerComponent(\"duck\", \"duck\");\nAFRAME.GLTFModelPlus.registerComponent(\"quack\", \"quack\");\nAFRAME.GLTFModelPlus.registerComponent(\"sound\", \"sound\");\nAFRAME.GLTFModelPlus.registerComponent(\"collision-filter\", \"collision-filter\");\nAFRAME.GLTFModelPlus.registerComponent(\"css-class\", \"css-class\");\nAFRAME.GLTFModelPlus.registerComponent(\"interactable\", \"css-class\", (el, componentName) => {\n  el.setAttribute(componentName, \"interactable\");\n});\nAFRAME.GLTFModelPlus.registerComponent(\"super-spawner\", \"super-spawner\");\nAFRAME.GLTFModelPlus.registerComponent(\"gltf-model-plus\", \"gltf-model-plus\");\nAFRAME.GLTFModelPlus.registerComponent(\"media-loader\", \"media-loader\");\nAFRAME.GLTFModelPlus.registerComponent(\"body\", \"body\");\nAFRAME.GLTFModelPlus.registerComponent(\"hide-when-quality\", \"hide-when-quality\");\nAFRAME.GLTFModelPlus.registerComponent(\"light\", \"light\");\nAFRAME.GLTFModelPlus.registerComponent(\"ambient-light\", \"ambient-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"directional-light\", \"directional-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"hemisphere-light\", \"hemisphere-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"point-light\", \"point-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"spot-light\", \"spot-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"skybox\", \"skybox\");\nAFRAME.GLTFModelPlus.registerComponent(\"layers\", \"layers\");\nAFRAME.GLTFModelPlus.registerComponent(\"shadow\", \"shadow\");\nAFRAME.GLTFModelPlus.registerComponent(\"water\", \"water\");\nAFRAME.GLTFModelPlus.registerComponent(\"scale-audio-feedback\", \"scale-audio-feedback\");\nAFRAME.GLTFModelPlus.registerComponent(\"animation-mixer\", \"animation-mixer\");\nAFRAME.GLTFModelPlus.registerComponent(\"loop-animation\", \"loop-animation\");\nAFRAME.GLTFModelPlus.registerComponent(\"shape\", \"shape\");\nAFRAME.GLTFModelPlus.registerComponent(\"heightfield\", \"heightfield\");\nAFRAME.GLTFModelPlus.registerComponent(\n  \"box-collider\",\n  \"shape\",\n  (() => {\n    const euler = new THREE.Euler();\n    return (el, componentName, componentData) => {\n      const { scale, rotation } = componentData;\n      euler.set(rotation.x, rotation.y, rotation.z);\n      const orientation = new THREE.Quaternion().setFromEuler(euler);\n      el.setAttribute(componentName, {\n        shape: \"box\",\n        offset: componentData.position,\n        halfExtents: { x: scale.x / 2, y: scale.y / 2, z: scale.z / 2 },\n        orientation\n      });\n    };\n  })()\n);\nAFRAME.GLTFModelPlus.registerComponent(\"visible\", \"visible\", (el, componentName, componentData) => {\n  if (typeof componentData === \"object\") {\n    el.setAttribute(componentName, componentData.visible);\n  } else {\n    el.setAttribute(componentName, componentData);\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"spawn-point\", \"spawn-point\");\nAFRAME.GLTFModelPlus.registerComponent(\"hoverable\", \"hoverable\");\nAFRAME.GLTFModelPlus.registerComponent(\"sticky-zone\", \"sticky-zone\");\nAFRAME.GLTFModelPlus.registerComponent(\"nav-mesh\", \"nav-mesh\", (el, _componentName, componentData) => {\n  const nav = AFRAME.scenes[0].systems.nav;\n  const zone = componentData.zone || \"character\";\n  let found = false;\n  el.object3D.traverse(node => {\n    if (node.isMesh && !found) {\n      found = true;\n      nav.loadMesh(node, zone);\n    }\n  });\n  // There isn't actually an a-frame nav-mesh component, but we want to tag this el as a nav-mesh since\n  // nav-mesh-helper will query for it later.\n  el.setAttribute(\"nav-mesh\");\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"pinnable\", \"pinnable\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"media\", \"media\", (el, componentName, componentData) => {\n  if (componentData.id) {\n    el.setAttribute(\"networked\", {\n      template: \"#interactable-media\",\n      owner: \"scene\",\n      persistent: true,\n      networkId: componentData.id\n    });\n  }\n\n  el.setAttribute(\"media-loader\", { src: componentData.src, resize: true, resolve: true, fileIsOwned: true });\n\n  if (componentData.pageIndex) {\n    el.setAttribute(\"media-pager\", { index: componentData.pageIndex });\n  }\n\n  if (componentData.paused !== undefined) {\n    el.setAttribute(\"media-video\", { videoPaused: componentData.paused });\n  }\n\n  if (componentData.time) {\n    el.setAttribute(\"media-video\", { time: componentData.time });\n  }\n});\n\nfunction mediaInflator(el, componentName, componentData, components) {\n  if (components.networked) {\n    el.setAttribute(\"networked\", {\n      template: componentData.controls ? \"#static-controlled-media\" : \"#static-media\",\n      owner: \"scene\",\n      persistent: true,\n      networkId: components.networked.id\n    });\n  }\n\n  const mediaOptions = {\n    projection: componentData.projection\n  };\n\n  if (componentName === \"video\") {\n    mediaOptions.videoPaused = !componentData.autoPlay;\n    mediaOptions.volume = componentData.volume;\n    mediaOptions.loop = componentData.loop;\n    mediaOptions.audioType = componentData.audioType;\n\n    if (componentData.audioType === \"pannernode\") {\n      mediaOptions.distanceModel = componentData.distanceModel;\n      mediaOptions.rolloffFactor = componentData.rolloffFactor;\n      mediaOptions.refDistance = componentData.refDistance;\n      mediaOptions.maxDistance = componentData.maxDistance;\n      mediaOptions.coneInnerAngle = componentData.coneInnerAngle;\n      mediaOptions.coneOuterAngle = componentData.coneOuterAngle;\n      mediaOptions.coneOuterGain = componentData.coneOuterGain;\n    }\n  }\n\n  el.setAttribute(\"media-loader\", {\n    src: componentData.src,\n    resize: true,\n    resolve: true,\n    fileIsOwned: true,\n    mediaOptions\n  });\n}\n\nAFRAME.GLTFModelPlus.registerComponent(\"image\", \"image\", mediaInflator);\nAFRAME.GLTFModelPlus.registerComponent(\"video\", \"video\", mediaInflator);\n","import Store from \"./storage/store\";\n\nexport class App {\n  constructor() {\n    this.scene = null;\n    this.quality = \"low\";\n    this.store = new Store();\n  }\n\n  setQuality(quality) {\n    if (this.quality === quality) {\n      return false;\n    }\n\n    this.quality = quality;\n\n    if (this.scene) {\n      this.scene.dispatchEvent(new CustomEvent(\"quality-changed\", { detail: quality }));\n    }\n\n    return true;\n  }\n}\n","export function addAnimationComponents(modelEl) {\n  if (!modelEl.components[\"animation-mixer\"]) {\n    return;\n  }\n\n  if (!modelEl.querySelector(\"[loop-animation]\")) {\n    modelEl.setAttribute(\"loop-animation\", \"\");\n  }\n}\n","const rotation = new THREE.Euler();\nexport function getBox(entity, boxRoot) {\n  const box = new THREE.Box3();\n\n  rotation.copy(entity.object3D.rotation);\n  entity.object3D.rotation.set(0, 0, 0);\n\n  entity.object3D.updateMatrices(true, true);\n  boxRoot.updateMatrices(true, true);\n\n  box.setFromObject(boxRoot);\n\n  if (!box.isEmpty()) {\n    entity.object3D.worldToLocal(box.min);\n    entity.object3D.worldToLocal(box.max);\n    entity.object3D.rotation.copy(rotation);\n    entity.object3D.matrixNeedsUpdate = true;\n  }\n\n  return box;\n}\n\nexport function getScaleCoefficient(length, box) {\n  if (box.isEmpty()) return 1.0;\n\n  const { max, min } = box;\n  const dX = Math.abs(max.x - min.x);\n  const dY = Math.abs(max.y - min.y);\n  const dZ = Math.abs(max.z - min.z);\n  const lengthOfLongestComponent = Math.max(dX, dY, dZ);\n  return length / lengthOfLongestComponent;\n}\n","import { paths } from \"../systems/userinput/paths\";\n\nconst POSES = {\n  open: \"open\",\n  point: \"point\",\n  fist: \"fist\",\n  hold: \"hold\",\n  thumbUp: \"thumbUp\",\n  thumbDown: \"thumbDown\",\n  indexDown: \"indexDown\",\n  pinch: \"pinch\",\n  mrpDown: \"mrpDown\"\n};\n\nexport const LEFT_CONTROLLER_OFFSETS = {\n  default: new THREE.Matrix4(),\n  \"oculus-touch-controls\": new THREE.Matrix4().makeTranslation(-0.025, -0.03, 0.1),\n  \"oculus-go-controls\": new THREE.Matrix4(),\n  \"vive-controls\": new THREE.Matrix4().compose(\n    new THREE.Vector3(0, 0, 0.13),\n    new THREE.Quaternion().setFromEuler(new THREE.Euler(-40 * THREE.Math.DEG2RAD, 0, 0)),\n    new THREE.Vector3(1, 1, 1)\n  ),\n  \"windows-motion-controls\": new THREE.Matrix4().compose(\n    new THREE.Vector3(0, -0.017, 0.13),\n    new THREE.Quaternion().setFromEuler(new THREE.Euler(-40 * THREE.Math.DEG2RAD, 0, 0)),\n    new THREE.Vector3(1, 1, 1)\n  ),\n  \"daydream-controls\": new THREE.Matrix4().makeTranslation(0, 0, -0.04),\n  \"gearvr-controls\": new THREE.Matrix4()\n};\n\nexport const RIGHT_CONTROLLER_OFFSETS = {\n  default: new THREE.Matrix4(),\n  \"oculus-touch-controls\": new THREE.Matrix4().makeTranslation(0.025, -0.03, 0.1),\n  \"oculus-go-controls\": new THREE.Matrix4(),\n  \"vive-controls\": new THREE.Matrix4().compose(\n    new THREE.Vector3(0, 0, 0.13),\n    new THREE.Quaternion().setFromEuler(new THREE.Euler(-40 * THREE.Math.DEG2RAD, 0, 0)),\n    new THREE.Vector3(1, 1, 1)\n  ),\n  \"windows-motion-controls\": new THREE.Matrix4().compose(\n    new THREE.Vector3(0, -0.017, 0.13),\n    new THREE.Quaternion().setFromEuler(new THREE.Euler(-40 * THREE.Math.DEG2RAD, 0, 0)),\n    new THREE.Vector3(1, 1, 1)\n  ),\n  \"daydream-controls\": new THREE.Matrix4().makeTranslation(0, 0, -0.04),\n  \"gearvr-controls\": new THREE.Matrix4()\n};\n\n/**\n * Emits events indicating that avatar hands should be posed differently.\n * @namespace user-input\n * @component hand-controls2\n */\nAFRAME.registerComponent(\"hand-controls2\", {\n  schema: { default: \"left\" },\n\n  getLeftControllerOffset() {\n    if (LEFT_CONTROLLER_OFFSETS[this.connectedController] === undefined) {\n      return LEFT_CONTROLLER_OFFSETS.default;\n    }\n    return LEFT_CONTROLLER_OFFSETS[this.connectedController];\n  },\n\n  getRightControllerOffset() {\n    if (RIGHT_CONTROLLER_OFFSETS[this.connectedController] === undefined) {\n      return RIGHT_CONTROLLER_OFFSETS.default;\n    }\n    return RIGHT_CONTROLLER_OFFSETS[this.connectedController];\n  },\n\n  init() {\n    this.pose = POSES.open;\n    this.el.setAttribute(\"visible\", false);\n\n    this.connectedController = null;\n\n    this.onControllerConnected = this.onControllerConnected.bind(this);\n    this.onControllerDisconnected = this.onControllerDisconnected.bind(this);\n    this.el.addEventListener(\"controllerconnected\", this.onControllerConnected);\n    this.el.addEventListener(\"controllerdisconnected\", this.onControllerDisconnected);\n  },\n\n  update(prevData) {\n    const el = this.el;\n    const hand = this.data;\n\n    const controlConfiguration = {\n      hand: hand,\n      model: false,\n      orientationOffset: { x: 0, y: 0, z: 0 }\n    };\n\n    if (hand !== prevData) {\n      el.setAttribute(\"vive-controls\", controlConfiguration);\n      el.setAttribute(\"oculus-touch-controls\", controlConfiguration);\n      el.setAttribute(\"oculus-go-controls\", controlConfiguration);\n      el.setAttribute(\"windows-motion-controls\", controlConfiguration);\n      el.setAttribute(\"daydream-controls\", controlConfiguration);\n      el.setAttribute(\"gearvr-controls\", controlConfiguration);\n    }\n  },\n\n  poseForFingers(thumb, index, middleRingPinky) {\n    if (!thumb && !index && !middleRingPinky) {\n      return POSES.open;\n    } else if (thumb && index && middleRingPinky) {\n      return POSES.fist;\n    } else if (!thumb && index && middleRingPinky) {\n      return POSES.thumbUp;\n    } else if (!thumb && !index && middleRingPinky) {\n      return POSES.mrpDown;\n    } else if (!thumb && index && !middleRingPinky) {\n      return POSES.indexDown;\n    } else if (thumb && !index && !middleRingPinky) {\n      return POSES.thumbDown;\n    } else if (thumb && index && !middleRingPinky) {\n      return POSES.pinch;\n    } else if (thumb && !index && middleRingPinky) {\n      return POSES.point;\n    }\n\n    console.warn(`Did not find matching pose for thumb ${thumb}, index ${index}, middleRingPinky ${middleRingPinky}`);\n    return POSES.open;\n  },\n\n  tick() {\n    const hand = this.data;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const subpath = hand === \"left\" ? paths.actions.leftHand : paths.actions.rightHand;\n    const hasPose = userinput.get(subpath.pose);\n    const thumb = userinput.get(subpath.thumb);\n    const index = userinput.get(subpath.index);\n    const middleRingPinky = userinput.get(subpath.middleRingPinky);\n    const pose = this.poseForFingers(thumb, index, middleRingPinky);\n    if (pose !== this.pose) {\n      this.el.emit(\"hand-pose\", { previous: this.pose, current: pose });\n      this.pose = pose;\n    }\n\n    this.el.object3D.visible = !!hasPose;\n  },\n\n  // Show controller when connected\n  onControllerConnected(e) {\n    this.connectedController = e.detail.name;\n    this.el.setAttribute(\"visible\", true);\n  },\n\n  // Hide controller on disconnect\n  onControllerDisconnected() {\n    this.connectedController = null;\n    this.el.setAttribute(\"visible\", false);\n  }\n});\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\nimport Linkify from \"react-linkify\";\nimport { toArray as toEmojis } from \"react-emoji-render\";\nimport serializeElement from \"../utils/serialize-element\";\n\nconst messageCanvas = document.createElement(\"canvas\");\nconst emojiRegex = /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|[\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|[\\ud83c[\\ude32-\\ude3a]|[\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/;\nconst urlRegex = /^https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_+.~#?&//=]*)$/;\nconst textureLoader = new THREE.TextureLoader();\n\n// Hacky word wrapping, needed because the SVG conversion doesn't properly deal\n// with wrapping in Firefox for some reason. (The CSS white-space is set to pre)\nconst wordWrap = body => {\n  const maxCharsPerLine = 40;\n  const words = body.split(\" \");\n  const outWords = [];\n  let c = 0;\n\n  for (let i = 0; i < words.length; i++) {\n    const word = words[i];\n\n    if (word.startsWith(\":\") && word.endsWith(\":\")) {\n      c++;\n    } else {\n      c += word.length;\n    }\n\n    outWords.push(word);\n\n    if (c >= maxCharsPerLine) {\n      c = 0;\n      outWords.push(\"\\n\");\n    }\n  }\n\n  return outWords.join(\" \");\n};\n\nconst messageBodyDom = (body, from) => {\n  // Support wrapping text in ` to get monospace, and multiline.\n  const multiLine = body.split(\"\\n\").length > 1;\n  const wrapStyle = multiLine ? styles.messageWrapMulti : styles.messageWrap;\n  const mono = body.startsWith(\"`\") && body.endsWith(\"`\");\n  const messageBodyClasses = {\n    [styles.messageBody]: true,\n    [styles.messageBodyMulti]: multiLine,\n    [styles.messageBodyMono]: mono\n  };\n\n  if (!multiLine) {\n    body = wordWrap(body);\n  }\n\n  const cleanedBody = (mono ? body.substring(1, body.length - 1) : body).trim();\n\n  return (\n    <div className={wrapStyle}>\n      {from && <div className={styles.messageSource}>{from}:</div>}\n      <div className={classNames(messageBodyClasses)}>\n        <Linkify properties={{ target: \"_blank\", rel: \"noopener referrer\" }}>{toEmojis(cleanedBody)}</Linkify>\n      </div>\n    </div>\n  );\n};\n\nfunction renderChatMessage(body, from, allowEmojiRender, lowResolution) {\n  const isOneLine = body.split(\"\\n\").length === 1;\n  const context = messageCanvas.getContext(\"2d\");\n  const emoji = toEmojis(body);\n  const isEmoji =\n    allowEmojiRender &&\n    emoji.length === 1 &&\n    emoji[0].props &&\n    emoji[0].props.children.match &&\n    emoji[0].props.children.match(emojiRegex);\n\n  const el = document.createElement(\"div\");\n  el.setAttribute(\"xmlns\", \"http://www.w3.org/1999/xhtml\");\n  el.setAttribute(\"class\", `${styles.presenceLog} ${styles.presenceLogSpawn}`);\n\n  // The element is added to the DOM in order to have layout compute the width & height,\n  // and then it is removed after being rendered.\n  document.body.appendChild(el);\n\n  const entryDom = (\n    <div\n      className={classNames({\n        [styles.presenceLogEntry]: !isEmoji,\n        [styles.presenceLogEntryOneLine]: !isEmoji && isOneLine,\n        [styles.presenceLogEmoji]: isEmoji\n      })}\n    >\n      {messageBodyDom(body, from)}\n    </div>\n  );\n\n  return new Promise(resolve => {\n    ReactDOM.render(entryDom, el, () => {\n      // Scale by 12x\n      let objectScale = \"8.33%\";\n      let scale = 12;\n\n      if (lowResolution) {\n        // In low res, scale by 4x\n        objectScale = \"25%\";\n        scale = 4;\n      }\n\n      messageCanvas.width = el.offsetWidth * (scale + 0.1);\n      messageCanvas.height = el.offsetHeight * (scale + 0.1);\n\n      const xhtml = encodeURIComponent(`\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${messageCanvas.width}\" height=\"${messageCanvas.height}\">\n            <foreignObject width=\"${objectScale}\" height=\"${objectScale}\" style=\"transform: scale(${scale});\">\n              ${serializeElement(el)}\n            </foreignObject>\n          </svg>\n    `);\n      const img = new Image();\n\n      img.onload = async () => {\n        context.drawImage(img, 0, 0);\n        const blob = await new Promise(resolve => messageCanvas.toBlob(resolve));\n        el.parentNode.removeChild(el);\n        resolve(blob);\n      };\n\n      img.src = \"data:image/svg+xml,\" + xhtml;\n    });\n  });\n}\n\nexport async function createInWorldLogMessage({ name, type, body }) {\n  if (type !== \"chat\") return;\n\n  const lowResolution = AFRAME.utils.device.isMobile();\n  const blob = await renderChatMessage(body, name, false, lowResolution);\n  const entity = document.createElement(\"a-entity\");\n  const meshEntity = document.createElement(\"a-entity\");\n\n  document.querySelector(\"a-scene\").appendChild(entity);\n\n  entity.appendChild(meshEntity);\n  entity.setAttribute(\"follow-in-lower-fov\", {\n    target: \"#player-camera\",\n    offset: { x: 0, y: 0.0, z: -0.8 }\n  });\n\n  const blobUrl = URL.createObjectURL(blob);\n\n  meshEntity.setAttribute(\"animation__float\", {\n    property: \"position\",\n    dur: 10000,\n    from: { x: 0, y: 0, z: 0 },\n    to: { x: 0, y: 0.05, z: -0.05 },\n    easing: \"easeOutQuad\"\n  });\n\n  entity.setAttribute(\"animation__spawn\", {\n    property: \"scale\",\n    dur: 200,\n    from: { x: 0.1, y: 0.1, z: 0.1 },\n    to: { x: 1, y: 1, z: 1 },\n    easing: \"easeOutElastic\"\n  });\n\n  meshEntity.setAttribute(\"animation__opacity\", {\n    property: \"meshMaterial.opacity\",\n    isRawProperty: true,\n    delay: 3000,\n    dur: 8000,\n    from: 1.0,\n    to: 0.0,\n    easing: \"easeInQuad\"\n  });\n\n  meshEntity.addEventListener(\"animationcomplete__opacity\", () => {\n    entity.parentNode.removeChild(entity);\n  });\n\n  textureLoader.load(blobUrl, texture => {\n    const material = new THREE.MeshBasicMaterial();\n    material.transparent = true;\n    material.map = texture;\n    material.generateMipmaps = false;\n    material.needsUpdate = true;\n\n    const geometry = new THREE.PlaneGeometry();\n    const mesh = new THREE.Mesh(geometry, material);\n    meshEntity.setObject3D(\"mesh\", mesh);\n    meshEntity.meshMaterial = material;\n    const scaleFactor = 4000.0 / (lowResolution ? 3.0 : 1.0);\n    meshEntity.object3DMap.mesh.scale.set(texture.image.width / scaleFactor, texture.image.height / scaleFactor, 1);\n  });\n}\n\nexport async function spawnChatMessage(body, from) {\n  if (body.length === 0) return;\n\n  if (body.match(urlRegex)) {\n    document.querySelector(\"a-scene\").emit(\"add_media\", body);\n    return;\n  }\n\n  const blob = await renderChatMessage(body, from, true, false);\n  document.querySelector(\"a-scene\").emit(\"add_media\", new File([blob], \"message.png\", { type: \"image/png\" }));\n}\n\nexport default function ChatMessage(props) {\n  return (\n    <div className={props.className}>\n      {props.maySpawn && (\n        <button\n          className={classNames(styles.iconButton, styles.spawnMessage)}\n          onClick={() => spawnChatMessage(props.body)}\n        />\n      )}\n      {messageBodyDom(props.body, props.name)}\n    </div>\n  );\n}\n\nChatMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.string,\n  className: PropTypes.string\n};\n","// A-Frame blows away any npm debug log filters so this allow the user to set the log filter\n// via the query string.\nimport debug from \"debug\";\nimport qsTruthy from \"./qs_truthy\";\n\nconst qs = new URLSearchParams(location.search);\nconst isDebug = qsTruthy(\"debug\");\nconst logFilter = qs.get(\"log_filter\") || (isDebug && \"naf-janus-adapter:*\");\n\nif (logFilter) {\n  debug.enable(logFilter);\n}\n","const zeroPos = new THREE.Vector3(0, 0, 0);\nconst zeroQuat = new THREE.Quaternion();\nconst oneScale = new THREE.Vector3(1, 1, 1);\nconst identity = new THREE.Matrix4();\nidentity.identity();\n\n// Patch animation system\nconst bindingSetters = THREE.PropertyBinding.prototype.SetterByBindingTypeAndVersioning;\nconst Versioning = THREE.PropertyBinding.prototype.Versioning;\n\n// For all binding types, monkey patch the setters that require world matrix\n// updates to also flip matrixNeedsUpdate\nfor (let i = 0; i < bindingSetters.length; i++) {\n  const setter = bindingSetters[i][Versioning.MatrixWorldNeedsUpdate];\n  if (!setter) continue;\n\n  bindingSetters[i][Versioning.MatrixWorldNeedsUpdate] = function() {\n    const v = setter.apply(this, arguments);\n    this.targetObject.matrixNeedsUpdate = true;\n    return v;\n  };\n}\n\nTHREE.Object3D.prototype.getWorldPosition = function(target) {\n  if (target === undefined) {\n    console.warn(\"THREE.Object3D: .getWorldPosition() target is now required\");\n    target = new THREE.Vector3();\n  }\n\n  // New function, defined below (used instead of updateMatrixWorld)\n  this.updateMatrices();\n\n  return target.setFromMatrixPosition(this.matrixWorld);\n};\n\nTHREE.Object3D.prototype.getWorldQuaternion = (function() {\n  const position = new THREE.Vector3();\n  const scale = new THREE.Vector3();\n\n  return function getWorldQuaternion(target) {\n    if (target === undefined) {\n      console.warn(\"THREE.Object3D: .getWorldQuaternion() target is now required\");\n      target = new THREE.Quaternion();\n    }\n\n    // New function, defined below (used instead of updateMatrixWorld)\n    this.updateMatrices();\n    this.matrixWorld.decompose(position, target, scale);\n\n    return target;\n  };\n})();\n\nTHREE.Object3D.getWorldScale = (function() {\n  const position = new THREE.Vector3();\n  const quaternion = new THREE.Quaternion();\n\n  return function getWorldScale(target) {\n    if (target === undefined) {\n      console.warn(\"THREE.Object3D: .getWorldScale() target is now required\");\n      target = new THREE.Vector3();\n    }\n\n    // New function, defined below (used instead of updateMatrixWorld)\n    this.updateMatrices();\n    this.matrixWorld.decompose(position, quaternion, target);\n\n    return target;\n  };\n})();\n\nconst handleMatrixModification = o => {\n  if (!o.matrixIsModified) {\n    o.matrixIsModified = true;\n\n    if (o.cachedMatrixWorld) {\n      o.cachedMatrixWorld.copy(o.matrixWorld);\n      o.matrixWorld = o.cachedMatrixWorld;\n    }\n  }\n};\n\nconst updateMatrix = THREE.Object3D.prototype.updateMatrix;\nTHREE.Object3D.prototype.updateMatrix = function() {\n  updateMatrix.apply(this, arguments);\n  handleMatrixModification(this);\n};\n\nconst applyMatrix = THREE.Object3D.prototype.applyMatrix;\nTHREE.Object3D.prototype.applyMatrix = function() {\n  applyMatrix.apply(this, arguments);\n  handleMatrixModification(this);\n};\n\n// By the end of this function this.matrix reflects the updated local matrix\n// and this.matrixWorld reflects the updated world matrix, taking into account\n// parent matrices.\n//\n// forceLocalUpdate - Forces the local matrix to be updated regardless of if it has not\n// been marked dirty.\n//\n// forceWorldUpdate - Forces the world matrix to be updated regardless of if the local matrix\n// has been updated since the last update.\n//\n// skipParents - unless true, all parent matricies are updated before updating this object's\n// local and world matrix.\n//\nTHREE.Object3D.prototype.updateMatrices = function(forceLocalUpdate, forceWorldUpdate, skipParents) {\n  if (!this.hasHadFirstMatrixUpdate) {\n    if (\n      !this.position.equals(zeroPos) ||\n      !this.quaternion.equals(zeroQuat) ||\n      !this.scale.equals(oneScale) ||\n      !this.matrix.equals(identity)\n    ) {\n      // Only update the matrix the first time if its non-identity, this way\n      // this.matrixIsModified will remain false until the default\n      // identity matrix is updated.\n      this.updateMatrix();\n    }\n\n    this.hasHadFirstMatrixUpdate = true;\n    this.matrixWorldNeedsUpdate = true;\n    this.cachedMatrixWorld = this.matrixWorld;\n  } else if (this.matrixNeedsUpdate || this.matrixAutoUpdate || forceLocalUpdate) {\n    this.updateMatrix();\n    if (this.matrixNeedsUpdate) this.matrixNeedsUpdate = false;\n  }\n\n  if (!skipParents && this.parent) {\n    this.parent.updateMatrices(false, forceWorldUpdate, false);\n    this.matrixWorldNeedsUpdate = this.matrixWorldNeedsUpdate || this.parent.childrenNeedMatrixWorldUpdate;\n  }\n\n  if (this.matrixWorldNeedsUpdate || forceWorldUpdate) {\n    if (this.parent === null) {\n      this.matrixWorld.copy(this.matrix);\n    } else {\n      // If the matrix is unmodified, it is the identity matrix,\n      // and hence we can use the parent's world matrix directly.\n      //\n      // Note this assumes all callers will either not pass skipParents=true\n      // *or* will update the parent themselves beforehand as is done in\n      // updateMatrixWorld.\n      if (!this.matrixIsModified) {\n        this.matrixWorld = this.parent.matrixWorld;\n      } else {\n        // Once matrixIsModified === true, this.matrixWorld has been updated to be a local\n        // copy, not a reference to this.parent.matrixWorld (see updateMatrix/applyMatrix)\n        this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix);\n      }\n    }\n\n    this.childrenNeedMatrixWorldUpdate = true;\n    this.matrixWorldNeedsUpdate = false;\n  }\n};\n\n// Computes this object's matrices and then the recursively computes the matrices of all the children.\n//\n// forceWorldUpdate - If true and the object is visible, will force the world matrix to be updated for\n// this node and all of its children.\n//\n// includeInvisible - If true, does not ignore non-visible objects.\nTHREE.Object3D.prototype.updateMatrixWorld = function(forceWorldUpdate, includeInvisible) {\n  if (!this.visible && !includeInvisible) return;\n\n  // Do not recurse upwards, since this is recursing downwards\n  this.updateMatrices(false, forceWorldUpdate, true);\n\n  const children = this.children;\n  const forceChildrenWorldUpdate = this.childrenNeedMatrixWorldUpdate || forceWorldUpdate;\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    children[i].updateMatrixWorld(forceChildrenWorldUpdate, includeInvisible);\n  }\n\n  if (this.childrenNeedMatrixWorldUpdate) this.childrenNeedMatrixWorldUpdate = false;\n};\n","import \"./ambient-light\";\nimport \"./animation-mixer\";\nimport \"./audio-feedback\";\nimport \"./css-class\";\nimport \"./directional-light\";\nimport \"./duck\";\nimport \"./gltf-model-plus\";\nimport \"./heightfield\";\nimport \"./hemisphere-light\";\nimport \"./hide-when-quality\";\nimport \"./layers\";\nimport \"./loop-animation\";\nimport \"./media-loader\";\nimport \"./point-light\";\nimport \"./quack\";\nimport \"./scene-preview-camera\";\nimport \"./skybox\";\nimport \"./spawn-controller\";\nimport \"./spot-light\";\nimport \"./sticky-object\";\nimport \"./super-spawner\";\nimport \"./water\";\n","AFRAME.registerComponent(\"ambient-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.AmbientLight();\n    this.el.setObject3D(\"ambient-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n  },\n\n  update(prevData) {\n    if (this.data.color !== prevData.color) {\n      this.light.color.set(this.data.color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      this.light.intensity = this.data.intensity;\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"ambient-light\");\n  }\n});\n","/**\n * Sets the CSS class on an entity.\n * @component css-class\n */\nAFRAME.registerComponent(\"css-class\", {\n  schema: {\n    type: \"string\"\n  },\n  multiple: true,\n  init() {\n    this.el.classList.add(this.data);\n  },\n  update(oldData) {\n    if (this.data !== oldData) {\n      this.el.classList.remove(oldData);\n      this.el.classList.add(this.data);\n    }\n  },\n  remove() {\n    this.el.classList.remove(this.data);\n  }\n});\n","import resizeShadowCameraFrustum from \"../utils/resizeShadowCameraFrustum\";\n\nAFRAME.registerComponent(\"directional-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.DirectionalLight();\n    this.light.position.set(0, 0, 0);\n    this.light.target.position.set(0, 0, 1);\n    this.light.add(this.light.target);\n    this.light.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"directional-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      light.color.set(this.data.color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n  },\n\n  tick() {\n    if (window.APP && window.APP.quality === \"low\") {\n      return;\n    }\n\n    resizeShadowCameraFrustum(this.light, this.el.sceneEl.object3D);\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"directional-light\");\n  }\n});\n","const boundingBox = new THREE.Box3();\nconst frustumBox = new THREE.Box3();\nconst inverseLightMatrixWorld = new THREE.Matrix4();\nconst tempBox = new THREE.Box3();\nconst FRUSTUM_PADDING = 1;\nconst NEAR_CLIPPING_PLANE = -500;\nconst FAR_CLIPPING_PLANE = 500;\nconst verts = [\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3()\n];\n\nexport default function resizeShadowCameraFrustum(light, scene) {\n  // Reset bounding box\n  frustumBox.makeEmpty();\n  boundingBox.makeEmpty();\n\n  // Grow the extents of boundingBox for every geometry in the scene that has castShadow set to true.\n  scene.traverse(node => {\n    const geometry = node.geometry;\n\n    if (geometry && node.castShadow) {\n      if (!geometry.boundingBox) {\n        geometry.computeBoundingBox();\n      }\n\n      tempBox.copy(geometry.boundingBox);\n\n      // Apply matrix transforming bounding box from model space to world space\n      tempBox.applyMatrix4(node.matrixWorld);\n\n      boundingBox.union(tempBox);\n    }\n  });\n\n  // Transform the resulting bounding box from world space to light space.\n  // Construct a new bounding box in light space that contains the corners of the bounding box in world space.\n  const min = boundingBox.min;\n  const max = boundingBox.max;\n\n  verts[0].set(min.x, min.y, min.z);\n  verts[1].set(min.x, min.y, max.z);\n  verts[2].set(min.x, max.y, min.z);\n  verts[3].set(min.x, max.y, max.z);\n  verts[4].set(max.x, min.y, min.z);\n  verts[5].set(max.x, min.y, max.z);\n  verts[6].set(max.x, max.y, min.z);\n  verts[7].set(max.x, max.y, max.z);\n\n  inverseLightMatrixWorld.getInverse(light.shadow.camera.matrixWorld);\n\n  for (let i = 0; i < verts.length; i++) {\n    verts[i].applyMatrix4(inverseLightMatrixWorld);\n    frustumBox.expandByPoint(verts[i]);\n  }\n\n  // Update the camera frustum to fit the resulting bounding box.\n  // Everything in the frustum that has castShadow set to true will cast a shadow.\n  // Everything in the frustum that has receiveShadow set to true will receive a shadow.\n  // FRUSTUM_PADDING is added to avoid clipping the edges of shadows.\n  // TODO: Determine why shadows flicker when light is moved fast. The light's matrixWorld is probably being updated a frame behind.\n  const camera = light.shadow.camera;\n  camera.left = frustumBox.min.x - FRUSTUM_PADDING;\n  camera.right = frustumBox.max.x + FRUSTUM_PADDING;\n  camera.bottom = frustumBox.min.y - FRUSTUM_PADDING;\n  camera.top = frustumBox.max.y + FRUSTUM_PADDING;\n  camera.near = frustumBox.min.z + NEAR_CLIPPING_PLANE;\n  camera.far = frustumBox.max.z + FAR_CLIPPING_PLANE;\n  camera.updateProjectionMatrix();\n}\n","/* global CANNON */\n/**\n * Floats a duck based on its scale.\n * @component duck\n */\nAFRAME.registerComponent(\"duck\", {\n  schema: {\n    initialForce: { default: 0 },\n    maxForce: { default: 6.5 },\n    maxScale: { default: 5 }\n  },\n\n  init: function() {\n    this.physicsSystem = this.el.sceneEl.systems.physics;\n    this.hasBody = false;\n    this.position = new CANNON.Vec3();\n    this.force = new CANNON.Vec3(0, this.data.initialForce, 0);\n    this.initialScale = this.el.object3D.scale.x;\n    this.maxScale = this.data.maxScale * this.initialScale;\n  },\n\n  play: function() {\n    this.physicsSystem.addComponent(this);\n  },\n\n  pause: function() {\n    this.physicsSystem.removeComponent(this);\n  },\n\n  beforeStep: function() {\n    if (this.el.body && NAF.utils.isMine(this.el)) {\n      const currentScale = this.el.object3D.scale.x;\n      const ratio = Math.min(1, (currentScale - this.initialScale) / (this.maxScale - this.initialScale));\n      const force = ratio * this.data.maxForce;\n      if (force > 0) {\n        const angle = Math.random() * Math.PI * 2;\n        const x = Math.cos(angle);\n        const z = Math.sin(angle);\n        this.force.set(x, force, z);\n        this.position.set(x * 0.01, 0, z * 0.01);\n        this.el.object3D.matrixNeedsUpdate = true;\n        this.el.body.applyForce(this.force, this.position);\n      }\n    }\n  }\n});\n","/* global CANNON */\nAFRAME.registerComponent(\"heightfield\", {\n  init() {\n    this.el.addEventListener(\"componentinitialized\", e => {\n      if (e.detail.name === \"static-body\") {\n        this.generateAndAddHeightfield(this.el.components[\"static-body\"]);\n      }\n    });\n    this.el.setAttribute(\"static-body\", { shape: \"none\", mass: 0 });\n  },\n  generateAndAddHeightfield(body) {\n    const { offset, distance, data } = this.data;\n\n    const orientation = new CANNON.Quaternion();\n    orientation.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), -Math.PI / 2);\n\n    const rotation = new CANNON.Quaternion();\n    rotation.setFromAxisAngle(new CANNON.Vec3(0, 1, 0), -Math.PI / 2);\n    rotation.mult(orientation, orientation);\n\n    const cannonOffset = new CANNON.Vec3(offset.x, offset.y, offset.z);\n\n    const shape = new CANNON.Heightfield(data, { elementSize: distance });\n\n    body.addShape(shape, cannonOffset, orientation);\n  }\n});\n","AFRAME.registerComponent(\"hemisphere-light\", {\n  schema: {\n    skyColor: { type: \"color\" },\n    groundColor: { type: \"color\" },\n    intensity: { default: 1.0 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.HemisphereLight();\n    this.light.position.set(0, 0, 0);\n    this.light.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"hemisphere-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n  },\n\n  update(prevData) {\n    if (this.data.skyColor !== prevData.skyColor) {\n      this.light.color.set(this.data.skyColor);\n    }\n\n    if (this.data.groundColor !== prevData.groundColor) {\n      this.light.groundColor.set(this.data.groundColor);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      this.light.intensity = this.data.intensity;\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"hemisphere-light\");\n  }\n});\n","/**\n * Hides entities based on the scene's quality mode\n * @namespace environment\n * @component hide-when-quality\n */\nAFRAME.registerComponent(\"hide-when-quality\", {\n  schema: { type: \"string\", default: \"low\" },\n\n  init() {\n    this.onQualityChanged = this.onQualityChanged.bind(this);\n    this.el.sceneEl.addEventListener(\"quality-changed\", this.onQualityChanged);\n  },\n\n  onQualityChanged(event) {\n    this.updateComponentState(event.detail);\n  },\n\n  update(oldData) {\n    if (this.data !== oldData) {\n      this.updateComponentState(window.APP.quality);\n    }\n  },\n\n  updateComponentState(quality) {\n    this.el.setAttribute(\"visible\", quality !== this.data);\n  }\n});\n","import { getBox, getScaleCoefficient } from \"../utils/auto-box-collider\";\nimport { guessContentType, proxiedUrlFor, resolveUrl, injectCustomShaderChunks } from \"../utils/media-utils\";\nimport { addAnimationComponents } from \"../utils/animation\";\n\nimport \"three/examples/js/loaders/GLTFLoader\";\nimport loadingObjectSrc from \"../assets/LoadingObject_Atom.glb\";\n\nconst gltfLoader = new THREE.GLTFLoader();\nlet loadingObject;\ngltfLoader.load(loadingObjectSrc, gltf => {\n  loadingObject = gltf;\n});\n\nconst fetchContentType = url => {\n  return fetch(url, { method: \"HEAD\" }).then(r => r.headers.get(\"content-type\"));\n};\n\nconst fetchMaxContentIndex = url => {\n  return fetch(url).then(r => parseInt(r.headers.get(\"x-max-content-index\")));\n};\n\nconst boundingBox = new THREE.Box3();\n\nAFRAME.registerComponent(\"media-loader\", {\n  schema: {\n    fileId: { type: \"string\" },\n    fileIsOwned: { type: \"boolean\" },\n    src: { type: \"string\" },\n    resize: { default: false },\n    resolve: { default: false },\n    contentType: { default: null },\n    mediaOptions: {\n      default: {},\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n\n  init() {\n    this.onError = this.onError.bind(this);\n    this.showLoader = this.showLoader.bind(this);\n    this.clearLoadingTimeout = this.clearLoadingTimeout.bind(this);\n    this.onMediaLoaded = this.onMediaLoaded.bind(this);\n    this.shapeAdded = false;\n    this.hasBakedShapes = false;\n  },\n\n  setShapeAndScale(resize) {\n    const mesh = this.el.getObject3D(\"mesh\");\n    const box = getBox(this.el, mesh);\n    const scaleCoefficient = resize ? getScaleCoefficient(0.5, box) : 1;\n    this.el.object3DMap.mesh.scale.multiplyScalar(scaleCoefficient);\n\n    if (this.el.body && this.shapeAdded && this.el.body.shapes.length > 1) {\n      this.el.removeAttribute(\"shape\");\n      this.shapeAdded = false;\n    } else if (!this.hasBakedShapes && !box.isEmpty()) {\n      const center = new THREE.Vector3();\n      const { min, max } = box;\n      const halfExtents = {\n        x: (Math.abs(min.x - max.x) / 2) * scaleCoefficient,\n        y: (Math.abs(min.y - max.y) / 2) * scaleCoefficient,\n        z: (Math.abs(min.z - max.z) / 2) * scaleCoefficient\n      };\n      center.addVectors(min, max).multiplyScalar(0.5 * scaleCoefficient);\n      mesh.position.sub(center);\n      this.el.setAttribute(\"shape\", {\n        shape: \"box\",\n        halfExtents: halfExtents\n      });\n      this.shapeAdded = true;\n    }\n\n    mesh.matrixNeedsUpdate = true;\n  },\n\n  tick(t, dt) {\n    if (this.loaderMixer) {\n      this.loaderMixer.update(dt / 1000);\n    }\n  },\n\n  onError() {\n    this.el.removeAttribute(\"gltf-model-plus\");\n    this.el.removeAttribute(\"media-pager\");\n    this.el.removeAttribute(\"media-video\");\n    this.el.setAttribute(\"media-image\", { src: \"error\" });\n    clearTimeout(this.showLoaderTimeout);\n    delete this.showLoaderTimeout;\n  },\n\n  showLoader() {\n    const useFancyLoader = !!loadingObject;\n    const mesh = useFancyLoader\n      ? loadingObject.scene.clone()\n      : new THREE.Mesh(new THREE.BoxGeometry(), new THREE.MeshBasicMaterial());\n    if (useFancyLoader) {\n      this.loaderMixer = new THREE.AnimationMixer(mesh);\n      this.loadingClip = this.loaderMixer.clipAction(loadingObject.animations[0]);\n      this.loadingClip.play();\n    }\n    this.el.setObject3D(\"mesh\", mesh);\n    this.hasBakedShapes = !!(this.el.body && this.el.body.shapes.length > 0);\n    this.setShapeAndScale(true);\n    delete this.showLoaderTimeout;\n  },\n\n  clearLoadingTimeout() {\n    clearTimeout(this.showLoaderTimeout);\n    if (this.loaderMixer) {\n      this.loadingClip.stop();\n      delete this.loaderMixer;\n    }\n    delete this.showLoaderTimeout;\n  },\n\n  setupHoverableVisuals() {\n    const hoverableVisuals = this.el.components[\"hoverable-visuals\"];\n    if (hoverableVisuals) {\n      hoverableVisuals.uniforms = injectCustomShaderChunks(this.el.object3D);\n      boundingBox.setFromObject(this.el.object3DMap.mesh);\n      boundingBox.getBoundingSphere(hoverableVisuals.boundingSphere);\n    }\n  },\n\n  onMediaLoaded() {\n    this.clearLoadingTimeout();\n    this.setupHoverableVisuals();\n  },\n\n  async update(oldData) {\n    try {\n      const { src } = this.data;\n\n      if (src !== oldData.src && !this.showLoaderTimeout) {\n        this.showLoaderTimeout = setTimeout(this.showLoader, 100);\n      }\n\n      if (!src) return;\n\n      let canonicalUrl = src;\n      let accessibleUrl = src;\n      let contentType = this.data.contentType;\n\n      if (this.data.resolve) {\n        const result = await resolveUrl(src);\n        canonicalUrl = result.origin;\n        contentType = (result.meta && result.meta.expected_content_type) || contentType;\n      }\n\n      // todo: we don't need to proxy for many things if the canonical URL has permissive CORS headers\n      accessibleUrl = proxiedUrlFor(canonicalUrl, null);\n\n      // if the component creator didn't know the content type, we didn't get it from reticulum, and\n      // we don't think we can infer it from the extension, we need to make a HEAD request to find it out\n      contentType = contentType || guessContentType(canonicalUrl) || (await fetchContentType(accessibleUrl));\n\n      // We don't want to emit media_resolved for index updates.\n      if (src !== oldData.src) {\n        this.el.emit(\"media_resolved\", { src, raw: accessibleUrl, contentType });\n      }\n\n      if (contentType.startsWith(\"video/\") || contentType.startsWith(\"audio/\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-image\");\n        this.el.addEventListener(\"video-loaded\", this.onMediaLoaded, { once: true });\n        this.el.setAttribute(\"media-video\", Object.assign({}, this.data.mediaOptions, { src: accessibleUrl }));\n        if (this.el.components[\"position-at-box-shape-border\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (contentType.startsWith(\"image/\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.addEventListener(\"image-loaded\", this.onMediaLoaded, { once: true });\n        this.el.removeAttribute(\"media-pager\");\n        this.el.setAttribute(\n          \"media-image\",\n          Object.assign({}, this.data.mediaOptions, { src: accessibleUrl, contentType })\n        );\n        if (this.el.components[\"position-at-box-shape-border\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (contentType.startsWith(\"application/pdf\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        // two small differences:\n        // 1. we pass the canonical URL to the pager so it can easily make subresource URLs\n        // 2. we don't remove the media-image component -- media-pager uses that internally\n        this.el.setAttribute(\"media-pager\", Object.assign({}, this.data.mediaOptions, { src: canonicalUrl }));\n        this.el.addEventListener(\"image-loaded\", this.clearLoadingTimeout, { once: true });\n        this.el.addEventListener(\"preview-loaded\", this.onMediaLoaded, { once: true });\n        if (this.el.components[\"position-at-box-shape-border\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (\n        contentType.includes(\"application/octet-stream\") ||\n        contentType.includes(\"x-zip-compressed\") ||\n        contentType.startsWith(\"model/gltf\")\n      ) {\n        this.el.removeAttribute(\"media-image\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"model-loaded\",\n          () => {\n            this.clearLoadingTimeout();\n            this.hasBakedShapes = !!(this.el.body && this.el.body.shapes.length > (this.shapeAdded ? 1 : 0));\n            this.setShapeAndScale(this.data.resize);\n            this.setupHoverableVisuals();\n            addAnimationComponents(this.el);\n          },\n          { once: true }\n        );\n        this.el.addEventListener(\"model-error\", this.onError, { once: true });\n        this.el.setAttribute(\n          \"gltf-model-plus\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            contentType: contentType,\n            inflate: true,\n            modelToWorldScale: this.data.resize ? 0.0001 : 1.0\n          })\n        );\n      } else {\n        throw new Error(`Unsupported content type: ${contentType}`);\n      }\n    } catch (e) {\n      console.error(\"Error adding media\", e);\n      this.onError();\n    }\n  }\n});\n\nAFRAME.registerComponent(\"media-pager\", {\n  schema: {\n    src: { type: \"string\" },\n    index: { default: 0 }\n  },\n\n  init() {\n    this.toolbar = null;\n    this.imageSrc = null;\n    this.onNext = this.onNext.bind(this);\n    this.onPrev = this.onPrev.bind(this);\n\n    this.el.addEventListener(\"image-loaded\", async e => {\n      this.imageSrc = e.detail.src;\n      await this._ensureUI();\n      this.update();\n    });\n  },\n\n  async _ensureUI() {\n    if (this.toolbar || !this.imageSrc) return;\n    // unfortunately, since we loaded the page image in an img tag inside media-image, we have to make a second\n    // request for the same page to read out the max-content-index header\n    this.maxIndex = await fetchMaxContentIndex(this.imageSrc);\n    const template = document.getElementById(\"paging-toolbar\");\n    this.el.querySelector(\".interactable-ui\").appendChild(document.importNode(template.content, true));\n    this.toolbar = this.el.querySelector(\".paging-toolbar\");\n    // we have to wait a tick for the attach callbacks to get fired for the elements in a template\n    setTimeout(() => {\n      this.nextButton = this.el.querySelector(\".next-button [text-button]\");\n      this.prevButton = this.el.querySelector(\".prev-button [text-button]\");\n      this.pageLabel = this.el.querySelector(\".page-label\");\n\n      this.nextButton.addEventListener(\"grab-start\", this.onNext);\n      this.prevButton.addEventListener(\"grab-start\", this.onPrev);\n\n      this.update();\n      this.el.emit(\"preview-loaded\");\n    }, 0);\n  },\n\n  async update() {\n    if (!this.data.src) return;\n\n    const pageSrc = proxiedUrlFor(this.data.src, this.data.index);\n    this.el.setAttribute(\"media-image\", { src: pageSrc, contentType: \"image/png\" });\n\n    await this._ensureUI();\n\n    if (this.pageLabel) {\n      this.pageLabel.setAttribute(\"text\", \"value\", `${this.data.index + 1}/${this.maxIndex + 1}`);\n      this.repositionToolbar();\n    }\n  },\n\n  remove() {\n    if (this.toolbar) {\n      this.toolbar.parentNode.removeChild(this.toolbar);\n    }\n  },\n\n  onNext() {\n    this.el.setAttribute(\"media-pager\", \"index\", Math.min(this.data.index + 1, this.maxIndex));\n    this.el.emit(\"pager-page-changed\");\n  },\n\n  onPrev() {\n    this.el.setAttribute(\"media-pager\", \"index\", Math.max(this.data.index - 1, 0));\n    this.el.emit(\"pager-page-changed\");\n  },\n\n  repositionToolbar() {\n    this.toolbar.object3D.position.y = -this.el.getAttribute(\"shape\").halfExtents.y - 0.2;\n    this.toolbar.object3D.matrixNeedsUpdate = true;\n  }\n});\n","module.exports = __webpack_public_path__ + \"assets/LoadingObject_Atom-7dcc3b81897e68b740c1cf12b6cf4c3f.glb\";","AFRAME.registerComponent(\"point-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    range: { default: 0 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.PointLight();\n    this.light.decay = 2;\n    this.light.shadow.camera.matrixAutoUpdate = true;\n    this.el.setObject3D(\"point-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      light.color.set(this.data.color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.range !== prevData.range) {\n      light.distance = this.data.range;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"point-light\");\n  }\n});\n","AFRAME.registerComponent(\"quack\", {\n  schema: {\n    quackPercentage: { default: 1 },\n    specialQuackPercentage: { default: 0.01 }\n  },\n\n  init: function() {\n    this._handleGrabStart = this._handleGrabStart.bind(this);\n  },\n\n  play: function() {\n    this.el.addEventListener(\"grab-start\", this._handleGrabStart);\n  },\n\n  pause: function() {\n    this.el.removeEventListener(\"grab-start\", this._handleGrabStart);\n  },\n\n  _handleGrabStart: function() {\n    const rand = Math.random();\n    if (rand < this.data.specialQuackPercentage) {\n      this.el.emit(\"specialquack\");\n    } else if (rand < this.data.quackPercentage) {\n      this.el.emit(\"quack\");\n    }\n  }\n});\n","/**\n * Nicely pans the camera for previewing a scene. There's some weirdness with this right now\n * since it ends up panning in a direction dependent upon the start camera orientation,\n * but it's good enough for now.\n */\nfunction lerp(start, end, t) {\n  return (1 - t) * start + t * end;\n}\n\nAFRAME.registerComponent(\"scene-preview-camera\", {\n  schema: {\n    duration: { default: 90, type: \"number\" },\n    positionOnly: { default: false, type: \"boolean\" }\n  },\n\n  init: function() {\n    this.startPoint = this.el.object3D.position.clone();\n    this.startRotation = new THREE.Quaternion();\n    this.startRotation.setFromEuler(this.el.object3D.rotation);\n\n    this.targetPoint = new THREE.Vector3(1, 0.5, -0.5);\n    this.targetPoint.applyMatrix4(this.el.object3D.matrix);\n    this.targetPoint.add(new THREE.Vector3(0, 0, -2));\n\n    const targetRotDelta = new THREE.Euler(-0.15, 0.0, 0.15);\n    this.targetRotation = new THREE.Quaternion();\n    this.targetRotation.setFromEuler(targetRotDelta);\n    this.targetRotation.premultiply(this.startRotation);\n\n    this.startTime = new Date().getTime();\n    this.backwards = false;\n    this.ranOnePass = false;\n  },\n\n  tick: function() {\n    let t = (new Date().getTime() - this.startTime) / (1000.0 * this.data.duration);\n    t = Math.min(1.0, Math.max(0.0, t));\n\n    if (!this.ranOnePass) {\n      t = t * (2 - t);\n    } else {\n      t = t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n    }\n\n    const from = this.backwards ? this.targetPoint : this.startPoint;\n    const to = this.backwards ? this.startPoint : this.targetPoint;\n    const fromRot = this.backwards ? this.targetRotation : this.startRotation;\n    const toRot = this.backwards ? this.startRotation : this.targetRotation;\n    const newRot = new THREE.Quaternion();\n\n    THREE.Quaternion.slerp(fromRot, toRot, newRot, t);\n\n    this.el.object3D.position.set(lerp(from.x, to.x, t), lerp(from.y, to.y, t), lerp(from.z, to.z, t));\n\n    if (!this.data.positionOnly) {\n      this.el.object3D.rotation.setFromQuaternion(newRot);\n    }\n\n    this.el.object3D.matrixNeedsUpdate = true;\n\n    if (t >= 0.9999) {\n      this.ranOnePass = true;\n      this.backwards = !this.backwards;\n      this.startTime = new Date().getTime();\n    }\n  }\n});\n","/**\n * @author zz85 / https://github.com/zz85\n *\n * Based on \"A Practical Analytic Model for Daylight\"\n * aka The Preetham Model, the de facto standard analytic skydome model\n * http://www.cs.utah.edu/~shirley/papers/sunsky/sunsky.pdf\n *\n * First implemented by Simon Wallner\n * http://www.simonwallner.at/projects/atmospheric-scattering\n *\n * Improved by Martin Upitis\n * http://blenderartists.org/forum/showthread.php?245954-preethams-sky-impementation-HDR\n *\n * Three.js integration by zz85 http://twitter.com/blurspline\n */\n\nTHREE.Sky = function() {\n  const shader = THREE.Sky.SkyShader;\n\n  const material = new THREE.ShaderMaterial({\n    fragmentShader: shader.fragmentShader,\n    vertexShader: shader.vertexShader,\n    uniforms: THREE.UniformsUtils.clone(shader.uniforms),\n    side: THREE.BackSide\n  });\n\n  THREE.Mesh.call(this, new THREE.BoxBufferGeometry(1, 1, 1), material);\n};\n\nTHREE.Sky.prototype = Object.create(THREE.Mesh.prototype);\nTHREE.Sky.prototype.constructor = THREE.Sky;\n\nTHREE.Sky.SkyShader = {\n  uniforms: {\n    luminance: { value: 1 },\n    turbidity: { value: 2 },\n    rayleigh: { value: 1 },\n    mieCoefficient: { value: 0.005 },\n    mieDirectionalG: { value: 0.8 },\n    sunPosition: { value: new THREE.Vector3() }\n  },\n\n  vertexShader: [\n    \"uniform vec3 sunPosition;\",\n    \"uniform float rayleigh;\",\n    \"uniform float turbidity;\",\n    \"uniform float mieCoefficient;\",\n\n    \"varying vec3 vWorldPosition;\",\n    \"varying vec3 vSunDirection;\",\n    \"varying float vSunfade;\",\n    \"varying vec3 vBetaR;\",\n    \"varying vec3 vBetaM;\",\n    \"varying float vSunE;\",\n\n    \"const vec3 up = vec3( 0.0, 1.0, 0.0 );\",\n\n    // constants for atmospheric scattering\n    \"const float e = 2.71828182845904523536028747135266249775724709369995957;\",\n    \"const float pi = 3.141592653589793238462643383279502884197169;\",\n\n    // wavelength of used primaries, according to preetham\n    \"const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\",\n    // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n    // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n    \"const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\",\n\n    // mie stuff\n    // K coefficient for the primaries\n    \"const float v = 4.0;\",\n    \"const vec3 K = vec3( 0.686, 0.678, 0.666 );\",\n    // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n    \"const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\",\n\n    // earth shadow hack\n    // cutoffAngle = pi / 1.95;\n    \"const float cutoffAngle = 1.6110731556870734;\",\n    \"const float steepness = 1.5;\",\n    \"const float EE = 1000.0;\",\n\n    \"float sunIntensity( float zenithAngleCos ) {\",\n    \"\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\",\n    \"\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\",\n    \"}\",\n\n    \"vec3 totalMie( float T ) {\",\n    \"\tfloat c = ( 0.2 * T ) * 10E-18;\",\n    \"\treturn 0.434 * c * MieConst;\",\n    \"}\",\n\n    \"void main() {\",\n\n    \"\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\",\n    \"\tvWorldPosition = worldPosition.xyz;\",\n\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n    \"\tvSunDirection = normalize( sunPosition );\",\n\n    \"\tvSunE = sunIntensity( dot( vSunDirection, up ) );\",\n\n    \"\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\",\n\n    \"\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\",\n\n    // extinction (absorbtion + out scattering)\n    // rayleigh coefficients\n    \"\tvBetaR = totalRayleigh * rayleighCoefficient;\",\n\n    // mie coefficients\n    \"\tvBetaM = totalMie( turbidity ) * mieCoefficient;\",\n\n    \"}\"\n  ].join(\"\\n\"),\n\n  fragmentShader: [\n    \"varying vec3 vWorldPosition;\",\n    \"varying vec3 vSunDirection;\",\n    \"varying float vSunfade;\",\n    \"varying vec3 vBetaR;\",\n    \"varying vec3 vBetaM;\",\n    \"varying float vSunE;\",\n\n    \"uniform float luminance;\",\n    \"uniform float mieDirectionalG;\",\n\n    \"const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\",\n\n    // constants for atmospheric scattering\n    \"const float pi = 3.141592653589793238462643383279502884197169;\",\n\n    \"const float n = 1.0003;\", // refractive index of air\n    \"const float N = 2.545E25;\", // number of molecules per unit volume for air at\n    // 288.15K and 1013mb (sea level -45 celsius)\n\n    // optical length at zenith for molecules\n    \"const float rayleighZenithLength = 8.4E3;\",\n    \"const float mieZenithLength = 1.25E3;\",\n    \"const vec3 up = vec3( 0.0, 1.0, 0.0 );\",\n    // 66 arc seconds -> degrees, and the cosine of that\n    \"const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\",\n\n    // 3.0 / ( 16.0 * pi )\n    \"const float THREE_OVER_SIXTEENPI = 0.05968310365946075;\",\n    // 1.0 / ( 4.0 * pi )\n    \"const float ONE_OVER_FOURPI = 0.07957747154594767;\",\n\n    \"float rayleighPhase( float cosTheta ) {\",\n    \"\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\",\n    \"}\",\n\n    \"float hgPhase( float cosTheta, float g ) {\",\n    \"\tfloat g2 = pow( g, 2.0 );\",\n    \"\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\",\n    \"\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\",\n    \"}\",\n\n    // Filmic ToneMapping http://filmicgames.com/archives/75\n    \"const float A = 0.15;\",\n    \"const float B = 0.50;\",\n    \"const float C = 0.10;\",\n    \"const float D = 0.20;\",\n    \"const float E = 0.02;\",\n    \"const float F = 0.30;\",\n\n    \"const float whiteScale = 1.0748724675633854;\", // 1.0 / Uncharted2Tonemap(1000.0)\n\n    \"vec3 Uncharted2Tonemap( vec3 x ) {\",\n    \"\treturn ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;\",\n    \"}\",\n\n    \"void main() {\",\n    // optical length\n    // cutoff angle at 90 to avoid singularity in next formula.\n    \"\tfloat zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );\",\n    \"\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\",\n    \"\tfloat sR = rayleighZenithLength * inverse;\",\n    \"\tfloat sM = mieZenithLength * inverse;\",\n\n    // combined extinction factor\n    \"\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\",\n\n    // in scattering\n    \"\tfloat cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );\",\n\n    \"\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\",\n    \"\tvec3 betaRTheta = vBetaR * rPhase;\",\n\n    \"\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );\",\n    \"\tvec3 betaMTheta = vBetaM * mPhase;\",\n\n    \"\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\",\n    \"\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\",\n\n    // nightsky\n    \"\tvec3 direction = normalize( vWorldPosition - cameraPos );\",\n    \"\tfloat theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]\",\n    \"\tfloat phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]\",\n    \"\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\",\n    \"\tvec3 L0 = vec3( 0.1 ) * Fex;\",\n\n    // composition + solar disc\n    \"\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\",\n    \"\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;\",\n\n    \"\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\",\n\n    \"\tvec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );\",\n    \"\tvec3 color = curr * whiteScale;\",\n\n    \"\tvec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\",\n\n    \"\tgl_FragColor = vec4( retColor, 1.0 );\",\n\n    \"}\"\n  ].join(\"\\n\")\n};\n\nAFRAME.registerComponent(\"skybox\", {\n  schema: {\n    turbidity: { type: \"number\", default: 10 },\n    rayleigh: { type: \"number\", default: 2 },\n    luminance: { type: \"number\", default: 1 },\n    mieCoefficient: { type: \"number\", default: 0.005 },\n    mieDirectionalG: { type: \"number\", default: 0.8 },\n    inclination: { type: \"number\", default: 0 },\n    azimuth: { type: \"number\", default: 0 },\n    distance: { type: \"number\", default: 8000 }\n  },\n\n  init() {\n    this.sky = new THREE.Sky();\n    this.el.setObject3D(\"mesh\", this.sky);\n  },\n\n  update(oldData) {\n    const uniforms = this.sky.material.uniforms;\n\n    if (this.data.turbidity !== oldData.turbidity) {\n      uniforms.turbidity.value = this.data.turbidity;\n    }\n\n    if (this.data.rayleigh !== oldData.rayleigh) {\n      uniforms.rayleigh.value = this.data.rayleigh;\n    }\n\n    if (this.data.luminance !== oldData.luminance) {\n      uniforms.luminance.value = this.data.luminance;\n    }\n\n    if (this.data.mieCoefficient !== oldData.mieCoefficient) {\n      uniforms.mieCoefficient.value = this.data.mieCoefficient;\n    }\n\n    if (this.data.mieDirectionalG !== oldData.mieDirectionalG) {\n      uniforms.mieDirectionalG.value = this.data.mieDirectionalG;\n    }\n\n    if (\n      this.data.inclination !== oldData.inclination ||\n      this.data.azimuth !== oldData.azimuth ||\n      this.data.distance !== oldData.distance\n    ) {\n      const theta = Math.PI * (this.data.inclination - 0.5);\n      const phi = 2 * Math.PI * (this.data.azimuth - 0.5);\n\n      const distance = this.data.distance;\n\n      const x = distance * Math.cos(phi);\n      const y = distance * Math.sin(phi) * Math.sin(theta);\n      const z = distance * Math.sin(phi) * Math.cos(theta);\n\n      uniforms.sunPosition.value.set(x, y, z).normalize();\n\n      // HACK Remove this if condition and always set the scale based on distance when the existing environments\n      // have their sky scales set to 1.\n      if (this.el.object3D.scale.x === 1) {\n        this.sky.scale.set(distance, distance, distance);\n      }\n\n      this.el.object3D.matrixNeedsUpdate = true;\n    }\n  },\n\n  remove() {\n    this.el.removeObject3D(\"mesh\");\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\n\n/**\n * Used on a player-rig to move the player to a random spawn point on entry.\n * @namespace avatar\n * @component spawn-controller\n */\nAFRAME.registerComponent(\"spawn-controller\", {\n  schema: {\n    target: { type: \"selector\" },\n    loadedEvent: { type: \"string\" }\n  },\n  init() {\n    this.onLoad = this.onLoad.bind(this);\n    this.data.target.addEventListener(this.data.loadedEvent, this.onLoad);\n  },\n  onLoad() {\n    const spawnPoints = document.querySelectorAll(\"[spawn-point]\");\n\n    if (spawnPoints.length === 0) {\n      // Keep default position\n      return;\n    }\n\n    const spawnPointIndex = Math.round((spawnPoints.length - 1) * Math.random());\n    const spawnPoint = spawnPoints[spawnPointIndex];\n\n    getLastWorldPosition(spawnPoint.object3D, this.el.object3D.position);\n\n    this.el.object3D.rotation.copy(spawnPoint.object3D.rotation);\n    this.el.object3D.matrixNeedsUpdate = true;\n  }\n});\n\n/**\n * Marks an entity as a potential spawn point.\n * @namespace environment\n * @component spawn-point\n */\nAFRAME.registerComponent(\"spawn-point\", {});\n","AFRAME.registerComponent(\"spot-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    range: { default: 0 },\n    innerConeAngle: { default: 0 },\n    outerConeAngle: { default: Math.PI / 4.0 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.SpotLight();\n    this.light.position.set(0, 0, 0);\n    this.light.target.position.set(0, 0, 1);\n    this.light.add(this.light.target);\n    this.light.decay = 2;\n    this.light.matrixNeedsUpdate = true;\n    this.light.target.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"spot-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      light.color.set(this.data.color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.range !== prevData.range) {\n      light.distance = this.data.range;\n    }\n\n    if (this.data.innerConeAngle !== prevData.innerConeAngle || this.data.outerConeAngle !== prevData.outerConeAngle) {\n      light.angle = this.data.outerConeAngle;\n      light.penumbra = 1.0 - this.data.innerConeAngle / this.data.outerConeAngle;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"spot-light\");\n  }\n});\n","import { getLastWorldPosition, getLastWorldQuaternion } from \"../utils/three-utils\";\n\n/* global THREE, CANNON, AFRAME */\nAFRAME.registerComponent(\"sticky-object\", {\n  dependencies: [\"body\"],\n\n  schema: {\n    autoLockOnLoad: { default: false },\n    autoLockOnRelease: { default: false },\n    autoLockSpeedLimit: { default: 0.5 } // Set to 0 to always autolock on release\n  },\n\n  init() {\n    this._onGrab = this._onGrab.bind(this);\n    this._onRelease = this._onRelease.bind(this);\n    this._onBodyLoaded = this._onBodyLoaded.bind(this);\n  },\n\n  play() {\n    this.el.addEventListener(\"grab-start\", this._onGrab);\n    this.el.addEventListener(\"grab-end\", this._onRelease);\n\n    if (this.hasSetupBodyLoaded) return;\n    this.hasSetupBodyLoaded = true;\n\n    if (this.el.body) {\n      this._onBodyLoaded();\n    } else {\n      this.el.addEventListener(\"body-loaded\", this._onBodyLoaded, { once: true });\n    }\n  },\n\n  pause() {\n    this.el.removeEventListener(\"grab-start\", this._onGrab);\n    this.el.removeEventListener(\"grab-end\", this._onRelease);\n  },\n\n  setLocked(locked) {\n    if (this.el.components.networked && !NAF.utils.isMine(this.el)) return;\n\n    this.locked = locked;\n    this.el.setAttribute(\"body\", { type: locked ? \"static\" : \"dynamic\" });\n  },\n\n  _onBodyLoaded() {\n    if (this.data.autoLockOnLoad) {\n      this.setLocked(true);\n    }\n  },\n\n  _onRelease() {\n    // Happens if the object is still being held by another hand\n    if (this.el.is(\"grabbed\")) return;\n\n    if (\n      this.data.autoLockOnRelease &&\n      (this.data.autoLockSpeedLimit === 0 ||\n        this.el.body.velocity.lengthSquared() < this.data.autoLockSpeedLimit * this.data.autoLockSpeedLimit)\n    ) {\n      this.setLocked(true);\n    }\n    this.el.body.collisionResponse = true;\n  },\n\n  _onGrab() {\n    if (!this.el.components.grabbable || this.el.components.grabbable.data.maxGrabbers === 0) return;\n\n    this.setLocked(false);\n    this.el.body.collisionResponse = false;\n  },\n\n  remove() {\n    this.el.removeEventListener(\"body-loaded\", this._onBodyLoaded);\n    if (this.stuckTo) {\n      const stuckTo = this.stuckTo;\n      delete this.stuckTo;\n      stuckTo._unstickObject();\n    }\n  }\n});\n\nAFRAME.registerComponent(\"sticky-object-zone\", {\n  dependencies: [\"physics\"],\n  init() {\n    // TODO: position/rotation/impulse need to get updated if the sticky-object-zone moves\n    this.worldQuaternion = new THREE.Quaternion();\n    this.worldPosition = new THREE.Vector3();\n    getLastWorldPosition(this.el.object3D, this.worldPosition);\n    getLastWorldQuaternion(this.el.object3D, this.worldQuaternion);\n\n    const dir = new THREE.Vector3(0, 0, 5).applyQuaternion(this.el.object3D.quaternion);\n    this.bootImpulsePosition = new CANNON.Vec3(0, 0, 0);\n    this.bootImpulse = new CANNON.Vec3();\n    this.bootImpulse.copy(dir);\n\n    this._onCollisions = this._onCollisions.bind(this);\n    this.el.addEventListener(\"collisions\", this._onCollisions);\n  },\n\n  remove() {\n    this.el.removeEventListener(\"collisions\", this._onCollisions);\n  },\n\n  _onCollisions(e) {\n    e.detail.els.forEach(el => {\n      const stickyObject = el.components[\"sticky-object\"];\n      if (!stickyObject) return;\n      this._setStuckObject(stickyObject);\n    });\n    if (this.stuckObject) {\n      e.detail.clearedEls.forEach(el => {\n        if (this.stuckObject && this.stuckObject.el === el) {\n          this._unstickObject();\n        }\n      });\n    }\n  },\n\n  _setStuckObject(stickyObject) {\n    stickyObject.setLocked(true);\n    stickyObject.el.object3D.position.copy(this.worldPosition);\n    stickyObject.el.object3D.quaternion.copy(this.worldQuaternion);\n    stickyObject.el.object3D.matrixNeedsUpdate = true;\n    stickyObject.el.body.collisionResponse = false;\n    stickyObject.stuckTo = this;\n\n    if (this.stuckObject && NAF.utils.isMine(this.stuckObject.el)) {\n      const el = this.stuckObject.el;\n      this._unstickObject();\n      el.body.applyImpulse(this.bootImpulse, this.bootImpulsePosition);\n    }\n\n    this.stuckObject = stickyObject;\n  },\n\n  _unstickObject() {\n    // this condition will be false when dragging an object directly from one sticky zone to another\n    if (this.stuckObject.stuckTo === this) {\n      this.stuckObject.setLocked(false);\n      this.stuckObject.el.body.collisionResponse = true;\n      delete this.stuckObject.stuckTo;\n    }\n    delete this.stuckObject;\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nimport { addMedia } from \"../utils/media-utils\";\nimport { waitForEvent } from \"../utils/async-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\nimport { getLastWorldPosition, getLastWorldQuaternion } from \"../utils/three-utils\";\n\nlet nextGrabId = 0;\n/**\n * Spawns networked objects when grabbed or when a specified event is fired.\n * @namespace network\n * @component super-spawner\n */\nAFRAME.registerComponent(\"super-spawner\", {\n  schema: {\n    /**\n     * Source of the media asset the spawner will spawn when grabbed. This can be a gltf, video, or image, or a url that the reticiulm media API can resolve to a gltf, video, or image.\n     */\n    src: { default: \"\" },\n\n    /**\n     * Whether to use the Reticulum media resolution API to interpret the src URL (e.g. find a video URL for Youtube videos.)\n     */\n    resolve: { default: false },\n\n    /**\n     * The template to use for this object\n     */\n    template: { default: \"\" },\n\n    /**\n     * Spawn the object at a custom position, rather than at the center of the spanwer.\n     */\n    useCustomSpawnPosition: { default: false },\n    spawnPosition: { type: \"vec3\" },\n\n    /**\n     * Spawn the object with a custom orientation, rather than copying that of the spawner.\n     */\n    useCustomSpawnRotation: { default: false },\n    spawnRotation: { type: \"vec4\" },\n\n    /**\n     * Spawn the object with a custom scale, rather than copying that of the spawner.\n     */\n    useCustomSpawnScale: { default: false },\n    spawnScale: { type: \"vec3\" },\n\n    /**\n     * The events to emit for programmatically grabbing and releasing objects\n     */\n    grabEvents: { default: [\"cursor-grab\", \"primary_hand_grab\"] },\n    releaseEvents: { default: [\"cursor-release\", \"primary_hand_release\"] },\n\n    /**\n     * The spawner will become invisible and ungrabbable for this ammount of time after being grabbed. This can prevent rapidly spawning objects.\n     */\n    spawnCooldown: { default: 1 },\n\n    /**\n     * Center the spawned object on the hand that grabbed it after it finishes loading. By default the object will be grabbed relative to where the spawner was grabbed\n     */\n    centerSpawnedObject: { default: false },\n\n    /**\n     * Optional event to listen for to spawn an object on the preferred superHand\n     */\n    spawnEvent: { type: \"string\" },\n\n    /**\n     * The superHand to use if an object is spawned via spawnEvent\n     */\n    superHand: { type: \"selector\" },\n\n    /**\n     * The cursor superHand to use if an object is spawned via spawnEvent\n     */\n    cursorSuperHand: { type: \"selector\" }\n  },\n\n  init() {\n    this.heldEntities = new Map();\n    this.cooldownTimeout = null;\n    this.onGrabStart = this.onGrabStart.bind(this);\n    this.onGrabEnd = this.onGrabEnd.bind(this);\n\n    this.onSpawnEvent = this.onSpawnEvent.bind(this);\n\n    this.sceneEl = document.querySelector(\"a-scene\");\n\n    this.el.setAttribute(\"hoverable-visuals\", { cursorController: \"#cursor-controller\", enableSweepingEffect: false });\n  },\n\n  play() {\n    this.el.addEventListener(\"grab-start\", this.onGrabStart);\n    this.el.addEventListener(\"grab-end\", this.onGrabEnd);\n    if (this.data.spawnEvent) {\n      this.sceneEl.addEventListener(this.data.spawnEvent, this.onSpawnEvent);\n    }\n  },\n\n  pause() {\n    this.el.removeEventListener(\"grab-start\", this.onGrabStart);\n    this.el.removeEventListener(\"grab-end\", this.onGrabEnd);\n    if (this.data.spawnEvent) {\n      this.sceneEl.removeEventListener(this.data.spawnEvent, this.onSpawnEvent);\n    }\n\n    if (this.cooldownTimeout) {\n      clearTimeout(this.cooldownTimeout);\n      this.cooldownTimeout = null;\n      this.el.setAttribute(\"visible\", true);\n      this.el.classList.add(\"interactable\");\n    }\n  },\n\n  remove() {\n    this.heldEntities.clear();\n  },\n\n  async onSpawnEvent() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const leftPose = userinput.get(paths.actions.leftHand.pose);\n    const rightPose = userinput.get(paths.actions.rightHand.pose);\n    const controllerCount = leftPose && rightPose ? 2 : leftPose || rightPose ? 1 : 0;\n    const using6DOF = controllerCount > 1 && this.el.sceneEl.is(\"vr-mode\");\n    const hand = using6DOF ? this.data.superHand : this.data.cursorSuperHand;\n\n    if (this.cooldownTimeout || !hand) {\n      return;\n    }\n\n    const entity = addMedia(this.data.src, this.data.template, ObjectContentOrigins.SPAWNER, this.data.resolve).entity;\n\n    getLastWorldPosition(hand.object3D, entity.object3D.position);\n    getLastWorldQuaternion(hand.object3D, entity.object3D.quaternion);\n\n    if (this.data.useCustomSpawnScale) {\n      entity.object3D.scale.copy(this.data.spawnScale);\n    }\n\n    this.activateCooldown();\n\n    await waitForEvent(\"body-loaded\", entity);\n\n    getLastWorldPosition(hand.object3D, entity.object3D.position);\n    entity.object3D.matrixNeedsUpdate = true;\n\n    if (!using6DOF) {\n      for (let i = 0; i < this.data.grabEvents.length; i++) {\n        hand.emit(this.data.grabEvents[i], { targetEntity: entity });\n      }\n    }\n  },\n\n  async onGrabStart(e) {\n    if (this.cooldownTimeout) {\n      return;\n    }\n\n    // This tells super-hands we are handling this grab. The user is now \"grabbing\" the spawner\n    e.preventDefault();\n\n    const hand = e.detail.hand;\n    const thisGrabId = nextGrabId++;\n    this.heldEntities.set(hand, thisGrabId);\n\n    const entity = addMedia(this.data.src, this.data.template, ObjectContentOrigins.SPAWNER, this.data.resolve).entity;\n\n    entity.object3D.position.copy(\n      this.data.useCustomSpawnPosition ? this.data.spawnPosition : this.el.object3D.position\n    );\n    entity.object3D.rotation.copy(\n      this.data.useCustomSpawnRotation ? this.data.spawnRotation : this.el.object3D.rotation\n    );\n    entity.object3D.scale.copy(this.data.useCustomSpawnScale ? this.data.spawnScale : this.el.object3D.scale);\n    entity.object3D.matrixNeedsUpdate = true;\n\n    await waitForEvent(\"body-loaded\", entity);\n\n    // If we are still holding the spawner with the hand that grabbed to create this entity, release the spawner and grab the entity\n    if (this.heldEntities.get(hand) === thisGrabId) {\n      if (this.data.centerSpawnedObject) {\n        entity.body.position.copy(hand.object3D.position);\n      }\n      for (let i = 0; i < this.data.grabEvents.length; i++) {\n        hand.emit(this.data.releaseEvents[i]);\n        hand.emit(this.data.grabEvents[i], { targetEntity: entity });\n      }\n    }\n\n    this.activateCooldown();\n  },\n\n  onGrabEnd(e) {\n    this.heldEntities.delete(e.detail.hand);\n    // This tells super-hands we are handling this release\n    e.preventDefault();\n  },\n\n  activateCooldown() {\n    if (this.data.spawnCooldown > 0) {\n      this.el.setAttribute(\"visible\", false);\n      this.el.classList.remove(\"interactable\");\n      this.cooldownTimeout = setTimeout(() => {\n        this.el.setAttribute(\"visible\", true);\n        this.el.classList.add(\"interactable\");\n        this.cooldownTimeout = null;\n      }, this.data.spawnCooldown * 1000);\n    }\n  }\n});\n","export const waitForEvent = function(eventName, eventObj) {\n  return new Promise(resolve => {\n    eventObj.addEventListener(eventName, resolve, { once: true });\n  });\n};\n","import { Layers } from \"./layers\";\nimport \"../vendor/Water\";\n\n/**\n * @author jbouny / https://github.com/jbouny\n *\n * Work based on :\n * @author Slayvin / http://slayvin.net : Flat mirror for three.js\n * @author Stemkoski / http://www.adelphi.edu/~stemkoski : An implementation of water shader based on the flat mirror\n * @author Jonas Wagner / http://29a.ch/ && http://29a.ch/slides/2012/webglwater/ : Water shader explanations in WebGL\n */\n\nfunction MobileWater(geometry, options) {\n  THREE.Mesh.call(this, geometry);\n\n  const scope = this;\n\n  options = options || {};\n\n  const time = options.time !== undefined ? options.time : 0.0;\n  const normalSampler = options.waterNormals !== undefined ? options.waterNormals : null;\n  const sunDirection =\n    options.sunDirection !== undefined ? options.sunDirection : new THREE.Vector3(0.70707, 0.70707, 0.0);\n  const sunColor = new THREE.Color(options.sunColor !== undefined ? options.sunColor : 0xffffff);\n  const waterColor = new THREE.Color(options.waterColor !== undefined ? options.waterColor : 0x7f7f7f);\n  const eye = options.eye !== undefined ? options.eye : new THREE.Vector3(0, 0, 0);\n  const distortionScale = options.distortionScale !== undefined ? options.distortionScale : 20.0;\n  const side = options.side !== undefined ? options.side : THREE.FrontSide;\n  const fog = options.fog !== undefined ? options.fog : false;\n\n  const mirrorShader = {\n    uniforms: THREE.UniformsUtils.merge([\n      THREE.UniformsLib[\"lights\"],\n      {\n        normalSampler: { value: null },\n        time: { value: 0.0 },\n        size: { value: 1.0 },\n        distortionScale: { value: 20.0 },\n        sunColor: { value: new THREE.Color(0x7f7f7f) },\n        sunDirection: { value: new THREE.Vector3(0.70707, 0.70707, 0) },\n        eye: { value: new THREE.Vector3() },\n        waterColor: { value: new THREE.Color(0x555555) }\n      }\n    ]),\n\n    vertexShader: `\n      uniform float time;\n      varying vec4 worldPosition;\n\n      void main() {\n      \tworldPosition = modelMatrix * vec4( position, 1.0 );\n      \tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n      \tgl_Position = projectionMatrix * mvPosition;\n\n      }\n    `,\n\n    fragmentShader: `\n      uniform float time;\n      uniform float size;\n      uniform float distortionScale;\n      uniform sampler2D normalSampler;\n      uniform vec3 sunColor;\n      uniform vec3 sunDirection;\n      uniform vec3 eye;\n      uniform vec3 waterColor;\n\n      varying vec4 worldPosition;\n\n      vec4 getNoise( vec2 uv ) {\n      \tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\n      \tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\n      \tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\n      \tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\n      \tvec4 noise = texture2D( normalSampler, uv0 ) +\n      \t\ttexture2D( normalSampler, uv1 ) +\n      \t\ttexture2D( normalSampler, uv2 ) +\n      \t\ttexture2D( normalSampler, uv3 );\n      \treturn noise * 0.5 - 1.0;\n      }\n\n      void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {\n      \tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n      \tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\n      \tspecularColor += pow( direction, shiny ) * sunColor * spec;\n      \tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n      }\n\n      ${THREE.ShaderChunk[\"common\"]}\n      ${THREE.ShaderChunk[\"packing\"]}\n      ${THREE.ShaderChunk[\"bsdfs\"]}\n      ${THREE.ShaderChunk[\"lights_pars_begin\"]}\n\n      void main() {\n      \tvec4 noise = getNoise( worldPosition.xz * size );\n      \tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\n\n      \tvec3 diffuseLight = vec3(0.0);\n      \tvec3 specularLight = vec3(0.0);\n\n      \tvec3 worldToEye = eye-worldPosition.xyz;\n      \tvec3 eyeDirection = normalize( worldToEye );\n      \tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n\n      \tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\n      \tfloat rf0 = 0.3;\n      \tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n      \tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\n      \tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ), ( 0.5 + specularLight ), reflectance);\n      \tvec3 outgoingLight = albedo;\n      \tgl_FragColor = vec4( outgoingLight, 1 );\n      }\n    `\n  };\n\n  const material = new THREE.ShaderMaterial({\n    fragmentShader: mirrorShader.fragmentShader,\n    vertexShader: mirrorShader.vertexShader,\n    uniforms: THREE.UniformsUtils.clone(mirrorShader.uniforms),\n    transparent: false,\n    lights: true,\n    side: side,\n    fog: fog\n  });\n\n  material.uniforms.time.value = time;\n  material.uniforms.normalSampler.value = normalSampler;\n  material.uniforms.sunColor.value = sunColor;\n  material.uniforms.waterColor.value = waterColor;\n  material.uniforms.sunDirection.value = sunDirection;\n  material.uniforms.distortionScale.value = distortionScale;\n\n  material.uniforms.eye.value = eye;\n\n  scope.material = material;\n}\n\nMobileWater.prototype = Object.create(THREE.Mesh.prototype);\nMobileWater.prototype.constructor = THREE.Water;\n\nAFRAME.registerComponent(\"water\", {\n  schema: {\n    waterColor: { type: \"color\", default: \"#001e0f\" },\n    distortionScale: { type: \"number\", default: 3.7 },\n    sunColor: { type: \"color\", default: \"#ffffff\" },\n    inclination: { type: \"number\", default: 0 },\n    azimuth: { type: \"number\", default: 0 },\n    distance: { type: \"number\", default: 1 },\n    speed: { type: \"number\", default: 0.1 },\n    forceMobile: { type: \"boolean\", default: false },\n    normalMap: { type: \"asset\", default: \"#water-normal-map\" }\n  },\n  init() {\n    const waterMesh = this.el.getObject3D(\"mesh\");\n    const waterGeometry = waterMesh.geometry;\n\n    // Render THREE.Water shader instead of THREE.Mesh\n    waterMesh.visible = false;\n\n    const waterNormals = new THREE.Texture(this.data.normalMap);\n    waterNormals.wrapS = waterNormals.wrapT = THREE.RepeatWrapping;\n    waterNormals.needsUpdate = true;\n\n    const waterConfig = {\n      textureWidth: 512,\n      textureHeight: 512,\n      waterNormals: waterNormals,\n      sunDirection: this.data.sunDirection,\n      sunColor: new THREE.Color(this.data.sunColor),\n      waterColor: new THREE.Color(this.data.waterColor),\n      distortionScale: this.data.distortionScale,\n      fog: false\n    };\n\n    if (AFRAME.utils.device.isMobile() || this.data.forceMobile) {\n      this.water = new MobileWater(waterGeometry, waterConfig);\n    } else {\n      this.water = new THREE.Water(waterGeometry, waterConfig);\n      this.water.mirrorCamera.layers.set(Layers.reflection);\n    }\n\n    this.el.setObject3D(\"water\", this.water);\n  },\n\n  update(oldData) {\n    const uniforms = this.water.material.uniforms;\n\n    if (this.data.forceMobile !== oldData.forceMobile) {\n      this.el.removeObject3D(\"water\");\n      this.init();\n      return;\n    }\n\n    if (this.data.waterColor !== oldData.waterColor) {\n      uniforms.waterColor.value.setStyle(this.data.waterColor);\n    }\n\n    if (this.data.distortionScale !== oldData.distortionScale) {\n      uniforms.distortionScale.value = this.data.distortionScale;\n    }\n\n    if (this.data.sunColor !== oldData.sunColor) {\n      uniforms.sunColor.value.setStyle(this.data.sunColor);\n    }\n\n    if (\n      this.data.inclination !== oldData.inclination ||\n      this.data.azimuth !== oldData.azimuth ||\n      this.data.distance !== oldData.distance\n    ) {\n      const theta = Math.PI * (this.data.inclination - 0.5);\n      const phi = 2 * Math.PI * (this.data.azimuth - 0.5);\n\n      const distance = this.data.distance;\n\n      const x = distance * Math.cos(phi);\n      const y = distance * Math.sin(phi) * Math.sin(theta);\n      const z = distance * Math.sin(phi) * Math.cos(theta);\n\n      uniforms.sunDirection.value.set(x, y, z);\n    }\n  },\n\n  tick(time) {\n    this.water.material.uniforms.time.value = (time / 1000) * this.data.speed;\n  },\n\n  remove() {\n    this.el.removeObject3D(\"water\");\n    const waterMesh = this.el.getObject3D(\"mesh\");\n    waterMesh.visible = true;\n  }\n});\n","/**\n * Logs all events dispatched on an entity\n * @namespace debug\n * @component log-events\n */\nAFRAME.registerComponent(\"log-events\", {\n  init: function() {\n    const el = this.el;\n    const log = this.log.bind(this);\n    const origDispatch = this.el.dispatchEvent;\n    this.el.dispatchEvent = function() {\n      log(Array.from(arguments));\n      return origDispatch.apply(el, arguments);\n    };\n  },\n  log: function([e]) {\n    if ([\"componentchanged\"].includes(e.type)) return;\n    let firstObject = true;\n    const replacer = (k, x) => {\n      if (!x) return x;\n      if (typeof x === \"object\" && x.length === undefined) {\n        if (firstObject) {\n          firstObject = false;\n          return x;\n        }\n        return \"[object]\";\n      }\n      return x;\n    };\n    console.info(`log-events: ${this.el.id} ${e.type} ${JSON.stringify(e.detail, replacer)}`);\n  }\n});\n\n/**\n * Logs all life cycle phases on an entity.\n * @namespace debug\n * @component lifecycle-checker\n */\nAFRAME.registerComponent(\"lifecycle-checker\", {\n  schema: {\n    name: { type: \"string\" },\n    tick: { default: false }\n  },\n  init: function() {\n    this.log(\"init\");\n  },\n  update: function() {\n    this.log(\"update\");\n  },\n  tick: function() {\n    if (this.data.tick) {\n      this.log(\"tick\");\n    }\n  },\n  remove: function() {\n    this.log(\"remove\");\n  },\n  pause: function() {\n    this.log(\"pause\");\n  },\n  play: function() {\n    this.log(\"play\");\n  },\n\n  log: function(method) {\n    console.info(`lifecycle-checker:${this.data.name} ${method}`);\n  }\n});\n","AFRAME.registerComponent(\"gamma-factor\", {\n  schema: {\n    gammaFactor: { type: \"number\", default: 2.2 }\n  },\n\n  init() {\n    const el = this.el;\n\n    if (!el.isScene) {\n      console.warn(\"gamma-factor component can only be applied to <a-scene>\");\n    }\n  },\n\n  update(prevData) {\n    const data = this.data;\n    const sceneEl = this.el;\n    const renderer = sceneEl.renderer;\n    let needsShaderUpdate = false;\n\n    if (data.gammaFactor !== prevData.gammaFactor) {\n      renderer.gammaFactor = data.gammaFactor;\n      needsShaderUpdate = true;\n    }\n\n    if (!needsShaderUpdate || sceneEl.time === 0) {\n      return;\n    }\n\n    sceneEl.object3D.traverse(function(node) {\n      if (!node.isMesh) {\n        return;\n      }\n\n      if (Array.isArray(node.material)) {\n        node.material.forEach(function(material) {\n          material.needsUpdate = true;\n        });\n      } else {\n        node.material.needsUpdate = true;\n      }\n    });\n  }\n});\n","// As temporary measure to avoid having to customize the `sound` component that currently lives in `aframe`,\n// we say that a `scene-sound` will have an associated `sound` component that is triggered when the given\n// event is fired on the scene.\nAFRAME.registerComponent(\"scene-sound\", {\n  multiple: true,\n  schema: {\n    sound: { type: \"string\" },\n    on: { type: \"string\" },\n    off: { type: \"string\" }\n  },\n\n  init() {\n    const sound = this.el.components[`${this.attrName.replace(\"scene-\", \"\")}`];\n    this.el.sceneEl.addEventListener(this.data.on, sound.playSound);\n    sound.stopSound = sound.stopSound.bind(sound); // wat\n\n    if (this.data.off) {\n      this.el.sceneEl.addEventListener(this.data.off, sound.stopSound);\n    }\n  }\n});\n","module.exports = __webpack_public_path__ + \"assets/images/generic_vr_entry-6cb5c6205420ac7e9c3ca3e0c0a6db2c.svg\";","module.exports = __webpack_public_path__ + \"assets/images/hub-preview-white-ccefba3b70ae589a0ca5ae3230c39299.png\";","import { generatePublicKeyAndEncryptedObject, generateKeys, decryptObject } from \"./crypto\";\n\nconst LINK_ACTION_TIMEOUT = 10000;\n\nexport default class LinkChannel {\n  constructor(store) {\n    this.store = store;\n  }\n\n  setSocket = socket => {\n    this.socket = socket;\n  };\n\n  // Returns a promise that, when resolved, will forward an object with three keys:\n  //\n  // code: The code that was made available to use for link.\n  //\n  // cancel: A function that the caller can call to cancel the use of the code.\n  //\n  // onFinished: A promise that, when resolved, indicates the code is no longer usable,\n  // because it was either successfully used by the remote device or it has expired\n  // (\"used\" or \"expired\" is passed to the callback).\n  generateCode = () => {\n    return new Promise(resolve => {\n      const onFinished = new Promise(finished => {\n        const step = () => {\n          const getLetter = () => \"ABCDEFGHI\"[Math.floor(Math.random() * 9)];\n          const code = `${getLetter()}${getLetter()}${getLetter()}${getLetter()}`;\n\n          // Only respond to one link_request in this channel.\n          let readyToSend = false;\n          let leftChannel = false;\n\n          const channel = this.socket.channel(`link:${code}`, { timeout: LINK_ACTION_TIMEOUT });\n\n          const leave = () => {\n            if (!leftChannel) channel.leave();\n            leftChannel = true;\n          };\n\n          const cancel = () => leave();\n\n          channel.on(\"link_expired\", () => finished(\"expired\"));\n\n          channel.on(\"presence_state\", state => {\n            if (readyToSend) return;\n\n            if (Object.keys(state).length > 0) {\n              // Code is in use by someone else, try a new one\n              step();\n            } else {\n              readyToSend = true;\n              resolve({ code, cancel, onFinished });\n            }\n          });\n\n          channel.on(\"link_request\", incoming => {\n            if (readyToSend) {\n              const data = { path: location.pathname };\n\n              // Copy profile data to link'ed device if it's been set.\n              if (this.store.state.activity.hasChangedName) {\n                data.profile = { ...this.store.state.profile };\n              }\n              data.credentials = { ...this.store.state.credentials };\n\n              generatePublicKeyAndEncryptedObject(incoming.public_key, data).then(\n                ({ publicKeyString, encryptedData }) => {\n                  const payload = {\n                    target_session_id: incoming.reply_to_session_id,\n                    public_key: publicKeyString,\n                    data: encryptedData\n                  };\n\n                  if (!leftChannel) {\n                    channel.push(\"link_response\", payload);\n                  }\n\n                  leave();\n\n                  finished(\"used\");\n                  readyToSend = false;\n                }\n              );\n            }\n          });\n\n          channel.join().receive(\"error\", r => console.error(r));\n        };\n\n        step();\n      });\n    });\n  };\n\n  // Attempts to receive a link payload from a remote device using the given code.\n  //\n  // Promise rejects if the code is invalid or there is a problem with the channel.\n  // Promise resolves and passes payload of link source on successful link.\n  attemptLink = code => {\n    return new Promise((resolve, reject) => {\n      const channel = this.socket.channel(`link:${code}`, { timeout: LINK_ACTION_TIMEOUT });\n      let finished = false;\n\n      generateKeys().then(({ publicKeyString, privateKey }) => {\n        channel.on(\"presence_state\", state => {\n          const numOccupants = Object.keys(state).length;\n\n          if (numOccupants === 1) {\n            // Great, only sender is in topic, request link\n            channel.push(\"link_request\", {\n              reply_to_session_id: this.socket.params().session_id,\n              public_key: publicKeyString\n            });\n\n            setTimeout(() => {\n              if (finished) return;\n              channel.leave();\n              reject(new Error(\"no_response\"));\n            }, LINK_ACTION_TIMEOUT);\n          } else if (numOccupants === 0) {\n            // Nobody in this channel, probably a bad code.\n            channel.leave();\n            reject(new Error(\"failed\"));\n          } else {\n            console.warn(\"link code channel already has 2 or more occupants, something fishy is going on.\");\n            channel.leave();\n            reject(new Error(\"in_use\"));\n          }\n        });\n\n        channel.on(\"link_response\", payload => {\n          finished = true;\n          channel.leave();\n\n          decryptObject(payload.public_key, privateKey, payload.data).then(resolve);\n        });\n\n        channel.join().receive(\"error\", r => console.error(r));\n      });\n    });\n  };\n}\n","// NOTE: We do not use an IV since we generate a new keypair each time we use these routines.\n\nasync function deriveKey(privateKey, publicKey) {\n  return crypto.subtle.deriveKey(\n    { name: \"ECDH\", public: publicKey },\n    privateKey,\n    { name: \"AES-CBC\", length: 256 },\n    true,\n    [\"encrypt\", \"decrypt\"]\n  );\n}\n\nasync function publicKeyToString(key) {\n  return JSON.stringify(await crypto.subtle.exportKey(\"jwk\", key));\n}\n\nasync function stringToPublicKey(s) {\n  return await crypto.subtle.importKey(\"jwk\", JSON.parse(s), { name: \"ECDH\", namedCurve: \"P-256\" }, true, []);\n}\n\nfunction stringToArrayBuffer(s) {\n  const buf = new Uint8Array(s.length);\n\n  for (let i = 0; i < s.length; i++) {\n    buf[i] = s.charCodeAt(i);\n  }\n\n  return buf;\n}\n\nfunction arrayBufferToString(b) {\n  const buf = new Uint8Array(b);\n  let s = \"\";\n\n  for (let i = 0; i < buf.byteLength; i++) {\n    s += String.fromCharCode(buf[i]);\n  }\n\n  return s;\n}\n\n// This allows a single object to be passed encrypted from a receiver in a req -> response flow\n\n// Requestor generates a public key and private key, and should send the public key to receiver.\nexport async function generateKeys() {\n  const keyPair = await crypto.subtle.generateKey({ name: \"ECDH\", namedCurve: \"P-256\" }, true, [\"deriveKey\"]);\n  const publicKeyString = await publicKeyToString(keyPair.publicKey);\n  return { publicKeyString, privateKey: keyPair.privateKey };\n}\n\n// Receiver takes the public key from requestor and passes obj to get a response public key and the encrypted data to return.\nexport async function generatePublicKeyAndEncryptedObject(incomingPublicKeyString, obj) {\n  const iv = new Uint8Array(16);\n  const incomingPublicKey = await stringToPublicKey(incomingPublicKeyString);\n  const keyPair = await crypto.subtle.generateKey({ name: \"ECDH\", namedCurve: \"P-256\" }, true, [\"deriveKey\"]);\n  const publicKeyString = await publicKeyToString(keyPair.publicKey);\n  const secret = await deriveKey(keyPair.privateKey, incomingPublicKey);\n\n  const encryptedData = btoa(\n    arrayBufferToString(\n      await crypto.subtle.encrypt({ name: \"AES-CBC\", iv }, secret, stringToArrayBuffer(JSON.stringify(obj)))\n    )\n  );\n\n  return { publicKeyString, encryptedData };\n}\n\n// Requestor then takes the receiver's public key, the private key (returned from generateKeys()), and the data from the receiver.\nexport async function decryptObject(publicKeyString, privateKey, base64value) {\n  const iv = new Uint8Array(16);\n  const publicKey = await stringToPublicKey(publicKeyString);\n  const secret = await deriveKey(privateKey, publicKey);\n  const ciphertext = stringToArrayBuffer(atob(base64value));\n  const data = await crypto.subtle.decrypt({ name: \"AES-CBC\", iv }, secret, ciphertext);\n  return JSON.parse(arrayBufferToString(data));\n}\n","const { Pathfinding } = require(\"three-pathfinding\");\n\nAFRAME.registerSystem(\"nav\", {\n  init: function() {\n    this.pathfinder = new Pathfinding();\n  },\n\n  loadMesh: function(mesh, zone) {\n    this.el.object3D.updateMatrixWorld();\n    const geometry = new THREE.Geometry().fromBufferGeometry(mesh.geometry);\n    geometry.applyMatrix(mesh.matrixWorld);\n    this.pathfinder.setZoneData(zone, Pathfinding.createZone(geometry));\n  }\n});\n","/**\n * Listens to events from an event source and re-emits them on this entity\n * @component event-repeater\n */\nAFRAME.registerComponent(\"event-repeater\", {\n  schema: {\n    eventSource: { type: \"selector\" },\n    events: { type: \"array\" }\n  },\n\n  play: function() {\n    this.data.eventListeners = [];\n    const events = this.data.events;\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i];\n      this.data.eventListeners[event] = this._handleEvent.bind(this, event);\n      this.data.eventSource.addEventListener(event, this.data.eventListeners[event]);\n    }\n  },\n\n  pause: function() {\n    const events = this.data.events;\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i];\n      this.data.eventSource.removeEventListener(event, this.data.eventListeners[event]);\n    }\n    this.data.eventListeners = [];\n  },\n\n  _handleEvent: function(event, e) {\n    this.el.emit(event, e.detail);\n  }\n});\n","import { LEFT_CONTROLLER_OFFSETS, RIGHT_CONTROLLER_OFFSETS } from \"./hand-controls2.js\";\n\n/**\n * Sets the offset of the aframe-physics shape on this entity based on the current VR controller type\n * @namespace user-input\n * @component controls-shape-offset\n */\nAFRAME.registerComponent(\"controls-shape-offset\", {\n  schema: {\n    additionalOffset: { type: \"vec3\", default: { x: 0, y: 0, z: -0.04 } }\n  },\n  init: function() {\n    this.controller = null;\n    this.shapeAdded = false;\n    this.isLeft = this.el.getAttribute(\"hand-controls2\") === \"left\";\n\n    this._handleControllerConnected = this._handleControllerConnected.bind(this);\n    this.el.addEventListener(\"controllerconnected\", this._handleControllerConnected);\n  },\n\n  remove: function() {\n    this.el.removeEventListener(\"controllerconnected\", this._handleControllerConnected);\n  },\n\n  tick: function() {\n    if (!this.shapeAdded && this.controller) {\n      this.shapeAdded = true;\n      const offsets = this.isLeft ? LEFT_CONTROLLER_OFFSETS : RIGHT_CONTROLLER_OFFSETS;\n      const hasOffset = offsets.hasOwnProperty(this.controller);\n      const offset = hasOffset ? offsets[this.controller] : offsets.default;\n      const position = new THREE.Vector3();\n      const quaternion = new THREE.Quaternion();\n      const scale = new THREE.Vector3();\n      offset.decompose(position, quaternion, scale);\n      position.add(this.data.additionalOffset);\n      quaternion.conjugate();\n\n      const shape = {\n        shape: \"box\",\n        halfExtents: { x: 0.03, y: 0.04, z: 0.05 },\n        orientation: quaternion,\n        offset: position\n      };\n\n      this.el.setAttribute(\"shape\", shape);\n    }\n  },\n\n  _handleControllerConnected: function(e) {\n    this.controller = e.detail.name;\n  }\n});\n","/* global AFRAME, console, setTimeout, clearTimeout */\n\nexport const AppModes = Object.freeze({ DEFAULT: \"default\", HUD: \"hud\" });\n\n/**\n * Simple system for keeping track of a modal app state\n * @system app-mode\n */\nAFRAME.registerSystem(\"app-mode\", {\n  init() {\n    this.setMode(AppModes.DEFAULT);\n  },\n\n  setMode(newMode) {\n    if (Object.values(AppModes).includes(newMode) && newMode !== this.mode) {\n      this.mode = newMode;\n      this.el.emit(\"app-mode-change\", { mode: this.mode });\n    }\n  }\n});\n\n/**\n * Toggle the isPlaying state of a component based on app mode\n * @namespace app-mode\n * @component app-mode-toggle-playing\n */\nAFRAME.registerComponent(\"app-mode-toggle-playing\", {\n  multiple: true,\n  schema: {\n    mode: { type: \"string\" },\n    invert: { type: \"boolean\", default: false }\n  },\n\n  init() {\n    const AppModeSystem = this.el.sceneEl.systems[\"app-mode\"];\n    this.el.sceneEl.addEventListener(\"app-mode-change\", e => {\n      this.updateComponentState(e.detail.mode === this.data.mode);\n    });\n    this.updateComponentState(AppModeSystem.mode === this.data.mode);\n  },\n\n  updateComponentState(isModeActive) {\n    const componentName = this.id;\n    this.el.components[componentName][isModeActive !== this.data.invert ? \"play\" : \"pause\"]();\n  }\n});\n\n/**\n * Toggle a boolean property of a component based on app mode\n * @namespace app-mode\n * @component app-mode-toggle-attribute\n */\nAFRAME.registerComponent(\"app-mode-toggle-attribute\", {\n  multiple: true,\n  schema: {\n    mode: { type: \"string\" },\n    invert: { type: \"boolean\", default: false },\n    property: { type: \"string\" }\n  },\n\n  init() {\n    const AppModeSystem = this.el.sceneEl.systems[\"app-mode\"];\n    this.el.sceneEl.addEventListener(\"app-mode-change\", e => {\n      this.updateComponentState(e.detail.mode === this.data.mode);\n    });\n    this.updateComponentState(AppModeSystem.mode === this.data.mode);\n  },\n\n  updateComponentState(isModeActive) {\n    const componentName = this.id;\n    this.el.setAttribute(componentName, this.data.property, isModeActive !== this.data.invert);\n  }\n});\n\n/**\n * Toggle aframe input mappings action set based on app mode\n * @namespace app-mode\n * @component app-mode-input-mappings\n */\nAFRAME.registerComponent(\"app-mode-input-mappings\", {\n  schema: {\n    modes: { default: [] },\n    actionSets: { default: [] }\n  },\n  init() {\n    this.el.sceneEl.addEventListener(\"app-mode-change\", e => {\n      const { modes, actionSets } = this.data;\n      const idx = modes.indexOf(e.detail.mode);\n      if (idx != -1 && modes[idx] && actionSets[idx] && AFRAME.inputActions[actionSets[idx]]) {\n        // TODO: this assumes full control over current action set reguardless of what else might be manipulating it, this is obviously wrong\n        AFRAME.currentInputMapping = actionSets[idx];\n      } else {\n        console.error(`no valid action set for ${e.detail.mode}`);\n      }\n    });\n  }\n});\n\n/**\n * Toggle visibility of an entity based on if the user is in vr mode or not\n * @namespace vr-mode\n * @component vr-mode-toggle-visibility\n */\nAFRAME.registerComponent(\"vr-mode-toggle-visibility\", {\n  schema: {\n    invert: { type: \"boolean\", default: false }\n  },\n\n  init() {\n    this.updateComponentState = this.updateComponentState.bind(this);\n  },\n\n  play() {\n    this.updateComponentState();\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  updateComponentState() {\n    const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n    this.el.setAttribute(\"visible\", inVRMode !== this.data.invert);\n  }\n});\n\n/**\n * Toggle the isPlaying state of a component based on app mode\n * @namespace vr-mode\n * @component vr-mode-toggle-playing\n */\nAFRAME.registerComponent(\"vr-mode-toggle-playing\", {\n  multiple: true,\n  schema: {\n    invert: { type: \"boolean\", default: false }\n  },\n\n  init() {\n    this.updateComponentState = this.updateComponentState.bind(this);\n  },\n\n  play() {\n    this.updateComponentState();\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  updateComponentState() {\n    const componentName = this.id;\n    const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n    this.el.components[componentName][inVRMode !== this.data.invert ? \"play\" : \"pause\"]();\n  }\n});\n\n/**\n * Toggle a CSS class based upon app mode.\n * @namespace vr-mode\n * @component vr-mode-toggle-class\n */\nAFRAME.registerComponent(\"vr-mode-toggle-class\", {\n  multiple: true,\n  schema: {\n    invert: { type: \"boolean\", default: false },\n    class: { type: \"string\", default: false }\n  },\n\n  init() {\n    this.updateComponentState = this.updateComponentState.bind(this);\n  },\n\n  play() {\n    this.updateComponentState();\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  updateComponentState() {\n    const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n\n    if (inVRMode) {\n      this.el.classList.add(this.data.class);\n    } else {\n      this.el.classList.remove(this.data.class);\n    }\n  }\n});\n","/**\n * Wraps navigator.share with a fallback to twitter for unsupported browsers\n */\nexport function share(opts) {\n  if (navigator.share) {\n    return navigator.share(opts);\n  } else {\n    const { title, url } = opts;\n    const width = 550;\n    const height = 420;\n    const left = (screen.width - width) / 2;\n    const top = (screen.height - height) / 2;\n    const params = `scrollbars=no,menubar=no,toolbar=no,status=no,width=${width},height=${height},top=${top},left=${left}`;\n    const tweetLink = `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(\n      title\n    )}`;\n    window.open(tweetLink, \"_blank\", params);\n    return Promise.resolve();\n  }\n}\n","// https://stackoverflow.com/questions/6209161/extract-the-current-dom-and-print-it-as-a-string-with-styles-intact\n//\n// Mapping between tag names and css default values lookup tables. This allows to exclude default values in the result.\nconst defaultStylesByTagName = {};\n\n// Styles inherited from style sheets will not be rendered for elements with these tag names\nconst noStyleTags = {\n  BASE: true,\n  HEAD: true,\n  HTML: true,\n  META: true,\n  NOFRAME: true,\n  NOSCRIPT: true,\n  PARAM: true,\n  SCRIPT: true,\n  STYLE: true,\n  TITLE: true\n};\n\n// This list determines which css default values lookup tables are precomputed at load time\n// Lookup tables for other tag names will be automatically built at runtime if needed\nconst tagNames = [\n  \"A\",\n  \"ABBR\",\n  \"ADDRESS\",\n  \"AREA\",\n  \"ARTICLE\",\n  \"ASIDE\",\n  \"AUDIO\",\n  \"B\",\n  \"BASE\",\n  \"BDI\",\n  \"BDO\",\n  \"BLOCKQUOTE\",\n  \"BODY\",\n  \"BR\",\n  \"BUTTON\",\n  \"CANVAS\",\n  \"CAPTION\",\n  \"CENTER\",\n  \"CITE\",\n  \"CODE\",\n  \"COL\",\n  \"COLGROUP\",\n  \"COMMAND\",\n  \"DATALIST\",\n  \"DD\",\n  \"DEL\",\n  \"DETAILS\",\n  \"DFN\",\n  \"DIV\",\n  \"DL\",\n  \"DT\",\n  \"EM\",\n  \"EMBED\",\n  \"FIELDSET\",\n  \"FIGCAPTION\",\n  \"FIGURE\",\n  \"FONT\",\n  \"FOOTER\",\n  \"FORM\",\n  \"H1\",\n  \"H2\",\n  \"H3\",\n  \"H4\",\n  \"H5\",\n  \"H6\",\n  \"HEAD\",\n  \"HEADER\",\n  \"HGROUP\",\n  \"HR\",\n  \"HTML\",\n  \"I\",\n  \"IFRAME\",\n  \"IMG\",\n  \"INPUT\",\n  \"INS\",\n  \"KBD\",\n  \"KEYGEN\",\n  \"LABEL\",\n  \"LEGEND\",\n  \"LI\",\n  \"LINK\",\n  \"MAP\",\n  \"MARK\",\n  \"MATH\",\n  \"MENU\",\n  \"META\",\n  \"METER\",\n  \"NAV\",\n  \"NOBR\",\n  \"NOSCRIPT\",\n  \"OBJECT\",\n  \"OL\",\n  \"OPTION\",\n  \"OPTGROUP\",\n  \"OUTPUT\",\n  \"P\",\n  \"PARAM\",\n  \"PRE\",\n  \"PROGRESS\",\n  \"Q\",\n  \"RP\",\n  \"RT\",\n  \"RUBY\",\n  \"S\",\n  \"SAMP\",\n  \"SCRIPT\",\n  \"SECTION\",\n  \"SELECT\",\n  \"SMALL\",\n  \"SOURCE\",\n  \"SPAN\",\n  \"STRONG\",\n  \"STYLE\",\n  \"SUB\",\n  \"SUMMARY\",\n  \"SUP\",\n  \"SVG\",\n  \"TABLE\",\n  \"TBODY\",\n  \"TD\",\n  \"TEXTAREA\",\n  \"TFOOT\",\n  \"TH\",\n  \"THEAD\",\n  \"TIME\",\n  \"TITLE\",\n  \"TR\",\n  \"TRACK\",\n  \"U\",\n  \"UL\",\n  \"VAR\",\n  \"VIDEO\",\n  \"WBR\"\n];\n\nfunction computeDefaultStyleByTagName(tagName) {\n  const defaultStyle = {};\n  const element = document.body.appendChild(document.createElement(tagName));\n  const computedStyle = getComputedStyle(element);\n  for (let i = 0; i < computedStyle.length; i++) {\n    defaultStyle[computedStyle[i]] = computedStyle[computedStyle[i]];\n  }\n  document.body.removeChild(element);\n  return defaultStyle;\n}\n\nfunction getDefaultStyleByTagName(tagName) {\n  tagName = tagName.toUpperCase();\n  if (!defaultStylesByTagName[tagName]) {\n    defaultStylesByTagName[tagName] = computeDefaultStyleByTagName(tagName);\n  }\n  return defaultStylesByTagName[tagName];\n}\n\nexport function warmSerializeElement() {\n  for (let i = 0; i < tagNames.length; i++) {\n    if (!noStyleTags[tagNames[i]]) {\n      defaultStylesByTagName[tagNames[i]] = computeDefaultStyleByTagName(tagNames[i]);\n    }\n  }\n}\n\nexport default function serializeElement(el) {\n  if (Object.keys(defaultStylesByTagName).length === 0) {\n    // Precompute the lookup tables.\n    warmSerializeElement();\n  }\n\n  if (el.nodeType !== Node.ELEMENT_NODE) {\n    throw new TypeError();\n  }\n  const cssTexts = [];\n  const elements = el.querySelectorAll(\"*\");\n  for (let i = 0; i < elements.length; i++) {\n    const e = elements[i];\n    if (!noStyleTags[e.tagName]) {\n      const computedStyle = getComputedStyle(e);\n      const defaultStyle = getDefaultStyleByTagName(e.tagName);\n      cssTexts[i] = e.style.cssText;\n      for (let ii = 0; ii < computedStyle.length; ii++) {\n        const cssPropName = computedStyle[ii];\n\n        // Skip non-standard CSS for now, because it overwrites things like color\n        if (cssPropName.startsWith(\"-webkit\")) continue;\n\n        if (computedStyle[cssPropName] !== defaultStyle[cssPropName]) {\n          e.style[cssPropName] = computedStyle[cssPropName];\n        }\n      }\n    }\n  }\n  const result = el.outerHTML;\n  for (let i = 0; i < elements.length; i++) {\n    elements[i].style.cssText = cssTexts[i];\n  }\n  return result;\n}\n","import \"./utils/debug-log\";\n\nconsole.log(`Hubs version: ${process.env.BUILD_VERSION || \"?\"}`);\n\nimport \"./assets/stylesheets/hub.scss\";\n\nimport \"aframe\";\nimport \"./utils/logging\";\nimport { patchWebGLRenderingContext } from \"./utils/webgl\";\npatchWebGLRenderingContext();\n\nimport \"three/examples/js/loaders/GLTFLoader\";\nimport \"networked-aframe/src/index\";\nimport \"naf-janus-adapter\";\nimport \"aframe-teleport-controls\";\nimport \"./components/teleport-controls-matrix-auto-update\";\nimport \"aframe-billboard-component\";\nimport \"aframe-rounded\";\nimport \"webrtc-adapter\";\nimport \"aframe-slice9-component\";\nimport \"aframe-motion-capture-components\";\nimport \"./utils/audio-context-fix\";\nimport \"./utils/threejs-positional-audio-updatematrixworld\";\nimport \"./utils/threejs-world-update\";\nimport { detectOS, detect } from \"detect-browser\";\nimport { getReticulumFetchUrl } from \"./utils/phoenix-utils\";\n\nimport nextTick from \"./utils/next-tick\";\nimport { addAnimationComponents } from \"./utils/animation\";\nimport { Presence } from \"phoenix\";\n\nimport \"./components/scene-components\";\nimport \"./components/wasd-to-analog2d\"; //Might be a behaviour or activator in the future\nimport \"./components/mute-mic\";\nimport \"./components/bone-mute-state-indicator\";\nimport \"./components/bone-visibility\";\nimport \"./components/in-world-hud\";\nimport \"./components/virtual-gamepad-controls\";\nimport \"./components/ik-controller\";\nimport \"./components/hand-controls2\";\nimport \"./components/character-controller\";\nimport \"./components/hoverable-visuals\";\nimport \"./components/hover-visuals\";\nimport \"./components/haptic-feedback\";\nimport \"./components/offset-relative-to\";\nimport \"./components/player-info\";\nimport \"./components/debug\";\nimport \"./components/hand-poses\";\nimport \"./components/gltf-bundle\";\nimport \"./components/hud-controller\";\nimport \"./components/freeze-controller\";\nimport \"./components/icon-button\";\nimport \"./components/text-button\";\nimport \"./components/block-button\";\nimport \"./components/visibility-while-frozen\";\nimport \"./components/stats-plus\";\nimport \"./components/networked-avatar\";\nimport \"./components/avatar-replay\";\nimport \"./components/media-views\";\nimport \"./components/pinch-to-move\";\nimport \"./components/pitch-yaw-rotator\";\nimport \"./components/auto-scale-cannon-physics-body\";\nimport \"./components/position-at-box-shape-border\";\nimport \"./components/pinnable\";\nimport \"./components/pin-networked-object-button\";\nimport \"./components/remove-networked-object-button\";\nimport \"./components/camera-focus-button\";\nimport \"./components/mirror-camera-button\";\nimport \"./components/unmute-video-button\";\nimport \"./components/destroy-at-extreme-distances\";\nimport \"./components/gamma-factor\";\nimport \"./components/visible-to-owner\";\nimport \"./components/camera-tool\";\nimport \"./components/scene-sound\";\nimport \"./components/emit-state-change\";\nimport \"./components/action-to-event\";\nimport \"./components/emit-scene-event-on-remove\";\nimport \"./components/stop-event-propagation\";\nimport \"./components/animation\";\nimport \"./components/follow-in-lower-fov\";\nimport \"./components/matrix-auto-update\";\nimport \"./components/clone-media-button\";\nimport \"./components/open-media-button\";\n\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport UIRoot from \"./react-components/ui-root\";\nimport AuthChannel from \"./utils/auth-channel\";\nimport HubChannel from \"./utils/hub-channel\";\nimport LinkChannel from \"./utils/link-channel\";\nimport { connectToReticulum } from \"./utils/phoenix-utils\";\nimport { disableiOSZoom } from \"./utils/disable-ios-zoom\";\nimport { proxiedUrlFor } from \"./utils/media-utils\";\nimport MessageDispatch from \"./message-dispatch\";\nimport SceneEntryManager from \"./scene-entry-manager\";\nimport Subscriptions from \"./subscriptions\";\nimport { createInWorldLogMessage } from \"./react-components/chat-message\";\n\nimport \"./systems/nav\";\nimport \"./systems/personal-space-bubble\";\nimport \"./systems/app-mode\";\nimport \"./systems/exit-on-blur\";\nimport \"./systems/camera-tools\";\nimport \"./systems/userinput/userinput\";\nimport \"./systems/camera-mirror\";\nimport \"./systems/userinput/userinput-debug\";\nimport \"./systems/frame-scheduler\";\n\nimport \"./gltf-component-mappings\";\n\nimport { App } from \"./App\";\n\nwindow.APP = new App();\nwindow.APP.RENDER_ORDER = {\n  HUD_BACKGROUND: 1,\n  HUD_ICONS: 2,\n  CURSOR: 3\n};\nconst store = window.APP.store;\n\nconst qs = new URLSearchParams(location.search);\nconst isMobile = AFRAME.utils.device.isMobile();\n\nTHREE.Object3D.DefaultMatrixAutoUpdate = false;\nwindow.APP.quality = qs.get(\"quality\") || isMobile ? \"low\" : \"high\";\n\nimport \"aframe-physics-system\";\nimport \"aframe-physics-extras\";\nimport \"super-hands\";\nimport \"./components/super-networked-interactable\";\nimport \"./components/networked-counter\";\nimport \"./components/event-repeater\";\nimport \"./components/controls-shape-offset\";\nimport \"./components/set-yxz-order\";\nimport \"./components/set-sounds-invisible\";\n\nimport \"./components/cardboard-controls\";\n\nimport \"./components/cursor-controller\";\n\nimport \"./components/nav-mesh-helper\";\n\nimport \"./components/tools/pen\";\nimport \"./components/tools/networked-drawing\";\nimport \"./components/tools/drawing-manager\";\n\nimport registerNetworkSchemas from \"./network-schemas\";\nimport registerTelemetry from \"./telemetry\";\nimport { warmSerializeElement } from \"./utils/serialize-element\";\n\nimport { getAvailableVREntryTypes } from \"./utils/vr-caps-detect.js\";\nimport ConcurrentLoadDetector from \"./utils/concurrent-load-detector.js\";\n\nimport qsTruthy from \"./utils/qs_truthy\";\n\nconst isBotMode = qsTruthy(\"bot\");\nconst isTelemetryDisabled = qsTruthy(\"disable_telemetry\");\nconst isDebug = qsTruthy(\"debug\");\n\nif (!isBotMode && !isTelemetryDisabled) {\n  registerTelemetry();\n}\n\ndisableiOSZoom();\n\nconst concurrentLoadDetector = new ConcurrentLoadDetector();\nconcurrentLoadDetector.start();\n\nstore.init();\n\nfunction getPlatformUnsupportedReason() {\n  if (typeof RTCDataChannelEvent === \"undefined\") return \"no_data_channels\";\n  return null;\n}\n\nfunction pollForSupportAvailability(callback) {\n  const availabilityUrl = getReticulumFetchUrl(\"/api/v1/support/availability\");\n  let isSupportAvailable = null;\n\n  const updateIfChanged = () =>\n    fetch(availabilityUrl).then(({ ok }) => {\n      if (isSupportAvailable === ok) return;\n      isSupportAvailable = ok;\n      callback(isSupportAvailable);\n    });\n\n  updateIfChanged();\n  setInterval(updateIfChanged, 30000);\n}\n\nfunction setupLobbyCamera() {\n  const camera = document.querySelector(\"#player-camera\");\n  const previewCamera = document.querySelector(\"#environment-scene\").object3D.getObjectByName(\"scene-preview-camera\");\n\n  if (previewCamera) {\n    camera.object3D.position.copy(previewCamera.position);\n    camera.object3D.rotation.copy(previewCamera.rotation);\n    camera.object3D.rotation.reorder(\"YXZ\");\n  } else {\n    const cameraPos = camera.object3D.position;\n    camera.object3D.position.set(cameraPos.x, 2.5, cameraPos.z);\n  }\n\n  camera.object3D.matrixNeedsUpdate = true;\n\n  camera.setAttribute(\"scene-preview-camera\", \"positionOnly: true; duration: 60\");\n  camera.components[\"pitch-yaw-rotator\"].set(camera.object3D.rotation.x, camera.object3D.rotation.y);\n}\n\nlet uiProps = {};\n\nfunction mountUI(props = {}) {\n  const scene = document.querySelector(\"a-scene\");\n  const disableAutoExitOnConcurrentLoad = qsTruthy(\"allow_multi\");\n  const forcedVREntryType = qs.get(\"vr_entry_type\");\n\n  ReactDOM.render(\n    <UIRoot\n      {...{\n        scene,\n        isBotMode,\n        concurrentLoadDetector,\n        disableAutoExitOnConcurrentLoad,\n        forcedVREntryType,\n        store,\n        ...props\n      }}\n    />,\n    document.getElementById(\"ui-root\")\n  );\n}\n\nfunction remountUI(props) {\n  uiProps = { ...uiProps, ...props };\n  mountUI(uiProps);\n}\n\nasync function handleHubChannelJoined(entryManager, hubChannel, messageDispatch, data) {\n  const scene = document.querySelector(\"a-scene\");\n\n  if (NAF.connection.isConnected()) {\n    // Send complete sync on phoenix re-join.\n    NAF.connection.entities.completeSync(null, true);\n    return;\n  }\n\n  const hub = data.hubs[0];\n  const defaultSpaceTopic = hub.topics[0];\n  const glbAsset = defaultSpaceTopic.assets.find(a => a.asset_type === \"glb\");\n  const bundleAsset = defaultSpaceTopic.assets.find(a => a.asset_type === \"gltf_bundle\");\n  const sceneUrl = (glbAsset || bundleAsset).src;\n  const hasExtension = /\\.gltf/i.test(sceneUrl) || /\\.glb/i.test(sceneUrl);\n\n  console.log(`Scene URL: ${sceneUrl}`);\n  console.log(`Janus host: ${hub.host}`);\n  const environmentScene = document.querySelector(\"#environment-scene\");\n  const objectsScene = document.querySelector(\"#objects-scene\");\n  const objectsUrl = getReticulumFetchUrl(`/${hub.hub_id}/objects.gltf`);\n  const objectsEl = document.createElement(\"a-entity\");\n  objectsEl.setAttribute(\"gltf-model-plus\", { src: objectsUrl, useCache: false, inflate: true });\n  objectsScene.appendChild(objectsEl);\n\n  if (glbAsset || hasExtension) {\n    const gltfEl = document.createElement(\"a-entity\");\n    gltfEl.setAttribute(\"gltf-model-plus\", { src: proxiedUrlFor(sceneUrl), useCache: false, inflate: true });\n    gltfEl.addEventListener(\"model-loaded\", () => environmentScene.emit(\"bundleloaded\"));\n    environmentScene.appendChild(gltfEl);\n  } else {\n    // TODO kill bundles\n    environmentScene.setAttribute(\"gltf-bundle\", `src: ${sceneUrl}`);\n  }\n\n  remountUI({\n    hubId: hub.hub_id,\n    hubName: hub.name,\n    hubEntryCode: hub.entry_code,\n    onSendMessage: messageDispatch.dispatch\n  });\n\n  document\n    .querySelector(\"#hud-hub-entry-link\")\n    .setAttribute(\"text\", { value: `hub.link/${hub.entry_code}`, width: 1.1, align: \"center\" });\n\n  // Wait for scene objects to load before connecting, so there is no race condition on network state.\n  objectsEl.addEventListener(\"model-loaded\", async el => {\n    if (el.target !== objectsEl) return;\n\n    scene.setAttribute(\"networked-scene\", {\n      room: hub.hub_id,\n      serverURL: `wss://${hub.host}`,\n      debug: !!isDebug\n    });\n\n    while (!scene.components[\"networked-scene\"] || !scene.components[\"networked-scene\"].data) await nextTick();\n    scene.components[\"networked-scene\"]\n      .connect()\n      .then(() => {\n        let newHostPollInterval = null;\n\n        // When reconnecting, update the server URL if necessary\n        NAF.connection.adapter.setReconnectionListeners(\n          () => {\n            if (newHostPollInterval) return;\n\n            newHostPollInterval = setInterval(async () => {\n              const currentServerURL = NAF.connection.adapter.serverUrl;\n              const newHubHost = await hubChannel.getHost();\n              const newServerURL = `wss://${newHubHost}`;\n\n              if (currentServerURL !== newServerURL) {\n                console.log(\"Connecting to new Janus server \" + newServerURL);\n                scene.setAttribute(\"networked-scene\", { serverURL: newServerURL });\n                NAF.connection.adapter.serverUrl = newServerURL;\n              }\n            }, 1000);\n          },\n          () => {\n            clearInterval(newHostPollInterval);\n            newHostPollInterval = null;\n          },\n          null\n        );\n\n        NAF.connection.adapter.reliableTransport = (clientId, dataType, data) => {\n          const payload = { dataType, data };\n\n          if (clientId) {\n            payload.clientId = clientId;\n          }\n\n          hubChannel.channel.push(\"naf\", payload);\n        };\n      })\n      .catch(connectError => {\n        // hacky until we get return codes\n        const isFull = connectError.error && connectError.error.msg.match(/\\bfull\\b/i);\n        console.error(connectError);\n        remountUI({ roomUnavailableReason: isFull ? \"full\" : \"connect_error\" });\n        entryManager.exitScene();\n\n        return;\n      });\n  });\n}\n\nasync function runBotMode(scene, entryManager) {\n  const noop = () => {};\n  scene.renderer = { setAnimationLoop: noop, render: noop };\n\n  while (!NAF.connection.isConnected()) await nextTick();\n  entryManager.enterSceneWhenLoaded(new MediaStream(), false);\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\n  warmSerializeElement();\n\n  // HACK: On Safari for iOS & MacOS, if mic permission is not granted, subscriber webrtc negotiation fails.\n  const detectedOS = detectOS(navigator.userAgent);\n  const browser = detect();\n  if ([\"iOS\", \"Mac OS\"].includes(detectedOS) && [\"safari\", \"ios\"].includes(browser.name)) {\n    try {\n      await navigator.mediaDevices.getUserMedia({ audio: true });\n    } catch (e) {\n      remountUI({ showSafariMicDialog: true });\n      return;\n    }\n  }\n\n  const hubId = qs.get(\"hub_id\") || document.location.pathname.substring(1).split(\"/\")[0];\n  console.log(`Hub ID: ${hubId}`);\n\n  const subscriptions = new Subscriptions(hubId);\n\n  if (navigator.serviceWorker) {\n    try {\n      navigator.serviceWorker\n        .register(\"/hub.service.js\")\n        .then(() => {\n          navigator.serviceWorker.ready\n            .then(registration => subscriptions.setRegistration(registration))\n            .catch(() => subscriptions.setRegistrationFailed());\n        })\n        .catch(() => subscriptions.setRegistrationFailed());\n    } catch (e) {\n      subscriptions.setRegistrationFailed();\n    }\n  }\n\n  const scene = document.querySelector(\"a-scene\");\n  scene.removeAttribute(\"keyboard-shortcuts\"); // Remove F and ESC hotkeys from aframe\n  scene.setAttribute(\"shadow\", { enabled: window.APP.quality !== \"low\" }); // Disable shadows on low quality\n\n  const authChannel = new AuthChannel(store);\n  const hubChannel = new HubChannel(store);\n  const entryManager = new SceneEntryManager(hubChannel);\n  entryManager.onRequestAuthentication = (\n    signInMessageId,\n    signInCompleteMessageId,\n    signInContinueTextId,\n    onContinueAfterSignIn\n  ) => {\n    remountUI({\n      showSignInDialog: true,\n      signInMessageId,\n      signInCompleteMessageId,\n      signInContinueTextId,\n      onContinueAfterSignIn: () => {\n        remountUI({ showSignInDialog: false });\n        onContinueAfterSignIn();\n      }\n    });\n  };\n  entryManager.init();\n\n  const linkChannel = new LinkChannel(store);\n\n  window.APP.scene = scene;\n\n  scene.addEventListener(\"enter-vr\", () => {\n    document.body.classList.add(\"vr-mode\");\n\n    if (!scene.is(\"entered\")) {\n      // If VR headset is activated, refreshing page will fire vrdisplayactivate\n      // which puts A-Frame in VR mode, so exit VR mode whenever it is attempted\n      // to be entered and we haven't entered the room yet.\n      console.log(\"Pre-emptively exiting VR mode.\");\n      scene.exitVR();\n    }\n  });\n\n  scene.addEventListener(\"exit-vr\", () => document.body.classList.remove(\"vr-mode\"));\n\n  registerNetworkSchemas();\n\n  remountUI({\n    authChannel,\n    hubChannel,\n    linkChannel,\n    subscriptions,\n    enterScene: entryManager.enterScene,\n    exitScene: entryManager.exitScene,\n    initialIsSubscribed: subscriptions.isSubscribed()\n  });\n\n  scene.addEventListener(\"action_focus_chat\", () => document.querySelector(\".chat-focus-target\").focus());\n\n  pollForSupportAvailability(isSupportAvailable => remountUI({ isSupportAvailable }));\n\n  const platformUnsupportedReason = getPlatformUnsupportedReason();\n\n  if (platformUnsupportedReason) {\n    remountUI({ platformUnsupportedReason });\n    entryManager.exitScene();\n    return;\n  }\n\n  if (qs.get(\"required_version\") && process.env.BUILD_VERSION) {\n    const buildNumber = process.env.BUILD_VERSION.split(\" \", 1)[0]; // e.g. \"123 (abcd5678)\"\n\n    if (qs.get(\"required_version\") !== buildNumber) {\n      remountUI({ roomUnavailableReason: \"version_mismatch\" });\n      setTimeout(() => document.location.reload(), 5000);\n      entryManager.exitScene();\n      return;\n    }\n  }\n\n  const availableVREntryTypes = await getAvailableVREntryTypes();\n\n  if (availableVREntryTypes.isInHMD) {\n    remountUI({ availableVREntryTypes, forcedVREntryType: \"vr\" });\n\n    if (/Oculus/.test(navigator.userAgent)) {\n      // HACK - The polyfill reports Cardboard as the primary VR display on startup out ahead of Oculus Go on Oculus Browser 5.5.0 beta. This display is cached by A-Frame,\n      // so we need to resolve that and get the real VRDisplay before entering as well.\n      const displays = await navigator.getVRDisplays();\n      const vrDisplay = displays.length && displays[0];\n      AFRAME.utils.device.getVRDisplay = () => vrDisplay;\n    }\n  } else {\n    remountUI({ availableVREntryTypes });\n  }\n\n  const environmentScene = document.querySelector(\"#environment-scene\");\n\n  environmentScene.addEventListener(\"bundleloaded\", () => {\n    remountUI({ environmentSceneLoaded: true });\n\n    for (const modelEl of environmentScene.children) {\n      addAnimationComponents(modelEl);\n    }\n\n    setupLobbyCamera();\n\n    // Replace renderer with a noop renderer to reduce bot resource usage.\n    if (isBotMode) {\n      runBotMode(scene, entryManager);\n    }\n  });\n\n  const socket = connectToReticulum(isDebug);\n  remountUI({ sessionId: socket.params().session_id });\n\n  // Hub local channel\n  const context = {\n    mobile: isMobile,\n    hmd: availableVREntryTypes.isInHMD\n  };\n\n  // Reticulum global channel\n  const retPhxChannel = socket.channel(`ret`, { hub_id: hubId });\n  retPhxChannel\n    .join()\n    .receive(\"ok\", async data => subscriptions.setVapidPublicKey(data.vapid_public_key))\n    .receive(\"error\", res => {\n      subscriptions.setVapidPublicKey(null);\n      console.error(res);\n    });\n\n  const pushSubscriptionEndpoint = await subscriptions.getCurrentEndpoint();\n  const joinPayload = { profile: store.state.profile, push_subscription_endpoint: pushSubscriptionEndpoint, context };\n  const hubPhxChannel = socket.channel(`hub:${hubId}`, joinPayload);\n\n  const presenceLogEntries = [];\n  const addToPresenceLog = entry => {\n    entry.key = Date.now().toString();\n\n    presenceLogEntries.push(entry);\n    remountUI({ presenceLogEntries });\n    scene.emit(`presence-log-${entry.type}`);\n\n    // Fade out and then remove\n    setTimeout(() => {\n      entry.expired = true;\n      remountUI({ presenceLogEntries });\n\n      setTimeout(() => {\n        presenceLogEntries.splice(presenceLogEntries.indexOf(entry), 1);\n        remountUI({ presenceLogEntries });\n      }, 5000);\n    }, 20000);\n  };\n\n  const messageDispatch = new MessageDispatch(scene, entryManager, hubChannel, addToPresenceLog, remountUI);\n\n  hubPhxChannel\n    .join()\n    .receive(\"ok\", async data => {\n      hubChannel.setPhoenixChannel(hubPhxChannel);\n\n      const { token } = store.state.credentials;\n      if (token) {\n        await hubChannel.signIn(token);\n      }\n\n      subscriptions.setHubChannel(hubChannel);\n      subscriptions.setSubscribed(data.subscriptions.web_push);\n      remountUI({ initialIsSubscribed: subscriptions.isSubscribed() });\n      await handleHubChannelJoined(entryManager, hubChannel, messageDispatch, data);\n    })\n    .receive(\"error\", res => {\n      if (res.reason === \"closed\") {\n        entryManager.exitScene();\n        remountUI({ roomUnavailableReason: \"closed\" });\n      }\n\n      console.error(res);\n    });\n\n  const hubPhxPresence = new Presence(hubPhxChannel);\n\n  let isInitialSync = true;\n  const vrHudPresenceCount = document.querySelector(\"#hud-presence-count\");\n\n  hubPhxPresence.onSync(() => {\n    remountUI({ presences: hubPhxPresence.state });\n    const occupantCount = Object.entries(hubPhxPresence.state).length;\n    vrHudPresenceCount.setAttribute(\"text\", \"value\", occupantCount.toString());\n\n    if (!isInitialSync) return;\n    // Wire up join/leave event handlers after initial sync.\n    isInitialSync = false;\n\n    hubPhxPresence.onJoin((sessionId, current, info) => {\n      const meta = info.metas[info.metas.length - 1];\n\n      if (current) {\n        // Change to existing presence\n        const isSelf = sessionId === socket.params().session_id;\n        const currentMeta = current.metas[0];\n\n        if (!isSelf && currentMeta.presence !== meta.presence && meta.profile.displayName) {\n          addToPresenceLog({\n            type: \"entered\",\n            presence: meta.presence,\n            name: meta.profile.displayName\n          });\n        }\n\n        if (currentMeta.profile && meta.profile && currentMeta.profile.displayName !== meta.profile.displayName) {\n          addToPresenceLog({\n            type: \"display_name_changed\",\n            oldName: currentMeta.profile.displayName,\n            newName: meta.profile.displayName\n          });\n        }\n      } else {\n        // New presence\n        const meta = info.metas[0];\n\n        if (meta.presence && meta.profile.displayName) {\n          addToPresenceLog({\n            type: \"join\",\n            presence: meta.presence,\n            name: meta.profile.displayName\n          });\n        }\n      }\n    });\n\n    hubPhxPresence.onLeave((sessionId, current, info) => {\n      if (current && current.metas.length > 0) return;\n\n      const meta = info.metas[0];\n\n      if (meta.profile.displayName) {\n        addToPresenceLog({\n          type: \"leave\",\n          name: meta.profile.displayName\n        });\n      }\n    });\n  });\n\n  hubPhxChannel.on(\"naf\", data => {\n    if (!NAF.connection.adapter) return;\n    NAF.connection.adapter.onData(data);\n  });\n\n  hubPhxChannel.on(\"message\", ({ session_id, type, body }) => {\n    const userInfo = hubPhxPresence.state[session_id];\n    if (!userInfo) return;\n    const maySpawn = scene.is(\"entered\");\n\n    const incomingMessage = { name: userInfo.metas[0].profile.displayName, type, body, maySpawn };\n\n    if (scene.is(\"vr-mode\")) {\n      createInWorldLogMessage(incomingMessage);\n    }\n\n    addToPresenceLog(incomingMessage);\n  });\n\n  authChannel.setSocket(socket);\n  linkChannel.setSocket(socket);\n});\n","import qsTruthy from \"./qs_truthy\";\n\nconst showLog = qsTruthy(\"debug_log\");\n\nif (showLog) {\n  const template = document.createElement(\"template\");\n  template.innerHTML = `\n\t<style>\n\t  #debug-log {\n\t\tposition: absolute;\n\t\ttop: 13em;\n\t\tbackground: white;\n\t\topacity: 0.7;\n      }\n      #debug-log, #debug-log-input {\n\t\tfont-family: monospace;\n\t\tfont-size: 11px;\n\t\twidth: 100%;\n\t  }\n\n      #debug-log-controls {\n        display: flex;\n        padding: 0.2em;\n      }\n\n      #debug-log-eval {\n        display: flex;\n        flex: 1;\n      }\n\n      #debug-log-log {\n        overflow: auto;\n        height: 30vh;\n      }\n      #debug-log-log.minimized {\n        height: auto;\n      }\n      #debug-log-log.minimized .entry {\n        display: none;\n      }\n      #debug-log-log.minimized .entry:last-child {\n        display: block;\n      }\n      #debug-log-log .entry {\n        border: 1px solid grey;\n        margin: 0.2em;\n        padding: 0.2em;\n      }\n      #debug-log-log .entry.error { background-color: pink; }\n      #debug-log-log .entry.warn { background-color: orange; }\n\t</style>\n\t<div id=\"debug-log\">\n        <div id=\"debug-log-controls\">\n          <form id=\"debug-log-eval\">\n            <input id=\"debug-log-input\" placeholder=\"&gt;&gt;\" autocorrect=\"off\" autocapitalize=\"none\" />\n            <button>&gt;</button>\n          </form>\n          <button id=\"debug-log-minimize\">_</button>\n        </div>\n\t\t<div id=\"debug-log-log\"></div>\n\t</div>\n  `;\n\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    document.body.appendChild(template.content);\n  });\n\n  const debugLog = template.content.querySelector(\"#debug-log-log\");\n  debugLog.addEventListener(\"wheel\", e => e.stopPropagation());\n\n  const debugLogInput = template.content.querySelector(\"#debug-log-input\");\n  const debugLogEval = template.content.querySelector(\"#debug-log-eval\");\n  debugLogEval.onsubmit = e => {\n    e.preventDefault();\n    console.log(eval(`(${debugLogInput.value})`));\n  };\n\n  let minimized = false;\n  const debugLogMinimize = template.content.querySelector(\"#debug-log-minimize\");\n  debugLogMinimize.onclick = () => {\n    minimized = !minimized;\n    debugLog.className = minimized ? \"minimized\" : \"\";\n    debugLog.scrollTop = debugLog.scrollHeight - debugLog.clientHeight;\n  };\n\n  const origConsoleLog = console.log;\n  const origConsoleError = console.error;\n  const origConsoleWarn = console.warn;\n\n  const log = function(className, objs) {\n    let entry;\n    if (debugLog.childNodes.length > 1000) {\n      entry = debugLog.firstChild;\n    } else {\n      entry = document.createElement(\"div\");\n      entry.classList.add(\"entry\");\n    }\n    entry.classList.remove(\"warn\", \"error\");\n    entry.classList.add(className);\n\n    const arr = Array.from(objs);\n    const firstObj = arr[0];\n    let content;\n    if (typeof firstObj === \"string\" && firstObj.includes(\"%c\")) {\n      content = firstObj.replace(/%c/g, \"\");\n    } else if (firstObj instanceof Error) {\n      content = `${firstObj.message}\\n${firstObj.stack}`;\n    } else {\n      content = arr\n        .map(obj => {\n          if (typeof obj === \"string\") return obj;\n          return JSON.stringify(obj);\n        })\n        .join(\" \");\n    }\n\n    const time = new Date().toISOString().substring(11, 23);\n    entry.textContent = `[${time}] ${content}`;\n\n    const shouldScroll = debugLog.scrollTop === debugLog.scrollHeight - debugLog.clientHeight;\n    debugLog.append(entry);\n    if (shouldScroll) debugLog.scrollTop = debugLog.scrollHeight - debugLog.clientHeight;\n  };\n\n  console.warn = function() {\n    origConsoleWarn.apply(null, arguments);\n    log(\"warn\", arguments);\n  };\n\n  console.error = function() {\n    origConsoleError.apply(null, arguments);\n    log(\"error\", arguments);\n  };\n\n  console.log = function() {\n    origConsoleLog.apply(null, arguments);\n    log(\"log\", arguments);\n  };\n\n  window.onunhandledrejection = e => log(\"error\", [e.reason.message, e.reason.code, e.reason.name]);\n  window.onerror = e => log(\"error\", [e]);\n}\n","AFRAME.registerComponent(\"teleport-controls-matrix-auto-update\", {\n  init: function() {\n    this.teleportControls = this.el.components[\"teleport-controls\"];\n    this._updateMatrixNeedsUpdate = this._updateMatrixNeedsUpdate.bind(this);\n  },\n\n  play: function() {\n    this.el.sceneEl.addEventListener(\"teleported\", this._updateMatrixNeedsUpdate);\n  },\n\n  pause: function() {\n    this.el.sceneEl.removeEventListener(\"teleported\", this._updateMatrixNeedsUpdate);\n  },\n\n  tick: function() {\n    if (this.lastHitEntity !== this.teleportControls.hitEntity) {\n      this.teleportControls.hitEntity.object3D.traverse(o => (o.matrixAutoUpdate = true));\n      this.lastHitEntity = this.teleportControls.hitEntity;\n    }\n  },\n\n  _updateMatrixNeedsUpdate: function() {\n    this.teleportControls.data.cameraRig.matrixNeedsUpdate = true;\n  }\n});\n","/**\n * Chrome and Safari will start Audio contexts in a \"suspended\" state.\n * A user interaction (touch/mouse event) is needed in order to resume the AudioContext.\n */\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const ctx = THREE.AudioContext.getContext();\n\n  function resume() {\n    ctx.resume();\n\n    setTimeout(function() {\n      if (ctx.state === \"running\") {\n        document.body.removeEventListener(\"touchend\", resume, false);\n        document.body.removeEventListener(\"mouseup\", resume, false);\n      }\n    }, 0);\n  }\n\n  document.body.addEventListener(\"touchend\", resume, false);\n  document.body.addEventListener(\"mouseup\", resume, false);\n});\n","// Monkeypatch to address performance issue with updating panner nodes\n// TODO this needs to be merged into 3.js\n\nTHREE.PositionalAudio.prototype.updateMatrixWorld = (function() {\n  const position = new THREE.Vector3();\n  const quaternion = new THREE.Quaternion();\n\n  const scale = new THREE.Vector3();\n  const orientation = new THREE.Vector3();\n\n  return function updateMatrixWorld(force) {\n    THREE.Object3D.prototype.updateMatrixWorld.call(this, force);\n\n    let setInitial = false;\n\n    if (!this._lastPosition) {\n      setInitial = true;\n      this._lastPosition = new THREE.Vector3();\n      this._lastOrientation = new THREE.Vector3();\n      this._lastListenerPosition = new THREE.Vector3();\n    }\n\n    const panner = this.panner;\n    const listener = panner.context.listener;\n    this.matrixWorld.decompose(position, quaternion, scale);\n    orientation.set(0, 0, 1).applyQuaternion(quaternion);\n\n    // Need to update the position on this node if either the listener moves or this node moves,\n    // because otherwise there are audio artifacts in Chrome.\n    if (\n      setInitial ||\n      Math.abs(position.x - this._lastPosition.x) > Number.EPSILON ||\n      Math.abs(position.y - this._lastPosition.y) > Number.EPSILON ||\n      Math.abs(position.z - this._lastPosition.z) > Number.EPSILON ||\n      Math.abs(orientation.x - this._lastOrientation.x) > Number.EPSILON ||\n      Math.abs(orientation.y - this._lastOrientation.y) > Number.EPSILON ||\n      Math.abs(orientation.z - this._lastOrientation.z) > Number.EPSILON ||\n      (listener.positionX && Math.abs(listener.positionX.value - this._lastListenerPosition.x) > Number.EPSILON) ||\n      (listener.positionY && Math.abs(listener.positionY.value - this._lastListenerPosition.y) > Number.EPSILON) ||\n      (listener.positionZ && Math.abs(listener.positionZ.value - this._lastListenerPosition.z) > Number.EPSILON)\n    ) {\n      panner.setPosition(position.x, position.y, position.z);\n      panner.setOrientation(orientation.x, orientation.y, orientation.z);\n\n      this._lastPosition.x = position.x;\n      this._lastPosition.y = position.y;\n      this._lastPosition.z = position.z;\n\n      this._lastOrientation.x = orientation.x;\n      this._lastOrientation.y = orientation.y;\n      this._lastOrientation.z = orientation.z;\n\n      if (listener.positionX && listener.positionY && listener.positionZ) {\n        this._lastListenerPosition.x = listener.positionX.value;\n        this._lastListenerPosition.y = listener.positionY.value;\n        this._lastListenerPosition.z = listener.positionZ.value;\n      }\n    }\n  };\n})();\n","/**\n * Converts WASD keyboard inputs to simulated analog inputs.\n * @namespace user-input\n * @component wasd-to-analog2d\n */\nAFRAME.registerComponent(\"wasd-to-analog2d\", {\n  schema: {\n    analog2dOutputAction: { default: \"wasd_analog2d\" }\n  },\n\n  init: function() {\n    this.output = [0, 0];\n    this.vectors = {\n      w: [0, 1],\n      a: [-1, 0],\n      s: [0, -1],\n      d: [1, 0]\n    };\n    this.keys = {};\n\n    this.onWasd = this.onWasd.bind(this);\n    this.move = this.move.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n  },\n\n  play: function() {\n    const eventNames = [\"w_down\", \"w_up\", \"a_down\", \"a_up\", \"s_down\", \"s_up\", \"d_down\", \"d_up\"];\n    for (const name of eventNames) {\n      this.el.sceneEl.addEventListener(name, this.onWasd);\n    }\n    // I listen to events that this component generates instead of emitting \"move\"\n    // directly because ideally this would live as an input mapping, but the events\n    // generated by this component won't actually get mapped.\n    this.el.sceneEl.addEventListener(this.data.analog2dOutputAction, this.move);\n    window.addEventListener(\"blur\", this.onBlur);\n  },\n\n  pause: function() {\n    this.el.sceneEl.removeEventListener(\"wasd\", this.onWasd);\n    this.el.sceneEl.removeEventListener(this.data.analog2dOutputAction, this.move);\n    window.removeEventListener(\"blur\", this.onBlur);\n    this.keys = {};\n  },\n\n  onBlur: function() {\n    this.keys = {};\n  },\n\n  move: function(event) {\n    this.el.emit(\"move\", { axis: event.detail.axis });\n  },\n\n  onWasd: function(event) {\n    const keyEvent = event.type;\n    const down = keyEvent.indexOf(\"down\") !== -1;\n    const key = keyEvent[0].toLowerCase();\n    this.keys[key] = down;\n  },\n\n  tick: function() {\n    this.target = [0, 0];\n\n    for (const key in this.keys) {\n      if (this.keys[key] && this.vectors[key]) {\n        this.target = [this.target[0] + this.vectors[key][0], this.target[1] + this.vectors[key][1]];\n      }\n    }\n\n    const targetMagnitude = Math.sqrt(this.target[0] * this.target[0] + this.target[1] * this.target[1]);\n    if (targetMagnitude !== 0) {\n      this.target[0] = this.target[0] / targetMagnitude;\n      this.target[1] = this.target[1] / targetMagnitude;\n    }\n\n    const epsilon = 0.01;\n    if (\n      Math.abs(this.output[0]) < epsilon &&\n      Math.abs(this.output[1]) < epsilon &&\n      this.target[0] === 0 &&\n      this.target[1] === 0\n    ) {\n      return; // Staying at [0,0] doesn't require new events.\n    }\n\n    const easeInSpeed = 0.25;\n    this.output = [\n      this.output[0] + easeInSpeed * (this.target[0] - this.output[0]),\n      this.output[1] + easeInSpeed * (this.target[1] - this.output[1])\n    ];\n\n    if (this.output !== [0, 0]) {\n      this.el.emit(this.data.analog2dOutputAction, {\n        axis: this.output\n      });\n    }\n  }\n});\n","const bindAllEvents = function(elements, events, f) {\n  if (!elements || !elements.length) return;\n  for (const el of elements) {\n    events.length &&\n      events.forEach(e => {\n        el.addEventListener(e, f);\n      });\n  }\n};\nconst unbindAllEvents = function(elements, events, f) {\n  if (!elements || !elements.length) return;\n  for (const el of elements) {\n    events.length &&\n      events.forEach(e => {\n        el.removeEventListener(e, f);\n      });\n  }\n};\n\n/**\n * Toggles the microphone on the current network connection based on the given events.\n * @namespace network\n * @component mute-mic\n */\nAFRAME.registerComponent(\"mute-mic\", {\n  schema: {\n    eventSrc: { type: \"selectorAll\" },\n    toggleEvents: { type: \"array\" },\n    muteEvents: { type: \"array\" },\n    unmuteEvents: { type: \"array\" }\n  },\n  init: function() {\n    this.onToggle = this.onToggle.bind(this);\n    this.onMute = this.onMute.bind(this);\n    this.onUnmute = this.onUnmute.bind(this);\n  },\n\n  play: function() {\n    const { eventSrc, toggleEvents, muteEvents, unmuteEvents } = this.data;\n    bindAllEvents(eventSrc, toggleEvents, this.onToggle);\n    bindAllEvents(eventSrc, muteEvents, this.onMute);\n    bindAllEvents(eventSrc, unmuteEvents, this.onUnmute);\n  },\n\n  pause: function() {\n    const { eventSrc, toggleEvents, muteEvents, unmuteEvents } = this.data;\n    unbindAllEvents(eventSrc, toggleEvents, this.onToggle);\n    unbindAllEvents(eventSrc, muteEvents, this.onMute);\n    unbindAllEvents(eventSrc, unmuteEvents, this.onUnmute);\n  },\n\n  onToggle: function() {\n    if (!NAF.connection.adapter) return;\n    if (this.el.is(\"muted\")) {\n      NAF.connection.adapter.enableMicrophone(true);\n      this.el.removeState(\"muted\");\n    } else {\n      NAF.connection.adapter.enableMicrophone(false);\n      this.el.addState(\"muted\");\n    }\n  },\n\n  onMute: function() {\n    if (!NAF.connection.adapter) return;\n    if (!this.el.is(\"muted\")) {\n      NAF.connection.adapter.enableMicrophone(false);\n      this.el.addState(\"muted\");\n    }\n  },\n\n  onUnmute: function() {\n    if (this.el.is(\"muted\")) {\n      NAF.connection.adapter.enableMicrophone(true);\n      this.el.removeState(\"muted\");\n    }\n  }\n});\n","/**\n * Toggles the position of 2 bones into \"on\" and \"off\" positions to indicate mute state.\n * @namespace avatar\n * @component bone-mute-state-indicator\n */\nAFRAME.registerComponent(\"bone-mute-state-indicator\", {\n  schema: {\n    unmutedBoneName: { default: \"Watch_Joint_MicON\" },\n    mutedBoneName: { default: \"Watch_Joint_Muted\" },\n    onPos: { default: 0.81 },\n    offPos: { default: 0.5 }\n  },\n\n  init() {\n    this.onStateToggled = this.onStateToggled.bind(this);\n    this.el.addEventListener(\"model-loaded\", () => {\n      this.unmutedBone = this.el.object3D.getObjectByName(this.data.unmutedBoneName);\n      this.mutedBone = this.el.object3D.getObjectByName(this.data.mutedBoneName);\n      this.modelLoaded = true;\n\n      this.updateMuteState();\n    });\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateToggled);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateToggled);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateToggled);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateToggled);\n  },\n\n  onStateToggled(e) {\n    if (!e.detail.state === \"muted\") return;\n    this.updateMuteState();\n  },\n\n  updateMuteState() {\n    if (!this.modelLoaded) return;\n    const muted = this.el.sceneEl.is(\"muted\");\n    this.mutedBone.position.y = muted ? this.data.onPos : this.data.offPos;\n    this.unmutedBone.position.y = !muted ? this.data.onPos : this.data.offPos;\n    this.mutedBone.matrixNeedsUpdate = true;\n    this.unmutedBone.matrixNeedsUpdate = true;\n  }\n});\n","/**\n * Scales an object to near-zero if the object is invisible. Useful for bones representing avatar body parts.\n * @namespace avatar\n * @component bone-visibility\n */\nAFRAME.registerComponent(\"bone-visibility\", {\n  tick() {\n    const { visible } = this.el.object3D;\n\n    if (this.lastVisible !== visible) {\n      if (visible) {\n        this.el.object3D.scale.set(1, 1, 1);\n      } else {\n        // Three.js doesn't like updating matrices with 0 scale, so we set it to a near zero number.\n        this.el.object3D.scale.set(0.00000001, 0.00000001, 0.00000001);\n      }\n\n      this.lastVisible = visible;\n      this.el.object3D.updateMatrices(true, true);\n      this.el.object3D.updateMatrixWorld(true, true);\n    }\n  }\n});\n","/**\n * HUD panel for muting, freezing, and space bubble controls.\n * @namespace ui\n * @component in-world-hud\n */\nAFRAME.registerComponent(\"in-world-hud\", {\n  schema: {\n    haptic: { type: \"selector\" },\n    raycaster: { type: \"selector\" }\n  },\n  init() {\n    this.mic = this.el.querySelector(\".mic\");\n    this.freeze = this.el.querySelector(\".freeze\");\n    this.pen = this.el.querySelector(\".penhud\");\n    this.cameraBtn = this.el.querySelector(\".camera-btn\");\n    this.background = this.el.querySelector(\".bg\");\n    const renderOrder = window.APP.RENDER_ORDER;\n    this.mic.object3DMap.mesh.renderOrder = renderOrder.HUD_ICONS;\n    this.freeze.object3DMap.mesh.renderOrder = renderOrder.HUD_ICONS;\n    this.pen.object3DMap.mesh.renderOrder = renderOrder.HUD_ICONS;\n    this.cameraBtn.object3DMap.mesh.renderOrder = renderOrder.HUD_ICONS;\n    this.background.object3DMap.mesh.renderORder = renderOrder.HUD_BACKGROUND;\n\n    this.updateButtonStates = () => {\n      this.mic.setAttribute(\"icon-button\", \"active\", this.el.sceneEl.is(\"muted\"));\n      this.freeze.setAttribute(\"icon-button\", \"active\", this.el.sceneEl.is(\"frozen\"));\n      this.pen.setAttribute(\"icon-button\", \"active\", this.el.sceneEl.is(\"pen\"));\n    };\n    this.updateButtonStates();\n\n    this.onStateChange = evt => {\n      if (!(evt.detail === \"muted\" || evt.detail === \"frozen\" || evt.detail === \"pen\")) return;\n      this.updateButtonStates();\n    };\n\n    this.onMicClick = () => {\n      this.el.emit(\"action_mute\");\n    };\n\n    this.onFreezeClick = () => {\n      this.el.emit(\"action_freeze\");\n    };\n\n    this.onPenClick = () => {\n      this.el.emit(\"spawn_pen\");\n    };\n\n    this.onCameraClick = () => {\n      this.el.emit(\"action_spawn_camera\");\n    };\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateChange);\n\n    this.mic.addEventListener(\"mousedown\", this.onMicClick);\n    this.freeze.addEventListener(\"mousedown\", this.onFreezeClick);\n    this.pen.addEventListener(\"mousedown\", this.onPenClick);\n    this.cameraBtn.addEventListener(\"mousedown\", this.onCameraClick);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateChange);\n\n    this.mic.removeEventListener(\"mousedown\", this.onMicClick);\n    this.freeze.removeEventListener(\"mousedown\", this.onFreezeClick);\n    this.pen.removeEventListener(\"mousedown\", this.onPenClick);\n    this.cameraBtn.removeEventListener(\"mousedown\", this.onCameraClick);\n  }\n});\n","import nipplejs from \"nipplejs\";\nimport styles from \"./virtual-gamepad-controls.css\";\n\n/**\n * Instantiates 2D virtual gamepads and emits associated events.\n * @namespace user-input\n * @component virtual-gamepad-controls\n */\nAFRAME.registerComponent(\"virtual-gamepad-controls\", {\n  schema: {},\n\n  init() {\n    this.onEnterVr = this.onEnterVr.bind(this);\n    this.onExitVr = this.onExitVr.bind(this);\n    this.onFirstInteraction = this.onFirstInteraction.bind(this);\n    this.onMoveJoystickChanged = this.onMoveJoystickChanged.bind(this);\n    this.onMoveJoystickEnd = this.onMoveJoystickEnd.bind(this);\n    this.onLookJoystickChanged = this.onLookJoystickChanged.bind(this);\n    this.onLookJoystickEnd = this.onLookJoystickEnd.bind(this);\n\n    this.mockJoystickContainer = document.createElement(\"div\");\n    this.mockJoystickContainer.classList.add(styles.mockJoystickContainer);\n    const leftMock = document.createElement(\"div\");\n    leftMock.classList.add(styles.mockJoystick);\n    const leftMockSmall = document.createElement(\"div\");\n    leftMockSmall.classList.add(styles.mockJoystick, styles.inner);\n    leftMock.appendChild(leftMockSmall);\n    this.mockJoystickContainer.appendChild(leftMock);\n    const rightMock = document.createElement(\"div\");\n    rightMock.classList.add(styles.mockJoystick);\n    const rightMockSmall = document.createElement(\"div\");\n    rightMockSmall.classList.add(styles.mockJoystick, styles.inner);\n    rightMock.appendChild(rightMockSmall);\n    this.mockJoystickContainer.appendChild(rightMock);\n    document.body.appendChild(this.mockJoystickContainer);\n\n    // Setup gamepad elements\n    const leftTouchZone = document.createElement(\"div\");\n    leftTouchZone.classList.add(styles.touchZone, styles.left);\n    document.body.appendChild(leftTouchZone);\n\n    this.leftTouchZone = leftTouchZone;\n\n    this.leftStick = nipplejs.create({\n      zone: this.leftTouchZone,\n      color: \"white\",\n      fadeTime: 0\n    });\n\n    this.leftStick.on(\"start\", this.onFirstInteraction);\n    this.leftStick.on(\"move\", this.onMoveJoystickChanged);\n    this.leftStick.on(\"end\", this.onMoveJoystickEnd);\n\n    const rightTouchZone = document.createElement(\"div\");\n    rightTouchZone.classList.add(styles.touchZone, styles.right);\n    document.body.appendChild(rightTouchZone);\n\n    this.rightTouchZone = rightTouchZone;\n\n    this.rightStick = nipplejs.create({\n      zone: this.rightTouchZone,\n      color: \"white\",\n      fadeTime: 0\n    });\n\n    this.rightStick.on(\"start\", this.onFirstInteraction);\n    this.rightStick.on(\"move\", this.onLookJoystickChanged);\n    this.rightStick.on(\"end\", this.onLookJoystickEnd);\n\n    this.inVr = false;\n    this.moving = false;\n    this.rotating = false;\n\n    this.moveEvent = {\n      axis: [0, 0]\n    };\n    this.rotateYEvent = {\n      value: 0\n    };\n    this.rotateXEvent = {\n      value: 0\n    };\n\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.onEnterVr);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.onExitVr);\n  },\n\n  onFirstInteraction() {\n    this.leftStick.off(\"start\", this.onFirstInteraction);\n    this.rightStick.off(\"start\", this.onFirstInteraction);\n    document.body.removeChild(this.mockJoystickContainer);\n  },\n\n  onMoveJoystickChanged(event, joystick) {\n    const angle = joystick.angle.radian;\n    const force = joystick.force < 1 ? joystick.force : 1;\n    const moveStrength = 1.85;\n    const x = Math.cos(angle) * force * moveStrength;\n    const z = Math.sin(angle) * force * moveStrength;\n    this.moving = true;\n    this.moveEvent.axis[0] = x;\n    this.moveEvent.axis[1] = z;\n  },\n\n  onMoveJoystickEnd() {\n    this.moving = false;\n    this.moveEvent.axis[0] = 0;\n    this.moveEvent.axis[1] = 0;\n    this.el.sceneEl.emit(\"move\", this.moveEvent);\n  },\n\n  onLookJoystickChanged(event, joystick) {\n    // Set pitch and yaw angles on right stick move\n    const angle = joystick.angle.radian;\n    const force = joystick.force < 1 ? joystick.force : 1;\n    const turnStrength = 0.5;\n    this.rotating = true;\n    this.rotateYEvent.value = Math.cos(angle) * force * turnStrength;\n    this.rotateXEvent.value = Math.sin(angle) * force * turnStrength;\n  },\n\n  onLookJoystickEnd() {\n    this.rotating = false;\n    this.rotateYEvent.value = 0;\n    this.rotateXEvent.value = 0;\n    this.el.sceneEl.emit(\"rotateY\", this.rotateYEvent);\n    this.el.sceneEl.emit(\"rotateX\", this.rotateXEvent);\n  },\n\n  tick() {\n    if (!this.inVr) {\n      if (this.moving) {\n        this.el.sceneEl.emit(\"move\", this.moveEvent);\n      }\n\n      if (this.rotating) {\n        this.el.sceneEl.emit(\"rotateY\", this.rotateYEvent);\n        this.el.sceneEl.emit(\"rotateX\", this.rotateXEvent);\n      }\n    }\n  },\n\n  onEnterVr() {\n    // Hide the joystick controls\n    this.inVr = true;\n    this.leftTouchZone.style.display = \"none\";\n    this.rightTouchZone.style.display = \"none\";\n  },\n\n  onExitVr() {\n    // Show the joystick controls\n    this.inVr = false;\n    this.leftTouchZone.style.display = \"block\";\n    this.rightTouchZone.style.display = \"block\";\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener(\"entervr\", this.onEnterVr);\n    this.el.sceneEl.removeEventListener(\"exitvr\", this.onExitVr);\n    document.body.removeChild(this.mockJoystickContainer);\n    document.body.removeChild(this.leftTouchZone);\n    document.body.removeChild(this.rightTouchZone);\n  }\n});\n","const { Vector3, Quaternion, Matrix4, Euler } = THREE;\n/**\n * Provides access to the end effectors for IK.\n * @namespace avatar\n * @component ik-root\n */\nAFRAME.registerComponent(\"ik-root\", {\n  schema: {\n    camera: { type: \"string\", default: \".camera\" },\n    leftController: { type: \"string\", default: \".left-controller\" },\n    rightController: { type: \"string\", default: \".right-controller\" }\n  },\n  update(oldData) {\n    if (this.data.camera !== oldData.camera) {\n      this.camera = this.el.querySelector(this.data.camera);\n    }\n\n    if (this.data.leftController !== oldData.leftController) {\n      this.leftController = this.el.querySelector(this.data.leftController);\n    }\n\n    if (this.data.rightController !== oldData.rightController) {\n      this.rightController = this.el.querySelector(this.data.rightController);\n    }\n  }\n});\n\nfunction findIKRoot(entity) {\n  while (entity && !(entity.components && entity.components[\"ik-root\"])) {\n    entity = entity.parentNode;\n  }\n  return entity && entity.components[\"ik-root\"];\n}\n\n/**\n * Performs IK on a hip-rooted skeleton to align the hip, head and hands with camera and controller inputs.\n * @namespace avatar\n * @component ik-controller\n */\nAFRAME.registerComponent(\"ik-controller\", {\n  schema: {\n    leftEye: { type: \"string\", default: \"LeftEye\" },\n    rightEye: { type: \"string\", default: \"RightEye\" },\n    head: { type: \"string\", default: \"Head\" },\n    neck: { type: \"string\", default: \"Neck\" },\n    leftHand: { type: \"string\", default: \"LeftHand\" },\n    rightHand: { type: \"string\", default: \"RightHand\" },\n    chest: { type: \"string\", default: \"Spine\" },\n    hips: { type: \"string\", default: \"Hips\" },\n    rotationSpeed: { default: 5 }\n  },\n\n  init() {\n    this.flipY = new Matrix4().makeRotationY(Math.PI);\n\n    this.cameraForward = new Matrix4();\n    this.headTransform = new Matrix4();\n    this.hipsPosition = new Vector3();\n\n    this.invHipsToHeadVector = new Vector3();\n\n    this.middleEyeMatrix = new Matrix4();\n    this.middleEyePosition = new Vector3();\n    this.invMiddleEyeToHead = new Matrix4();\n\n    this.cameraYRotation = new Euler();\n    this.cameraYQuaternion = new Quaternion();\n\n    this.invHipsQuaternion = new Quaternion();\n    this.headQuaternion = new Quaternion();\n\n    this.rootToChest = new Matrix4();\n    this.invRootToChest = new Matrix4();\n\n    this.ikRoot = findIKRoot(this.el);\n\n    this.hands = {\n      left: {\n        rotation: new Matrix4().makeRotationFromEuler(new Euler(-Math.PI / 2, Math.PI / 2, 0))\n      },\n      right: {\n        rotation: new Matrix4().makeRotationFromEuler(new Euler(Math.PI / 2, Math.PI / 2, 0))\n      }\n    };\n  },\n\n  update(oldData) {\n    if (this.data.leftEye !== oldData.leftEye) {\n      this.leftEye = this.el.object3D.getObjectByName(this.data.leftEye);\n    }\n\n    if (this.data.rightEye !== oldData.rightEye) {\n      this.rightEye = this.el.object3D.getObjectByName(this.data.rightEye);\n    }\n\n    if (this.data.head !== oldData.head) {\n      this.head = this.el.object3D.getObjectByName(this.data.head);\n    }\n\n    if (this.data.neck !== oldData.neck) {\n      this.neck = this.el.object3D.getObjectByName(this.data.neck);\n    }\n\n    if (this.data.leftHand !== oldData.leftHand) {\n      this.leftHand = this.el.object3D.getObjectByName(this.data.leftHand);\n    }\n\n    if (this.data.rightHand !== oldData.rightHand) {\n      this.rightHand = this.el.object3D.getObjectByName(this.data.rightHand);\n    }\n\n    if (this.data.chest !== oldData.chest) {\n      this.chest = this.el.object3D.getObjectByName(this.data.chest);\n    }\n\n    if (this.data.hips !== oldData.hips) {\n      this.hips = this.el.object3D.getObjectByName(this.data.hips);\n    }\n\n    // Set middleEye's position to be right in the middle of the left and right eyes.\n    this.middleEyePosition.addVectors(this.leftEye.position, this.rightEye.position);\n    this.middleEyePosition.divideScalar(2);\n    this.middleEyeMatrix.makeTranslation(this.middleEyePosition.x, this.middleEyePosition.y, this.middleEyePosition.z);\n    this.invMiddleEyeToHead = this.middleEyeMatrix.getInverse(this.middleEyeMatrix);\n\n    this.invHipsToHeadVector\n      .addVectors(this.chest.position, this.neck.position)\n      .add(this.head.position)\n      .negate();\n  },\n\n  tick(time, dt) {\n    if (!this.ikRoot) {\n      return;\n    }\n\n    const root = this.ikRoot.el.object3D;\n    const { camera, leftController, rightController } = this.ikRoot;\n    const {\n      hips,\n      head,\n      neck,\n      chest,\n      cameraForward,\n      headTransform,\n      invMiddleEyeToHead,\n      invHipsToHeadVector,\n      flipY,\n      cameraYRotation,\n      cameraYQuaternion,\n      invHipsQuaternion,\n      leftHand,\n      rightHand,\n      rootToChest,\n      invRootToChest\n    } = this;\n\n    // Camera faces the -Z direction. Flip it along the Y axis so that it is +Z.\n    camera.object3D.updateMatrix();\n    cameraForward.multiplyMatrices(camera.object3D.matrix, flipY);\n\n    // Compute the head position such that the hmd position would be in line with the middleEye\n    headTransform.multiplyMatrices(cameraForward, invMiddleEyeToHead);\n\n    // Then position the hips such that the head is aligned with headTransform\n    // (which positions middleEye in line with the hmd)\n    hips.position.setFromMatrixPosition(headTransform).add(invHipsToHeadVector);\n\n    // Animate the hip rotation to follow the Y rotation of the camera with some damping.\n    cameraYRotation.setFromRotationMatrix(cameraForward, \"YXZ\");\n    cameraYRotation.x = 0;\n    cameraYRotation.z = 0;\n    cameraYQuaternion.setFromEuler(cameraYRotation);\n    Quaternion.slerp(hips.quaternion, cameraYQuaternion, hips.quaternion, (this.data.rotationSpeed * dt) / 1000);\n\n    // Take the head orientation computed from the hmd, remove the Y rotation already applied to it by the hips,\n    // and apply it to the head\n    invHipsQuaternion.copy(hips.quaternion).inverse();\n    head.quaternion.setFromRotationMatrix(headTransform).premultiply(invHipsQuaternion);\n\n    hips.updateMatrix();\n    rootToChest.multiplyMatrices(hips.matrix, chest.matrix);\n    invRootToChest.getInverse(rootToChest);\n\n    root.matrixNeedsUpdate = true;\n    neck.matrixNeedsUpdate = true;\n    head.matrixNeedsUpdate = true;\n    chest.matrixNeedsUpdate = true;\n\n    this.updateHand(this.hands.left, leftHand, leftController, true);\n    this.updateHand(this.hands.right, rightHand, rightController, false);\n  },\n\n  updateHand(handState, handObject3D, controller, isLeft) {\n    const hand = handObject3D.el;\n    const handMatrix = handObject3D.matrix;\n    const controllerObject3D = controller.object3D;\n\n    // TODO: This coupling with personal-space-invader is not ideal.\n    // There should be some intermediate thing managing multiple opinions about object visibility\n    const spaceInvader = hand.components[\"personal-space-invader\"];\n    const handHiddenByPersonalSpace = spaceInvader && spaceInvader.invading;\n\n    handObject3D.visible = !handHiddenByPersonalSpace && controllerObject3D.visible;\n\n    if (controllerObject3D.visible) {\n      handMatrix.multiplyMatrices(this.invRootToChest, controllerObject3D.matrix);\n\n      const handControls = controller.components[\"hand-controls2\"];\n\n      if (handControls) {\n        handMatrix.multiply(isLeft ? handControls.getLeftControllerOffset() : handControls.getRightControllerOffset());\n      }\n\n      handMatrix.multiply(handState.rotation);\n\n      handObject3D.position.setFromMatrixPosition(handMatrix);\n      handObject3D.rotation.setFromRotationMatrix(handMatrix);\n      handObject3D.matrixNeedsUpdate = true;\n    }\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nconst CLAMP_VELOCITY = 0.01;\nconst MAX_DELTA = 0.2;\nconst EPS = 10e-6;\nconst MAX_WARNINGS = 10;\nconst PI_2 = Math.PI / 2;\n\n/**\n * Avatar movement controller that listens to move, rotate and teleportation events and moves the avatar accordingly.\n * The controller accounts for playspace offset and orientation and depends on the nav mesh system for translation.\n * @namespace avatar\n * @component character-controller\n */\nAFRAME.registerComponent(\"character-controller\", {\n  schema: {\n    groundAcc: { default: 5.5 },\n    easing: { default: 10 },\n    pivot: { type: \"selector\" },\n    snapRotationDegrees: { default: THREE.Math.DEG2RAD * 45 },\n    rotationSpeed: { default: -3 },\n    fly: { default: false }\n  },\n\n  init: function() {\n    this.navZone = \"character\";\n    this.navGroup = null;\n    this.navNode = null;\n    this.velocity = new THREE.Vector3(0, 0, 0);\n    this.accelerationInput = new THREE.Vector3(0, 0, 0);\n    this.pendingSnapRotationMatrix = new THREE.Matrix4();\n    this.angularVelocity = 0; // Scalar value because we only allow rotation around Y\n    this._withinWarningLimit = true;\n    this._warningCount = 0;\n    this.setAccelerationInput = this.setAccelerationInput.bind(this);\n    this.snapRotateLeft = this.snapRotateLeft.bind(this);\n    this.snapRotateRight = this.snapRotateRight.bind(this);\n    this.setAngularVelocity = this.setAngularVelocity.bind(this);\n    this.handleTeleport = this.handleTeleport.bind(this);\n  },\n\n  update: function() {\n    this.leftRotationMatrix = new THREE.Matrix4().makeRotationY(this.data.snapRotationDegrees);\n    this.rightRotationMatrix = new THREE.Matrix4().makeRotationY(-this.data.snapRotationDegrees);\n  },\n\n  play: function() {\n    const eventSrc = this.el.sceneEl;\n    eventSrc.addEventListener(\"move\", this.setAccelerationInput);\n    eventSrc.addEventListener(\"rotateY\", this.setAngularVelocity);\n    eventSrc.addEventListener(\"teleported\", this.handleTeleport);\n  },\n\n  pause: function() {\n    const eventSrc = this.el.sceneEl;\n    eventSrc.removeEventListener(\"move\", this.setAccelerationInput);\n    eventSrc.removeEventListener(\"rotateY\", this.setAngularVelocity);\n    eventSrc.removeEventListener(\"teleported\", this.handleTeleport);\n    this.reset();\n  },\n\n  reset() {\n    this.accelerationInput.set(0, 0, 0);\n    this.velocity.set(0, 0, 0);\n    this.angularVelocity = 0;\n    this.pendingSnapRotationMatrix.identity();\n  },\n\n  setAccelerationInput: function(event) {\n    const axes = event.detail.axis;\n    this.accelerationInput.set(axes[0], 0, axes[1]);\n  },\n\n  setAngularVelocity: function(event) {\n    this.angularVelocity = event.detail.value;\n  },\n\n  snapRotateLeft: function() {\n    this.pendingSnapRotationMatrix.copy(this.leftRotationMatrix);\n    this.el.emit(\"snap_rotate_left\");\n  },\n\n  snapRotateRight: function() {\n    this.pendingSnapRotationMatrix.copy(this.rightRotationMatrix);\n    this.el.emit(\"snap_rotate_right\");\n  },\n\n  handleTeleport: function(event) {\n    const position = event.detail.newPosition;\n    const navPosition = event.detail.hitPoint;\n    this.resetPositionOnNavMesh(position, navPosition, this.el.object3D);\n  },\n\n  tick: (function() {\n    const move = new THREE.Matrix4();\n    const trans = new THREE.Matrix4();\n    const transInv = new THREE.Matrix4();\n    const pivotPos = new THREE.Vector3();\n    const rotationAxis = new THREE.Vector3(0, 1, 0);\n    const yawMatrix = new THREE.Matrix4();\n    const rotationMatrix = new THREE.Matrix4();\n    const rotationInvMatrix = new THREE.Matrix4();\n    const pivotRotationMatrix = new THREE.Matrix4();\n    const pivotRotationInvMatrix = new THREE.Matrix4();\n    const startPos = new THREE.Vector3();\n    const startScale = new THREE.Vector3();\n\n    return function(t, dt) {\n      if (!this.el.sceneEl.is(\"entered\")) return;\n      const deltaSeconds = dt / 1000;\n      const root = this.el.object3D;\n      const pivot = this.data.pivot.object3D;\n      const distance = this.data.groundAcc * deltaSeconds;\n      const rotationDelta = this.data.rotationSpeed * this.angularVelocity * deltaSeconds;\n\n      startScale.copy(root.scale);\n      startPos.copy(root.position);\n\n      // Other aframe components like teleport-controls set position/rotation/scale, not the matrix, so we need to make sure to compose them back into the matrix\n      root.updateMatrix();\n\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      if (userinput.get(paths.actions.snapRotateLeft)) {\n        this.snapRotateLeft();\n      }\n      if (userinput.get(paths.actions.snapRotateRight)) {\n        this.snapRotateRight();\n      }\n      const acc = userinput.get(paths.actions.characterAcceleration);\n      if (acc) {\n        this.accelerationInput.set(\n          this.accelerationInput.x + acc[0],\n          this.accelerationInput.y + 0,\n          this.accelerationInput.z + acc[1]\n        );\n      }\n\n      pivotPos.copy(pivot.position);\n      pivotPos.applyMatrix4(root.matrix);\n      trans.setPosition(pivotPos);\n      transInv.makeTranslation(-pivotPos.x, -pivotPos.y, -pivotPos.z);\n      rotationMatrix.makeRotationAxis(rotationAxis, root.rotation.y);\n      rotationInvMatrix.makeRotationAxis(rotationAxis, -root.rotation.y);\n      pivotRotationMatrix.makeRotationAxis(rotationAxis, pivot.rotation.y);\n      pivotRotationInvMatrix.makeRotationAxis(rotationAxis, -pivot.rotation.y);\n      this.updateVelocity(deltaSeconds, pivot);\n      this.accelerationInput.set(0, 0, 0);\n\n      const boost = userinput.get(paths.actions.boost) ? 2 : 1;\n      move.makeTranslation(\n        this.velocity.x * distance * boost,\n        this.velocity.y * distance * boost,\n        this.velocity.z * distance * boost\n      );\n      yawMatrix.makeRotationAxis(rotationAxis, rotationDelta);\n\n      // Translate to middle of playspace (player rig)\n      root.matrix.premultiply(transInv);\n      // Zero playspace (player rig) rotation\n      root.matrix.premultiply(rotationInvMatrix);\n      // Zero pivot (camera/head) rotation\n      root.matrix.premultiply(pivotRotationInvMatrix);\n      // Apply joystick translation\n      root.matrix.premultiply(move);\n      // Apply joystick yaw rotation\n      root.matrix.premultiply(yawMatrix);\n      // Apply snap rotation if necessary\n      root.matrix.premultiply(this.pendingSnapRotationMatrix);\n      // Reapply pivot (camera/head) rotation\n      root.matrix.premultiply(pivotRotationMatrix);\n      // Reapply playspace (player rig) rotation\n      root.matrix.premultiply(rotationMatrix);\n      // Reapply playspace (player rig) translation\n      root.matrix.premultiply(trans);\n      // update pos/rot/scale\n      root.matrix.decompose(root.position, root.quaternion, root.scale);\n\n      // TODO: the above matrix trnsfomraitons introduce some floating point errors in scale, this reverts them to\n      // avoid spamming network with fake scale updates\n      root.scale.copy(startScale);\n\n      this.pendingSnapRotationMatrix.identity(); // Revert to identity\n\n      if (this.velocity.lengthSq() > EPS && !this.data.fly) {\n        this.setPositionOnNavMesh(startPos, root.position, root);\n      }\n\n      root.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  _warnWithWarningLimit: function(msg) {\n    if (!this._withinWarningLimit) return;\n    this._warningCount++;\n    if (this._warningCount > MAX_WARNINGS) {\n      this._withinWarningLimit = false;\n      msg = \"Warning count exceeded. Will not log further warnings\";\n    }\n    console.warn(\"character-controller\", msg);\n  },\n\n  _setNavNode: function(pos) {\n    if (this.navNode !== null) return;\n    const { pathfinder } = this.el.sceneEl.systems.nav;\n    this.navNode =\n      pathfinder.getClosestNode(pos, this.navZone, this.navGroup, true) ||\n      pathfinder.getClosestNode(pos, this.navZone, this.navGroup);\n  },\n\n  setPositionOnNavMesh: function(start, end, object3D) {\n    const { pathfinder } = this.el.sceneEl.systems.nav;\n    if (!(this.navZone in pathfinder.zones)) return;\n    if (this.navGroup === null) {\n      this.navGroup = pathfinder.getGroup(this.navZone, end, true, true);\n    }\n    this._setNavNode(end);\n    this.navNode = pathfinder.clampStep(start, end, this.navNode, this.navZone, this.navGroup, object3D.position);\n    object3D.matrixNeedsUpdate = true;\n  },\n\n  resetPositionOnNavMesh: function(position, navPosition, object3D) {\n    const { pathfinder } = this.el.sceneEl.systems.nav;\n    if (!(this.navZone in pathfinder.zones)) return;\n    this.navGroup = pathfinder.getGroup(this.navZone, navPosition, true, true);\n    this.navNode = null;\n    this._setNavNode(navPosition);\n    pathfinder.clampStep(position, navPosition, this.navNode, this.navZone, this.navGroup, object3D.position);\n    object3D.matrixNeedsUpdate = true;\n  },\n\n  updateVelocity: function(dt, pivot) {\n    const data = this.data;\n    const velocity = this.velocity;\n\n    // If FPS too low, reset velocity.\n    if (dt > MAX_DELTA) {\n      velocity.x = 0;\n      velocity.y = 0;\n      velocity.z = 0;\n      return;\n    }\n\n    // Decay velocity.\n    if (velocity.x !== 0) {\n      velocity.x -= velocity.x * data.easing * dt;\n    }\n    if (velocity.y !== 0) {\n      velocity.y -= velocity.y * data.easing * dt;\n    }\n    if (velocity.z !== 0) {\n      velocity.z -= velocity.z * data.easing * dt;\n    }\n\n    const dvx = data.groundAcc * dt * this.accelerationInput.x;\n    const dvz = data.groundAcc * dt * -this.accelerationInput.z;\n    velocity.x += dvx;\n\n    if (this.data.fly) {\n      const pitch = pivot.rotation.x / PI_2;\n      velocity.y += dvz * -pitch;\n      velocity.z += dvz * (1.0 - pitch);\n    } else {\n      velocity.z += dvz;\n    }\n\n    const decay = 0.7;\n    this.accelerationInput.x = this.accelerationInput.x * decay;\n    this.accelerationInput.z = this.accelerationInput.z * decay;\n\n    if (Math.abs(velocity.x) < CLAMP_VELOCITY) {\n      velocity.x = 0;\n    }\n    if (this.data.fly && Math.abs(velocity.y) < CLAMP_VELOCITY) {\n      velocity.y = 0;\n    }\n    if (Math.abs(velocity.z) < CLAMP_VELOCITY) {\n      velocity.z = 0;\n    }\n  }\n});\n","const interactorOneTransform = [];\nconst interactorTwoTransform = [];\n\n/**\n * Applies effects to a hoverable based on hover state.\n * @namespace interactables\n * @component hoverable-visuals\n */\nAFRAME.registerComponent(\"hoverable-visuals\", {\n  schema: {\n    cursorController: { type: \"selector\" },\n    enableSweepingEffect: { type: \"boolean\", default: true }\n  },\n  init() {\n    // uniforms and boundingSphere are set from the component responsible for loading the mesh.\n    this.uniforms = null;\n    this.boundingSphere = new THREE.Sphere();\n\n    this.sweepParams = [0, 0];\n  },\n  remove() {\n    this.uniforms = null;\n    this.boundingBox = null;\n  },\n  tick(time) {\n    if (!this.uniforms || !this.uniforms.size) return;\n\n    const { hoverers } = this.el.components[\"hoverable\"];\n\n    let interactorOne, interactorTwo;\n    for (const hoverer of hoverers) {\n      if (hoverer.id === \"player-left-controller\") {\n        interactorOne = hoverer.object3D;\n      } else if (hoverer.id === \"cursor\") {\n        if (this.data.cursorController.components[\"cursor-controller\"].enabled) {\n          interactorTwo = hoverer.object3D;\n        }\n      } else {\n        interactorTwo = hoverer.object3D;\n      }\n    }\n\n    if (interactorOne) {\n      interactorOne.matrixWorld.toArray(interactorOneTransform);\n    }\n    if (interactorTwo) {\n      interactorTwo.matrixWorld.toArray(interactorTwoTransform);\n    }\n\n    if (interactorOne || interactorTwo) {\n      const worldY = this.el.object3D.matrixWorld.elements[13];\n      const scaledRadius = this.el.object3D.scale.y * this.boundingSphere.radius;\n      this.sweepParams[0] = worldY - scaledRadius;\n      this.sweepParams[1] = worldY + scaledRadius;\n    }\n\n    for (const uniform of this.uniforms.values()) {\n      uniform.hubs_EnableSweepingEffect.value = this.data.enableSweepingEffect;\n      uniform.hubs_SweepParams.value = this.sweepParams;\n\n      uniform.hubs_HighlightInteractorOne.value = !!interactorOne;\n      uniform.hubs_InteractorOnePos.value[0] = interactorOneTransform[12];\n      uniform.hubs_InteractorOnePos.value[1] = interactorOneTransform[13];\n      uniform.hubs_InteractorOnePos.value[2] = interactorOneTransform[14];\n\n      uniform.hubs_HighlightInteractorTwo.value = !!interactorTwo;\n      uniform.hubs_InteractorTwoPos.value[0] = interactorTwoTransform[12];\n      uniform.hubs_InteractorTwoPos.value[1] = interactorTwoTransform[13];\n      uniform.hubs_InteractorTwoPos.value[2] = interactorTwoTransform[14];\n\n      if (interactorOne || interactorTwo) {\n        uniform.hubs_Time.value = time;\n      }\n    }\n  }\n});\n","/**\n * Applies effects to a hoverer based on hover state.\n * @namespace interactables\n * @component hover-visuals\n */\nAFRAME.registerComponent(\"hover-visuals\", {\n  schema: {\n    hand: { type: \"string\" },\n    controller: { type: \"selector\" }\n  },\n  init() {\n    // uniforms are set from the component responsible for loading the mesh.\n    this.uniforms = null;\n  },\n  remove() {\n    this.uniforms = null;\n  },\n  tick() {\n    if (!this.uniforms || !this.uniforms.size) return;\n\n    const elements = this.el.object3D.matrixWorld.elements;\n    const hovering = this.data.controller.components[\"super-hands\"].state.has(\"hover-start\");\n\n    for (const uniform of this.uniforms.values()) {\n      if (this.data.hand === \"left\") {\n        uniform.hubs_HighlightInteractorOne.value = hovering;\n        uniform.hubs_InteractorOnePos.value[0] = elements[12];\n        uniform.hubs_InteractorOnePos.value[1] = elements[13];\n        uniform.hubs_InteractorOnePos.value[2] = elements[14];\n      } else {\n        uniform.hubs_HighlightInteractorTwo.value = hovering;\n        uniform.hubs_InteractorTwoPos.value[0] = elements[12];\n        uniform.hubs_InteractorTwoPos.value[1] = elements[13];\n        uniform.hubs_InteractorTwoPos.value[2] = elements[14];\n      }\n    }\n  }\n});\n","const strengthForIntensity = {\n  low: 0.07,\n  medium: 0.2,\n  high: 1\n};\n\n/**\n * Listens for haptic events and actuates hardware controllers accordingly\n * @namespace user-input\n * @component haptic-feedback\n */\nAFRAME.registerComponent(\"haptic-feedback\", {\n  schema: {\n    hapticEventName: { default: \"haptic_pulse\" }\n  },\n\n  init: function() {\n    this.handlePulse = this.handlePulse.bind(this);\n    this.getActuator = this.getActuator.bind(this);\n    this.getActuator().then(actuator => {\n      this.actuator = actuator;\n    });\n  },\n\n  getActuator() {\n    return new Promise(resolve => {\n      const tryGetActivator = () => {\n        const trackedControls = this.el.components[\"tracked-controls\"];\n        if (\n          trackedControls &&\n          trackedControls.controller &&\n          trackedControls.controller.hapticActuators &&\n          trackedControls.controller.hapticActuators.length\n        ) {\n          resolve(trackedControls.controller.hapticActuators[0]);\n        } else {\n          setTimeout(tryGetActivator, 1000);\n        }\n      };\n      setTimeout(tryGetActivator, 1000);\n    });\n  },\n\n  play: function() {\n    this.el.addEventListener(this.data.hapticEventName, this.handlePulse);\n  },\n  pause: function() {\n    this.el.removeEventListener(this.data.hapticEventName, this.handlePulse);\n  },\n\n  handlePulse: function(event) {\n    const { intensity } = event.detail;\n\n    if (strengthForIntensity[intensity]) {\n      this.pulse(strengthForIntensity[intensity]);\n    } else if (Number(intensity) === intensity) {\n      this.pulse(intensity);\n    } else {\n      console.warn(`Invalid intensity : ${intensity}`);\n    }\n  },\n\n  pulse: function(intensity) {\n    if (this.actuator) {\n      this.actuator.pulse(intensity, 15);\n    }\n  }\n});\n","/**\n * Positions an entity relative to a given target when the given event is fired.\n * @component offset-relative-to\n */\nAFRAME.registerComponent(\"offset-relative-to\", {\n  schema: {\n    target: {\n      type: \"selector\"\n    },\n    offset: {\n      type: \"vec3\"\n    },\n    on: {\n      type: \"string\"\n    },\n    orientation: {\n      default: 1 // see doc/image_orientations.gif\n    },\n    selfDestruct: {\n      default: false\n    }\n  },\n  init() {\n    this.updateOffset = this.updateOffset.bind(this);\n    if (this.data.on) {\n      this.el.sceneEl.addEventListener(this.data.on, this.updateOffset);\n    } else {\n      this.updateOffset();\n    }\n  },\n\n  updateOffset: (function() {\n    const y = new THREE.Vector3(0, 1, 0);\n    const z = new THREE.Vector3(0, 0, -1);\n    const QUARTER_CIRCLE = Math.PI / 2;\n    const offsetVector = new THREE.Vector3();\n    return function() {\n      const obj = this.el.object3D;\n      const target = this.data.target.object3D;\n      offsetVector.copy(this.data.offset);\n      target.localToWorld(offsetVector);\n      if (obj.parent) {\n        obj.parent.worldToLocal(offsetVector);\n      }\n      obj.position.copy(offsetVector);\n      this.el.body && this.el.body.position.copy(obj.position);\n      target.getWorldQuaternion(obj.quaternion);\n      this.el.body && this.el.body.quaternion.copy(obj.quaternion);\n\n      // See doc/image_orientations.gif\n      switch (this.data.orientation) {\n        case 8:\n          obj.rotateOnAxis(z, 3 * QUARTER_CIRCLE);\n          break;\n        case 7:\n          obj.rotateOnAxis(z, 3 * QUARTER_CIRCLE);\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 6:\n          obj.rotateOnAxis(z, QUARTER_CIRCLE);\n          break;\n        case 5:\n          obj.rotateOnAxis(z, QUARTER_CIRCLE);\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 4:\n          obj.rotateOnAxis(z, 2 * QUARTER_CIRCLE);\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 3:\n          obj.rotateOnAxis(z, 2 * QUARTER_CIRCLE);\n          break;\n        case 2:\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 1:\n        default:\n          break;\n      }\n\n      obj.matrixNeedsUpdate = true;\n\n      if (this.data.selfDestruct) {\n        if (this.data.on) {\n          this.el.sceneEl.removeEventListener(this.data.on, this.updateOffset);\n        }\n        this.el.removeAttribute(\"offset-relative-to\");\n      }\n    };\n  })()\n});\n","import { injectCustomShaderChunks } from \"../utils/media-utils\";\n\n/**\n * Sets player info state, including avatar choice and display name.\n * @namespace avatar\n * @component player-info\n */\nAFRAME.registerComponent(\"player-info\", {\n  schema: {\n    displayName: { type: \"string\" },\n    avatarSrc: { type: \"string\" }\n  },\n  init() {\n    this.applyProperties = this.applyProperties.bind(this);\n  },\n  play() {\n    this.el.addEventListener(\"model-loaded\", this.applyProperties);\n  },\n  pause() {\n    this.el.removeEventListener(\"model-loaded\", this.applyProperties);\n  },\n  update() {\n    this.applyProperties();\n  },\n  applyProperties() {\n    const nametagEl = this.el.querySelector(\".nametag\");\n    if (this.data.displayName && nametagEl) {\n      nametagEl.setAttribute(\"text\", {\n        value: this.data.displayName\n      });\n    }\n\n    const modelEl = this.el.querySelector(\".model\");\n    if (this.data.avatarSrc && modelEl) {\n      modelEl.setAttribute(\"gltf-model-plus\", \"src\", this.data.avatarSrc);\n    }\n\n    const uniforms = injectCustomShaderChunks(this.el.object3D);\n    this.el.querySelectorAll(\"[hover-visuals]\").forEach(el => {\n      el.components[\"hover-visuals\"].uniforms = uniforms;\n    });\n  }\n});\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\nconst POSES = {\n  open: \"allOpen\",\n  thumbDown: \"thumbDown\",\n  indexDown: \"indexDown\",\n  mrpDown: \"mrpDown\",\n  thumbUp: \"thumbsUp\",\n  point: \"point\",\n  fist: \"allGrip\",\n  pinch: \"pinch\"\n};\n\nconst NETWORK_POSES = [\"allOpen\", \"thumbDown\", \"indexDown\", \"mrpDown\", \"thumbsUp\", \"point\", \"allGrip\", \"pinch\"];\n\n/**\n * Animates between poses based on networked pose state using an animation mixer.\n * @namespace avatar\n * @component hand-pose\n */\nAFRAME.registerComponent(\"hand-pose\", {\n  multiple: true,\n\n  init() {\n    this.pose = 0;\n    this.animatePose = this.animatePose.bind(this);\n    const mixerEl = findAncestorWithComponent(this.el, \"animation-mixer\");\n    const suffix = this.id == \"left\" ? \"_L\" : \"_R\";\n    this.mixer = mixerEl && mixerEl.components[\"animation-mixer\"].mixer;\n    if (!this.mixer || !this.mixer.clipAction(POSES.open + suffix)) {\n      console.warn(\"Avatar does not an 'allOpen' animation, disabling hand animations\");\n      this.el.removeAttribute(\"hand-pose\");\n      return;\n    }\n    this.from = this.to = this.mixer.clipAction(POSES.open + suffix);\n    this.from.play();\n\n    const getNetworkedAvatar = el => {\n      const networkedAvatar = el.components[\"networked-avatar\"];\n      if (networkedAvatar) {\n        return networkedAvatar;\n      }\n      return getNetworkedAvatar(el.parentEl);\n    };\n    this.networkedAvatar = getNetworkedAvatar(this.el);\n  },\n\n  tick() {\n    if (\n      !this.networkedAvatar ||\n      !this.networkedAvatar.data ||\n      this.networkedAvatar.data[`${this.id}_hand_pose`] === this.pose\n    ) {\n      return;\n    }\n\n    this.animatePose(NETWORK_POSES[this.pose], NETWORK_POSES[this.networkedAvatar.data[`${this.id}_hand_pose`]]);\n    this.pose = this.networkedAvatar.data[`${this.id}_hand_pose`];\n  },\n\n  animatePose(prev, curr) {\n    this.from.stop();\n    this.to.stop();\n\n    const duration = 0.065;\n    const suffix = this.id == \"left\" ? \"_L\" : \"_R\";\n    this.from = this.mixer.clipAction(prev + suffix);\n    this.to = this.mixer.clipAction(curr + suffix);\n\n    this.from.fadeOut(duration);\n    this.to.fadeIn(duration);\n    this.to.play();\n    this.from.play();\n\n    this.mixer.update(0.001);\n  }\n});\n\n/**\n * Sets the networked hand pose state based on hand-pose events.\n * @namespace avatar\n * @component hand-pose-controller\n */\nAFRAME.registerComponent(\"hand-pose-controller\", {\n  multiple: true,\n  schema: {\n    eventSrc: { type: \"selector\" },\n    networkedAvatar: { type: \"selector\" }\n  },\n  init: function() {\n    this.setHandPose = this.setHandPose.bind(this);\n  },\n\n  play: function() {\n    this.data.eventSrc.addEventListener(\"hand-pose\", this.setHandPose);\n  },\n\n  pause: function() {\n    this.data.eventSrc.removeEventListener(\"hand-pose\", this.setHandPose);\n  },\n\n  setHandPose: function(evt) {\n    this.data.networkedAvatar.setAttribute(\n      \"networked-avatar\",\n      `${this.id}_hand_pose`,\n      NETWORK_POSES.indexOf(POSES[evt.detail.current])\n    );\n  }\n});\n","/**\n * Instantiates GLTF models as specified in a bundle JSON.\n * @namespace gltf\n * @component gltf-bundle\n */\nAFRAME.registerComponent(\"gltf-bundle\", {\n  schema: {\n    src: { default: \"\" }\n  },\n\n  init: async function() {\n    this._addGltfEntitiesForBundleJson = this._addGltfEntitiesForBundleJson.bind(this);\n    this.baseURL = new URL(THREE.LoaderUtils.extractUrlBase(this.data.src), window.location.href);\n\n    const res = await fetch(this.data.src);\n    const data = await res.json();\n    this._addGltfEntitiesForBundleJson(data);\n  },\n\n  _addGltfEntitiesForBundleJson: function(bundleJson) {\n    const loaded = [];\n\n    for (let i = 0; i < bundleJson.assets.length; i++) {\n      const asset = bundleJson.assets[i];\n\n      // TODO: for now just skip resources, eventually we will want to hold on to a reference so that we can use them\n      if (asset.type === \"resource\") continue;\n\n      const src = new URL(asset.src, this.baseURL).href;\n      const gltfEl = document.createElement(\"a-entity\");\n      gltfEl.setAttribute(\"gltf-model-plus\", { src, useCache: false, inflate: true });\n      loaded.push(new Promise(resolve => gltfEl.addEventListener(\"model-loaded\", resolve)));\n      this.el.appendChild(gltfEl);\n    }\n\n    Promise.all(loaded).then(() => this.el.emit(\"bundleloaded\"));\n  }\n});\n","import { AppModes } from \"../systems/app-mode.js\";\n\nconst TWOPI = Math.PI * 2;\nfunction deltaAngle(a, b) {\n  const p = Math.abs(b - a) % TWOPI;\n  return p > Math.PI ? TWOPI - p : p;\n}\n\n/**\n * Positions the HUD and toggles app mode based on where the user is looking\n * @namespace ui\n * @component hud-controller\n */\nAFRAME.registerComponent(\"hud-controller\", {\n  schema: {\n    head: { type: \"selector\" },\n    offset: { default: 0.7 }, // distance from hud above head,\n    lookCutoff: { default: 20 }, // angle at which the hud should be \"on\",\n    animRange: { default: 30 }, // degrees over which to animate the hud into view\n    yawCutoff: { default: 50 }, // yaw degrees at wich the hud should reoirent even if the user is looking up\n    showTip: { type: \"bool\" }\n  },\n  init() {\n    this.isYLocked = false;\n    this.lockedHeadPositionY = 0;\n    this.lookDir = new THREE.Vector3();\n    this.lookEuler = new THREE.Euler();\n  },\n\n  pause() {\n    // TODO: this assumes full control over current app mode reguardless of what else might be manipulating it, this is obviously wrong\n    const AppModeSystem = this.el.sceneEl.systems[\"app-mode\"];\n    AppModeSystem.setMode(AppModes.DEFAULT);\n  },\n\n  tick() {\n    const hud = this.el.object3D;\n    const head = this.data.head.object3D;\n    const sceneEl = this.el.sceneEl;\n\n    const { offset, lookCutoff, animRange, yawCutoff, showTip } = this.data;\n\n    const pitch = head.rotation.x * THREE.Math.RAD2DEG;\n    const yawDif = deltaAngle(head.rotation.y, hud.rotation.y) * THREE.Math.RAD2DEG;\n\n    // animate the hud into place over animRange degrees as the user aproaches the lookCutoff angle\n    let t = 1 - THREE.Math.clamp(lookCutoff - pitch, 0, animRange) / animRange;\n\n    // HUD is locked down while showing tooltip\n    if (showTip) {\n      t = 1;\n    }\n\n    // Once the HUD is in place it should stay in place until you look sufficiently far down\n    if (t === 1) {\n      this.lockedHeadPositionY = head.position.y;\n      this.hudLocked = true;\n    } else if (this.hudLocked && pitch < lookCutoff - animRange / 2) {\n      this.hudLocked = false;\n    }\n\n    if (this.hudLocked) {\n      t = 1;\n    }\n\n    // Reorient the hud only if the user is looking away from the hud, for right now this arbitrarily means the hud is 1/2 way animated away\n    // TODO: come up with better huristics for this that maybe account for the user turning away from the hud \"too far\", also animate the position so that it doesnt just snap.\n    const hudOutOfView = yawDif >= yawCutoff || pitch < lookCutoff - animRange / 2;\n\n    if (hudOutOfView) {\n      this.lookDir.set(0, 0, -1);\n      this.lookDir.applyQuaternion(head.quaternion);\n      this.lookDir.add(head.position);\n      hud.position.x = this.lookDir.x;\n      hud.position.z = this.lookDir.z;\n      hud.rotation.copy(head.rotation);\n      hud.rotation.x = 0;\n      hud.rotation.z = 0;\n    }\n\n    hud.visible = !hudOutOfView;\n    hud.position.y = (this.isYLocked ? this.lockedHeadPositionY : head.position.y) + offset + (1 - t) * offset;\n    hud.rotation.x = (1 - t) * THREE.Math.DEG2RAD * 90;\n    hud.matrixNeedsUpdate = true;\n\n    // update the app mode when the HUD locks on or off\n    // TODO: this assumes full control over current app mode reguardless of what else might be manipulating it, this is obviously wrong\n    const AppModeSystem = sceneEl.systems[\"app-mode\"];\n    if (pitch > lookCutoff && AppModeSystem.mode !== AppModes.HUD) {\n      AppModeSystem.setMode(AppModes.HUD);\n    } else if (pitch < lookCutoff && AppModeSystem.mode === AppModes.HUD) {\n      AppModeSystem.setMode(AppModes.DEFAULT);\n    }\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\n\n/**\n * Toggles freezing of network traffic on the given event.\n * @namespace network\n * @component freeze-controller\n */\nAFRAME.registerComponent(\"freeze-controller\", {\n  schema: {\n    toggleEvent: { type: \"string\" }\n  },\n\n  init: function() {\n    this.onToggle = this.onToggle.bind(this);\n  },\n\n  play: function() {\n    this.el.addEventListener(this.data.toggleEvent, this.onToggle);\n  },\n\n  pause: function() {\n    this.el.removeEventListener(this.data.toggleEvent, this.onToggle);\n  },\n\n  tick: function() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const ensureFrozen = userinput.frame[paths.actions.ensureFrozen];\n    const thaw = userinput.frame[paths.actions.thaw];\n\n    const toggleFreezeDueToInput = (this.el.is(\"frozen\") && thaw) || (!this.el.is(\"frozen\") && ensureFrozen);\n\n    if (toggleFreezeDueToInput) {\n      this.onToggle();\n    }\n  },\n\n  onToggle: function() {\n    window.APP.store.update({ activity: { hasFoundFreeze: true } });\n    if (!NAF.connection.adapter) return;\n    NAF.connection.adapter.toggleFreeze();\n    if (NAF.connection.adapter.frozen) {\n      this.el.emit(\"play_freeze_sound\");\n      this.el.addState(\"frozen\");\n    } else {\n      this.el.emit(\"play_thaw_sound\");\n      this.el.removeState(\"frozen\");\n    }\n  }\n});\n","/**\n * A button with an image, tooltip, hover states and haptics.\n * @namespace ui\n * @component icon-button\n */\nAFRAME.registerComponent(\"icon-button\", {\n  schema: {\n    image: { type: \"string\" },\n    hoverImage: { type: \"string\" },\n    activeImage: { type: \"string\" },\n    activeHoverImage: { type: \"string\" },\n    active: { type: \"boolean\" },\n    haptic: { type: \"selector\" },\n    tooltip: { type: \"selector\" },\n    tooltipText: { type: \"string\" },\n    activeTooltipText: { type: \"string\" }\n  },\n\n  init() {\n    this.onHover = () => {\n      this.hovering = true;\n      this.updateButtonState();\n      this.emitHapticPulse();\n    };\n    this.onHoverOut = () => {\n      this.hovering = false;\n      this.updateButtonState();\n    };\n    this.onClick = () => {\n      this.emitHapticPulse();\n    };\n  },\n\n  emitHapticPulse() {\n    if (this.data.haptic) {\n      this.data.haptic.emit(\"haptic_pulse\", { intensity: \"low\" });\n    }\n  },\n\n  play() {\n    this.updateButtonState();\n    this.el.addEventListener(\"hover-start\", this.onHover);\n    this.el.addEventListener(\"hover-end\", this.onHoverOut);\n    this.el.addEventListener(\"grab-start\", this.onClick);\n  },\n\n  pause() {\n    this.el.removeEventListener(\"hover-start\", this.onHover);\n    this.el.removeEventListener(\"hover-end\", this.onHoverOut);\n    this.el.removeEventListener(\"grab-start\", this.onClick);\n  },\n\n  update() {\n    this.updateButtonState();\n  },\n\n  updateButtonState() {\n    const hovering = this.hovering;\n    const active = this.data.active;\n\n    const image = active ? (hovering ? \"activeHoverImage\" : \"activeImage\") : hovering ? \"hoverImage\" : \"image\";\n\n    this.el.setAttribute(\"src\", this.data[image]);\n\n    if (this.data.tooltip) {\n      this.data.tooltip.setAttribute(\"visible\", this.hovering);\n      this.data.tooltip\n        .querySelector(\"[text]\")\n        .setAttribute(\"text\", \"value\", this.data.active ? this.data.activeTooltipText : this.data.tooltipText);\n    }\n  }\n});\n","/**\n * A button with text and haptics\n * @namespace ui\n * @component text-button\n */\nAFRAME.registerComponent(\"text-button\", {\n  schema: {\n    haptic: { type: \"selector\" },\n    textHoverColor: { type: \"string\" },\n    textColor: { type: \"string\" },\n    backgroundHoverColor: { type: \"string\" },\n    backgroundColor: { type: \"string\" }\n  },\n\n  init() {\n    this.onHover = () => {\n      this.hovering = true;\n      this.updateButtonState();\n      this.emitHapticPulse();\n    };\n    this.onHoverOut = () => {\n      this.hovering = false;\n      this.updateButtonState();\n    };\n    this.onClick = () => {\n      this.emitHapticPulse();\n    };\n    this.textEl = this.el.parentEl.querySelector(\"[text]\");\n  },\n\n  emitHapticPulse() {\n    if (this.data.haptic) {\n      this.data.haptic.emit(\"haptic_pulse\", { intensity: \"low\" });\n    }\n  },\n\n  play() {\n    this.updateButtonState();\n    this.el.addEventListener(\"mouseover\", this.onHover);\n    this.el.addEventListener(\"mouseout\", this.onHoverOut);\n    this.el.addEventListener(\"grab-start\", this.onClick);\n  },\n\n  pause() {\n    this.el.removeEventListener(\"mouseover\", this.onHover);\n    this.el.removeEventListener(\"mouseout\", this.onHoverOut);\n    this.el.removeEventListener(\"grab-start\", this.onClick);\n  },\n\n  update() {\n    this.updateButtonState();\n  },\n\n  updateButtonState() {\n    const hovering = this.hovering;\n    this.el.setAttribute(\"slice9\", \"color\", hovering ? this.data.backgroundHoverColor : this.data.backgroundColor);\n    this.textEl.setAttribute(\"text\", \"color\", hovering ? this.data.textHoverColor : this.data.textColor);\n  }\n});\n\nconst noop = function() {};\n// TODO: this should ideally be fixed upstream somehow but its pretty tricky since text is just a geometry not a different type of Object3D, and Object3D is what handles raycast checks.\nAFRAME.registerComponent(\"text-raycast-hack\", {\n  dependencies: [\"text\"],\n  init() {\n    this.el.getObject3D(\"text\").raycast = noop;\n  }\n});\n","/**\n * Registers a click handler and invokes the block method on the NAF adapter for the owner associated with its entity.\n * @namespace network\n * @component block-button\n */\nAFRAME.registerComponent(\"block-button\", {\n  init() {\n    this.onClick = () => {\n      this.block(this.owner);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.owner = networkedEl.components.networked.data.owner;\n    });\n  },\n\n  play() {\n    this.el.addEventListener(\"grab-start\", this.onClick);\n  },\n\n  pause() {\n    this.el.removeEventListener(\"grab-start\", this.onClick);\n  },\n\n  block(clientId) {\n    NAF.connection.adapter.block(clientId);\n  },\n\n  // Currently unused\n  unblock(clientId) {\n    NAF.connection.adapter.unblock(clientId);\n    NAF.connection.entities.completeSync(clientId);\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\n\n/**\n * Toggles the visibility of this entity when the scene is frozen.\n * @namespace ui\n * @component visibility-while-frozen\n */\nAFRAME.registerComponent(\"visibility-while-frozen\", {\n  schema: {\n    withinDistance: { type: \"number\" },\n    visible: { type: \"boolean\", default: true }\n  },\n\n  init() {\n    this.updateVisibility = this.updateVisibility.bind(this);\n    this.camWorldPos = new THREE.Vector3();\n    this.objWorldPos = new THREE.Vector3();\n    this.cam = this.el.sceneEl.camera.el.object3D;\n    this.onStateChange = evt => {\n      if (!evt.detail === \"frozen\") return;\n      this.updateVisibility();\n    };\n    this.updateVisibility();\n  },\n\n  tick() {\n    if (!this.data.withinDistance) return;\n\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n    const isVisible = this.el.getAttribute(\"visible\");\n    if (!isFrozen && !isVisible) return;\n\n    this.updateVisibility();\n  },\n\n  updateVisibility() {\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n\n    let isWithinDistance = true;\n    const isVisible = this.el.object3D.visible;\n\n    if (this.data.withinDistance !== undefined) {\n      if (!isVisible) {\n        // Edge case, if the object is not visible force a matrix update\n        // since the main matrix update loop will not do it.\n        this.el.object3D.updateMatrices(true, true);\n      }\n\n      getLastWorldPosition(this.cam, this.camWorldPos);\n      this.objWorldPos.copy(this.el.object3D.position);\n      this.el.object3D.localToWorld(this.objWorldPos);\n\n      isWithinDistance =\n        this.camWorldPos.distanceToSquared(this.objWorldPos) < this.data.withinDistance * this.data.withinDistance;\n    }\n\n    const shouldBeVisible = ((isFrozen && this.data.visible) || (!isFrozen && !this.data.visible)) && isWithinDistance;\n\n    if (isVisible !== shouldBeVisible) {\n      this.el.setAttribute(\"visible\", shouldBeVisible);\n    }\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateChange);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateChange);\n  }\n});\n\n/**\n * Toggles the interactivity of a UI entity while the scene is frozen.\n * @namespace ui\n * @component ui-class-while-frozen\n */\nAFRAME.registerComponent(\"ui-class-while-frozen\", {\n  init() {\n    this.onStateChange = evt => {\n      if (!evt.detail === \"frozen\") return;\n      this.el.classList.toggle(\"ui\", this.el.sceneEl.is(\"frozen\"));\n    };\n    this.el.classList.toggle(\"ui\", this.el.sceneEl.is(\"frozen\"));\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateChange);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateChange);\n  }\n});\n","import \"./stats-plus.css\";\n// Adapted from https://github.com/aframevr/aframe/blob/master/src/components/scene/stats.js\n\nfunction createStats(scene) {\n  const threeStats = new window.threeStats(scene.renderer);\n  const aframeStats = new window.aframeStats(scene);\n  const plugins = scene.isMobile ? [] : [threeStats, aframeStats];\n  return new window.rStats({\n    css: [], // Our stylesheet is injected from AFrame.\n    values: {\n      fps: { caption: \"fps\", below: 30 }\n    },\n    groups: [{ caption: \"Framerate\", values: [\"fps\", \"raf\"] }],\n    plugins: plugins\n  });\n}\n\nconst HIDDEN_CLASS = \"a-hidden\";\n\nAFRAME.registerComponent(\"stats-plus\", {\n  // Whether or not the stats panel is expanded.\n  // Shows FPS counter when collapsed.\n  schema: { default: false },\n  init() {\n    this.onExpand = this.onExpand.bind(this);\n    this.onCollapse = this.onCollapse.bind(this);\n    this.onEnterVr = this.onEnterVr.bind(this);\n    this.onExitVr = this.onExitVr.bind(this);\n\n    const scene = this.el.sceneEl;\n    this.stats = createStats(scene);\n    this.statsEl = document.querySelector(\".rs-base\");\n\n    // Add header to stats panel so we can collapse it\n    const statsHeaderEl = document.createElement(\"div\");\n    statsHeaderEl.classList.add(\"rs-header\");\n\n    const statsTitleEl = document.createElement(\"h1\");\n    statsTitleEl.innerHTML = \"Stats\";\n    statsHeaderEl.appendChild(statsTitleEl);\n\n    const collapseEl = document.createElement(\"div\");\n    collapseEl.classList.add(\"rs-collapse-btn\");\n    collapseEl.innerHTML = \"X\";\n    collapseEl.addEventListener(\"click\", this.onCollapse);\n    statsHeaderEl.appendChild(collapseEl);\n\n    this.statsEl.insertBefore(statsHeaderEl, this.statsEl.firstChild);\n\n    // Add fps counter to the page\n    this.fpsEl = document.createElement(\"div\");\n    this.fpsEl.addEventListener(\"click\", this.onExpand);\n    this.fpsEl.classList.add(\"rs-fps-counter\");\n    document.body.appendChild(this.fpsEl);\n    this.lastFpsUpdate = performance.now();\n    this.lastFps = 0;\n    this.frameCount = 0;\n\n    if (scene.isMobile) {\n      this.statsEl.classList.add(\"rs-mobile\");\n      this.fpsEl.classList.add(\"rs-mobile\");\n    }\n\n    scene.addEventListener(\"enter-vr\", this.onEnterVr);\n    scene.addEventListener(\"exit-vr\", this.onExitVr);\n  },\n  update(oldData) {\n    if (oldData !== this.data) {\n      if (this.data) {\n        this.statsEl.classList.remove(HIDDEN_CLASS);\n        this.fpsEl.classList.add(HIDDEN_CLASS);\n      } else {\n        this.statsEl.classList.add(HIDDEN_CLASS);\n        this.fpsEl.classList.remove(HIDDEN_CLASS);\n      }\n    }\n  },\n  tick() {\n    if (this.data) {\n      // Update rStats\n      const stats = this.stats;\n      stats(\"rAF\").tick();\n      stats(\"FPS\").frame();\n      stats().update();\n    } else {\n      // Update the fps counter\n      const now = performance.now();\n      this.frameCount++;\n\n      // Update the fps counter text once a second\n      if (now >= this.lastFpsUpdate + 1000) {\n        const fps = Math.round(this.frameCount / ((now - this.lastFpsUpdate) / 1000));\n        if (fps !== this.lastFps) {\n          this.fpsEl.innerHTML = Math.round(fps) + \" FPS\";\n          this.lastFps = fps;\n        }\n        this.lastFpsUpdate = now;\n        this.frameCount = 0;\n      }\n    }\n  },\n  onEnterVr() {\n    // Hide all stats elements when entering VR on mobile\n    if (this.el.sceneEl.isMobile) {\n      this.statsEl.classList.add(HIDDEN_CLASS);\n      this.fpsEl.classList.add(HIDDEN_CLASS);\n    }\n  },\n  onExitVr() {\n    // Revert to previous state whe exiting VR on mobile\n    if (this.el.sceneEl.isMobile) {\n      if (this.data) {\n        this.statsEl.classList.remove(HIDDEN_CLASS);\n      } else {\n        this.fpsEl.classList.remove(HIDDEN_CLASS);\n      }\n    }\n  },\n  onExpand() {\n    this.el.setAttribute(this.name, true);\n  },\n  onCollapse() {\n    this.el.setAttribute(this.name, false);\n  },\n  remove() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.hide);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.show);\n\n    if (this.statsEl) {\n      this.statsEl.parentNode.removeChild(this.statsEl);\n      this.fpsEl.parentNode.removeChild(this.fpsEl);\n    }\n  }\n});\n","/**\n * Stores networked avatar state.\n * @namespace avatar\n * @component networked-avatar\n */\nAFRAME.registerComponent(\"networked-avatar\", {\n  schema: {\n    left_hand_pose: { default: 0 },\n    right_hand_pose: { default: 0 }\n  }\n});\n","// These controls are removed from the controller entities so that motion-capture-replayer is in full control of them.\nconst controlsBlacklist = [\n  \"tracked-controls\",\n  \"hand-controls2\",\n  \"vive-controls\",\n  \"oculus-touch-controls\",\n  \"windows-motion-controls\",\n  \"daydream-controls\",\n  \"gearvr-controls\"\n];\n\n/**\n * Replays a recorded motion capture with the given avatar body parts\n * @namespace avatar\n * @component avatar-replay\n */\nAFRAME.registerComponent(\"avatar-replay\", {\n  schema: {\n    camera: { type: \"selector\" },\n    leftController: { type: \"selector\" },\n    rightController: { type: \"selector\" },\n    recordingUrl: { type: \"string\" }\n  },\n  init: function() {\n    this.modelLoaded = new Promise(resolve => this.el.addEventListener(\"model-loaded\", resolve));\n  },\n\n  update: function() {\n    const { camera, leftController, rightController, recordingUrl } = this.data;\n    if (!recordingUrl) {\n      return;\n    }\n\n    const fetchRecording = fetch(recordingUrl).then(resp => resp.json());\n    camera.setAttribute(\"motion-capture-replayer\", { loop: true });\n    this._setupController(leftController);\n    this._setupController(rightController);\n\n    this.dataLoaded = Promise.all([fetchRecording, this.modelLoaded]).then(([recording]) => {\n      const cameraReplayer = camera.components[\"motion-capture-replayer\"];\n      cameraReplayer.startReplaying(recording.camera);\n      const leftControllerReplayer = leftController.components[\"motion-capture-replayer\"];\n      leftControllerReplayer.startReplaying(recording.left);\n      const rightControllerReplayer = rightController.components[\"motion-capture-replayer\"];\n      rightControllerReplayer.startReplaying(recording.right);\n    });\n  },\n\n  _setupController: function(controller) {\n    controlsBlacklist.forEach(controlsComponent => controller.removeAttribute(controlsComponent));\n    controller.setAttribute(\"visible\", true);\n    controller.setAttribute(\"motion-capture-replayer\", { loop: true });\n  }\n});\n","import GIFWorker from \"../workers/gifparsing.worker.js\";\nimport errorImageSrc from \"!!url-loader!../assets/images/media-error.gif\";\n\nclass GIFTexture extends THREE.Texture {\n  constructor(frames, delays, disposals) {\n    super(document.createElement(\"canvas\"));\n    this.image.width = frames[0].width;\n    this.image.height = frames[0].height;\n\n    this._ctx = this.image.getContext(\"2d\");\n\n    this.generateMipmaps = false;\n    this.isVideoTexture = true;\n    this.minFilter = THREE.NearestFilter;\n\n    this.frames = frames;\n    this.delays = delays;\n    this.disposals = disposals;\n\n    this.frame = 0;\n    this.frameStartTime = Date.now();\n  }\n\n  update() {\n    if (!this.frames || !this.delays || !this.disposals) return;\n    const now = Date.now();\n    if (now - this.frameStartTime > this.delays[this.frame]) {\n      if (this.disposals[this.frame] === 2) {\n        this._ctx.clearRect(0, 0, this.image.width, this.image.width);\n      }\n      this.frame = (this.frame + 1) % this.frames.length;\n      this.frameStartTime = now;\n      this._ctx.drawImage(this.frames[this.frame], 0, 0, this.image.width, this.image.height);\n      this.needsUpdate = true;\n    }\n  }\n}\n\nasync function createGIFTexture(url) {\n  return new Promise((resolve, reject) => {\n    // TODO: pool workers\n    const worker = new GIFWorker();\n    worker.onmessage = e => {\n      const [success, frames, delays, disposals] = e.data;\n      if (!success) {\n        reject(`error loading gif: ${e.data[1]}`);\n        return;\n      }\n\n      let loadCnt = 0;\n      for (let i = 0; i < frames.length; i++) {\n        const img = new Image();\n        img.onload = e => {\n          loadCnt++;\n          frames[i] = e.target;\n          if (loadCnt === frames.length) {\n            const texture = new GIFTexture(frames, delays, disposals);\n            texture.image.src = url;\n            texture.encoding = THREE.sRGBEncoding;\n            texture.minFilter = THREE.LinearFilter;\n            resolve(texture);\n          }\n        };\n        img.src = frames[i];\n      }\n    };\n    fetch(url, { mode: \"cors\" })\n      .then(r => r.arrayBuffer())\n      .then(rawImageData => {\n        worker.postMessage(rawImageData, [rawImageData]);\n      })\n      .catch(reject);\n  });\n}\n\nconst isIOS = AFRAME.utils.device.isIOS();\n\n/**\n * Create video element to be used as a texture.\n *\n * @param {string} src - Url to a video file.\n * @returns {Element} Video element.\n */\nasync function createVideoEl(src) {\n  const videoEl = document.createElement(\"video\");\n  videoEl.setAttribute(\"playsinline\", \"\");\n  videoEl.setAttribute(\"webkit-playsinline\", \"\");\n  // iOS Safari requires the autoplay attribute, or it won't play the video at all.\n  videoEl.autoplay = true;\n  // iOS Safari will not play videos without user interaction. We mute the video so that it can autoplay and then\n  // allow the user to unmute it with an interaction in the unmute-video-button component.\n  videoEl.muted = isIOS;\n  videoEl.preload = \"auto\";\n  videoEl.crossOrigin = \"anonymous\";\n\n  if (!src.startsWith(\"hubs://\")) {\n    videoEl.src = src;\n  } else {\n    const streamClientId = src.substring(7).split(\"/\")[1]; // /clients/<client id>/video is only URL for now\n    const stream = await NAF.connection.adapter.getMediaStream(streamClientId, \"video\");\n    videoEl.srcObject = new MediaStream(stream.getVideoTracks());\n  }\n\n  return videoEl;\n}\n\nfunction createVideoTexture(url) {\n  return new Promise(async (resolve, reject) => {\n    const videoEl = await createVideoEl(url);\n\n    const texture = new THREE.VideoTexture(videoEl);\n    texture.minFilter = THREE.LinearFilter;\n    texture.encoding = THREE.sRGBEncoding;\n\n    videoEl.addEventListener(\"loadedmetadata\", () => resolve(texture), { once: true });\n    videoEl.onerror = reject;\n\n    // If iOS and video is HLS, do some hacks.\n    if (\n      isIOS &&\n      AFRAME.utils.material.isHLS(\n        videoEl.src || videoEl.getAttribute(\"src\"),\n        videoEl.type || videoEl.getAttribute(\"type\")\n      )\n    ) {\n      // Actually BGRA. Tell shader to correct later.\n      texture.format = THREE.RGBAFormat;\n      texture.needsCorrectionBGRA = true;\n      // Apparently needed for HLS. Tell shader to correct later.\n      texture.flipY = false;\n      texture.needsCorrectionFlipY = true;\n    }\n  });\n}\n\nfunction fitToTexture(el, texture) {\n  const ratio =\n    (texture.image.videoHeight || texture.image.height || 1.0) /\n    (texture.image.videoWidth || texture.image.width || 1.0);\n  const width = Math.min(1.0, 1.0 / ratio);\n  const height = Math.min(1.0, ratio);\n  el.object3DMap.mesh.scale.set(width, height, 1);\n  el.setAttribute(\"shape\", {\n    shape: \"box\",\n    halfExtents: { x: width / 2, y: height / 2, z: 0.05 }\n  });\n}\n\nconst textureLoader = new THREE.TextureLoader();\ntextureLoader.setCrossOrigin(\"anonymous\");\nfunction createImageTexture(url) {\n  return new Promise((resolve, reject) => {\n    textureLoader.load(\n      url,\n      texture => {\n        texture.encoding = THREE.sRGBEncoding;\n        texture.minFilter = THREE.LinearFilter;\n        resolve(texture);\n      },\n      null,\n      function(xhr) {\n        reject(`'${url}' could not be fetched (Error code: ${xhr.status}; Response: ${xhr.statusText})`);\n      }\n    );\n  });\n}\n\nfunction disposeTexture(texture) {\n  if (texture.image instanceof HTMLVideoElement) {\n    const video = texture.image;\n    video.pause();\n    video.src = \"\";\n    video.load();\n  }\n  texture.dispose();\n}\n\nclass TextureCache {\n  cache = new Map();\n\n  set(src, texture) {\n    this.cache.set(src, {\n      texture,\n      count: 0\n    });\n    this.retain(src);\n  }\n\n  has(src) {\n    return this.cache.has(src);\n  }\n\n  get(src) {\n    return this.cache.get(src).texture;\n  }\n\n  retain(src) {\n    const cacheItem = this.cache.get(src);\n    cacheItem.count++;\n    // console.log(\"retain\", src, cacheItem.count);\n    return cacheItem.texture;\n  }\n\n  release(src) {\n    const cacheItem = this.cache.get(src);\n    cacheItem.count--;\n    // console.log(\"release\", src, cacheItem.count);\n    if (cacheItem.count <= 0) {\n      // Unload the video element to prevent it from continuing to play in the background\n      disposeTexture(cacheItem.texture);\n      this.cache.delete(src);\n    }\n  }\n}\n\nconst textureCache = new TextureCache();\n\nconst errorImage = new Image();\nerrorImage.src = errorImageSrc;\nconst errorTexture = new THREE.Texture(errorImage);\nerrorTexture.magFilter = THREE.NearestFilter;\nerrorImage.onload = () => {\n  errorTexture.needsUpdate = true;\n};\n\nAFRAME.registerComponent(\"media-video\", {\n  schema: {\n    src: { type: \"string\" },\n    volume: { type: \"number\", default: 0.5 },\n    loop: { type: \"boolean\", default: true },\n    audioType: { type: \"string\", default: \"pannernode\" },\n    distanceModel: { type: \"string\", default: \"inverse\" },\n    rolloffFactor: { type: \"number\", default: 1 },\n    refDistance: { type: \"number\", default: 1 },\n    maxDistance: { type: \"number\", default: 10000 },\n    coneInnerAngle: { type: \"number\", default: 360 },\n    coneOuterAngle: { type: \"number\", default: 0 },\n    coneOuterGain: { type: \"number\", default: 0 },\n    videoPaused: { type: \"boolean\" },\n    projection: { type: \"string\", default: \"flat\" },\n    time: { type: \"number\" },\n    tickRate: { default: 1000 }, // ms interval to send time interval updates\n    syncTolerance: { default: 2 }\n  },\n\n  init() {\n    this.onPauseStateChange = this.onPauseStateChange.bind(this);\n    this.tryUpdateVideoPlaybackState = this.tryUpdateVideoPlaybackState.bind(this);\n\n    this._grabStart = this._grabStart.bind(this);\n    this._grabEnd = this._grabEnd.bind(this);\n\n    this.lastUpdate = 0;\n\n    // we kind of have to deal with the \"empty case\" for this component, because networked-aframe\n    // will instantiate a null version of it for all media objects thanks to how it handles component schemas\n    if (!this.data.src) return;\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.networkedEl = networkedEl;\n      this.updatePlaybackState();\n\n      // For scene-owned videos, take ownership after a random delay if nobody\n      // else has so there is a timekeeper.\n      if (NAF.utils.getNetworkOwner(this.networkedEl) === \"scene\") {\n        setTimeout(() => {\n          if (NAF.utils.getNetworkOwner(this.networkedEl) === \"scene\") {\n            NAF.utils.takeOwnership(this.networkedEl);\n          }\n        }, 2000 + Math.floor(Math.random() * 2000));\n      }\n    });\n\n    // from a-sound\n    const sceneEl = this.el.sceneEl;\n    sceneEl.audioListener = sceneEl.audioListener || new THREE.AudioListener();\n    if (sceneEl.camera) {\n      sceneEl.camera.add(sceneEl.audioListener);\n    }\n    sceneEl.addEventListener(\"camera-set-active\", function(evt) {\n      evt.detail.cameraEl.getObject3D(\"camera\").add(sceneEl.audioListener);\n    });\n  },\n\n  // aframe component play, unrelated to video\n  play() {\n    this.el.addEventListener(\"grab-start\", this._grabStart);\n    this.el.addEventListener(\"grab-end\", this._grabEnd);\n  },\n\n  // aframe component pause, unrelated to video\n  pause() {\n    this.el.removeEventListener(\"grab-start\", this._grabStart);\n    this.el.removeEventListener(\"grab-end\", this._grabEnd);\n  },\n\n  _grabStart() {\n    if (!this.el.components.grabbable || this.el.components.grabbable.data.maxGrabbers === 0) return;\n\n    if (this.video && this.video.muted && !this.video.paused) {\n      this.video.muted = false;\n    }\n\n    this.grabStartPosition = this.el.object3D.position.clone();\n  },\n\n  _grabEnd() {\n    if (this.grabStartPosition && this.grabStartPosition.distanceToSquared(this.el.object3D.position) < 0.01 * 0.01) {\n      this.togglePlayingIfOwner();\n      this.grabStartPosition = null;\n    }\n  },\n\n  togglePlayingIfOwner() {\n    if (this.networkedEl && NAF.utils.isMine(this.networkedEl) && this.video) {\n      this.tryUpdateVideoPlaybackState(!this.data.videoPaused);\n    }\n  },\n\n  remove() {\n    if (this.mesh && this.mesh.material) {\n      disposeTexture(this.mesh.material.map);\n    }\n    if (this.video) {\n      this.video.removeEventListener(\"pause\", this.onPauseStateChange);\n      this.video.removeEventListener(\"play\", this.onPauseStateChange);\n    }\n  },\n\n  onPauseStateChange() {\n    this.el.setAttribute(\"media-video\", \"videoPaused\", this.video.paused);\n\n    if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n      this.el.emit(\"owned-video-state-changed\");\n    }\n  },\n\n  updatePlaybackState(force) {\n    if (force || (this.networkedEl && !NAF.utils.isMine(this.networkedEl) && this.video)) {\n      if (Math.abs(this.data.time - this.video.currentTime) > this.data.syncTolerance) {\n        this.tryUpdateVideoPlaybackState(this.data.videoPaused, this.data.time);\n      } else {\n        this.tryUpdateVideoPlaybackState(this.data.videoPaused);\n      }\n    }\n  },\n\n  tryUpdateVideoPlaybackState(pause, currentTime) {\n    if (this._playbackStateChangeTimeout) {\n      clearTimeout(this._playbackStateChangeTimeout);\n    }\n\n    if (pause) {\n      this.video.pause();\n\n      if (currentTime) {\n        this.video.currentTime = currentTime;\n      }\n    } else {\n      // Need to deal with the fact play() may fail if user has not interacted with browser yet.\n      this.video\n        .play()\n        .then(() => {\n          if (currentTime) {\n            this.video.currentTime = currentTime;\n          }\n        })\n        .catch(() => {\n          this._playbackStateChangeTimeout = setTimeout(\n            () => this.tryUpdateVideoPlaybackState(pause, currentTime),\n            1000\n          );\n        });\n    }\n  },\n\n  async update(oldData) {\n    const { src } = this.data;\n\n    this.updatePlaybackState();\n\n    if (!src || src === oldData.src) return;\n\n    this.remove();\n    if (this.mesh && this.mesh.material) {\n      this.mesh.material.map = null;\n      this.mesh.material.needsUpdate = true;\n    }\n\n    let texture;\n    try {\n      texture = await createVideoTexture(src);\n\n      // No way to cancel promises, so if src has changed while we were creating the texture just throw it away.\n      if (this.data.src !== src) {\n        disposeTexture(texture);\n        return;\n      }\n\n      if (!src.startsWith(\"hubs://\")) {\n        // TODO FF error here if binding mediastream: The captured HTMLMediaElement is playing a MediaStream. Applying volume or mute status is not currently supported -- not an issue since we have no audio atm in shared video.\n        texture.audioSource = this.el.sceneEl.audioListener.context.createMediaElementSource(texture.image);\n\n        let audio;\n\n        if (this.data.audioType === \"pannernode\") {\n          audio = new THREE.PositionalAudio(this.el.sceneEl.audioListener);\n          audio.setDistanceModel(this.data.distanceModel);\n          audio.setRolloffFactor(this.data.rolloffFactor);\n          audio.setRefDistance(this.data.refDistance);\n          audio.setMaxDistance(this.data.maxDistance);\n          audio.panner.coneInnerAngle = this.data.coneInnerAngle;\n          audio.panner.coneOuterAngle = this.data.coneOuterAngle;\n          audio.panner.coneOuterGain = this.data.coneOuterGain;\n        } else {\n          audio = new THREE.Audio(this.el.sceneEl.audioListener);\n        }\n\n        audio.gain.gain.value = this.data.volume;\n\n        audio.setNodeSource(texture.audioSource);\n        this.el.setObject3D(\"sound\", audio);\n      }\n\n      this.video = texture.image;\n      this.video.loop = this.data.loop;\n      this.video.addEventListener(\"pause\", this.onPauseStateChange);\n      this.video.addEventListener(\"play\", this.onPauseStateChange);\n\n      if (isIOS) {\n        const template = document.getElementById(\"video-unmute\");\n        this.el.appendChild(document.importNode(template.content, true));\n        this.el.setAttribute(\"position-at-box-shape-border__unmute-ui\", {\n          target: \".unmute-ui\",\n          dirs: [\"forward\", \"back\"]\n        });\n      }\n    } catch (e) {\n      console.error(\"Error loading video\", this.data.src, e);\n      texture = errorTexture;\n    }\n\n    const projection = this.data.projection;\n\n    if (!this.mesh || projection !== oldData.projection) {\n      const material = new THREE.MeshBasicMaterial();\n\n      let geometry;\n\n      if (projection === \"360-equirectangular\") {\n        geometry = new THREE.SphereBufferGeometry(1, 64, 32);\n        // invert the geometry on the x-axis so that all of the faces point inward\n        geometry.scale(-1, 1, 1);\n      } else {\n        geometry = new THREE.PlaneGeometry();\n        material.side = THREE.DoubleSide;\n      }\n\n      this.mesh = new THREE.Mesh(geometry, material);\n      this.el.setObject3D(\"mesh\", this.mesh);\n    }\n\n    this.mesh.material.map = texture;\n    this.mesh.material.needsUpdate = true;\n\n    if (projection === \"flat\") {\n      fitToTexture(this.el, texture);\n    }\n\n    this.updatePlaybackState(true);\n\n    this.el.emit(\"video-loaded\");\n  },\n\n  tick() {\n    if (this.data.videoPaused || !this.video || !this.networkedEl || !NAF.utils.isMine(this.networkedEl)) return;\n\n    const now = performance.now();\n    if (now - this.lastUpdate > this.data.tickRate) {\n      this.el.setAttribute(\"media-video\", \"time\", this.video.currentTime);\n      this.lastUpdate = now;\n    }\n  }\n});\n\nAFRAME.registerComponent(\"media-image\", {\n  schema: {\n    src: { type: \"string\" },\n    projection: { type: \"string\", default: \"flat\" },\n    contentType: { type: \"string\" }\n  },\n\n  remove() {\n    textureCache.release(this.data.src);\n  },\n\n  async update(oldData) {\n    let texture;\n    try {\n      const { src, contentType } = this.data;\n      if (!src) return;\n\n      if (this.mesh && this.mesh.map && src !== oldData.src) {\n        this.mesh.material.map = null;\n        this.mesh.material.needsUpdate = true;\n        if (this.mesh.map !== errorTexture) {\n          textureCache.release(oldData.src);\n        }\n      }\n\n      if (textureCache.has(src)) {\n        texture = textureCache.retain(src);\n      } else {\n        if (src === \"error\") {\n          texture = errorTexture;\n        } else if (contentType.includes(\"image/gif\")) {\n          texture = await createGIFTexture(src);\n        } else if (contentType.startsWith(\"image/\")) {\n          texture = await createImageTexture(src);\n        } else {\n          throw new Error(`Unknown image content type: ${contentType}`);\n        }\n\n        textureCache.set(src, texture);\n\n        // No way to cancel promises, so if src has changed while we were creating the texture just throw it away.\n        if (this.data.src !== src) {\n          textureCache.release(src);\n          return;\n        }\n      }\n    } catch (e) {\n      console.error(\"Error loading image\", this.data.src, e);\n      texture = errorTexture;\n    }\n\n    const projection = this.data.projection;\n\n    if (!this.mesh || projection !== oldData.projection) {\n      const material = new THREE.MeshBasicMaterial();\n\n      let geometry;\n\n      if (projection === \"360-equirectangular\") {\n        geometry = new THREE.SphereBufferGeometry(1, 64, 32);\n        // invert the geometry on the x-axis so that all of the faces point inward\n        geometry.scale(-1, 1, 1);\n      } else {\n        geometry = new THREE.PlaneGeometry();\n        material.side = THREE.DoubleSide;\n      }\n\n      this.mesh = new THREE.Mesh(geometry, material);\n      this.el.setObject3D(\"mesh\", this.mesh);\n    }\n\n    this.mesh.material.map = texture;\n    this.mesh.material.transparent = texture.format === THREE.RGBAFormat;\n    this.mesh.material.needsUpdate = true;\n\n    if (projection === \"flat\") {\n      fitToTexture(this.el, texture);\n    }\n\n    this.el.emit(\"image-loaded\", { src: this.data.src });\n  }\n});\n","module.exports = \"data:image/gif;base64,R0lGODlhEAAQAIQaAAAAAAEBAQABBQEBAgEBBQMDAwAykwBk+wFk+/85Af47AwCIHgCJHgGJHgCKHgOJIPc63vc64Pc64YeHhwDySLu7wru8wru8w7y8wwD6/v///////////////////////yH+EUNyZWF0ZWQgd2l0aCBHSU1QACH5BAEKAB8ALAAAAAAQABAAAAVl4AeMZDl9KAqkLDqd6YrN9HzC4jdbTUPDMBnGQWEAKphBYKTSYR6LRQE5y+VmlUAAc+lWrMIa4nBYxXQJcabMkkUUtLGhJZNA4BiC4HyVSCJpKRhgOktmgoRVLDSELY5mTHQlKyEAOw==\"","import { paths } from \"../systems/userinput/paths\";\n\nAFRAME.registerComponent(\"pinch-to-move\", {\n  schema: {\n    speed: { default: 0.25 }\n  },\n  init() {\n    this.axis = [0, 0];\n  },\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const pinch = userinput.get(paths.device.touchscreen.pinchDelta);\n    if (pinch) {\n      this.axis[1] = pinch * this.data.speed;\n      this.el.emit(\"move\", { axis: this.axis });\n    }\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\n\nconst degToRad = THREE.Math.degToRad;\nconst radToDeg = THREE.Math.radToDeg;\n\nAFRAME.registerComponent(\"pitch-yaw-rotator\", {\n  schema: {\n    minPitch: { default: -65 },\n    maxPitch: { default: 65 }\n  },\n\n  init() {\n    this.pitch = 0;\n    this.yaw = 0;\n    this.onRotateX = this.onRotateX.bind(this);\n    this.el.sceneEl.addEventListener(\"rotateX\", this.onRotateX);\n    this.pendingXRotation = 0;\n  },\n\n  onRotateX(e) {\n    this.pendingXRotation += e.detail.value;\n  },\n\n  look(deltaPitch, deltaYaw) {\n    const { minPitch, maxPitch } = this.data;\n    this.pitch += deltaPitch;\n    this.pitch = THREE.Math.clamp(this.pitch, minPitch, maxPitch);\n    this.yaw += deltaYaw;\n  },\n\n  set(pitch, yaw) {\n    const { minPitch, maxPitch } = this.data;\n    this.pitch = THREE.Math.clamp(radToDeg(pitch), minPitch, maxPitch);\n    this.yaw = radToDeg(yaw);\n  },\n\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const cameraDelta = userinput.get(paths.actions.cameraDelta);\n    let lookX = this.pendingXRotation;\n    let lookY = 0;\n    if (cameraDelta) {\n      lookY += cameraDelta[0];\n      lookX += cameraDelta[1];\n    }\n    if (lookX !== 0 || lookY !== 0) {\n      this.look(lookX, lookY);\n      this.el.object3D.rotation.set(degToRad(this.pitch), degToRad(this.yaw), 0);\n      this.el.object3D.rotation.order = \"YXZ\";\n    }\n    this.pendingXRotation = 0;\n  }\n});\n","function almostEquals(epsilon, u, v) {\n  return Math.abs(u.x - v.x) < epsilon && Math.abs(u.y - v.y) < epsilon && Math.abs(u.z - v.z) < epsilon;\n}\n\nAFRAME.registerComponent(\"auto-scale-cannon-physics-body\", {\n  dependencies: [\"body\"],\n  schema: {\n    equalityEpsilon: { default: 0.001 },\n    debounceDelay: { default: 100 }\n  },\n\n  init() {\n    this.body = this.el.components[\"body\"];\n    this.prevScale = this.el.object3D.scale.clone();\n    this.nextUpdateTime = -1;\n  },\n\n  tick(t) {\n    const scale = this.el.object3D.scale;\n    // Note: This only checks if the LOCAL scale of the object3D changes.\n    if (!almostEquals(this.data.equalityEpsilon, scale, this.prevScale)) {\n      this.prevScale.copy(scale);\n      this.nextUpdateTime = t + this.data.debounceDelay;\n    }\n\n    if (this.nextUpdateTime > 0 && t > this.nextUpdateTime) {\n      this.nextUpdateTime = -1;\n      this.body.updateCannonScale();\n    }\n  }\n});\n","import { getBox } from \"../utils/auto-box-collider.js\";\nimport { getLastWorldPosition } from \"../utils/three-utils\";\n\nconst PI = Math.PI;\nconst HALF_PI = PI / 2;\nconst THREE_HALF_PI = 3 * HALF_PI;\nconst right = new THREE.Vector3(1, 0, 0);\nconst forward = new THREE.Vector3(0, 0, 1);\nconst left = new THREE.Vector3(-1, 0, 0);\nconst back = new THREE.Vector3(0, 0, -1);\nconst dirs = {\n  left: {\n    dir: left,\n    rotation: THREE_HALF_PI,\n    halfExtent: \"x\"\n  },\n  right: {\n    dir: right,\n    rotation: HALF_PI,\n    halfExtent: \"x\"\n  },\n  forward: {\n    dir: forward,\n    rotation: 0,\n    halfExtent: \"z\"\n  },\n  back: {\n    dir: back,\n    rotation: PI,\n    halfExtent: \"z\"\n  }\n};\n\nconst inverseHalfExtents = {\n  x: \"z\",\n  z: \"x\"\n};\n\nAFRAME.registerComponent(\"position-at-box-shape-border\", {\n  multiple: true,\n  schema: {\n    target: { type: \"string\" },\n    dirs: { default: [\"left\", \"right\", \"forward\", \"back\"] }\n  },\n\n  init() {\n    this.cam = this.el.sceneEl.camera.el.object3D;\n    this._updateBox = this._updateBox.bind(this);\n    this.halfExtents = new THREE.Vector3();\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._updateBox, \"media-components\");\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._updateBox, \"media-components\");\n  },\n\n  update() {\n    this.dirs = this.data.dirs.map(d => dirs[d]);\n  },\n\n  tick() {\n    if (!this.target) {\n      this.targetEl = this.el.querySelector(this.data.target);\n      this.target = this.targetEl.object3D;\n\n      this.targetEl.addEventListener(\"animationcomplete\", () => {\n        this.targetEl.removeAttribute(\"animation__show\");\n      });\n\n      this.target.scale.setScalar(0.01); // To avoid \"pop\" of gigantic button first time\n      this.target.matrixNeedsUpdate = true;\n      return;\n    }\n\n    if (!this.el.getObject3D(\"mesh\")) {\n      return;\n    }\n\n    const isVisible = this.targetEl.getAttribute(\"visible\");\n    const opening = isVisible && !this.wasVisible;\n    const scaleChanged =\n      this.el.object3D.scale.x !== this.previousScaleX ||\n      this.el.object3D.scale.y !== this.previousScaleY ||\n      this.el.object3D.scale.z !== this.previousScaleZ;\n    const isAnimating = this.targetEl.getAttribute(\"animation__show\");\n\n    // If the target is being shown or the scale changed while the opening animation is being run,\n    // we need to start or re-start the animation.\n    if (opening || (scaleChanged && isAnimating)) {\n      this._updateBox(true);\n    }\n\n    this.wasVisible = isVisible;\n    this.previousScaleX = this.el.object3D.scale.x;\n    this.previousScaleY = this.el.object3D.scale.y;\n    this.previousScaleZ = this.el.object3D.scale.z;\n  },\n\n  _updateBox: (function() {\n    const camWorldPos = new THREE.Vector3();\n    const targetPosition = new THREE.Vector3();\n    const pointOnBoxFace = new THREE.Vector3();\n    const tempParentWorldScale = new THREE.Vector3();\n\n    return function(animate) {\n      if (!this.halfExtents || this.mesh !== this.el.getObject3D(\"mesh\") || this.shape !== this.el.components.shape) {\n        this.mesh = this.el.getObject3D(\"mesh\");\n        this.shape = this.el.components.shape;\n\n        if (this.el.components.shape) {\n          this.shape = this.el.components.shape;\n          this.halfExtents.copy(this.shape.data.halfExtents);\n        } else {\n          const box = getBox(this.el, this.mesh);\n          this.halfExtents = box.min\n            .clone()\n            .negate()\n            .add(box.max)\n            .multiplyScalar(0.51 / this.el.object3D.scale.x);\n        }\n      }\n      getLastWorldPosition(this.cam, camWorldPos);\n\n      let minSquareDistance = Infinity;\n      let targetDir = this.dirs[0].dir;\n      let targetHalfExtentStr = this.dirs[0].halfExtent;\n      let targetHalfExtent = this.halfExtents[targetHalfExtentStr];\n      let targetRotation = this.dirs[0].rotation;\n\n      for (let i = 0; i < this.dirs.length; i++) {\n        const dir = this.dirs[i].dir;\n        const halfExtentStr = this.dirs[i].halfExtent;\n        const halfExtent = this.halfExtents[halfExtentStr];\n        pointOnBoxFace.copy(dir).multiplyScalar(halfExtent);\n        this.el.object3D.localToWorld(pointOnBoxFace);\n        const squareDistance = pointOnBoxFace.distanceToSquared(camWorldPos);\n        if (squareDistance < minSquareDistance) {\n          minSquareDistance = squareDistance;\n          targetDir = dir;\n          targetHalfExtent = halfExtent;\n          targetRotation = this.dirs[i].rotation;\n          targetHalfExtentStr = halfExtentStr;\n        }\n      }\n\n      this.target.position.copy(targetPosition.copy(targetDir).multiplyScalar(targetHalfExtent));\n      this.target.rotation.set(0, targetRotation, 0);\n\n      tempParentWorldScale.setFromMatrixScale(this.target.parent.matrixWorld);\n\n      const distance = Math.sqrt(minSquareDistance);\n      const scale = this.halfExtents[inverseHalfExtents[targetHalfExtentStr]] * distance;\n      const targetScale = Math.min(2.0, Math.max(0.5, scale * tempParentWorldScale.x));\n      const finalScale = targetScale / tempParentWorldScale.x;\n\n      if (animate) {\n        this.targetEl.removeAttribute(\"animation__show\");\n\n        this.targetEl.setAttribute(\"animation__show\", {\n          property: \"scale\",\n          dur: 300,\n          from: { x: finalScale * 0.8, y: finalScale * 0.8, z: finalScale * 0.8 },\n          to: { x: finalScale, y: finalScale, z: finalScale },\n          easing: \"easeOutElastic\"\n        });\n      } else if (!this.targetEl.getAttribute(\"animation__show\")) {\n        this.target.scale.setScalar(finalScale);\n      }\n\n      this.target.matrixNeedsUpdate = true;\n    };\n  })()\n});\n","AFRAME.registerComponent(\"pinnable\", {\n  schema: {\n    pinned: { default: false }\n  },\n\n  init() {\n    this._applyState = this._applyState.bind(this);\n    this._fireEvents = this._fireEvents.bind(this);\n    this._allowApplyOnceComponentsReady = this._allowApplyOnceComponentsReady.bind(this);\n    this._allowApply = false;\n\n    this.el.sceneEl.addEventListener(\"stateadded\", this._applyState);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this._applyState);\n\n    // Fire pinned events when we drag and drop or scale in freeze mode,\n    // so transform gets updated.\n    this.el.addEventListener(\"grab-end\", this._fireEvents);\n\n    // Fire pinned events when page changes so we can persist the page.\n    this.el.addEventListener(\"pager-page-changed\", this._fireEvents);\n\n    // Fire pinned events when video state changes so we can persist the page.\n    this.el.addEventListener(\"owned-video-state-changed\", this._fireEvents);\n\n    // Hack: need to wait for the initial grabbable and stretchable components\n    // to show up from the template before applying.\n    this.el.addEventListener(\"componentinitialized\", this._allowApplyOnceComponentsReady);\n    this._allowApplyOnceComponentsReady();\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this._applyState);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this._applyState);\n    this.el.removeEventListener(\"componentinitialized\", this._allowApplyOnceComponentsReady);\n  },\n\n  update() {\n    this._applyState();\n    this._fireEvents();\n  },\n\n  _fireEvents() {\n    // super-networked-interactable fires grab-end when a remote user takes ownership of an entity, so we need to\n    // ignore that case here. We also need to guard against _fireEvents being called during entity initialization,\n    // when the networked component isn't initialized yet.\n    if (this.el.components.networked.data && !NAF.utils.isMine(this.el)) return;\n\n    if (this.data.pinned) {\n      this.el.emit(\"pinned\", { el: this.el });\n\n      this.el.removeAttribute(\"animation__pin-start\");\n      this.el.removeAttribute(\"animation__pin-end\");\n      const currentScale = this.el.object3D.scale;\n\n      this.el.setAttribute(\"animation__pin-start\", {\n        property: \"scale\",\n        dur: 200,\n        from: { x: currentScale.x, y: currentScale.y, z: currentScale.z },\n        to: { x: currentScale.x * 1.1, y: currentScale.y * 1.1, z: currentScale.z * 1.1 },\n        easing: \"easeOutElastic\"\n      });\n\n      this.el.setAttribute(\"animation__pin-end\", {\n        property: \"scale\",\n        delay: 200,\n        dur: 200,\n        from: { x: currentScale.x * 1.1, y: currentScale.y * 1.1, z: currentScale.z * 1.1 },\n        to: { x: currentScale.x, y: currentScale.y, z: currentScale.z },\n        easing: \"easeOutElastic\"\n      });\n    } else {\n      this.el.emit(\"unpinned\", { el: this.el });\n    }\n  },\n\n  _allowApplyOnceComponentsReady() {\n    if (!this._allowApply && this.el.components.grabbable && this.el.components.stretchable) {\n      this._allowApply = true;\n      this._applyState();\n    }\n  },\n\n  _applyState() {\n    if (!this._allowApply) return;\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n\n    if (this.data.pinned && !isFrozen) {\n      if (this.el.components.stretchable) {\n        this.el.removeAttribute(\"stretchable\");\n      }\n\n      this.el.setAttribute(\"body\", { type: \"static\" });\n\n      if (this.el.components.grabbable.data.maxGrabbers !== 0) {\n        this.prevMaxGrabbers = this.el.components.grabbable.data.maxGrabbers;\n      }\n\n      this.el.setAttribute(\"grabbable\", { maxGrabbers: 0 });\n    } else {\n      this.el.setAttribute(\"grabbable\", { maxGrabbers: this.prevMaxGrabbers });\n\n      if (!this.el.components.stretchable) {\n        this.el.setAttribute(\"stretchable\", \"\");\n      }\n    }\n  }\n});\n","import { getPromotionTokenForFile } from \"../utils/media-utils\";\n\nAFRAME.registerComponent(\"pin-networked-object-button\", {\n  schema: {\n    // Selector for label to change when pinned/unpinned, must be sibling of this components element\n    labelSelector: { type: \"string\" },\n\n    // Selector for items to hide iff pinned\n    hideWhenPinnedSelector: { type: \"string\" }\n  },\n\n  init() {\n    this._updateUI = this._updateUI.bind(this);\n    this._updateUIOnStateChange = this._updateUIOnStateChange.bind(this);\n    this.el.sceneEl.addEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    this.labelEl = this.el.parentNode.querySelector(this.data.labelSelector);\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n\n      this._updateUI();\n      this.targetEl.addEventListener(\"pinned\", this._updateUI);\n      this.targetEl.addEventListener(\"unpinned\", this._updateUI);\n    });\n\n    this.onClick = () => {\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) return;\n\n      const wasPinned = this.targetEl.components.pinnable && this.targetEl.components.pinnable.data.pinned;\n      this.targetEl.setAttribute(\"pinnable\", \"pinned\", !wasPinned);\n    };\n  },\n\n  play() {\n    this.el.addEventListener(\"grab-start\", this.onClick);\n  },\n\n  pause() {\n    this.el.removeEventListener(\"grab-start\", this.onClick);\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    if (this.targetEl) {\n      this.targetEl.removeEventListener(\"pinned\", this._updateUI);\n      this.targetEl.removeEventListener(\"unpinned\", this._updateUI);\n    }\n  },\n\n  _updateUIOnStateChange(e) {\n    if (e.detail !== \"frozen\") return;\n    this._updateUI();\n  },\n\n  _updateUI() {\n    const { fileIsOwned, fileId } = this.targetEl.components[\"media-loader\"].data;\n    const canPin = !!(fileIsOwned || (fileId && getPromotionTokenForFile(fileId)));\n    this.el.setAttribute(\"visible\", canPin);\n    this.labelEl.setAttribute(\"visible\", canPin);\n    if (!canPin) return;\n\n    const isPinned = this.targetEl.getAttribute(\"pinnable\") && this.targetEl.getAttribute(\"pinnable\").pinned;\n\n    this.labelEl.setAttribute(\"text\", \"value\", isPinned ? \"un-pin\" : \"pin\");\n    this.el.setAttribute(\"text-button\", \"backgroundColor\", isPinned ? \"#fff\" : \"#ff0520\");\n    this.el.setAttribute(\"text-button\", \"backgroundHoverColor\", isPinned ? \"#aaa\" : \"#cc0515\");\n\n    this.el.parentNode.querySelectorAll(this.data.hideWhenPinnedSelector).forEach(hideEl => {\n      hideEl.setAttribute(\"visible\", !isPinned);\n    });\n  }\n});\n","AFRAME.registerComponent(\"remove-networked-object-button\", {\n  init() {\n    this.onClick = () => {\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) return;\n\n      this.targetEl.setAttribute(\"animation__remove\", {\n        property: \"scale\",\n        dur: 200,\n        to: { x: 0.01, y: 0.01, z: 0.01 },\n        easing: \"easeInQuad\"\n      });\n\n      this.el.parentNode.removeAttribute(\"visibility-while-frozen\");\n      this.el.parentNode.setAttribute(\"visible\", false);\n\n      this.targetEl.addEventListener(\"animationcomplete\", () => {\n        this.targetEl.parentNode.removeChild(this.targetEl);\n      });\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n  },\n\n  play() {\n    this.el.addEventListener(\"grab-start\", this.onClick);\n  },\n\n  pause() {\n    this.el.removeEventListener(\"grab-start\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"camera-focus-button\", {\n  schema: {\n    track: { default: false }\n  },\n\n  init() {\n    this.cameraSystem = this.el.sceneEl.systems[\"camera-tools\"];\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n\n    this.onClick = () => {\n      const myCamera = this.cameraSystem.getMyCamera();\n      if (!myCamera) return;\n\n      myCamera.components[\"camera-tool\"].focus(this.targetEl, this.data.track);\n    };\n  },\n\n  tick() {\n    const isVisible = this.el.getAttribute(\"visible\");\n    const shouldBeVisible = !!(this.cameraSystem && this.cameraSystem.getMyCamera());\n\n    if (isVisible !== shouldBeVisible) {\n      this.el.setAttribute(\"visible\", shouldBeVisible);\n    }\n  },\n\n  play() {\n    this.el.addEventListener(\"grab-start\", this.onClick);\n  },\n\n  pause() {\n    this.el.removeEventListener(\"grab-start\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"mirror-camera-button\", {\n  schema: {\n    // Selector for label to change when mirroring/un-mirroring\n    labelSelector: { type: \"string\" }\n  },\n\n  init() {\n    this._updateUI = this._updateUI.bind(this);\n    this._isMirrored = this._isMirrored.bind(this);\n    this.labelEl = this.el.parentNode.querySelector(this.data.labelSelector);\n\n    this.onClick = () => {\n      if (!this._isMirrored()) {\n        this.targetEl.components[\"camera-tool\"].mirror();\n      } else {\n        this.targetEl.components[\"camera-tool\"].unmirror();\n      }\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this.targetEl.addEventListener(\"mirrored\", this._updateUI);\n      this.targetEl.addEventListener(\"unmirrored\", this._updateUI);\n      this._updateUI();\n    });\n  },\n\n  play() {\n    this.el.addEventListener(\"grab-start\", this.onClick);\n  },\n\n  pause() {\n    this.el.removeEventListener(\"grab-start\", this.onClick);\n  },\n\n  _isMirrored() {\n    return this.targetEl === this.el.sceneEl.systems[\"camera-mirror\"].getMirroredCameraEl();\n  },\n\n  _updateUI() {\n    const isMirrored = this._isMirrored();\n    this.labelEl.setAttribute(\"text\", \"value\", isMirrored ? \"unmirror\" : \"mirror\");\n    this.el.setAttribute(\"text-button\", \"backgroundColor\", isMirrored ? \"#fff\" : \"#ff0520\");\n    this.el.setAttribute(\"text-button\", \"backgroundHoverColor\", isMirrored ? \"#aaa\" : \"#cc0515\");\n  }\n});\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\nAFRAME.registerComponent(\"unmute-video-button\", {\n  init() {\n    this.onClick = () => {\n      const videoEl = findAncestorWithComponent(this.el, \"media-video\");\n      const mediaVideo = videoEl.components[\"media-video\"];\n      if (!mediaVideo || !mediaVideo.video) return;\n      mediaVideo.video.muted = false;\n      this.el.parentNode.setAttribute(\"visible\", false);\n    };\n  },\n\n  play() {\n    // Safari won't accept grab-start or even mousedown as user-initiated gestures,\n    // so we have to use a global touchstart event here.\n    document.addEventListener(\"touchstart\", this.onClick);\n  },\n\n  pause() {\n    document.removeEventListener(\"touchstart\", this.onClick);\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\n\nAFRAME.registerComponent(\"destroy-at-extreme-distances\", {\n  schema: {\n    xMin: { default: -1000 },\n    xMax: { default: 1000 },\n    yMin: { default: -1000 },\n    yMax: { default: 1000 },\n    zMin: { default: -1000 },\n    zMax: { default: 1000 }\n  },\n\n  init() {\n    this._checkForDestroy = this._checkForDestroy.bind(this);\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._checkForDestroy, \"media-components\");\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._checkForDestroy, \"media-components\");\n  },\n\n  _checkForDestroy: (function() {\n    const pos = new THREE.Vector3();\n    return function() {\n      const { xMin, xMax, yMin, yMax, zMin, zMax } = this.data;\n      getLastWorldPosition(this.el.object3D, pos);\n\n      if (pos.x < xMin || pos.x > xMax || pos.y < yMin || pos.y > yMax || pos.z < zMin || pos.z > zMax) {\n        this.el.parentNode.removeChild(this.el);\n      }\n    };\n  })()\n});\n","/**\n * Toggles the visibility of this entity based on networked ownership\n * @namespace ui\n * @component visible-to-owner\n */\nAFRAME.registerComponent(\"visible-to-owner\", {\n  init() {\n    this.onStateChange = e => {\n      this.el.setAttribute(\"visible\", e.detail.newOwner === NAF.clientId);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(el => {\n      el.addEventListener(\"ownership-changed\", this.onStateChange);\n      this.el.setAttribute(\"visible\", NAF.utils.isMine(el));\n    });\n  }\n});\n","import { addMedia } from \"../utils/media-utils\";\nimport { ObjectTypes } from \"../object-types\";\nimport { paths } from \"../systems/userinput/paths\";\n\nimport cameraModelSrc from \"../assets/camera_tool.glb\";\n\nconst cameraModelPromise = new Promise(resolve => new THREE.GLTFLoader().load(cameraModelSrc, resolve));\n\nconst pathsMap = {\n  \"player-right-controller\": {\n    takeSnapshot: paths.actions.rightHand.takeSnapshot\n  },\n  \"player-left-controller\": {\n    takeSnapshot: paths.actions.leftHand.takeSnapshot\n  },\n  cursor: {\n    takeSnapshot: paths.actions.cursor.takeSnapshot\n  }\n};\n\nconst snapCanvas = document.createElement(\"canvas\");\nasync function pixelsToPNG(pixels, width, height) {\n  snapCanvas.width = width;\n  snapCanvas.height = height;\n  const context = snapCanvas.getContext(\"2d\");\n\n  const imageData = context.createImageData(width, height);\n  imageData.data.set(pixels);\n  const bitmap = await createImageBitmap(imageData);\n  context.scale(1, -1);\n  context.drawImage(bitmap, 0, -height);\n  const blob = await new Promise(resolve => snapCanvas.toBlob(resolve));\n  return new File([blob], \"snap.png\", { type: \"image/png\" });\n}\n\nAFRAME.registerComponent(\"camera-tool\", {\n  schema: {\n    previewFPS: { default: 6 },\n    imageWidth: { default: 1024 },\n    imageHeight: { default: 1024 / (16 / 9) }\n  },\n\n  init() {\n    this.stateAdded = this.stateAdded.bind(this);\n\n    this.lastUpdate = performance.now();\n\n    this.renderTarget = new THREE.WebGLRenderTarget(this.data.imageWidth, this.data.imageHeight, {\n      format: THREE.RGBAFormat,\n      minFilter: THREE.LinearFilter,\n      magFilter: THREE.NearestFilter,\n      encoding: THREE.sRGBEncoding,\n      depth: false,\n      stencil: false\n    });\n\n    this.camera = new THREE.PerspectiveCamera(50, this.renderTarget.width / this.renderTarget.height, 0.1, 30000);\n    this.camera.rotation.set(0, Math.PI, 0);\n    this.el.setObject3D(\"camera\", this.camera);\n\n    const material = new THREE.MeshBasicMaterial({\n      map: this.renderTarget.texture\n    });\n\n    // Bit of a hack here to only update the renderTarget when the screens are in view and at a reduced FPS\n    material.map.isVideoTexture = true;\n    material.map.update = () => {\n      if (performance.now() - this.lastUpdate >= 1000 / this.data.previewFPS) {\n        this.updateRenderTargetNextTick = true;\n      }\n    };\n\n    cameraModelPromise.then(model => {\n      const mesh = model.scene.clone();\n      mesh.scale.set(2, 2, 2);\n      mesh.matrixNeedsUpdate = true;\n      this.el.setObject3D(\"mesh\", mesh);\n\n      const width = 0.28;\n      const geometry = new THREE.PlaneGeometry(width, width / this.camera.aspect);\n\n      const screen = new THREE.Mesh(geometry, material);\n      screen.rotation.set(0, Math.PI, 0);\n      screen.position.set(0, 0, -0.042);\n      screen.matrixNeedsUpdate = true;\n      this.el.setObject3D(\"screen\", screen);\n\n      const selfieScreen = new THREE.Mesh(geometry, material);\n      selfieScreen.position.set(0, 0.4, 0);\n      selfieScreen.scale.set(-2, 2, 2);\n      selfieScreen.matrixNeedsUpdate = true;\n      this.el.setObject3D(\"selfieScreen\", selfieScreen);\n\n      this.cameraSystem = this.el.sceneEl.systems[\"camera-tools\"];\n      this.cameraSystem.register(this.el);\n\n      this.updateRenderTargetNextTick = true;\n    });\n  },\n\n  play() {\n    this.el.addEventListener(\"stateadded\", this.stateAdded);\n  },\n\n  pause() {\n    this.el.removeEventListener(\"stateadded\", this.stateAdded);\n  },\n\n  remove() {\n    this.cameraSystem.deregister(this.el);\n    this.el.sceneEl.systems[\"camera-mirror\"].unmirrorCameraAtEl(this.el);\n  },\n\n  stateAdded(evt) {\n    if (evt.detail === \"activated\") {\n      this.takeSnapshotNextTick = true;\n    }\n  },\n\n  focus(el, track) {\n    if (track) {\n      this.trackTarget = el;\n    } else {\n      this.trackTarget = null;\n    }\n\n    this.lookAt(el);\n  },\n\n  lookAt: (function() {\n    const targetPos = new THREE.Vector3();\n    return function(el) {\n      targetPos.setFromMatrixPosition(el.object3D.matrixWorld);\n      this.el.object3D.lookAt(targetPos);\n      this.el.object3D.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  mirror() {\n    this.el.sceneEl.systems[\"camera-mirror\"].mirrorCameraAtEl(this.el);\n  },\n\n  unmirror() {\n    this.el.sceneEl.systems[\"camera-mirror\"].unmirrorCameraAtEl(this.el);\n  },\n\n  tick() {\n    const grabber = this.el.components.grabbable.grabbers[0];\n    if (grabber && !!pathsMap[grabber.id]) {\n      const paths = pathsMap[grabber.id];\n      if (AFRAME.scenes[0].systems.userinput.get(paths.takeSnapshot)) {\n        this.takeSnapshotNextTick = true;\n      }\n    }\n  },\n\n  tock: (function() {\n    const tempHeadScale = new THREE.Vector3();\n\n    return function tock() {\n      const sceneEl = this.el.sceneEl;\n      const renderer = this.renderer || sceneEl.renderer;\n      const now = performance.now();\n\n      // Perform lookAt in tock so it will re-orient after grabs, etc.\n      if (this.trackTarget) {\n        if (this.trackTarget.parentNode) {\n          this.lookAt(this.trackTarget);\n        } else {\n          this.trackTarget = null; // Target removed\n        }\n      }\n\n      if (!this.playerHead) {\n        const headEl = document.getElementById(\"player-head\");\n        this.playerHead = headEl && headEl.object3D;\n      }\n\n      if (!this.playerHud) {\n        const hudEl = document.getElementById(\"player-hud\");\n        this.playerHud = hudEl && hudEl.object3D;\n      }\n\n      if (this.takeSnapshotNextTick || this.updateRenderTargetNextTick) {\n        if (this.playerHead) {\n          tempHeadScale.copy(this.playerHead.scale);\n          this.playerHead.scale.set(1, 1, 1);\n          this.playerHead.updateMatrices(true, true);\n          this.playerHead.updateMatrixWorld(true, true);\n        }\n\n        if (this.playerHud) {\n          this.playerHud.visible = false;\n        }\n\n        const tmpVRFlag = renderer.vr.enabled;\n        const tmpOnAfterRender = sceneEl.object3D.onAfterRender;\n        delete sceneEl.object3D.onAfterRender;\n        renderer.vr.enabled = false;\n\n        renderer.render(sceneEl.object3D, this.camera, this.renderTarget, true);\n\n        renderer.vr.enabled = tmpVRFlag;\n        sceneEl.object3D.onAfterRender = tmpOnAfterRender;\n        if (this.playerHead) {\n          this.playerHead.scale.copy(tempHeadScale);\n          this.playerHead.updateMatrices(true, true);\n          this.playerHead.updateMatrixWorld(true, true);\n        }\n        if (this.playerHud) {\n          this.playerHud.visible = true;\n        }\n        this.lastUpdate = now;\n        this.updateRenderTargetNextTick = false;\n      }\n\n      if (this.takeSnapshotNextTick) {\n        const width = this.renderTarget.width;\n        const height = this.renderTarget.height;\n        if (!this.snapPixels) {\n          this.snapPixels = new Uint8Array(width * height * 4);\n        }\n        renderer.readRenderTargetPixels(this.renderTarget, 0, 0, width, height, this.snapPixels);\n        pixelsToPNG(this.snapPixels, width, height).then(file => {\n          const { entity, orientation } = addMedia(file, \"#interactable-media\", undefined, true);\n          entity.object3D.position.copy(this.el.object3D.position).add(new THREE.Vector3(0, -0.5, 0));\n          entity.object3D.rotation.copy(this.el.object3D.rotation);\n          entity.object3D.matrixNeedsUpdate = true;\n\n          entity.addEventListener(\n            \"media_resolved\",\n            () => {\n              this.el.emit(\"photo_taken\", entity.components[\"media-loader\"].data.src);\n            },\n            { once: true }\n          );\n          orientation.then(() => {\n            sceneEl.emit(\"object_spawned\", { objectType: ObjectTypes.CAMERA });\n          });\n        });\n        sceneEl.emit(\"camera_tool_took_snapshot\");\n        this.takeSnapshotNextTick = false;\n      }\n    };\n  })()\n});\n","module.exports = __webpack_public_path__ + \"assets/camera_tool-a25d0894a6b635779bd4ed41f2de0411.glb\";","AFRAME.registerComponent(\"emit-state-change\", {\n  multiple: true,\n  schema: {\n    state: { type: \"string\" },\n    transform: { type: \"string\", oneof: [\"rising\", \"falling\"] },\n    event: { type: \"string\" }\n  },\n\n  init() {\n    this.stateadded = this.stateadded.bind(this);\n    this.stateremoved = this.stateremoved.bind(this);\n  },\n\n  stateadded(e) {\n    if (e.detail === this.data.state) {\n      this.el.emit(this.data.event);\n    }\n  },\n  stateremoved(e) {\n    if (e.detail === this.data.state) {\n      this.el.emit(this.data.event);\n    }\n  },\n\n  update() {\n    this.el.removeEventListener(\"stateadded\", this.stateadded);\n    this.el.removeEventListener(\"stateremoved\", this.stateremoved);\n\n    if (this.data.transform === \"rising\") {\n      this.el.addEventListener(\"stateadded\", this.stateadded);\n    }\n    if (this.data.transform === \"falling\") {\n      this.el.addEventListener(\"stateremoved\", this.stateremoved);\n    }\n  }\n});\n","AFRAME.registerComponent(\"action-to-event\", {\n  multiple: true,\n\n  schema: {\n    path: { type: \"string\" },\n    event: { type: \"string\" }\n  },\n\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    if (userinput.get(this.data.path)) {\n      this.el.emit(this.data.event);\n    }\n  }\n});\n","AFRAME.registerComponent(\"emit-scene-event-on-remove\", {\n  schema: {\n    event: { default: null }\n  },\n\n  remove() {\n    if (this.data.event) {\n      this.el.sceneEl.emit(this.data.event, { el: this.el });\n    }\n  }\n});\n","const handler = e => {\n  e.stopPropagation();\n};\n\nAFRAME.registerComponent(\"stop-event-propagation\", {\n  multiple: true,\n\n  schema: {\n    event: { type: \"string\" }\n  },\n\n  play() {\n    this.el.addEventListener(this.data.event, handler);\n  },\n\n  pause() {\n    this.el.removeEventListener(this.data.event, handler);\n  }\n});\n","// Taken from A-Frame 0.9.0 master, TODO remove\n\nconst anime = require(\"animejs\");\nconst components = AFRAME.components;\nconst registerComponent = AFRAME.registerComponent;\nconst utils = AFRAME.utils;\n\nconst colorHelperFrom = new THREE.Color();\nconst colorHelperTo = new THREE.Color();\n\nconst getComponentProperty = utils.entity.getComponentProperty;\nconst setComponentProperty = utils.entity.setComponentProperty;\nconst splitCache = {};\n\nconst TYPE_COLOR = \"color\";\nconst PROP_POSITION = \"position\";\nconst PROP_ROTATION = \"rotation\";\nconst PROP_SCALE = \"scale\";\nconst STRING_COMPONENTS = \"components\";\nconst STRING_OBJECT3D = \"object3D\";\n\n/**\n * Given property name, check schema to see what type we are animating.\n * We just care whether the property is a vector.\n */\nfunction getPropertyType(el, property) {\n  const split = property.split(\".\");\n  const componentName = split[0];\n  const propertyName = split[1];\n  const component = el.components[componentName] || components[componentName];\n\n  // Primitives.\n  if (!component) {\n    return null;\n  }\n\n  // Dynamic schema. We only care about vectors anyways.\n  if (propertyName && !component.schema[propertyName]) {\n    return null;\n  }\n\n  // Multi-prop.\n  if (propertyName) {\n    return component.schema[propertyName].type;\n  }\n\n  // Single-prop.\n  return component.schema.type;\n}\n\n/**\n * Convert object to radians.\n */\nfunction toRadians(obj) {\n  obj.x = THREE.Math.degToRad(obj.x);\n  obj.y = THREE.Math.degToRad(obj.y);\n  obj.z = THREE.Math.degToRad(obj.z);\n}\n\nfunction addEventListeners(el, eventNames, handler) {\n  let i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.addEventListener(eventNames[i], handler);\n  }\n}\n\nfunction removeEventListeners(el, eventNames, handler) {\n  let i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.removeEventListener(eventNames[i], handler);\n  }\n}\n\nfunction splitDot(path) {\n  if (path in splitCache) {\n    return splitCache[path];\n  }\n  splitCache[path] = path.split(\".\");\n  return splitCache[path];\n}\n\nfunction getRawProperty(el, path) {\n  let i;\n  let value;\n  const split = splitDot(path);\n  value = el;\n  for (i = 0; i < split.length; i++) {\n    value = value[split[i]];\n  }\n  return value;\n}\n\nfunction setRawProperty(el, path, value, type) {\n  let i;\n\n  if (path.startsWith(\"object3D.rotation\")) {\n    value = THREE.Math.degToRad(value);\n  }\n\n  // Walk.\n  const split = splitDot(path);\n  let targetValue = el;\n  for (i = 0; i < split.length - 1; i++) {\n    targetValue = targetValue[split[i]];\n  }\n  const propertyName = split[split.length - 1];\n\n  // Raw color.\n  if (type === TYPE_COLOR) {\n    if (\"r\" in targetValue[propertyName]) {\n      targetValue[propertyName].r = value.r;\n      targetValue[propertyName].g = value.g;\n      targetValue[propertyName].b = value.b;\n    } else {\n      targetValue[propertyName].x = value.r;\n      targetValue[propertyName].y = value.g;\n      targetValue[propertyName].z = value.b;\n    }\n    return;\n  }\n\n  targetValue[propertyName] = value;\n}\n\nfunction isRawProperty(data) {\n  return data.isRawProperty || data.property.startsWith(STRING_COMPONENTS) || data.property.startsWith(STRING_OBJECT3D);\n}\n/**\n * Animation component for A-Frame using anime.js.\n *\n * The component manually controls the tick by setting `autoplay: false` on anime.js and\n * manually * calling `animation.tick()` in the tick handler. To pause or resume, we toggle a\n * boolean * flag * `isAnimationPlaying`.\n *\n * anime.js animation config for tweenining Javascript objects and values works as:\n *\n *  config = {\n *    targets: {foo: 0.0, bar: '#000'},\n *    foo: 1.0,\n *    bar: '#FFF'\n *  }\n *\n * The above will tween each property in `targets`. The `to` values are set in the root of\n * the config.\n *\n * @member {object} animation - anime.js instance.\n * @member {boolean} animationIsPlaying - Control if animation is playing.\n */\nmodule.exports.Component = registerComponent(\"animation\", {\n  schema: {\n    autoplay: { default: true },\n    delay: { default: 0 },\n    dir: { default: \"\" },\n    dur: { default: 1000 },\n    easing: { default: \"easeInQuad\" },\n    elasticity: { default: 400 },\n    enabled: { default: true },\n    from: { default: \"\" },\n    loop: {\n      default: 0,\n      parse: function(value) {\n        // Boolean or integer.\n        if (value === true || value === \"true\") {\n          return true;\n        }\n        if (value === false || value === \"false\") {\n          return false;\n        }\n        return parseInt(value, 10);\n      }\n    },\n    property: { default: \"\" },\n    startEvents: { type: \"array\" },\n    pauseEvents: { type: \"array\" },\n    resumeEvents: { type: \"array\" },\n    round: { default: false },\n    to: { default: \"\" },\n    type: { default: \"\" },\n    isRawProperty: { default: false }\n  },\n\n  multiple: true,\n\n  init: function() {\n    const self = this;\n\n    this.eventDetail = { name: this.attrName };\n    this.time = 0;\n\n    this.animation = null;\n    this.animationIsPlaying = false;\n    this.onStartEvent = this.onStartEvent.bind(this);\n    this.beginAnimation = this.beginAnimation.bind(this);\n    this.pauseAnimation = this.pauseAnimation.bind(this);\n    this.resumeAnimation = this.resumeAnimation.bind(this);\n\n    this.fromColor = {};\n    this.toColor = {};\n    this.targets = {};\n    this.targetsArray = [];\n\n    this.updateConfigForDefault = this.updateConfigForDefault.bind(this);\n    this.updateConfigForRawColor = this.updateConfigForRawColor.bind(this);\n\n    this.config = {\n      complete: function() {\n        self.animationIsPlaying = false;\n        self.el.emit(\"animationcomplete\", self.eventDetail, false);\n        if (self.id) {\n          self.el.emit(\"animationcomplete__\" + self.id, self.eventDetail, false);\n        }\n      }\n    };\n  },\n\n  update: function(oldData) {\n    const config = this.config;\n    const data = this.data;\n\n    this.animationIsPlaying = false;\n\n    if (oldData.enabled && !this.data.enabled) {\n      return;\n    }\n\n    if (!data.property) {\n      return;\n    }\n\n    // Base config.\n    config.autoplay = false;\n    config.direction = data.dir;\n    config.duration = data.dur;\n    config.easing = data.easing;\n    config.elasticity = data.elasticity;\n    config.loop = data.loop;\n    config.round = data.round;\n\n    // Start new animation.\n    this.createAndStartAnimation();\n  },\n\n  tick: function(t, dt) {\n    if (!this.animationIsPlaying) {\n      return;\n    }\n    this.time += dt;\n    this.animation.tick(this.time);\n  },\n\n  remove: function() {\n    this.pauseAnimation();\n    this.removeEventListeners();\n  },\n\n  pause: function() {\n    this.paused = true;\n    this.pausedWasPlaying = true;\n    this.pauseAnimation();\n    this.removeEventListeners();\n  },\n\n  /**\n   * `play` handler only for resuming scene.\n   */\n  play: function() {\n    if (!this.paused) {\n      return;\n    }\n    this.paused = false;\n    this.addEventListeners();\n    if (this.pausedWasPlaying) {\n      this.resumeAnimation();\n      this.pausedWasPlaying = false;\n    }\n  },\n\n  /**\n   * Start animation from scratch.\n   */\n  createAndStartAnimation: function() {\n    const data = this.data;\n\n    this.updateConfig();\n    this.animationIsPlaying = false;\n    this.animation = anime(this.config);\n\n    this.removeEventListeners();\n    this.addEventListeners();\n\n    // Wait for start events for animation.\n    if (!data.autoplay || (data.startEvents && data.startEvents.length)) {\n      return;\n    }\n\n    // Delay animation.\n    if (data.delay) {\n      setTimeout(this.beginAnimation, data.delay);\n      return;\n    }\n\n    // Play animation.\n    this.beginAnimation();\n  },\n\n  /**\n   * This is before animation start (including from startEvents).\n   * Set to initial state (config.from, time = 0, seekTime = 0).\n   */\n  beginAnimation: function() {\n    this.updateConfig();\n    this.time = 0;\n    this.animationIsPlaying = true;\n    this.stopRelatedAnimations();\n    this.el.emit(\"animationbegin\", this.eventDetail);\n  },\n\n  pauseAnimation: function() {\n    this.animationIsPlaying = false;\n  },\n\n  resumeAnimation: function() {\n    this.animationIsPlaying = true;\n  },\n\n  /**\n   * startEvents callback.\n   */\n  onStartEvent: function() {\n    if (!this.data.enabled) {\n      return;\n    }\n\n    this.updateConfig();\n    if (this.animation) {\n      this.animation.pause();\n    }\n    this.animation = anime(this.config);\n\n    // Include the delay before each start event.\n    if (this.data.delay) {\n      setTimeout(this.beginAnimation, this.data.delay);\n      return;\n    }\n    this.beginAnimation();\n  },\n\n  /**\n   * rawProperty: true and type: color;\n   */\n  updateConfigForRawColor: function() {\n    const config = this.config;\n    const data = this.data;\n    const el = this.el;\n    let from;\n    let key;\n    let to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForRawColor)) {\n      return;\n    }\n\n    from = data.from === \"\" ? getRawProperty(el, data.property) : data.from;\n    to = data.to;\n\n    // Use r/g/b vector for color type.\n    this.setColorConfig(from, to);\n    from = this.fromColor;\n    to = this.toColor;\n\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) {\n      config[key] = to[key];\n    }\n\n    config.update = (function() {\n      const lastValue = {};\n      return function(anim) {\n        const value = anim.animatables[0].target;\n        // For animation timeline.\n        if (value.r === lastValue.r && value.g === lastValue.g && value.b === lastValue.b) {\n          return;\n        }\n\n        setRawProperty(el, data.property, value, data.type);\n      };\n    })();\n  },\n\n  /**\n   * Stuff property into generic `property` key.\n   */\n  updateConfigForDefault: function() {\n    const config = this.config;\n    const data = this.data;\n    const el = this.el;\n    let from;\n    let to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForDefault)) {\n      return;\n    }\n\n    if (data.from === \"\") {\n      // Infer from.\n      from = isRawProperty(data) ? getRawProperty(el, data.property) : getComponentProperty(el, data.property);\n    } else {\n      // Explicit from.\n      from = data.from;\n    }\n\n    to = data.to;\n\n    const isNumber = !isNaN(from || to);\n    if (isNumber) {\n      from = parseFloat(from);\n      to = parseFloat(to);\n    } else {\n      from = from ? from.toString() : from;\n      to = to ? to.toString() : to;\n    }\n\n    // Convert booleans to integer to allow boolean flipping.\n    const isBoolean = data.to === \"true\" || data.to === \"false\" || data.to === true || data.to === false;\n    if (isBoolean) {\n      from = data.from === \"true\" || data.from === true ? 1 : 0;\n      to = data.to === \"true\" || data.to === true ? 1 : 0;\n    }\n\n    this.targets.aframeProperty = from;\n    config.targets = this.targets;\n    config.aframeProperty = to;\n    config.update = (function() {\n      let lastValue;\n\n      return function(anim) {\n        let value;\n        value = anim.animatables[0].target.aframeProperty;\n\n        // Need to do a last value check for animation timeline since all the tweening\n        // begins simultaenously even if the value has not changed. Also better for perf\n        // anyways.\n        if (value === lastValue) {\n          return;\n        }\n        lastValue = value;\n\n        if (isBoolean) {\n          value = value >= 1;\n        }\n\n        if (isRawProperty(data)) {\n          setRawProperty(el, data.property, value, data.type);\n        } else {\n          setComponentProperty(el, data.property, value);\n        }\n      };\n    })();\n  },\n\n  /**\n   * Extend x/y/z/w onto the config.\n   * Update vector by modifying object3D.\n   */\n  updateConfigForVector: function() {\n    const config = this.config;\n    const data = this.data;\n    const el = this.el;\n    let key;\n\n    // Parse coordinates.\n    const from =\n      data.from !== \"\"\n        ? utils.coordinates.parse(data.from) // If data.from defined, use that.\n        : getComponentProperty(el, data.property); // If data.from not defined, get on the fly.\n    const to = utils.coordinates.parse(data.to);\n\n    if (data.property === PROP_ROTATION) {\n      toRadians(from);\n      toRadians(to);\n    }\n\n    // Set to and from.\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) {\n      config[key] = to[key];\n    }\n\n    // If animating object3D transformation, run more optimized updater.\n    if (data.property === PROP_POSITION || data.property === PROP_ROTATION || data.property === PROP_SCALE) {\n      config.update = (function() {\n        const lastValue = {};\n        return function(anim) {\n          const value = anim.animatables[0].target;\n\n          if (data.property === PROP_SCALE) {\n            value.x = Math.max(0.0001, value.x);\n            value.y = Math.max(0.0001, value.y);\n            value.z = Math.max(0.0001, value.z);\n          }\n\n          // For animation timeline.\n          if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n            return;\n          }\n\n          lastValue.x = value.x;\n          lastValue.y = value.y;\n          lastValue.z = value.z;\n\n          el.object3D[data.property].set(value.x, value.y, value.z);\n          el.object3D.matrixNeedsUpdate = true;\n        };\n      })();\n      return;\n    }\n\n    // Animating some vector.\n    config.update = (function() {\n      const lastValue = {};\n      return function(anim) {\n        const value = anim.animations[0].target;\n\n        // Animate rotation through radians.\n        // For animation timeline.\n        if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n          return;\n        }\n        lastValue.x = value.x;\n        lastValue.y = value.y;\n        lastValue.z = value.z;\n        setComponentProperty(el, data.property, value);\n      };\n    })();\n  },\n\n  /**\n   * Update the config before each run.\n   */\n  updateConfig: function() {\n    // Route config type.\n    const propType = getPropertyType(this.el, this.data.property);\n    if (isRawProperty(this.data) && this.data.type === TYPE_COLOR) {\n      this.updateConfigForRawColor();\n    } else if (propType === \"vec2\" || propType === \"vec3\" || propType === \"vec4\") {\n      this.updateConfigForVector();\n    } else {\n      this.updateConfigForDefault();\n    }\n  },\n\n  /**\n   * Wait for component to initialize.\n   */\n  waitComponentInitRawProperty: function(cb) {\n    const data = this.data;\n    const el = this.el;\n    const self = this;\n\n    if (data.from !== \"\") {\n      return false;\n    }\n\n    if (!data.property.startsWith(STRING_COMPONENTS)) {\n      return false;\n    }\n\n    const componentName = splitDot(data.property)[1];\n    if (el.components[componentName]) {\n      return false;\n    }\n\n    el.addEventListener(\"componentinitialized\", function wait(evt) {\n      if (evt.detail.name !== componentName) {\n        return;\n      }\n      cb();\n      // Since the config was created async, create the animation now since we missed it\n      // earlier.\n      self.animation = anime(self.config);\n      el.removeEventListener(\"componentinitialized\", wait);\n    });\n    return true;\n  },\n\n  /**\n   * Make sure two animations on the same property don't fight each other.\n   * e.g., animation__mouseenter=\"property: material.opacity\"\n   *       animation__mouseleave=\"property: material.opacity\"\n   */\n  stopRelatedAnimations: function() {\n    let component;\n    let componentName;\n    for (componentName in this.el.components) {\n      component = this.el.components[componentName];\n      if (componentName === this.attrName) {\n        continue;\n      }\n      if (component.name !== \"animation\") {\n        continue;\n      }\n      if (!component.animationIsPlaying) {\n        continue;\n      }\n      if (component.data.property !== this.data.property) {\n        continue;\n      }\n      component.animationIsPlaying = false;\n    }\n  },\n\n  addEventListeners: function() {\n    const data = this.data;\n    const el = this.el;\n    addEventListeners(el, data.startEvents, this.onStartEvent);\n    addEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    addEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  removeEventListeners: function() {\n    const data = this.data;\n    const el = this.el;\n    removeEventListeners(el, data.startEvents, this.onStartEvent);\n    removeEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    removeEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  setColorConfig: function(from, to) {\n    colorHelperFrom.set(from);\n    colorHelperTo.set(to);\n    from = this.fromColor;\n    to = this.toColor;\n    from.r = colorHelperFrom.r;\n    from.g = colorHelperFrom.g;\n    from.b = colorHelperFrom.b;\n    to.r = colorHelperTo.r;\n    to.g = colorHelperTo.g;\n    to.b = colorHelperTo.b;\n  }\n});\n","AFRAME.registerComponent(\"follow-in-lower-fov\", {\n  schema: {\n    target: { type: \"selector\" },\n    offset: { type: \"vec3\" },\n    speed: { type: \"number\", default: 0.003 }\n  },\n\n  init() {\n    this.targetPos = new THREE.Vector3();\n    this.offset = new THREE.Vector3();\n    this.offset.copy(this.data.offset);\n\n    this.snappedRot = new THREE.Euler();\n    this.snappedQ = new THREE.Quaternion();\n    this.snappedXForm = new THREE.Matrix4();\n    this.snappedXFormWorld = new THREE.Matrix4();\n    this.tempVector = new THREE.Vector3();\n  },\n\n  tick(t, dt) {\n    const obj = this.el.object3D;\n    const target = this.data.target.object3D;\n\n    // Compute position + rotation by projecting offset along a downward ray in target space,\n    // and mask out Z rotation.\n    this._applyMaskedTargetRotation(-Math.PI / 4, target.rotation.y, 0, this.snappedXFormWorld);\n\n    this.targetPos.copy(this.offset);\n    this.targetPos.applyMatrix4(this.snappedXFormWorld);\n\n    if (obj.parent) {\n      obj.parent.worldToLocal(this.targetPos);\n    }\n\n    if (!this.started) {\n      obj.position.copy(this.targetPos);\n      this.started = true;\n    } else {\n      const t = this.data.speed * dt;\n\n      obj.position.set(\n        obj.position.x + (this.targetPos.x - obj.position.x) * t,\n        obj.position.y + (this.targetPos.y - obj.position.y) * t,\n        obj.position.z + (this.targetPos.z - obj.position.z) * t\n      );\n    }\n\n    this.snappedXFormWorld.decompose(this.tempVector, obj.quaternion, this.tempVector);\n    obj.matrixNeedsUpdate = true;\n  },\n\n  _applyMaskedTargetRotation(x, y, z, to) {\n    const target = this.data.target.object3D;\n    this.snappedRot.set(x, y, z, target.rotation.order);\n    this.snappedQ.setFromEuler(this.snappedRot);\n\n    this.snappedXForm.compose(\n      target.position,\n      this.snappedQ,\n      target.scale\n    );\n\n    to.multiplyMatrices(target.parent.matrixWorld, this.snappedXForm);\n  }\n});\n","AFRAME.registerComponent(\"matrix-auto-update\", {\n  schema: {\n    target: { type: \"string\" }\n  },\n\n  init: function() {\n    this._updateMatrixAutoUpdate = this._updateMatrixAutoUpdate.bind(this);\n    this._updateMatrixAutoUpdate();\n  },\n\n  play: function() {\n    this.el.sceneEl.addEventListener(\"object3dset\", this._updateMatrixAutoUpdate);\n  },\n\n  pause: function() {\n    this.el.sceneEl.removeEventListener(\"object3dset\", this._updateMatrixAutoUpdate);\n  },\n\n  _updateMatrixAutoUpdate: function() {\n    if (this.data.target) {\n      this.el.getObject3D(this.data.target).matrixAutoUpdate = true;\n    } else {\n      this.el.object3D.matrixAutoUpdate = true;\n    }\n  }\n});\n","import { addMedia } from \"../utils/media-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\n\nAFRAME.registerComponent(\"clone-media-button\", {\n  init() {\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n\n    this.onClick = () => {\n      const { src, resize } = this.targetEl.components[\"media-loader\"].data;\n      const { entity } = addMedia(src, \"#interactable-media\", ObjectContentOrigins.URL, true, resize);\n\n      entity.object3D.matrixNeedsUpdate = true;\n\n      entity.setAttribute(\"offset-relative-to\", {\n        target: \"#player-camera\",\n        offset: { x: 0, y: 0, z: -1.5 }\n      });\n    };\n  },\n\n  play() {\n    this.el.addEventListener(\"grab-start\", this.onClick);\n  },\n\n  pause() {\n    this.el.removeEventListener(\"grab-start\", this.onClick);\n  }\n});\n","const hubsRegex = /https?:\\/\\/(hubs.local(:\\d+)?|(smoke-)?hubs.mozilla.com)\\/(\\w+)\\/?\\S*/;\nconst isHubsUrl = hubsRegex.test.bind(hubsRegex);\n\nAFRAME.registerComponent(\"open-media-button\", {\n  init() {\n    this.label = this.el.querySelector(\"[text]\");\n\n    this.updateSrc = () => {\n      this.src = this.targetEl.components[\"media-loader\"].data.src;\n      this.label.setAttribute(\"text\", \"value\", isHubsUrl(this.src) ? \"visit\" : \"open link\");\n    };\n\n    this.onClick = () => {\n      const directNavigate = isHubsUrl(this.src);\n      if (directNavigate) {\n        location.href = this.src;\n      } else {\n        window.open(this.src);\n      }\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this.targetEl.addEventListener(\"media_resolved\", this.updateSrc, { once: true });\n      this.updateSrc();\n    });\n  },\n\n  play() {\n    this.el.addEventListener(\"grab-start\", this.onClick);\n  },\n\n  pause() {\n    this.el.removeEventListener(\"grab-start\", this.onClick);\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport copy from \"copy-to-clipboard\";\nimport { VR_DEVICE_AVAILABILITY } from \"../utils/vr-caps-detect\";\nimport { IntlProvider, FormattedMessage, addLocaleData } from \"react-intl\";\nimport en from \"react-intl/locale-data/en\";\nimport MovingAverage from \"moving-average\";\nimport screenfull from \"screenfull\";\nimport styles from \"../assets/stylesheets/ui-root.scss\";\nimport entryStyles from \"../assets/stylesheets/entry.scss\";\nimport { ReactAudioContext, WithHoverSound } from \"./wrap-with-audio\";\n\nimport { lang, messages } from \"../utils/i18n\";\nimport AutoExitWarning from \"./auto-exit-warning\";\nimport {\n  TwoDEntryButton,\n  DeviceEntryButton,\n  GenericEntryButton,\n  DaydreamEntryButton,\n  SafariEntryButton\n} from \"./entry-buttons.js\";\nimport ProfileEntryPanel from \"./profile-entry-panel\";\n\nimport CreateObjectDialog from \"./create-object-dialog.js\";\nimport HelpDialog from \"./help-dialog.js\";\nimport InviteDialog from \"./invite-dialog.js\";\nimport InviteTeamDialog from \"./invite-team-dialog.js\";\nimport LinkDialog from \"./link-dialog.js\";\nimport SafariDialog from \"./safari-dialog.js\";\nimport SafariMicDialog from \"./safari-mic-dialog.js\";\nimport SignInDialog from \"./sign-in-dialog.js\";\nimport WebRTCScreenshareUnsupportedDialog from \"./webrtc-screenshare-unsupported-dialog.js\";\nimport WebVRRecommendDialog from \"./webvr-recommend-dialog.js\";\n\nimport PresenceLog from \"./presence-log.js\";\nimport PresenceList from \"./presence-list.js\";\nimport TwoDHUD from \"./2d-hud\";\nimport ChatCommandHelp from \"./chat-command-help\";\nimport { spawnChatMessage } from \"./chat-message\";\nimport { faUsers } from \"@fortawesome/free-solid-svg-icons/faUsers\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faQuestion } from \"@fortawesome/free-solid-svg-icons/faQuestion\";\nimport { faChevronDown } from \"@fortawesome/free-solid-svg-icons/faChevronDown\";\nimport { faChevronUp } from \"@fortawesome/free-solid-svg-icons/faChevronUp\";\n\naddLocaleData([...en]);\n\nconst ENTRY_STEPS = {\n  start: \"start\",\n  device: \"device\",\n  mic_grant: \"mic_grant\",\n  mic_granted: \"mic_granted\",\n  audio_setup: \"audio_setup\",\n  finished: \"finished\"\n};\n\n// This is a list of regexes that match the microphone labels of HMDs.\n//\n// If entering VR mode, and if any of these regexes match an audio device,\n// the user will be prevented from entering VR until one of those devices is\n// selected as the microphone.\n//\n// Note that this doesn't have to be exhaustive: if no devices match any regex\n// then we rely upon the user to select the proper mic.\nconst HMD_MIC_REGEXES = [/\\Wvive\\W/i, /\\Wrift\\W/i];\n\nasync function grantedMicLabels() {\n  const mediaDevices = await navigator.mediaDevices.enumerateDevices();\n  return mediaDevices.filter(d => d.label && d.kind === \"audioinput\").map(d => d.label);\n}\n\nconst AUTO_EXIT_TIMER_SECONDS = 10;\n\nimport webmTone from \"../assets/sfx/tone.webm\";\nimport mp3Tone from \"../assets/sfx/tone.mp3\";\nimport oggTone from \"../assets/sfx/tone.ogg\";\nimport wavTone from \"../assets/sfx/tone.wav\";\nconst toneClip = document.createElement(\"audio\");\nif (toneClip.canPlayType(\"audio/webm\")) {\n  toneClip.src = webmTone;\n} else if (toneClip.canPlayType(\"audio/mpeg\")) {\n  toneClip.src = mp3Tone;\n} else if (toneClip.canPlayType(\"audio/ogg\")) {\n  toneClip.src = oggTone;\n} else {\n  toneClip.src = wavTone;\n}\n\nclass UIRoot extends Component {\n  static propTypes = {\n    enterScene: PropTypes.func,\n    exitScene: PropTypes.func,\n    onSendMessage: PropTypes.func,\n    concurrentLoadDetector: PropTypes.object,\n    disableAutoExitOnConcurrentLoad: PropTypes.bool,\n    forcedVREntryType: PropTypes.string,\n    isBotMode: PropTypes.bool,\n    store: PropTypes.object,\n    scene: PropTypes.object,\n    authChannel: PropTypes.object,\n    hubChannel: PropTypes.object,\n    linkChannel: PropTypes.object,\n    hubEntryCode: PropTypes.number,\n    availableVREntryTypes: PropTypes.object,\n    environmentSceneLoaded: PropTypes.bool,\n    roomUnavailableReason: PropTypes.string,\n    platformUnsupportedReason: PropTypes.string,\n    hubId: PropTypes.string,\n    hubName: PropTypes.string,\n    isSupportAvailable: PropTypes.bool,\n    presenceLogEntries: PropTypes.array,\n    presences: PropTypes.object,\n    sessionId: PropTypes.string,\n    subscriptions: PropTypes.object,\n    initialIsSubscribed: PropTypes.bool,\n    showSignInDialog: PropTypes.bool,\n    signInMessageId: PropTypes.string,\n    signInCompleteMessageId: PropTypes.string,\n    signInContinueTextId: PropTypes.string,\n    onContinueAfterSignIn: PropTypes.func,\n    showSafariMicDialog: PropTypes.bool\n  };\n\n  state = {\n    entryStep: ENTRY_STEPS.start,\n    enterInVR: false,\n    dialog: null,\n    showInviteDialog: false,\n    showLinkDialog: false,\n    showPresenceList: false,\n    linkCode: null,\n    linkCodeCancel: null,\n    miniInviteActivated: false,\n\n    shareScreen: false,\n    requestedScreen: false,\n    mediaStream: null,\n    audioTrack: null,\n    entryPanelCollapsed: false,\n\n    toneInterval: null,\n    tonePlaying: false,\n\n    micLevel: 0,\n    micDevices: [],\n    micUpdateInterval: null,\n\n    profileNamePending: \"Hello\",\n\n    autoExitTimerStartedAt: null,\n    autoExitTimerInterval: null,\n    secondsRemainingBeforeAutoExit: Infinity,\n\n    muted: false,\n    frozen: false,\n    spacebubble: true,\n\n    exited: false,\n\n    showProfileEntry: false,\n    pendingMessage: \"\",\n    signedIn: false,\n    videoShareMediaSource: null\n  };\n\n  constructor(props) {\n    super(props);\n    if (props.showSafariMicDialog) {\n      this.state.dialog = <SafariMicDialog closable={false} />;\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { hubChannel, showSignInDialog } = this.props;\n    if (hubChannel) {\n      const { signedIn } = hubChannel;\n      if (signedIn !== this.state.signedIn) {\n        this.setState({ signedIn });\n      }\n    }\n    if (prevProps.showSignInDialog !== showSignInDialog && showSignInDialog) {\n      this.showContextualSignInDialog();\n    }\n  }\n\n  componentDidMount() {\n    this.props.concurrentLoadDetector.addEventListener(\"concurrentload\", this.onConcurrentLoad);\n    this.micLevelMovingAverage = MovingAverage(100);\n    this.props.scene.addEventListener(\"loaded\", this.onSceneLoaded);\n    this.props.scene.addEventListener(\"stateadded\", this.onAframeStateChanged);\n    this.props.scene.addEventListener(\"stateremoved\", this.onAframeStateChanged);\n    this.props.scene.addEventListener(\"share_video_enabled\", this.onShareVideoEnabled);\n    this.props.scene.addEventListener(\"share_video_disabled\", this.onShareVideoDisabled);\n    this.props.scene.addEventListener(\"exit\", this.exit);\n    const scene = this.props.scene;\n    this.setState({\n      audioContext: {\n        playSound: sound => {\n          scene.emit(sound);\n        },\n        onMouseLeave: () => {\n          //          scene.emit(\"play_sound-hud_mouse_leave\");\n        }\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.props.scene.removeEventListener(\"loaded\", this.onSceneLoaded);\n    this.props.scene.removeEventListener(\"exit\", this.exit);\n    this.props.scene.removeEventListener(\"share_video_enabled\", this.onShareVideoEnabled);\n    this.props.scene.removeEventListener(\"share_video_disabled\", this.onShareVideoDisabled);\n  }\n\n  showContextualSignInDialog = () => {\n    const {\n      signInMessageId,\n      authChannel,\n      signInCompleteMessageId,\n      signInContinueTextId,\n      onContinueAfterSignIn\n    } = this.props;\n\n    const closeAndContinue = () => {\n      this.closeDialog();\n      onContinueAfterSignIn();\n    };\n\n    this.showDialog(SignInDialog, {\n      message: messages[signInMessageId],\n      onSignIn: async email => {\n        const { authComplete } = await authChannel.startAuthentication(email, this.props.hubChannel);\n\n        this.showDialog(SignInDialog, { authStarted: true, onClose: closeAndContinue });\n\n        await authComplete;\n\n        this.setState({ signedIn: true });\n        this.showDialog(SignInDialog, {\n          authComplete: true,\n          message: messages[signInCompleteMessageId],\n          continueText: messages[signInContinueTextId],\n          onClose: closeAndContinue,\n          onContinue: closeAndContinue\n        });\n      },\n      onClose: closeAndContinue\n    });\n  };\n\n  updateSubscribedState = () => {\n    const isSubscribed = this.props.subscriptions && this.props.subscriptions.isSubscribed();\n    this.setState({ isSubscribed });\n  };\n\n  onSceneLoaded = () => {\n    this.setState({ sceneLoaded: true });\n  };\n\n  // TODO: we need to come up with a cleaner way to handle the shared state between aframe and react than emmitting events and setting state on the scene\n  onAframeStateChanged = e => {\n    if (!(e.detail === \"muted\" || e.detail === \"frozen\" || e.detail === \"spacebubble\")) return;\n    this.setState({\n      [e.detail]: this.props.scene.is(e.detail)\n    });\n  };\n\n  onShareVideoEnabled = e => {\n    this.setState({ videoShareMediaSource: e.detail.source });\n  };\n\n  onShareVideoDisabled = () => {\n    this.setState({ videoShareMediaSource: null });\n  };\n\n  toggleMute = () => {\n    this.props.scene.emit(\"action_mute\");\n  };\n\n  toggleFreeze = () => {\n    this.props.scene.emit(\"action_freeze\");\n  };\n\n  toggleSpaceBubble = () => {\n    this.props.scene.emit(\"action_space_bubble\");\n  };\n\n  shareVideo = mediaSource => {\n    this.props.scene.emit(`action_share_${mediaSource}`);\n  };\n\n  endShareVideo = () => {\n    this.props.scene.emit(\"action_end_video_sharing\");\n  };\n\n  spawnPen = () => {\n    this.props.scene.emit(\"penButtonPressed\");\n  };\n\n  onSubscribeChanged = async () => {\n    if (!this.props.subscriptions) return;\n\n    await this.props.subscriptions.toggle();\n    this.updateSubscribedState();\n  };\n\n  handleStartEntry = () => {\n    const promptForNameAndAvatarBeforeEntry = !this.props.store.state.activity.hasChangedName;\n\n    if (promptForNameAndAvatarBeforeEntry) {\n      this.setState({ showProfileEntry: true });\n    }\n\n    if (!this.props.forcedVREntryType) {\n      this.goToEntryStep(ENTRY_STEPS.device);\n    } else if (this.props.forcedVREntryType.startsWith(\"daydream\")) {\n      this.enterDaydream();\n    } else if (this.props.forcedVREntryType.startsWith(\"vr\")) {\n      this.enterVR();\n    } else if (this.props.forcedVREntryType.startsWith(\"2d\")) {\n      this.enter2D();\n    }\n  };\n\n  goToEntryStep = entryStep => {\n    this.setState({ entryStep: entryStep, showInviteDialog: false });\n  };\n\n  playTestTone = () => {\n    toneClip.currentTime = 0;\n    toneClip.play();\n    clearTimeout(this.testToneTimeout);\n    this.setState({ tonePlaying: true });\n    const toneLength = 1393;\n    this.testToneTimeout = setTimeout(() => {\n      this.setState({ tonePlaying: false });\n    }, toneLength);\n  };\n\n  stopTestTone = () => {\n    toneClip.pause();\n    toneClip.currentTime = 0;\n    this.setState({ tonePlaying: false });\n  };\n\n  onConcurrentLoad = () => {\n    if (this.props.disableAutoExitOnConcurrentLoad) return;\n\n    const autoExitTimerInterval = setInterval(() => {\n      let secondsRemainingBeforeAutoExit = Infinity;\n\n      if (this.state.autoExitTimerStartedAt) {\n        const secondsSinceStart = (new Date() - this.state.autoExitTimerStartedAt) / 1000;\n        secondsRemainingBeforeAutoExit = Math.max(0, Math.floor(AUTO_EXIT_TIMER_SECONDS - secondsSinceStart));\n      }\n\n      this.setState({ secondsRemainingBeforeAutoExit });\n      this.checkForAutoExit();\n    }, 500);\n\n    this.setState({ autoExitTimerStartedAt: new Date(), autoExitTimerInterval });\n  };\n\n  checkForAutoExit = () => {\n    if (this.state.secondsRemainingBeforeAutoExit !== 0) return;\n    this.endAutoExitTimer();\n    this.exit();\n  };\n\n  exit = () => {\n    this.props.exitScene();\n    this.setState({ exited: true });\n  };\n\n  isWaitingForAutoExit = () => {\n    return this.state.secondsRemainingBeforeAutoExit <= AUTO_EXIT_TIMER_SECONDS;\n  };\n\n  endAutoExitTimer = () => {\n    clearInterval(this.state.autoExitTimerInterval);\n    this.setState({\n      autoExitTimerStartedAt: null,\n      autoExitTimerInterval: null,\n      secondsRemainingBeforeAutoExit: Infinity\n    });\n  };\n\n  hasGrantedMicPermissions = async () => {\n    if (this.state.requestedScreen) {\n      // There is no way to tell if you've granted mic permissions in a previous session if we've\n      // already prompted for screen sharing permissions, so we have to assume that we've never granted permissions.\n      // Fortunately, if you *have* granted permissions permanently, there won't be a second browser prompt, but we\n      // can't determine that before hand.\n      // See https://bugzilla.mozilla.org/show_bug.cgi?id=1449783 for a potential solution in the future.\n      return false;\n    } else {\n      // If we haven't requested the screen in this session, check if we've granted permissions in a previous session.\n      return (await grantedMicLabels()).length > 0;\n    }\n  };\n\n  performDirectEntryFlow = async enterInVR => {\n    this.setState({ enterInVR });\n\n    const hasGrantedMic = await this.hasGrantedMicPermissions();\n\n    if (hasGrantedMic) {\n      await this.setMediaStreamToDefault();\n      this.beginOrSkipAudioSetup();\n    } else {\n      this.goToEntryStep(ENTRY_STEPS.mic_grant);\n    }\n  };\n\n  enter2D = async () => {\n    await this.performDirectEntryFlow(false);\n  };\n\n  enterVR = async () => {\n    if (this.props.availableVREntryTypes.generic !== VR_DEVICE_AVAILABILITY.maybe) {\n      await this.performDirectEntryFlow(true);\n    } else {\n      this.showWebVRRecommendDialog();\n    }\n  };\n\n  enterDaydream = async () => {\n    await this.performDirectEntryFlow(true);\n  };\n\n  micDeviceChanged = async ev => {\n    const constraints = { audio: { deviceId: { exact: [ev.target.value] } } };\n    await this.fetchAudioTrack(constraints);\n    await this.setupNewMediaStream();\n  };\n\n  setMediaStreamToDefault = async () => {\n    let hasAudio = false;\n    const { lastUsedMicDeviceId } = this.props.store.state.settings;\n\n    // Try to fetch last used mic, if there was one.\n    if (lastUsedMicDeviceId) {\n      hasAudio = await this.fetchAudioTrack({ audio: { deviceId: { ideal: lastUsedMicDeviceId } } });\n    } else {\n      hasAudio = await this.fetchAudioTrack({ audio: true });\n    }\n\n    await this.setupNewMediaStream();\n\n    return { hasAudio };\n  };\n\n  fetchAudioTrack = async constraints => {\n    if (this.state.audioTrack) {\n      this.state.audioTrack.stop();\n    }\n\n    try {\n      const mediaStream = await navigator.mediaDevices.getUserMedia(constraints);\n      this.setState({ audioTrack: mediaStream.getAudioTracks()[0] });\n      return true;\n    } catch (e) {\n      // Error fetching audio track, most likely a permission denial.\n      this.setState({ audioTrack: null });\n      return false;\n    }\n  };\n\n  setupNewMediaStream = async () => {\n    const mediaStream = new MediaStream();\n\n    await this.fetchMicDevices();\n\n    // we should definitely have an audioTrack at this point unless they denied mic access\n    if (this.state.audioTrack) {\n      mediaStream.addTrack(this.state.audioTrack);\n\n      const AudioContext = window.AudioContext || window.webkitAudioContext;\n      const micLevelAudioContext = new AudioContext();\n      const micSource = micLevelAudioContext.createMediaStreamSource(mediaStream);\n      const analyser = micLevelAudioContext.createAnalyser();\n      analyser.fftSize = 32;\n      const levels = new Uint8Array(analyser.frequencyBinCount);\n\n      micSource.connect(analyser);\n\n      const micUpdateInterval = setInterval(() => {\n        analyser.getByteTimeDomainData(levels);\n        let v = 0;\n        for (let x = 0; x < levels.length; x++) {\n          v = Math.max(levels[x] - 128, v);\n        }\n        const level = v / 128.0;\n        // Multiplier to increase visual indicator.\n        const multiplier = 6;\n        // We use a moving average to smooth out the visual animation or else it would twitch too fast for\n        // the css renderer to keep up.\n        this.micLevelMovingAverage.push(Date.now(), level * multiplier);\n        const average = this.micLevelMovingAverage.movingAverage();\n        this.setState(state => {\n          if (Math.abs(average - state.micLevel) > 0.0001) {\n            return { micLevel: average };\n          }\n        });\n      }, 50);\n\n      const micDeviceId = this.micDeviceIdForMicLabel(this.micLabelForMediaStream(mediaStream));\n\n      if (micDeviceId) {\n        this.props.store.update({ settings: { lastUsedMicDeviceId: micDeviceId } });\n      }\n\n      this.setState({ micLevelAudioContext, micUpdateInterval });\n    }\n\n    this.setState({ mediaStream });\n  };\n\n  onMicGrantButton = async () => {\n    if (this.state.entryStep == ENTRY_STEPS.mic_grant) {\n      const { hasAudio } = await this.setMediaStreamToDefault();\n\n      if (hasAudio) {\n        this.goToEntryStep(ENTRY_STEPS.mic_granted);\n      } else {\n        this.beginOrSkipAudioSetup();\n      }\n    } else {\n      this.beginOrSkipAudioSetup();\n    }\n  };\n\n  onProfileFinished = () => {\n    this.setState({ showProfileEntry: false });\n    this.props.hubChannel.sendProfileUpdate();\n  };\n\n  beginOrSkipAudioSetup = () => {\n    if (!this.props.forcedVREntryType || !this.props.forcedVREntryType.endsWith(\"_now\")) {\n      this.goToEntryStep(ENTRY_STEPS.audio_setup);\n    } else {\n      this.onAudioReadyButton();\n    }\n  };\n\n  fetchMicDevices = () => {\n    return new Promise(resolve => {\n      navigator.mediaDevices.enumerateDevices().then(mediaDevices => {\n        this.setState(\n          {\n            micDevices: mediaDevices\n              .filter(d => d.kind === \"audioinput\")\n              .map(d => ({ deviceId: d.deviceId, label: d.label }))\n          },\n          resolve\n        );\n      });\n    });\n  };\n\n  shouldShowHmdMicWarning = () => {\n    if (AFRAME.utils.device.isMobile()) return false;\n    if (!this.state.enterInVR) return false;\n    if (!this.hasHmdMicrophone()) return false;\n\n    return !HMD_MIC_REGEXES.find(r => this.selectedMicLabel().match(r));\n  };\n\n  hasHmdMicrophone = () => {\n    return !!this.state.micDevices.find(d => HMD_MIC_REGEXES.find(r => d.label.match(r)));\n  };\n\n  micLabelForMediaStream = mediaStream => {\n    return (mediaStream && mediaStream.getAudioTracks().length > 0 && mediaStream.getAudioTracks()[0].label) || \"\";\n  };\n\n  selectedMicLabel = () => {\n    return this.micLabelForMediaStream(this.state.mediaStream);\n  };\n\n  micDeviceIdForMicLabel = label => {\n    return this.state.micDevices.filter(d => d.label === label).map(d => d.deviceId)[0];\n  };\n\n  selectedMicDeviceId = () => {\n    return this.micDeviceIdForMicLabel(this.selectedMicLabel());\n  };\n\n  onAudioReadyButton = () => {\n    // Disable full screen on iOS, since Safari's fullscreen mode does not let you prevent native pinch-to-zoom gestures.\n    if (AFRAME.utils.device.isMobile() && !AFRAME.utils.device.isIOS() && !this.state.enterInVR && screenfull.enabled) {\n      screenfull.request();\n    }\n\n    this.props.enterScene(this.state.mediaStream, this.state.enterInVR, this.props.hubId);\n\n    const mediaStream = this.state.mediaStream;\n\n    if (mediaStream) {\n      if (mediaStream.getAudioTracks().length > 0) {\n        console.log(`Using microphone: ${mediaStream.getAudioTracks()[0].label}`);\n      }\n\n      if (mediaStream.getVideoTracks().length > 0) {\n        console.log(\"Screen sharing enabled.\");\n      }\n    }\n\n    this.stopTestTone();\n    clearTimeout(this.testToneTimeout);\n\n    if (this.state.micLevelAudioContext) {\n      this.state.micLevelAudioContext.close();\n      clearInterval(this.state.micUpdateInterval);\n    }\n\n    this.goToEntryStep(ENTRY_STEPS.finished);\n  };\n\n  attemptLink = async () => {\n    this.setState({ showLinkDialog: true });\n    const { code, cancel, onFinished } = await this.props.linkChannel.generateCode();\n    this.setState({ linkCode: code, linkCodeCancel: cancel });\n    onFinished.then(() => this.setState({ showLinkDialog: false, linkCode: null, linkCodeCancel: null }));\n  };\n\n  showInviteDialog = () => {\n    this.setState({ showInviteDialog: true });\n  };\n\n  toggleInviteDialog = async () => {\n    this.setState({ showInviteDialog: !this.state.showInviteDialog });\n  };\n\n  createObject = media => {\n    this.props.scene.emit(\"add_media\", media);\n  };\n\n  closeDialog = () => {\n    this.setState({ dialog: null });\n  };\n\n  showDialog = (DialogClass, props = {}) => {\n    this.setState({\n      dialog: <DialogClass {...{ onClose: this.closeDialog, ...props }} />\n    });\n  };\n\n  showHelpDialog = () => this.showDialog(HelpDialog);\n\n  showSafariDialog = () => this.showDialog(SafariDialog);\n\n  showInviteTeamDialog = () => this.showDialog(InviteTeamDialog, { hubChannel: this.props.hubChannel });\n\n  showCreateObjectDialog = () => this.showDialog(CreateObjectDialog, { onCreate: this.createObject });\n\n  showWebVRRecommendDialog = () => this.showDialog(WebVRRecommendDialog);\n\n  showSignInDialog = () => {\n    this.showDialog(SignInDialog, {\n      message: messages[\"sign-in.prompt\"],\n      onSignIn: async email => {\n        const { authComplete } = await this.props.authChannel.startAuthentication(email, this.props.hubChannel);\n\n        this.showDialog(SignInDialog, { authStarted: true });\n\n        await authComplete;\n\n        this.setState({ signedIn: true });\n        this.closeDialog();\n      }\n    });\n  };\n\n  signOut = async () => {\n    await this.props.authChannel.signOut(this.props.hubChannel);\n    this.setState({ signedIn: false });\n  };\n\n  showWebRTCScreenshareUnsupportedDialog = () => {\n    this.setState({ dialog: <WebRTCScreenshareUnsupportedDialog onClose={this.closeDialog} /> });\n  };\n\n  onMiniInviteClicked = () => {\n    const link = \"https://hub.link/\" + this.props.hubId;\n\n    this.setState({ miniInviteActivated: true });\n    setTimeout(() => {\n      this.setState({ miniInviteActivated: false });\n    }, 5000);\n\n    if (navigator.share) {\n      navigator.share({ title: document.title, url: link });\n    } else {\n      copy(link);\n    }\n  };\n\n  sendMessage = e => {\n    e.preventDefault();\n    this.props.onSendMessage(this.state.pendingMessage);\n    this.setState({ pendingMessage: \"\" });\n  };\n\n  occupantCount = () => {\n    return this.props.presences ? Object.entries(this.props.presences).length : 0;\n  };\n\n  renderExitedPane = () => {\n    let subtitle = null;\n    if (this.props.roomUnavailableReason === \"closed\") {\n      // TODO i18n, due to links and markup\n      subtitle = (\n        <div>\n          Sorry, this room is no longer available.\n          <p />A room may be closed if we receive reports that it violates our{\" \"}\n          <WithHoverSound>\n            <a target=\"_blank\" rel=\"noreferrer noopener\" href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\">\n              Terms of Use\n            </a>\n          </WithHoverSound>\n          .<br />\n          If you have questions, contact us at{\" \"}\n          <WithHoverSound>\n            <a href=\"mailto:hubs@mozilla.com\">hubs@mozilla.com</a>\n          </WithHoverSound>\n          .<p />\n          If you&apos;d like to run your own server, hubs&apos;s source code is available on{\" \"}\n          <WithHoverSound>\n            <a href=\"https://github.com/mozilla/hubs\">GitHub</a>\n          </WithHoverSound>\n          .\n        </div>\n      );\n    } else if (this.props.platformUnsupportedReason === \"no_data_channels\") {\n      // TODO i18n, due to links and markup\n      subtitle = (\n        <div>\n          Your browser does not support{\" \"}\n          <WithHoverSound>\n            <a\n              href=\"https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createDataChannel#Browser_compatibility\"\n              rel=\"noreferrer noopener\"\n            >\n              WebRTC Data Channels\n            </a>\n          </WithHoverSound>\n          , which is required to use Hubs.\n          <br />\n          If you&quot;d like to use Hubs with Oculus or SteamVR, you can{\" \"}\n          <WithHoverSound>\n            <a href=\"https://www.mozilla.org/firefox\" rel=\"noreferrer noopener\">\n              Download Firefox\n            </a>\n          </WithHoverSound>\n          .\n        </div>\n      );\n    } else {\n      const reason = this.props.roomUnavailableReason || this.props.platformUnsupportedReason;\n      const exitSubtitleId = `exit.subtitle.${this.state.exited ? \"exited\" : reason}`;\n      subtitle = (\n        <div>\n          <FormattedMessage id={exitSubtitleId} />\n          <p />\n          {this.props.roomUnavailableReason !== \"left\" && (\n            <div>\n              You can also{\" \"}\n              <WithHoverSound>\n                <a href=\"/\">create a new room</a>\n              </WithHoverSound>.\n            </div>\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className=\"exited-panel\">\n          <img className=\"exited-panel__logo\" src=\"../assets/images/logo.svg\" />\n          <div className=\"exited-panel__subtitle\">{subtitle}</div>\n        </div>\n      </IntlProvider>\n    );\n  };\n\n  renderBotMode = () => {\n    return (\n      <div className=\"loading-panel\">\n        <img className=\"loading-panel__logo\" src=\"../assets/images/logo.svg\" />\n        <input type=\"file\" id=\"bot-audio-input\" accept=\"audio/*\" />\n        <input type=\"file\" id=\"bot-data-input\" accept=\"application/json\" />\n      </div>\n    );\n  };\n\n  renderLoader = () => {\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className=\"loading-panel\">\n          <div className=\"loader-wrap\">\n            <div className=\"loader\">\n              <div className=\"loader-center\" />\n            </div>\n          </div>\n\n          <img className=\"loading-panel__logo\" src=\"../assets/images/hub-preview-light-no-shadow.png\" />\n        </div>\n      </IntlProvider>\n    );\n  };\n\n  renderEntryStartPanel = () => {\n    const textRows = this.state.pendingMessage.split(\"\\n\").length;\n    const pendingMessageTextareaHeight = textRows * 28 + \"px\";\n    const pendingMessageFieldHeight = textRows * 28 + 20 + \"px\";\n    const hasPush = navigator.serviceWorker && \"PushManager\" in window;\n\n    return (\n      <div className={entryStyles.entryPanel}>\n        <div className={entryStyles.name}>{this.props.hubName}</div>\n\n        <div className={entryStyles.center}>\n          <WithHoverSound>\n            <div onClick={() => this.setState({ showProfileEntry: true })} className={entryStyles.profileName}>\n              <img src=\"../assets/images/account.svg\" className={entryStyles.profileIcon} />\n              <div title={this.props.store.state.profile.displayName}>{this.props.store.state.profile.displayName}</div>\n            </div>\n          </WithHoverSound>\n\n          <form onSubmit={this.sendMessage}>\n            <div className={styles.messageEntry} style={{ height: pendingMessageFieldHeight }}>\n              <textarea\n                className={classNames([styles.messageEntryInput, \"chat-focus-target\"])}\n                value={this.state.pendingMessage}\n                rows={textRows}\n                style={{ height: pendingMessageTextareaHeight }}\n                onFocus={e => e.target.select()}\n                onChange={e => this.setState({ pendingMessage: e.target.value })}\n                onKeyDown={e => {\n                  if (e.keyCode === 13 && !e.shiftKey) {\n                    this.sendMessage(e);\n                  } else if (e.keyCode === 27) {\n                    e.target.blur();\n                  }\n                }}\n                placeholder=\"Send a message...\"\n              />\n              <WithHoverSound>\n                <input className={styles.messageEntrySubmit} type=\"submit\" value=\"send\" />\n              </WithHoverSound>\n            </div>\n          </form>\n        </div>\n\n        {hasPush && (\n          <div className={entryStyles.subscribe}>\n            <input\n              id=\"subscribe\"\n              type=\"checkbox\"\n              onChange={this.onSubscribeChanged}\n              checked={this.state.isSubscribed === undefined ? this.props.initialIsSubscribed : this.state.isSubscribed}\n            />\n            <label htmlFor=\"subscribe\">\n              <FormattedMessage id=\"entry.notify_me\" />\n            </label>\n          </div>\n        )}\n\n        <div className={entryStyles.buttonContainer}>\n          <WithHoverSound>\n            <button\n              className={classNames([entryStyles.actionButton, entryStyles.wideButton])}\n              onClick={() => this.handleStartEntry()}\n            >\n              <FormattedMessage id=\"entry.enter-room\" />\n            </button>\n          </WithHoverSound>\n        </div>\n      </div>\n    );\n  };\n\n  renderDevicePanel = () => {\n    return (\n      <div className={entryStyles.entryPanel}>\n        <div className={entryStyles.title}>\n          <FormattedMessage id=\"entry.choose-device\" />\n        </div>\n\n        <div className={entryStyles.buttonContainer}>\n          {this.props.availableVREntryTypes.screen === VR_DEVICE_AVAILABILITY.yes && (\n            <TwoDEntryButton onClick={this.enter2D} />\n          )}\n          {this.props.availableVREntryTypes.safari === VR_DEVICE_AVAILABILITY.maybe && (\n            <SafariEntryButton onClick={this.showSafariDialog} />\n          )}\n          {this.props.availableVREntryTypes.generic !== VR_DEVICE_AVAILABILITY.no && (\n            <GenericEntryButton onClick={this.enterVR} />\n          )}\n          {this.props.availableVREntryTypes.daydream === VR_DEVICE_AVAILABILITY.yes && (\n            <DaydreamEntryButton onClick={this.enterDaydream} subtitle={null} />\n          )}\n          <DeviceEntryButton onClick={() => this.attemptLink()} isInHMD={this.props.availableVREntryTypes.isInHMD} />\n          {this.props.availableVREntryTypes.cardboard !== VR_DEVICE_AVAILABILITY.no && (\n            <div className={entryStyles.secondary} onClick={this.enterVR}>\n              <FormattedMessage id=\"entry.cardboard\" />\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  renderScreensharing = () => {\n    return (\n      <label className={entryStyles.screenSharing}>\n        <input\n          className={entryStyles.checkbox}\n          type=\"checkbox\"\n          value={this.state.shareScreen}\n          onChange={this.setStateAndRequestScreen}\n        />\n        <FormattedMessage id=\"entry.enable-screen-sharing\" />\n      </label>\n    );\n  };\n\n  renderMicPanel = () => {\n    return (\n      <div className=\"mic-grant-panel\">\n        <div className=\"mic-grant-panel__grant-container\">\n          <div className=\"mic-grant-panel__title\">\n            <FormattedMessage\n              id={this.state.entryStep == ENTRY_STEPS.mic_grant ? \"audio.grant-title\" : \"audio.granted-title\"}\n            />\n          </div>\n          <div className=\"mic-grant-panel__subtitle\">\n            <FormattedMessage\n              id={this.state.entryStep == ENTRY_STEPS.mic_grant ? \"audio.grant-subtitle\" : \"audio.granted-subtitle\"}\n            />\n          </div>\n          <div className=\"mic-grant-panel__button-container\">\n            {this.state.entryStep == ENTRY_STEPS.mic_grant ? (\n              <WithHoverSound>\n                <button className=\"mic-grant-panel__button\" onClick={this.onMicGrantButton}>\n                  <img src=\"../assets/images/mic_denied.png\" srcSet=\"../assets/images/mic_denied@2x.png 2x\" />\n                </button>\n              </WithHoverSound>\n            ) : (\n              <WithHoverSound>\n                <button className=\"mic-grant-panel__button\" onClick={this.onMicGrantButton}>\n                  <img src=\"../assets/images/mic_granted.png\" srcSet=\"../assets/images/mic_granted@2x.png 2x\" />\n                </button>\n              </WithHoverSound>\n            )}\n          </div>\n          <div className=\"mic-grant-panel__next-container\">\n            <WithHoverSound>\n              <button className={classNames(\"mic-grant-panel__next\")} onClick={this.onMicGrantButton}>\n                <FormattedMessage id=\"audio.granted-next\" />\n              </button>\n            </WithHoverSound>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderAudioSetupPanel = () => {\n    const maxLevelHeight = 111;\n    const micClip = {\n      clip: `rect(${maxLevelHeight - Math.floor(this.state.micLevel * maxLevelHeight)}px, 111px, 111px, 0px)`\n    };\n    const speakerClip = { clip: `rect(${this.state.tonePlaying ? 0 : maxLevelHeight}px, 111px, 111px, 0px)` };\n    const subtitleId = AFRAME.utils.device.isMobile() ? \"audio.subtitle-mobile\" : \"audio.subtitle-desktop\";\n    return (\n      <div className=\"audio-setup-panel\">\n        <div>\n          <div className=\"audio-setup-panel__title\">\n            <FormattedMessage id=\"audio.title\" />\n          </div>\n          <div className=\"audio-setup-panel__subtitle\">\n            {(AFRAME.utils.device.isMobile() || this.state.enterInVR) && <FormattedMessage id={subtitleId} />}\n          </div>\n          <div className=\"audio-setup-panel__levels\">\n            <div className=\"audio-setup-panel__levels__icon\">\n              <img\n                src=\"../assets/images/level_background.png\"\n                srcSet=\"../assets/images/level_background@2x.png 2x\"\n                className=\"audio-setup-panel__levels__icon-part\"\n              />\n              <img\n                src=\"../assets/images/level_fill.png\"\n                srcSet=\"../assets/images/level_fill@2x.png 2x\"\n                className=\"audio-setup-panel__levels__icon-part\"\n                style={micClip}\n              />\n              {this.state.audioTrack ? (\n                <img\n                  src=\"../assets/images/mic_level.png\"\n                  srcSet=\"../assets/images/mic_level@2x.png 2x\"\n                  className=\"audio-setup-panel__levels__icon-part\"\n                />\n              ) : (\n                <img\n                  src=\"../assets/images/mic_denied.png\"\n                  srcSet=\"../assets/images/mic_denied@2x.png 2x\"\n                  className=\"audio-setup-panel__levels__icon-part\"\n                />\n              )}\n            </div>\n            <WithHoverSound>\n              <div className=\"audio-setup-panel__levels__icon\" onClick={this.playTestTone}>\n                <img\n                  src=\"../assets/images/level_background.png\"\n                  srcSet=\"../assets/images/level_background@2x.png 2x\"\n                  className=\"audio-setup-panel__levels__icon-part\"\n                />\n                <img\n                  src=\"../assets/images/level_fill.png\"\n                  srcSet=\"../assets/images/level_fill@2x.png 2x\"\n                  className=\"audio-setup-panel__levels__icon-part\"\n                  style={speakerClip}\n                />\n                <img\n                  src=\"../assets/images/speaker_level.png\"\n                  srcSet=\"../assets/images/speaker_level@2x.png 2x\"\n                  className=\"audio-setup-panel__levels__icon-part\"\n                />\n              </div>\n            </WithHoverSound>\n          </div>\n          {this.state.audioTrack && (\n            <div className=\"audio-setup-panel__device-chooser\">\n              <WithHoverSound>\n                <select\n                  className=\"audio-setup-panel__device-chooser__dropdown\"\n                  value={this.selectedMicDeviceId()}\n                  onChange={this.micDeviceChanged}\n                >\n                  {this.state.micDevices.map(d => (\n                    <option key={d.deviceId} value={d.deviceId}>\n                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                      {d.label}\n                    </option>\n                  ))}\n                </select>\n              </WithHoverSound>\n              <img\n                className=\"audio-setup-panel__device-chooser__mic-icon\"\n                src=\"../assets/images/mic_small.png\"\n                srcSet=\"../assets/images/mic_small@2x.png 2x\"\n              />\n              <img\n                className=\"audio-setup-panel__device-chooser__dropdown-arrow\"\n                src=\"../assets/images/dropdown_arrow.png\"\n                srcSet=\"../assets/images/dropdown_arrow@2x.png 2x\"\n              />\n            </div>\n          )}\n          {this.shouldShowHmdMicWarning() && (\n            <div className=\"audio-setup-panel__hmd-mic-warning\">\n              <img\n                src=\"../assets/images/warning_icon.png\"\n                srcSet=\"../assets/images/warning_icon@2x.png 2x\"\n                className=\"audio-setup-panel__hmd-mic-warning__icon\"\n              />\n              <span className=\"audio-setup-panel__hmd-mic-warning__label\">\n                <FormattedMessage id=\"audio.hmd-mic-warning\" />\n              </span>\n            </div>\n          )}\n        </div>\n        <div className=\"audio-setup-panel__enter-button-container\">\n          <WithHoverSound>\n            <button className=\"audio-setup-panel__enter-button\" onClick={this.onAudioReadyButton}>\n              <FormattedMessage id=\"audio.enter-now\" />\n            </button>\n          </WithHoverSound>\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n    const isExited = this.state.exited || this.props.roomUnavailableReason || this.props.platformUnsupportedReason;\n    const isLoading =\n      !this.props.showSafariMicDialog &&\n      (!this.props.environmentSceneLoaded || !this.props.availableVREntryTypes || !this.props.hubId);\n\n    if (isExited) return this.renderExitedPane();\n    if (isLoading) return this.renderLoader();\n    if (this.props.isBotMode) return this.renderBotMode();\n\n    const startPanel = this.state.entryStep === ENTRY_STEPS.start && this.renderEntryStartPanel();\n    const devicePanel = this.state.entryStep === ENTRY_STEPS.device && this.renderDevicePanel();\n\n    const micPanel =\n      (this.state.entryStep === ENTRY_STEPS.mic_grant || this.state.entryStep === ENTRY_STEPS.mic_granted) &&\n      this.renderMicPanel();\n\n    const audioSetupPanel = this.state.entryStep === ENTRY_STEPS.audio_setup && this.renderAudioSetupPanel();\n\n    // Dialog is empty if coll\n    let dialogContents = null;\n\n    if (this.state.entryPanelCollapsed && !this.isWaitingForAutoExit()) {\n      dialogContents = (\n        <div className={entryStyles.entryDialog}>\n          <div>&nbsp;</div>\n          <WithHoverSound>\n            <button onClick={() => this.setState({ entryPanelCollapsed: false })} className={entryStyles.expand}>\n              <i>\n                <FontAwesomeIcon icon={faChevronUp} />\n              </i>\n            </button>\n          </WithHoverSound>\n        </div>\n      );\n    } else {\n      dialogContents = this.isWaitingForAutoExit() ? (\n        <AutoExitWarning\n          secondsRemaining={this.state.secondsRemainingBeforeAutoExit}\n          onCancel={this.endAutoExitTimer}\n        />\n      ) : (\n        <div className={entryStyles.entryDialog}>\n          {!this.state.entryPanelCollapsed && (\n            <WithHoverSound>\n              <button onClick={() => this.setState({ entryPanelCollapsed: true })} className={entryStyles.collapse}>\n                <i>\n                  <FontAwesomeIcon icon={faChevronDown} />\n                </i>\n              </button>\n            </WithHoverSound>\n          )}\n          {startPanel}\n          {devicePanel}\n          {micPanel}\n          {audioSetupPanel}\n        </div>\n      );\n    }\n\n    const dialogBoxContentsClassNames = classNames({\n      [styles.uiInteractive]: !this.state.dialog,\n      [styles.uiDialogBoxContents]: true,\n      [styles.backgrounded]: this.state.showProfileEntry\n    });\n\n    const entryFinished = this.state.entryStep === ENTRY_STEPS.finished;\n    const showVREntryButton = entryFinished && this.props.availableVREntryTypes.isInHMD;\n\n    const textRows = this.state.pendingMessage.split(\"\\n\").length;\n    const pendingMessageTextareaHeight = textRows * 28 + \"px\";\n    const pendingMessageFieldHeight = textRows * 28 + 20 + \"px\";\n    return (\n      <ReactAudioContext.Provider value={this.state.audioContext}>\n        <IntlProvider locale={lang} messages={messages}>\n          <div className={styles.ui}>\n            {this.state.dialog}\n\n            {this.state.showProfileEntry && (\n              <ProfileEntryPanel finished={this.onProfileFinished} store={this.props.store} />\n            )}\n\n            {(!entryFinished || this.isWaitingForAutoExit()) && (\n              <div className={styles.uiDialog}>\n                <PresenceLog entries={this.props.presenceLogEntries || []} hubId={this.props.hubId} />\n                <div className={dialogBoxContentsClassNames}>{dialogContents}</div>\n              </div>\n            )}\n\n            {entryFinished && (\n              <PresenceLog inRoom={true} entries={this.props.presenceLogEntries || []} hubId={this.props.hubId} />\n            )}\n            {entryFinished && (\n              <form onSubmit={this.sendMessage}>\n                <div className={styles.messageEntryInRoom} style={{ height: pendingMessageFieldHeight }}>\n                  {this.state.pendingMessage.startsWith(\"/\") && (\n                    <ChatCommandHelp matchingPrefix={this.state.pendingMessage.substring(1)} />\n                  )}\n                  <textarea\n                    style={{ height: pendingMessageTextareaHeight }}\n                    className={classNames([\n                      styles.messageEntryInput,\n                      styles.messageEntryInputInRoom,\n                      \"chat-focus-target\"\n                    ])}\n                    value={this.state.pendingMessage}\n                    rows={textRows}\n                    onFocus={e => e.target.select()}\n                    onChange={e => {\n                      e.stopPropagation();\n                      this.setState({ pendingMessage: e.target.value });\n                    }}\n                    onKeyDown={e => {\n                      if (e.keyCode === 13 && !e.shiftKey) {\n                        this.sendMessage(e);\n                      } else if (e.keyCode === 13 && e.shiftKey && e.ctrlKey) {\n                        spawnChatMessage(e.target.value);\n                        this.setState({ pendingMessage: \"\" });\n                      } else if (e.keyCode === 27) {\n                        e.target.blur();\n                      }\n                    }}\n                    placeholder=\"Send a message...\"\n                  />\n                  <input\n                    className={classNames([styles.messageEntrySubmit, styles.messageEntrySubmitInRoom])}\n                    type=\"submit\"\n                    value=\"send\"\n                  />\n                  <WithHoverSound>\n                    <button\n                      className={classNames([styles.messageEntrySpawn])}\n                      onClick={() => {\n                        if (this.state.pendingMessage.length > 0) {\n                          spawnChatMessage(this.state.pendingMessage);\n                          this.setState({ pendingMessage: \"\" });\n                        } else {\n                          this.showCreateObjectDialog();\n                        }\n                      }}\n                    />\n                  </WithHoverSound>\n                </div>\n              </form>\n            )}\n\n            <div\n              className={classNames({\n                [styles.inviteContainer]: true,\n                [styles.inviteContainerBelowHud]: entryFinished,\n                [styles.inviteContainerInverted]: this.state.showInviteDialog\n              })}\n            >\n              {!showVREntryButton &&\n                !this.state.videoShareMediaSource && (\n                  <WithHoverSound>\n                    <button\n                      className={classNames({ [styles.hideSmallScreens]: this.occupantCount() > 1 && entryFinished })}\n                      onClick={() => this.toggleInviteDialog()}\n                    >\n                      <FormattedMessage id=\"entry.invite-others-nag\" />\n                    </button>\n                  </WithHoverSound>\n                )}\n              {!showVREntryButton &&\n                this.occupantCount() > 1 &&\n                !this.state.videoShareMediaSource &&\n                entryFinished && (\n                  <WithHoverSound>\n                    <button onClick={this.onMiniInviteClicked} className={styles.inviteMiniButton}>\n                      <span>\n                        {this.state.miniInviteActivated\n                          ? navigator.share\n                            ? \"sharing...\"\n                            : \"copied!\"\n                          : \"hub.link/\" + this.props.hubId}\n                      </span>\n                    </button>\n                  </WithHoverSound>\n                )}\n              {showVREntryButton && (\n                <WithHoverSound>\n                  <button onClick={() => this.props.scene.enterVR()}>\n                    <FormattedMessage id=\"entry.enter-in-vr\" />\n                  </button>\n                </WithHoverSound>\n              )}\n              {this.state.showInviteDialog && (\n                <InviteDialog\n                  allowShare={!this.props.availableVREntryTypes.isInHMD}\n                  entryCode={this.props.hubEntryCode}\n                  hubId={this.props.hubId}\n                  onClose={() => this.setState({ showInviteDialog: false })}\n                />\n              )}\n            </div>\n\n            {this.state.showLinkDialog && (\n              <LinkDialog\n                linkCode={this.state.linkCode}\n                onClose={() => {\n                  this.state.linkCodeCancel();\n                  this.setState({ showLinkDialog: false, linkCode: null, linkCodeCancel: null });\n                }}\n              />\n            )}\n\n            <WithHoverSound>\n              <button onClick={() => this.showHelpDialog()} className={classNames([styles.helpIcon, \"help-button\"])}>\n                <i>\n                  <FontAwesomeIcon icon={faQuestion} />\n                </i>\n              </button>\n            </WithHoverSound>\n\n            <div\n              onClick={() => this.setState({ showPresenceList: !this.state.showPresenceList })}\n              className={classNames({\n                [styles.presenceInfo]: true,\n                [styles.presenceInfoSelected]: this.state.showPresenceList\n              })}\n            >\n              <FontAwesomeIcon icon={faUsers} />\n              <span className={styles.occupantCount}>{this.occupantCount()}</span>\n            </div>\n\n            {this.state.showPresenceList && (\n              <PresenceList\n                presences={this.props.presences}\n                sessionId={this.props.sessionId}\n                signedIn={this.state.signedIn}\n                email={this.props.store.state.credentials.email}\n                onSignIn={this.showSignInDialog}\n                onSignOut={this.signOut}\n              />\n            )}\n\n            {this.state.entryStep === ENTRY_STEPS.finished ? (\n              <div>\n                <TwoDHUD.TopHUD\n                  muted={this.state.muted}\n                  frozen={this.state.frozen}\n                  spacebubble={this.state.spacebubble}\n                  videoShareMediaSource={this.state.videoShareMediaSource}\n                  onToggleMute={this.toggleMute}\n                  onToggleFreeze={this.toggleFreeze}\n                  onToggleSpaceBubble={this.toggleSpaceBubble}\n                  onSpawnPen={this.spawnPen}\n                  onSpawnCamera={() => this.props.scene.emit(\"action_spawn_camera\")}\n                  onShareVideo={this.shareVideo}\n                  onEndShareVideo={this.endShareVideo}\n                  onShareVideoNotCapable={() => this.showWebRTCScreenshareUnsupportedDialog()}\n                />\n                {this.props.isSupportAvailable && (\n                  <div className={styles.nagCornerButton}>\n                    <WithHoverSound>\n                      <button onClick={() => this.showInviteTeamDialog()}>\n                        <FormattedMessage id=\"entry.invite-team-nag\" />\n                      </button>\n                    </WithHoverSound>\n                  </div>\n                )}\n                {!this.isWaitingForAutoExit() && (\n                  <TwoDHUD.BottomHUD\n                    onCreateObject={() => this.showCreateObjectDialog()}\n                    showPhotoPicker={AFRAME.utils.device.isMobile()}\n                    onMediaPicked={this.createObject}\n                  />\n                )}\n              </div>\n            ) : null}\n          </div>\n        </IntlProvider>\n      </ReactAudioContext.Provider>\n    );\n  }\n}\n\nexport default UIRoot;\n","module.exports = __webpack_public_path__ + \"assets/images/logo-8f1dfd234d060073524bc29912a24f75.svg\";","module.exports = __webpack_public_path__ + \"assets/images/account-dd4ca16297925e870896b59b760746ad.svg\";","module.exports = __webpack_public_path__ + \"assets/images/mic_denied-5ce12e4dc9b5eb42ce69b753c46c2174.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_denied@2x-127a94ff73b93a0b4ac89682ce836b91.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_granted-5d41c8098b2c1a084f07dd3a2473983f.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_granted@2x-f84d9eb002832eeeb768529e6cb1e93e.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_background-9744d0690bba7838e4a75949d9645c09.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_background@2x-bf55b6a808963d89ff7ce04c516c232c.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_fill-35626a008836cbdc34ec624e16f5b723.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_fill@2x-b3e3675f8281c84660fb5b47eb66126e.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_level-d197b930a4350dc80adb2446babb05e1.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_level@2x-9d49309c2f0e55e5c54193237658768b.png\";","module.exports = __webpack_public_path__ + \"assets/images/speaker_level-9567a1a6f33d4d0e59e57903b08369c9.png\";","module.exports = __webpack_public_path__ + \"assets/images/speaker_level@2x-b5e6a12f613576cf5c1a1b96e8c9d8d0.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_small-b81b3397cc985eb8d3d67a4f007158cc.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_small@2x-d04ff548fa26495f69249f0c34f44b72.png\";","module.exports = __webpack_public_path__ + \"assets/images/dropdown_arrow-601450f494125f8caccec2271aebd4cb.png\";","module.exports = __webpack_public_path__ + \"assets/images/dropdown_arrow@2x-1023ab0bd743b3525d99986de89f0c3b.png\";","module.exports = __webpack_public_path__ + \"assets/images/warning_icon-739d2a2ea906737505bcbc2cb51123a8.png\";","module.exports = __webpack_public_path__ + \"assets/images/warning_icon@2x-706e4a4db33f9456bac320e956b4120d.png\";","import React from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport PropTypes from \"prop-types\";\n\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nconst AutoExitWarning = props => (\n  <div className=\"autoexit-panel\">\n    <div className=\"autoexit-panel__title\">\n      <FormattedMessage id=\"autoexit.title\" />\n      <span>{props.secondsRemaining}</span>\n      <FormattedMessage id=\"autoexit.title_units\" />\n    </div>\n    <div className=\"autoexit-panel__subtitle\">\n      <FormattedMessage id=\"autoexit.subtitle\" />\n    </div>\n    <WithHoverSound>\n      <div className=\"autoexit-panel__cancel-button\" onClick={props.onCancel}>\n        <FormattedMessage id=\"autoexit.cancel\" />\n      </div>\n    </WithHoverSound>\n  </div>\n);\n\nAutoExitWarning.propTypes = {\n  secondsRemaining: PropTypes.number,\n  onCancel: PropTypes.func\n};\n\nexport default AutoExitWarning;\n","import React from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport PropTypes from \"prop-types\";\n\nimport MobileScreenEntryImg from \"../assets/images/mobile_screen_entry.svg\";\nimport DesktopScreenEntryImg from \"../assets/images/desktop_screen_entry.svg\";\nimport GenericVREntryImg from \"../assets/images/generic_vr_entry.svg\";\nimport GearVREntryImg from \"../assets/images/gearvr_entry.svg\";\nimport DaydreamEntryImg from \"../assets/images/daydream_entry.svg\";\nimport DeviceEntryImg from \"../assets/images/device_entry.svg\";\nimport styles from \"../assets/stylesheets/entry.scss\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nconst EntryButton = props => {\n  return (\n    <WithHoverSound>\n      <button className={styles.entryButton} onClick={props.onClick}>\n        <img src={props.iconSrc} className={styles.icon} />\n        <div className={styles.label}>\n          <div className={styles.contents}>\n            <span>\n              <FormattedMessage id={props.prefixMessageId} />\n            </span>\n            <span className={styles.bolded}>\n              <FormattedMessage id={props.mediumMessageId} />\n            </span>\n            {props.subtitle && (\n              <div className={styles.subtitle}>\n                <FormattedMessage id={props.subtitle} />\n              </div>\n            )}\n          </div>\n        </div>\n      </button>\n    </WithHoverSound>\n  );\n};\n\nEntryButton.propTypes = {\n  onClick: PropTypes.func,\n  iconSrc: PropTypes.string,\n  prefixMessageId: PropTypes.string,\n  mediumMessageId: PropTypes.string,\n  subtitle: PropTypes.string,\n  isInHMD: PropTypes.bool\n};\n\nexport const TwoDEntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: AFRAME.utils.device.isMobile() ? MobileScreenEntryImg : DesktopScreenEntryImg,\n    prefixMessageId: \"entry.screen-prefix\",\n    mediumMessageId: AFRAME.utils.device.isMobile() ? \"entry.mobile-screen\" : \"entry.desktop-screen\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n\nexport const GenericEntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: GenericVREntryImg,\n    prefixMessageId: \"entry.generic-prefix\",\n    mediumMessageId: \"entry.generic-medium\",\n    subtitle: AFRAME.utils.device.isMobile() ? null : \"entry.generic-subtitle-desktop\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n\nexport const GearVREntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: GearVREntryImg,\n    prefixMessageId: \"entry.gearvr-prefix\",\n    mediumMessageId: \"entry.gearvr-medium\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n\nexport const DaydreamEntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: DaydreamEntryImg,\n    prefixMessageId: \"entry.daydream-prefix\",\n    mediumMessageId: \"entry.daydream-medium\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n\nexport const SafariEntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: MobileScreenEntryImg,\n    prefixMessageId: \"entry.screen-prefix\",\n    mediumMessageId: \"entry.mobile-safari\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n\nexport const DeviceEntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: DeviceEntryImg,\n    prefixMessageId: AFRAME.utils.device.isMobile() ? \"entry.device-prefix-mobile\" : \"entry.device-prefix-desktop\",\n    mediumMessageId: \"entry.device-medium\"\n  };\n\n  entryButtonProps.subtitle = entryButtonProps.isInHMD\n    ? \"entry.device-subtitle-vr\"\n    : AFRAME.utils.device.isMobile()\n      ? \"entry.device-subtitle-mobile\"\n      : \"entry.device-subtitle-desktop\";\n\n  return <EntryButton {...entryButtonProps} />;\n};\n","module.exports = __webpack_public_path__ + \"assets/images/mobile_screen_entry-b29fcd32c8f70bb828c1abceb62f93e2.svg\";","module.exports = __webpack_public_path__ + \"assets/images/desktop_screen_entry-e5ff9b5e64caa694e9b4183e532fcb17.svg\";","module.exports = __webpack_public_path__ + \"assets/images/gearvr_entry-dcea59d35d7fae4c8b9c4985c1743851.svg\";","module.exports = __webpack_public_path__ + \"assets/images/daydream_entry-657fea71af8b6f165f913acdab828caa.svg\";","module.exports = __webpack_public_path__ + \"assets/images/device_entry-6e90766a17f5ad4a130095c3dce61c82.svg\";","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport { SCHEMA } from \"../storage/store\";\nimport styles from \"../assets/stylesheets/profile.scss\";\nimport classNames from \"classnames\";\nimport hubLogo from \"../assets/images/hub-preview-white.png\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport { avatars } from \"../assets/avatars/avatars\";\n\nclass ProfileEntryPanel extends Component {\n  static propTypes = {\n    store: PropTypes.object,\n    messages: PropTypes.object,\n    finished: PropTypes.func,\n    intl: PropTypes.object\n  };\n\n  constructor(props) {\n    super(props);\n    const { displayName, avatarId } = this.props.store.state.profile;\n    this.state = { displayName, avatarId, customMode: avatarId && avatarId.startsWith(\"http\") };\n    this.props.store.addEventListener(\"statechanged\", this.storeUpdated);\n  }\n\n  storeUpdated = () => {\n    const { avatarId, displayName } = this.props.store.state.profile;\n    this.setState({ avatarId, displayName });\n  };\n\n  saveStateAndFinish = e => {\n    e.preventDefault();\n\n    const { displayName } = this.props.store.state.profile;\n    const { hasChangedName } = this.props.store.state.activity;\n\n    const hasChangedNowOrPreviously = hasChangedName || this.state.displayName !== displayName;\n    this.props.store.update({\n      activity: {\n        hasChangedName: hasChangedNowOrPreviously\n      },\n      profile: {\n        displayName: this.state.displayName,\n        avatarId: this.state.avatarId\n      }\n    });\n    this.props.finished();\n  };\n\n  stopPropagation = e => {\n    e.stopPropagation();\n  };\n\n  setAvatarStateFromIframeMessage = e => {\n    if (e.source !== this.avatarSelector.contentWindow) {\n      return;\n    }\n    this.setState({ avatarId: e.data.avatarId });\n  };\n\n  componentDidMount() {\n    // stop propagation so that avatar doesn't move when wasd'ing during text input.\n    this.nameInput.addEventListener(\"keydown\", this.stopPropagation);\n    this.nameInput.addEventListener(\"keypress\", this.stopPropagation);\n    this.nameInput.addEventListener(\"keyup\", this.stopPropagation);\n    window.addEventListener(\"message\", this.setAvatarStateFromIframeMessage);\n  }\n\n  componentWillUnmount() {\n    this.props.store.removeEventListener(\"statechanged\", this.storeUpdated);\n    this.nameInput.removeEventListener(\"keydown\", this.stopPropagation);\n    this.nameInput.removeEventListener(\"keypress\", this.stopPropagation);\n    this.nameInput.removeEventListener(\"keyup\", this.stopPropagation);\n    window.removeEventListener(\"message\", this.setAvatarStateFromIframeMessage);\n  }\n\n  render() {\n    const { formatMessage } = this.props.intl;\n\n    return (\n      <div className={styles.profileEntry}>\n        <form onSubmit={this.saveStateAndFinish} className={styles.form}>\n          <div className={classNames([styles.box, styles.darkened])}>\n            <label htmlFor=\"#profile-entry-display-name\" className={styles.title}>\n              <FormattedMessage id=\"profile.header\" />\n            </label>\n            <input\n              id=\"profile-entry-display-name\"\n              className={styles.formFieldText}\n              value={this.state.displayName}\n              onFocus={e => e.target.select()}\n              onChange={e => this.setState({ displayName: e.target.value })}\n              required\n              spellCheck=\"false\"\n              pattern={SCHEMA.definitions.profile.properties.displayName.pattern}\n              title={formatMessage({ id: \"profile.display_name.validation_warning\" })}\n              ref={inp => (this.nameInput = inp)}\n            />\n            {this.state.customMode ? (\n              <div className={styles.avatarSelectorContainer}>\n                <label htmlFor=\"#custom-avatar-url\">Avatar GLTF/GLB </label>\n                <input\n                  id=\"custom-avatar-url\"\n                  type=\"url\"\n                  className={styles.formFieldText}\n                  value={this.state.avatarId}\n                  onChange={e => this.setState({ avatarId: e.target.value })}\n                />\n                <div className={styles.links}>\n                  <a onClick={() => this.setState({ customMode: false, avatarId: \"botdefault\" })}>cancel</a>\n                </div>\n              </div>\n            ) : (\n              <div className={styles.avatarSelectorContainer}>\n                <div className=\"loading-panel\">\n                  <div className=\"loader-wrap\">\n                    <div className=\"loader\">\n                      <div className=\"loader-center\" />\n                    </div>\n                  </div>\n                </div>\n                <iframe\n                  className={styles.avatarSelector}\n                  src={`/avatar-selector.html#avatar_id=${this.state.avatarId}`}\n                  ref={ifr => (this.avatarSelector = ifr)}\n                />\n                <a\n                  className=\"custom-url-link\"\n                  onClick={() =>\n                    this.setState({ customMode: true, avatarId: avatars.find(a => a.id === this.state.avatarId).model })\n                  }\n                >\n                  custom url\n                </a>\n              </div>\n            )}\n            <WithHoverSound>\n              <input className={styles.formSubmit} type=\"submit\" value={formatMessage({ id: \"profile.save\" })} />\n            </WithHoverSound>\n            <div className={styles.links}>\n              <WithHoverSound>\n                <a\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\"\n                >\n                  <FormattedMessage id=\"profile.terms_of_use\" />\n                </a>\n              </WithHoverSound>\n\n              <WithHoverSound>\n                <a\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  href=\"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\"\n                >\n                  <FormattedMessage id=\"profile.privacy_notice\" />\n                </a>\n              </WithHoverSound>\n            </div>\n          </div>\n        </form>\n        <img className={styles.logo} src={hubLogo} />\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(ProfileEntryPanel);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport giphyLogo from \"../assets/images/giphy_logo.png\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPaperclip } from \"@fortawesome/free-solid-svg-icons/faPaperclip\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport styles from \"../assets/stylesheets/create-object-dialog.scss\";\nimport cx from \"classnames\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nconst attributionHostnames = {\n  \"giphy.com\": giphyLogo,\n  \"media.giphy.com\": giphyLogo\n};\n\nconst DEFAULT_OBJECT_URL = \"https://asset-bundles-prod.reticulum.io/interactables/Ducky/DuckyMesh-438ff8e022.gltf\";\nconst isMobile = AFRAME.utils.device.isMobile();\nconst instructions = \"Paste a URL to an image, video, model, or upload a file.\";\nconst desktopTips = \"Tip: You can paste media directly into Hubs with Ctrl+V\";\nconst references = (\n  <span>\n    For models, try{\" \"}\n    <a href=\"https://sketchfab.com/search?features=downloadable&type=models\" target=\"_blank\" rel=\"noopener noreferrer\">\n      Sketchfab\n    </a>,{\" \"}\n    <a href=\"http://poly.google.com/\" target=\"_blank\" rel=\"noopener noreferrer\">\n      Google Poly\n    </a>, or our{\" \"}\n    <a href=\"https://sketchfab.com/mozillareality\" target=\"_blank\" rel=\"noopener noreferrer\">\n      collection\n    </a>.\n  </span>\n);\n\nconst mobileInstructions = (\n  <div>\n    <p>{instructions}</p>\n    <p>{references}</p>\n  </div>\n);\nconst desktopInstructions = (\n  <div>\n    <p>{instructions}</p>\n    <p>{references}</p>\n    <p>{desktopTips}</p>\n  </div>\n);\n\nlet lastUrl = \"\";\nconst fileInputId = \"file-input\";\n\nexport default class CreateObjectDialog extends Component {\n  state = {\n    url: \"\",\n    file: null,\n    fileName: \"\"\n  };\n\n  static propTypes = {\n    onCreate: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  componentDidMount() {\n    this.setState({ url: lastUrl });\n  }\n\n  componentWillUnmount() {\n    lastUrl = this.state.url;\n  }\n\n  onUrlChange = e => {\n    let attributionImage = this.state.attributionImage;\n    if (e.target && e.target.value && e.target.validity.valid) {\n      const url = new URL(e.target.value);\n      attributionImage = attributionHostnames[url.hostname];\n    }\n    this.setState({\n      url: e.target && e.target.value,\n      attributionImage: attributionImage\n    });\n  };\n\n  onFileChange = e => {\n    this.setState({\n      file: e.target.files[0],\n      fileName: e.target.files[0].name\n    });\n  };\n\n  reset = e => {\n    e.preventDefault();\n    this.setState({\n      url: \"\",\n      file: null,\n      fileName: \"\"\n    });\n    this.fileInput.value = null;\n  };\n\n  onCreateClicked = e => {\n    e.preventDefault();\n    this.props.onCreate(this.state.file || this.state.url || DEFAULT_OBJECT_URL);\n    this.props.onClose();\n  };\n\n  render() {\n    const { onCreate, onClose, ...other } = this.props; // eslint-disable-line no-unused-vars\n\n    const cancelButton = (\n      <WithHoverSound>\n        <label className={cx(styles.smallButton, styles.cancelIcon)} onClick={this.reset}>\n          <FontAwesomeIcon icon={faTimes} />\n        </label>\n      </WithHoverSound>\n    );\n    const uploadButton = (\n      <WithHoverSound>\n        <label htmlFor={fileInputId} className={cx(styles.smallButton, styles.uploadIcon)}>\n          <FontAwesomeIcon icon={faPaperclip} />\n        </label>\n      </WithHoverSound>\n    );\n    const filenameLabel = <label className={cx(styles.leftSideOfInput)}>{this.state.fileName}</label>;\n    const urlInput = (\n      <input\n        className={cx(styles.leftSideOfInput)}\n        placeholder=\"Image/Video/glTF URL\"\n        onChange={this.onUrlChange}\n        type=\"url\"\n        value={this.state.url}\n      />\n    );\n\n    return (\n      <DialogContainer title=\"Create Object\" onClose={this.props.onClose} {...other}>\n        <div>\n          {isMobile ? mobileInstructions : desktopInstructions}\n          <form onSubmit={this.onCreateClicked}>\n            <div className={styles.addMediaForm}>\n              <input\n                id={fileInputId}\n                ref={f => (this.fileInput = f)}\n                className={styles.hideFileInput}\n                type=\"file\"\n                onChange={this.onFileChange}\n              />\n              <div className={styles.inputBorder}>\n                {this.state.file ? filenameLabel : urlInput}\n                {this.state.url || this.state.fileName ? cancelButton : uploadButton}\n              </div>\n              <div className={styles.buttons}>\n                <WithHoverSound>\n                  <button className={styles.actionButton}>\n                    <span>Create</span>\n                  </button>\n                </WithHoverSound>\n              </div>\n              {this.state.attributionImage ? (\n                <div>\n                  <img src={this.state.attributionImage} />\n                </div>\n              ) : null}\n            </div>\n          </form>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/images/giphy_logo-1dcbee43e18919c0bd0c999be8602628.png\";","import React, { Component } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class HelpDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"Getting Started\" {...this.props}>\n        <div className=\"info-dialog__help\">\n          <p style={{ textAlign: \"center\" }}>\n            Join the Hubs community on{\" \"}\n            <WithHoverSound>\n              <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://discord.gg/XzrGUY8\">\n                Discord\n              </a>\n            </WithHoverSound>\n            !\n          </p>\n          <p>When in a room, other avatars can see and hear you.</p>\n          <p>\n            Use your controller&apos;s action button to teleport from place to place. If it has a grip, use it to pick\n            up objects.\n          </p>\n          <p>\n            In VR, <b>look up</b> to find your menu.\n          </p>\n          <p>\n            The <b>Mic Toggle</b> mutes your mic.\n          </p>\n          <p>\n            The <b>Pause Toggle</b> pauses all other avatars and lets you block others or pin or remove objects.\n          </p>\n          <p>\n            See detailed{\" \"}\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/mozilla/hubs/wiki/Hubs-Features\">\n              feature\n            </a>{\" \"}\n            and{\" \"}\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/mozilla/hubs/wiki/Hubs-Controls\">\n              controls\n            </a>{\" \"}\n            documentation.\n          </p>\n          <p className=\"dialog__box__contents__links\">\n            <WithHoverSound>\n              <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\">\n                <FormattedMessage id=\"profile.terms_of_use\" />\n              </a>\n            </WithHoverSound>\n            <WithHoverSound>\n              <a\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                href=\"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\"\n              >\n                <FormattedMessage id=\"profile.privacy_notice\" />\n              </a>\n            </WithHoverSound>\n            <WithHoverSound>\n              <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"/?report\">\n                <FormattedMessage id=\"help.report_issue\" />\n              </a>\n            </WithHoverSound>\n          </p>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport copy from \"copy-to-clipboard\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\nimport { share } from \"../utils/share\";\n\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport styles from \"../assets/stylesheets/invite-dialog.scss\";\n\nfunction pad(num, size) {\n  let s = `${num}`;\n  while (s.length < size) s = `0${s}`;\n  return s;\n}\n\nexport default class InviteDialog extends Component {\n  static propTypes = {\n    entryCode: PropTypes.number,\n    hubId: PropTypes.string,\n    allowShare: PropTypes.bool,\n    onClose: PropTypes.func\n  };\n\n  state = {\n    copyButtonActive: false,\n    shareButtonActive: false\n  };\n\n  shareClicked = url => {\n    this.setState({ shareButtonActive: true });\n    share({ url, title: \"Join me now in #hubs!\" }).then(() => {\n      this.setState({ shareButtonActive: false });\n    });\n  };\n\n  copyClicked = link => {\n    this.setState({ copyButtonActive: true });\n    setTimeout(() => this.setState({ copyButtonActive: false }), 5000);\n\n    copy(link);\n  };\n\n  render() {\n    const { entryCode } = this.props;\n\n    const entryCodeString = pad(entryCode, 6);\n    const shortLinkText = `hub.link/${this.props.hubId}`;\n    const shortLink = \"https://\" + shortLinkText;\n\n    return (\n      <div className={styles.dialog}>\n        <div className={styles.attachPoint} />\n        <WithHoverSound>\n          <div className={styles.close} onClick={() => this.props.onClose()}>\n            <span>×</span>\n          </div>\n        </WithHoverSound>\n        <div>\n          <FormattedMessage id=\"invite.enter_via\" />\n          <WithHoverSound>\n            <a href=\"https://hub.link\" target=\"_blank\" className={styles.hubLinkLink} rel=\"noopener noreferrer\">\n              hub.link\n            </a>\n          </WithHoverSound>\n          <FormattedMessage id=\"invite.and_enter_code\" />\n        </div>\n        <div className={styles.code}>\n          {entryCodeString.split(\"\").map((d, i) => (\n            <div className={classNames({ [styles.digit]: true, [styles[`digit_${i}`]]: true })} key={`link_code_${i}`}>\n              {d}\n            </div>\n          ))}\n        </div>\n        <div>\n          <FormattedMessage id=\"invite.or_visit\" />\n        </div>\n        <div className={styles.domain}>\n          <input type=\"text\" readOnly onFocus={e => e.target.select()} value={shortLinkText} />\n        </div>\n        <div className={styles.buttons}>\n          <WithHoverSound>\n            <button className={styles.linkButton} onClick={this.copyClicked.bind(this, shortLink)}>\n              <span>{this.state.copyButtonActive ? \"copied!\" : \"copy\"}</span>\n            </button>\n          </WithHoverSound>\n          {this.props.allowShare &&\n            navigator.share && (\n              <WithHoverSound>\n                <button className={styles.linkButton} onClick={this.shareClicked.bind(this, shortLink)}>\n                  <span>{this.state.shareButtonActive ? \"sharing...\" : \"share\"}</span>\n                </button>\n              </WithHoverSound>\n            )}\n          {this.props.allowShare &&\n            !navigator.share && (\n              <WithHoverSound>\n                <button className={styles.linkButton} onClick={this.shareClicked.bind(this, shortLink)}>\n                  <FormattedMessage id=\"invite.tweet\" />\n                </button>\n              </WithHoverSound>\n            )}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport PropTypes from \"prop-types\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class InviteTeamDialog extends Component {\n  static propTypes = {\n    hubChannel: PropTypes.object\n  };\n\n  state = {\n    inviteButtonText: \"invite a hubs team member\"\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  inviteClicked = () => {\n    this.setState({ inviteButtonText: \"OK! We'll be there shortly.\" });\n    this.props.hubChannel.requestSupport();\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Let's Chat!\" {...this.props}>\n        <div>\n          <div>\n            <p>Have an idea for Hubs? Having trouble?</p>\n            <p>We&apos;d love to chat. Someone from our team will join you in just a few minutes.</p>\n          </div>\n          <div className=\"invite-team-form\">\n            <div className=\"invite-team-form__buttons\">\n              <WithHoverSound>\n                <button className=\"invite-team-form__action-button\" onClick={this.inviteClicked}>\n                  <span>{this.state.inviteButtonText}</span>\n                </button>\n              </WithHoverSound>\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\nimport LinkDialogHeader from \"../assets/images/link_dialog_header.svg\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nimport styles from \"../assets/stylesheets/link-dialog.scss\";\n\nexport default class LinkDialog extends Component {\n  static propTypes = {\n    linkCode: PropTypes.string,\n    onClose: PropTypes.func\n  };\n\n  render() {\n    const { linkCode } = this.props;\n\n    return (\n      <div className={styles.dialog}>\n        <WithHoverSound>\n          <div className={styles.close} onClick={() => this.props.onClose()}>\n            <span>×</span>\n          </div>\n        </WithHoverSound>\n        <div>\n          {!linkCode && (\n            <div>\n              <div className={classNames(\"loading-panel\", styles.codeLoadingPanel)}>\n                <div className=\"loader-wrap\">\n                  <div className=\"loader\">\n                    <div className=\"loader-center\" />\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n          {linkCode && (\n            <div className={styles.contents}>\n              <img className={styles.imageHeader} src={LinkDialogHeader} />\n              <div className={styles.header}>\n                <FormattedMessage id=\"link.connect_headset\" />\n              </div>\n              <div>\n                <FormattedMessage id=\"link.in_your_browser\" />\n              </div>\n              <WithHoverSound>\n                <a href=\"https://hub.link\" className={styles.domain} target=\"_blank\" rel=\"noopener noreferrer\">\n                  hub.link\n                </a>\n              </WithHoverSound>\n              <div>\n                <FormattedMessage id=\"link.enter_code\" />\n              </div>\n              {linkCode && (\n                <div className={styles.code}>\n                  {linkCode.split(\"\").map((d, i) => (\n                    <span className={styles.digit} key={`link_code_${i}`}>\n                      {d}\n                    </span>\n                  ))}\n                </div>\n              )}\n              <div className={styles.keepOpen}>\n                <FormattedMessage id=\"link.do_not_close\" />\n              </div>\n              <WithHoverSound>\n                <button className={styles.closeButton} onClick={() => this.props.onClose()}>\n                  <FormattedMessage id=\"link.cancel\" />\n                </button>\n              </WithHoverSound>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/images/link_dialog_header-b15568ca2056d8be7a58c359e6a9ca51.svg\";","import React, { Component } from \"react\";\nimport copy from \"copy-to-clipboard\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class SafariDialog extends Component {\n  state = {\n    copyLinkButtonText: \"copy\"\n  };\n\n  copyLinkClicked = link => {\n    copy(link);\n    this.setState({ copyLinkButtonText: \"copied!\" });\n  };\n\n  render() {\n    const onCopyClicked = this.copyLinkClicked.bind(this, document.location);\n    return (\n      <DialogContainer title=\"Open in Safari\" {...this.props}>\n        <div>\n          <div>Hubs does not support your current browser on iOS. Copy and paste this link directly in Safari.</div>\n          <div className=\"invite-form\">\n            <input\n              type=\"text\"\n              readOnly\n              onFocus={e => e.target.select()}\n              value={document.location}\n              className=\"invite-form__link_field\"\n            />\n            <div className=\"invite-form__buttons\">\n              <WithHoverSound>\n                <button className=\"invite-form__action-button\" onClick={onCopyClicked}>\n                  <span>{this.state.copyLinkButtonText}</span>\n                </button>\n              </WithHoverSound>\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\n\nexport default class SafariMicDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"Microphone Access Required\" {...this.props}>\n        <div>\n          <div>\n            Hubs requires microphone permissions in Safari. <br />\n            Please reload and allow microphone access to continue.\n          </div>\n          <div className=\"invite-form\">\n            <div className=\"invite-form__buttons\">\n              <button className=\"invite-form__action-button\" onClick={() => location.reload()}>\n                Reload\n              </button>\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport styles from \"../assets/stylesheets/sign-in-dialog.scss\";\nimport DialogContainer from \"./dialog-container\";\n\nexport default class SignInDialog extends Component {\n  static propTypes = {\n    authStarted: PropTypes.bool,\n    authComplete: PropTypes.bool,\n    onSignIn: PropTypes.func,\n    onContinue: PropTypes.func,\n    message: PropTypes.string,\n    continueText: PropTypes.string\n  };\n\n  state = {\n    email: \"\"\n  };\n\n  onSubmit = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onSignIn(this.state.email);\n  };\n\n  render() {\n    let contents;\n    if (this.props.authStarted) {\n      contents = (\n        <p>\n          <FormattedMessage className=\"preformatted\" id=\"sign-in.auth-started\" />\n        </p>\n      );\n    } else if (this.props.authComplete) {\n      contents = (\n        <div className={styles.signInComplete}>\n          <p>{this.props.message}</p>\n          <button onClick={this.props.onContinue} className={styles.continueButton}>\n            {this.props.continueText}\n          </button>\n        </div>\n      );\n    } else {\n      contents = (\n        <form onSubmit={this.onSubmit} className={styles.signInForm}>\n          <span>{this.props.message}</span>\n          <input\n            name=\"email\"\n            type=\"email\"\n            required\n            placeholder=\"Your email address\"\n            value={this.state.email}\n            onChange={e => this.setState({ email: e.target.value })}\n            className={styles.emailField}\n          />\n          <p className={styles.terms}>\n            By proceeding, you agree to the{\" \"}\n            <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\">\n              terms of use\n            </a>{\" \"}\n            and{\" \"}\n            <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\">\n              privacy notice\n            </a>.\n          </p>\n          <button type=\"submit\" className={styles.nextButton}>\n            next\n          </button>\n        </form>\n      );\n    }\n\n    return (\n      <DialogContainer title=\"Sign In\" {...this.props}>\n        {contents}\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\n\nexport default class WebRTCScreenshareUnsupportedDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"Share Screen\" {...this.props}>\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}>\n          <p>\n            Your browser doesn&apos;t seem to support WebRTC screen sharing.\n            <br />\n            To share your screen in Hubs, you can use Firefox.\n          </p>\n          <a\n            className=\"info-dialog--action-button\"\n            target=\"_blank\"\n            rel=\"noreferrer noopener\"\n            href=\"https://www.mozilla.org/firefox\"\n          >\n            Download Firefox\n          </a>\n          <p style={{ fontSize: \"0.8em\" }}>\n            To test WebRTC screen sharing in your browser, see this&nbsp;\n            <a\n              href=\"https://www.webrtc-experiment.com/screen-sharing/#5591174797993739\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              WebRTC experiment\n            </a>.\n          </p>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class WebVRRecommendDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"Enter in VR\" {...this.props}>\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}>\n          <p>To enter Hubs with Oculus or SteamVR, you can use Firefox.</p>\n          <WithHoverSound>\n            <a\n              className=\"info-dialog--action-button\"\n              href=\"https://www.mozilla.org/firefox\"\n              target=\"_blank\"\n              rel=\"noreferrer noopener\"\n            >\n              Download Firefox\n            </a>\n          </WithHoverSound>\n          <p style={{ fontSize: \"0.8em\" }}>\n            For a full list of browsers with experimental VR support, visit{\" \"}\n            <WithHoverSound>\n              <a href=\"https://webvr.rocks\" target=\"_blank\" rel=\"noopener noreferrer\">\n                WebVR Rocks\n              </a>\n            </WithHoverSound>\n          </p>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport ChatMessage from \"./chat-message\";\nimport PhotoMessage from \"./photo-message\";\n\nexport default class PresenceLog extends Component {\n  static propTypes = {\n    entries: PropTypes.array,\n    inRoom: PropTypes.bool,\n    hubId: PropTypes.string\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  domForEntry = e => {\n    const entryClasses = {\n      [styles.presenceLogEntry]: true,\n      [styles.presenceLogEntryWithButton]: e.type === \"chat\" && e.maySpawn,\n      [styles.presenceLogChat]: e.type === \"chat\",\n      [styles.expired]: !!e.expired\n    };\n\n    switch (e.type) {\n      case \"join\":\n      case \"entered\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.name}</b>&nbsp;<FormattedMessage id={`presence.${e.type}_${e.presence}`} />\n          </div>\n        );\n      case \"leave\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.name}</b>&nbsp;<FormattedMessage id={`presence.${e.type}`} />\n          </div>\n        );\n      case \"display_name_changed\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.oldName}</b>&nbsp;<FormattedMessage id=\"presence.name_change\" />&nbsp;<b>{e.newName}</b>.\n          </div>\n        );\n      case \"chat\":\n        return (\n          <ChatMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n          />\n        );\n      case \"spawn\":\n        return (\n          <PhotoMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses, styles.media)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n            hubId={this.props.hubId}\n          />\n        );\n      case \"log\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            {e.body}\n          </div>\n        );\n    }\n  };\n\n  render() {\n    const presenceClasses = {\n      [styles.presenceLog]: true,\n      [styles.presenceLogInRoom]: this.props.inRoom\n    };\n\n    return <div className={classNames(presenceClasses)}>{this.props.entries.map(this.domForEntry)}</div>;\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\n\nimport { share } from \"../utils/share\";\nimport { getLandingPageForPhoto } from \"../utils/phoenix-utils\";\n\nexport default function PhotoMessage({ name, body: { src: url }, className, maySpawn, hubId }) {\n  const landingPageUrl = getLandingPageForPhoto(url);\n  const onShareClicked = share.bind(null, {\n    url: landingPageUrl,\n    title: `Taken in #hubs, join me at https://hub.link/${hubId}`\n  });\n  return (\n    <div className={className}>\n      {maySpawn && <button className={classNames(styles.iconButton, styles.share)} onClick={onShareClicked} />}\n      <div className={styles.mediaBody}>\n        <span>\n          <b>{name}</b>\n        </span>\n        <span>\n          {\"took a \"}\n          <b>\n            <a href={landingPageUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n              photo\n            </a>\n          </b>.\n        </span>\n      </div>\n      <a href={landingPageUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n        <img src={url} />\n      </a>\n    </div>\n  );\n}\nPhotoMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.object,\n  className: PropTypes.string,\n  hubId: PropTypes.string\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\n\nimport styles from \"../assets/stylesheets/presence-list.scss\";\nimport PhoneImage from \"../assets/images/presence_phone.png\";\nimport DesktopImage from \"../assets/images/presence_desktop.png\";\nimport HMDImage from \"../assets/images/presence_vr.png\";\nimport maskEmail from \"../utils/mask-email\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class PresenceList extends Component {\n  static propTypes = {\n    presences: PropTypes.object,\n    sessionId: PropTypes.string,\n    signedIn: PropTypes.bool,\n    email: PropTypes.string,\n    onSignIn: PropTypes.func,\n    onSignOut: PropTypes.func\n  };\n\n  domForPresence = ([sessionId, data]) => {\n    const meta = data.metas[0];\n    const context = meta.context;\n    const profile = meta.profile;\n\n    const image = context && context.mobile ? PhoneImage : context && context.hmd ? HMDImage : DesktopImage;\n\n    return (\n      <WithHoverSound key={sessionId}>\n        <div className={styles.row}>\n          <div className={styles.device}>\n            <img src={image} />\n          </div>\n          <div\n            className={classNames({\n              [styles.displayName]: true,\n              [styles.selfDisplayName]: sessionId === this.props.sessionId\n            })}\n          >\n            {profile && profile.displayName}\n          </div>\n          <div className={styles.presence}>\n            <FormattedMessage id={`presence.in_${meta.presence}`} />\n          </div>\n        </div>\n      </WithHoverSound>\n    );\n  };\n\n  render() {\n    // Draw self first\n    return (\n      <div className={styles.presenceList}>\n        <div className={styles.attachPoint} />\n        <div className={styles.contents}>\n          <div className={styles.rows}>\n            {Object.entries(this.props.presences || {})\n              .filter(([k]) => k === this.props.sessionId)\n              .map(this.domForPresence)}\n            {Object.entries(this.props.presences || {})\n              .filter(([k]) => k !== this.props.sessionId)\n              .map(this.domForPresence)}\n          </div>\n          <div className={styles.signIn}>\n            {this.props.signedIn ? (\n              <div>\n                <span>\n                  <FormattedMessage id=\"sign-in.as\" /> {maskEmail(this.props.email)}\n                </span>{\" \"}\n                <a onClick={this.props.onSignOut}>\n                  <FormattedMessage id=\"sign-in.out\" />\n                </a>\n              </div>\n            ) : (\n              <a onClick={this.props.onSignIn}>\n                <FormattedMessage id=\"sign-in.in\" />\n              </a>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/images/presence_phone-cfbb42259baa966fa6b028a757cd3a5e.png\";","module.exports = __webpack_public_path__ + \"assets/images/presence_desktop-931af339141e788db31b09e4a52115e6.png\";","module.exports = __webpack_public_path__ + \"assets/images/presence_vr-ff28660171adf429d91211d9d1bd2ec2.png\";","export default function maskEmail(email) {\n  if (!email) return \"\";\n  const emailParts = email.split(\"@\");\n  const emailIdentity = emailParts[0];\n  const emailDomain = emailParts[1];\n  const truncatedIdentity = emailIdentity.substring(0, Math.min(emailIdentity.length, 3));\n  return `${truncatedIdentity}...@${emailDomain}`;\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\n\nconst { detect } = require(\"detect-browser\");\nimport styles from \"../assets/stylesheets/2d-hud.scss\";\nimport uiStyles from \"../assets/stylesheets/ui-root.scss\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport { FormattedMessage } from \"react-intl\";\n\nconst browser = detect();\n\nclass TopHUD extends Component {\n  static propTypes = {\n    muted: PropTypes.bool,\n    frozen: PropTypes.bool,\n    videoShareMediaSource: PropTypes.string,\n    onToggleMute: PropTypes.func,\n    onToggleFreeze: PropTypes.func,\n    onSpawnPen: PropTypes.func,\n    onSpawnCamera: PropTypes.func,\n    onShareVideo: PropTypes.func,\n    onEndShareVideo: PropTypes.func,\n    onShareVideoNotCapable: PropTypes.func\n  };\n\n  state = {\n    showVideoShareOptions: false,\n    lastActiveMediaSource: null\n  };\n\n  handleVideoShareClicked = source => {\n    if ((source === \"screen\" || source === \"window\") && browser.name !== \"firefox\") {\n      this.props.onShareVideoNotCapable();\n      return;\n    }\n\n    if (this.props.videoShareMediaSource) {\n      this.props.onEndShareVideo();\n    } else {\n      this.props.onShareVideo(source);\n      this.setState({ lastActiveMediaSource: source });\n    }\n  };\n\n  buildVideoSharingButtons = () => {\n    const isMobile = AFRAME.utils.device.isMobile();\n\n    const videoShareExtraOptionTypes = [];\n    const primaryVideoShareType =\n      this.props.videoShareMediaSource || this.state.lastActiveMediaSource || (isMobile ? \"camera\" : \"screen\");\n\n    if (this.state.showVideoShareOptions) {\n      videoShareExtraOptionTypes.push(primaryVideoShareType);\n\n      [\"screen\", \"window\", \"camera\"].forEach(t => {\n        if (videoShareExtraOptionTypes.indexOf(t) === -1) {\n          videoShareExtraOptionTypes.push(t);\n        }\n      });\n    }\n\n    const showExtrasOnHover = () => {\n      if (isMobile) return;\n\n      clearTimeout(this.hideVideoSharingButtonTimeout);\n\n      if (!this.props.videoShareMediaSource) {\n        this.setState({ showVideoShareOptions: true });\n      }\n    };\n\n    const hideExtrasOnOut = () => {\n      this.hideVideoSharingButtonTimeout = setTimeout(() => {\n        this.setState({ showVideoShareOptions: false });\n      }, 250);\n    };\n\n    return (\n      <WithHoverSound>\n        <div\n          className={cx(styles.iconButton, styles[`share_${primaryVideoShareType}`], {\n            [styles.active]: this.props.videoShareMediaSource === primaryVideoShareType,\n            [styles.videoShare]: true\n          })}\n          title={this.props.videoShareMediaSource !== null ? \"Stop sharing\" : `Share ${primaryVideoShareType}`}\n          onClick={() => {\n            if (!this.state.showVideoShareOptions) {\n              this.handleVideoShareClicked(primaryVideoShareType);\n            }\n          }}\n          onMouseOver={showExtrasOnHover}\n        >\n          {this.props.videoShareMediaSource !== null && (\n            <div className={cx(styles.videoShareNotify)}>\n              <div className={cx(styles.attachPoint)} />\n              <FormattedMessage id=\"video_share.notify\" />\n            </div>\n          )}\n          {videoShareExtraOptionTypes.length > 0 && (\n            <div className={cx(styles.videoShareExtraOptions)} onMouseOut={hideExtrasOnOut}>\n              {videoShareExtraOptionTypes.map(type => (\n                <WithHoverSound key={type}>\n                  <div\n                    key={type}\n                    className={cx(styles.iconButton, styles[`share_${type}`], {\n                      [styles.active]: this.props.videoShareMediaSource === type\n                    })}\n                    title={this.props.videoShareMediaSource === type ? \"Stop sharing\" : `Share ${type}`}\n                    onClick={() => this.handleVideoShareClicked(type)}\n                    onMouseOver={showExtrasOnHover}\n                  />\n                </WithHoverSound>\n              ))}\n            </div>\n          )}\n        </div>\n      </WithHoverSound>\n    );\n  };\n\n  render() {\n    const videoSharingButtons = this.buildVideoSharingButtons();\n\n    return (\n      <div className={cx(styles.container, styles.top, styles.unselectable, uiStyles.uiInteractive)}>\n        <div className={cx(uiStyles.uiInteractive, styles.panel)}>\n          {videoSharingButtons}\n          <WithHoverSound>\n            <div\n              className={cx(styles.iconButton, styles.mute, { [styles.active]: this.props.muted })}\n              title={this.props.muted ? \"Unmute Mic\" : \"Mute Mic\"}\n              onClick={this.props.onToggleMute}\n            />\n          </WithHoverSound>\n          <WithHoverSound>\n            <div\n              className={cx(styles.iconButton, styles.freeze, {\n                [styles.active]: this.props.frozen\n              })}\n              title={this.props.frozen ? \"Resume\" : \"Pause\"}\n              onClick={this.props.onToggleFreeze}\n            />\n          </WithHoverSound>\n          <WithHoverSound>\n            <div\n              className={cx(styles.iconButton, styles.spawn_pen)}\n              title={\"Drawing Pen\"}\n              onClick={this.props.onSpawnPen}\n            />\n          </WithHoverSound>\n          <WithHoverSound>\n            <div\n              className={cx(styles.iconButton, styles.spawn_camera)}\n              title={\"Camera\"}\n              onClick={this.props.onSpawnCamera}\n            />\n          </WithHoverSound>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst BottomHUD = ({ onCreateObject, showPhotoPicker, onMediaPicked }) => (\n  <div className={cx(styles.container, styles.column, styles.bottom, styles.unselectable)}>\n    {showPhotoPicker ? (\n      <div className={cx(uiStyles.uiInteractive, styles.panel, styles.up)}>\n        <input\n          id=\"media-picker-input\"\n          className={cx(styles.hide)}\n          type=\"file\"\n          accept=\"image/*\"\n          multiple\n          onChange={e => {\n            for (const file of e.target.files) {\n              onMediaPicked(file);\n            }\n          }}\n        />\n        <label htmlFor=\"media-picker-input\">\n          <div className={cx(styles.iconButton, styles.mobileMediaPicker)} title={\"Pick Media\"} />\n        </label>\n      </div>\n    ) : (\n      <div />\n    )}\n    <div>\n      <WithHoverSound>\n        <div\n          className={cx(uiStyles.uiInteractive, styles.iconButton, styles.large, styles.createObject)}\n          title={\"Create Object\"}\n          onClick={onCreateObject}\n        />\n      </WithHoverSound>\n    </div>\n  </div>\n);\n\nBottomHUD.propTypes = {\n  onCreateObject: PropTypes.func,\n  showPhotoPicker: PropTypes.bool,\n  onMediaPicked: PropTypes.func\n};\n\nexport default { TopHUD, BottomHUD };\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/chat-command-help.scss\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport default class ChatCommandHelp extends Component {\n  static propTypes = {\n    matchingPrefix: PropTypes.string\n  };\n\n  render() {\n    const commands = [\"help\", \"leave\", \"fly\", \"grow\", \"shrink\", \"duck\"];\n\n    return (\n      <div className={styles.commandHelp}>\n        {commands.map(\n          c =>\n            (this.props.matchingPrefix === \"\" || c.startsWith(this.props.matchingPrefix)) && (\n              <div className={styles.entry} key={c}>\n                <div className={styles.command}>/{c}</div>\n                <div>\n                  <FormattedMessage id={`commands.${c}`} />\n                </div>\n              </div>\n            )\n        )}\n      </div>\n    );\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/sfx/tone-624e72d19fe0cea1b85ca174cb6be256.webm\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-3fa0defb5172b2533fedcc1929605799.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-78ae5a60f0e336f384919eee9f5a2e18.ogg\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-4604a4c98f36f3e0c6980295bc5c7ffe.wav\";","import uuid from \"uuid/v4\";\n\nexport default class AuthChannel {\n  constructor(store) {\n    this.store = store;\n    this.socket = null;\n  }\n\n  setSocket = socket => {\n    this.socket = socket;\n  };\n\n  signOut = async hubChannel => {\n    await hubChannel.signOut();\n    this.store.update({ credentials: { token: null, email: null } });\n  };\n\n  async startAuthentication(email, hubChannel) {\n    const channel = this.socket.channel(`auth:${uuid()}`);\n    await new Promise((resolve, reject) =>\n      channel\n        .join()\n        .receive(\"ok\", resolve)\n        .receive(\"error\", reject)\n    );\n\n    const authComplete = new Promise(resolve =>\n      channel.on(\"auth_credentials\", async ({ credentials: token }) => {\n        this.store.update({ credentials: { email, token } });\n        await hubChannel.signIn(token);\n        resolve();\n      })\n    );\n\n    channel.push(\"auth_request\", { email, origin: \"hubs\" });\n\n    // Returning an object with the authComplete promise since we want the caller to wait for the above await but not\n    // for authComplete.\n    return { authComplete };\n  }\n}\n","const MS_PER_DAY = 1000 * 60 * 60 * 24;\nconst MS_PER_MONTH = 1000 * 60 * 60 * 24 * 30;\n\nfunction isSameMonth(da, db) {\n  return da.getFullYear() == db.getFullYear() && da.getMonth() == db.getMonth();\n}\n\nfunction isSameDay(da, db) {\n  return isSameMonth(da, db) && da.getDate() == db.getDate();\n}\n\nexport default class HubChannel {\n  constructor(store) {\n    this.store = store;\n    this._signedIn = false;\n  }\n\n  get signedIn() {\n    return this._signedIn;\n  }\n\n  setPhoenixChannel = channel => {\n    this.channel = channel;\n  };\n\n  sendEntryEvent = async () => {\n    if (!this.channel) {\n      console.warn(\"No phoenix channel initialized before room entry.\");\n      return;\n    }\n\n    let entryDisplayType = \"Screen\";\n\n    if (navigator.getVRDisplays) {\n      const vrDisplay = (await navigator.getVRDisplays()).find(d => d.isPresenting);\n\n      if (vrDisplay) {\n        entryDisplayType = vrDisplay.displayName;\n      }\n    }\n\n    // This is fairly hacky, but gets the # of initial occupants\n    let initialOccupantCount = 0;\n\n    if (NAF.connection.adapter && NAF.connection.adapter.publisher) {\n      initialOccupantCount = NAF.connection.adapter.publisher.initialOccupants.length;\n    }\n\n    const entryTimingFlags = this.getEntryTimingFlags();\n\n    const entryEvent = {\n      ...entryTimingFlags,\n      initialOccupantCount,\n      entryDisplayType,\n      userAgent: navigator.userAgent\n    };\n\n    this.channel.push(\"events:entered\", entryEvent);\n  };\n\n  getEntryTimingFlags = () => {\n    const entryTimingFlags = { isNewDaily: true, isNewMonthly: true, isNewDayWindow: true, isNewMonthWindow: true };\n    const storedLastEnteredAt = this.store.state.activity.lastEnteredAt;\n\n    if (!storedLastEnteredAt) {\n      return entryTimingFlags;\n    }\n\n    const now = new Date();\n    const lastEntered = new Date(storedLastEnteredAt);\n    const msSinceLastEntered = now - lastEntered;\n\n    // note that new daily and new monthly is based on client local time\n    entryTimingFlags.isNewDaily = !isSameDay(now, lastEntered);\n    entryTimingFlags.isNewMonthly = !isSameMonth(now, lastEntered);\n    entryTimingFlags.isNewDayWindow = msSinceLastEntered > MS_PER_DAY;\n    entryTimingFlags.isNewMonthWindow = msSinceLastEntered > MS_PER_MONTH;\n\n    return entryTimingFlags;\n  };\n\n  sendObjectSpawnedEvent = objectType => {\n    if (!this.channel) {\n      console.warn(\"No phoenix channel initialized before object spawn.\");\n      return;\n    }\n\n    const spawnEvent = {\n      object_type: objectType\n    };\n\n    this.channel.push(\"events:object_spawned\", spawnEvent);\n  };\n\n  sendProfileUpdate = () => {\n    this.channel.push(\"events:profile_updated\", { profile: this.store.state.profile });\n  };\n\n  subscribe = subscription => {\n    this.channel.push(\"subscribe\", { subscription });\n  };\n\n  unsubscribe = subscription => {\n    return new Promise(resolve => this.channel.push(\"unsubscribe\", { subscription }).receive(\"ok\", resolve));\n  };\n\n  sendMessage = (body, type = \"chat\") => {\n    if (!body) return;\n    this.channel.push(\"message\", { body, type });\n  };\n\n  signIn = token => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"sign_in\", { token })\n        .receive(\"ok\", () => {\n          this._signedIn = true;\n          resolve();\n        })\n        .receive(\"error\", err => {\n          console.error(\"sign in failed\", err);\n          reject();\n        });\n    });\n  };\n\n  signOut = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"sign_out\")\n        .receive(\"ok\", () => {\n          this._signedIn = false;\n          resolve();\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  getHost = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"get_host\")\n        .receive(\"ok\", res => {\n          resolve(res.host);\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  pin = (id, gltfNode, fileId, fileAccessToken, promotionToken) => {\n    const payload = { id, gltf_node: gltfNode };\n    if (fileId && promotionToken) {\n      payload.file_id = fileId;\n      payload.file_access_token = fileAccessToken;\n      payload.promotion_token = promotionToken;\n    }\n    this.channel.push(\"pin\", payload);\n  };\n\n  unpin = (id, fileId) => {\n    const payload = { id };\n    if (fileId) {\n      payload.file_id = fileId;\n    }\n    this.channel.push(\"unpin\", payload);\n  };\n\n  requestSupport = () => {\n    this.channel.push(\"events:request_support\", {});\n  };\n\n  disconnect = () => {\n    if (this.channel) {\n      this.channel.socket.disconnect();\n    }\n  };\n}\n","import { spawnChatMessage } from \"./react-components/chat-message\";\nconst DUCK_URL = \"https://asset-bundles-prod.reticulum.io/interactables/Ducky/DuckyMesh-438ff8e022.gltf\";\n\n// Handles user-entered messages\nexport default class MessageDispatch {\n  constructor(scene, entryManager, hubChannel, addToPresenceLog, remountUI) {\n    this.scene = scene;\n    this.entryManager = entryManager;\n    this.hubChannel = hubChannel;\n    this.addToPresenceLog = addToPresenceLog;\n    this.remountUI = remountUI;\n  }\n\n  dispatch = message => {\n    if (message.startsWith(\"/\")) {\n      this.dispatchCommand(message.substring(1));\n      document.activeElement.blur(); // Commands should blur\n    } else {\n      this.hubChannel.sendMessage(message);\n    }\n  };\n\n  dispatchCommand = command => {\n    const entered = this.scene.is(\"entered\");\n\n    switch (command) {\n      case \"help\":\n        // HACK for now, non-trivial to properly send this into React\n        document.querySelector(\".help-button\").click();\n        return;\n    }\n\n    if (!entered) {\n      this.addToPresenceLog({ type: \"log\", body: \"You must enter the room to use this command.\" });\n      return;\n    }\n\n    const playerRig = document.querySelector(\"#player-rig\");\n    const scales = [0.0625, 0.125, 0.25, 0.5, 1.0, 1.5, 3, 5, 7.5, 12.5];\n    const curScale = playerRig.object3D.scale;\n\n    switch (command) {\n      case \"fly\":\n        if (playerRig.getAttribute(\"character-controller\").fly !== true) {\n          playerRig.setAttribute(\"character-controller\", \"fly\", true);\n          this.addToPresenceLog({ type: \"log\", body: \"Fly mode enabled.\" });\n        } else {\n          playerRig.setAttribute(\"character-controller\", \"fly\", false);\n          this.addToPresenceLog({ type: \"log\", body: \"Fly mode disabled.\" });\n        }\n        break;\n      case \"grow\":\n        for (let i = 0; i < scales.length; i++) {\n          if (scales[i] > curScale.x) {\n            playerRig.object3D.scale.set(scales[i], scales[i], scales[i]);\n            playerRig.object3D.matrixNeedsUpdate = true;\n            break;\n          }\n        }\n\n        break;\n      case \"shrink\":\n        for (let i = scales.length - 1; i >= 0; i--) {\n          if (curScale.x > scales[i]) {\n            playerRig.object3D.scale.set(scales[i], scales[i], scales[i]);\n            break;\n          }\n        }\n\n        break;\n      case \"leave\":\n        this.entryManager.exitScene();\n        this.remountUI({ roomUnavailableReason: \"left\" });\n        break;\n      case \"duck\":\n        spawnChatMessage(DUCK_URL);\n        this.scene.emit(\"quack\");\n        break;\n    }\n  };\n}\n","import qsTruthy from \"./utils/qs_truthy\";\nimport screenfull from \"screenfull\";\nimport nextTick from \"./utils/next-tick\";\nimport pinnedEntityToGltf from \"./utils/pinned-entity-to-gltf\";\n\nconst playerHeight = 1.6;\nconst isBotMode = qsTruthy(\"bot\");\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isDebug = qsTruthy(\"debug\");\nconst qs = new URLSearchParams(location.search);\nconst aframeInspectorUrl = require(\"file-loader?name=assets/js/[name]-[hash].[ext]!aframe-inspector/dist/aframe-inspector.min.js\");\n\nimport { addMedia, proxiedUrlFor, getPromotionTokenForFile } from \"./utils/media-utils\";\nimport { ObjectContentOrigins } from \"./object-types\";\n\nfunction requestFullscreen() {\n  if (screenfull.enabled && !screenfull.isFullscreen) screenfull.request();\n}\n\nexport default class SceneEntryManager {\n  constructor(hubChannel) {\n    this.hubChannel = hubChannel;\n    this.store = window.APP.store;\n    this.scene = document.querySelector(\"a-scene\");\n    this.cursorController = document.querySelector(\"#cursor-controller\");\n    this.playerRig = document.querySelector(\"#player-rig\");\n    this._entered = false;\n    this.onRequestAuthentication = () => {};\n  }\n\n  init = () => {\n    this.whenSceneLoaded(() => {\n      this.cursorController.components[\"cursor-controller\"].enabled = false;\n    });\n  };\n\n  hasEntered = () => {\n    return this._entered;\n  };\n\n  enterScene = async (mediaStream, enterInVR) => {\n    const playerCamera = document.querySelector(\"#player-camera\");\n    playerCamera.removeAttribute(\"scene-preview-camera\");\n    playerCamera.object3D.position.set(0, playerHeight, 0);\n\n    // Get aframe inspector url using the webpack file-loader.\n    // Set the aframe-inspector url to our hosted copy.\n    this.scene.setAttribute(\"inspector\", { url: aframeInspectorUrl });\n\n    if (isDebug) {\n      NAF.connection.adapter.session.options.verbose = true;\n    }\n\n    let isCardboard = false;\n\n    if (enterInVR) {\n      // HACK - A-Frame calls getVRDisplays at module load, we want to do it here to\n      // force gamepads to become live.\n      navigator.getVRDisplays();\n\n      isCardboard =\n        AFRAME.utils.device\n          .getVRDisplay()\n          .displayName.toLowerCase()\n          .indexOf(\"cardboard\") >= 0;\n\n      this.scene.enterVR();\n    } else if (AFRAME.utils.device.isMobile() && !AFRAME.utils.device.isIOS()) {\n      document.body.addEventListener(\"touchend\", requestFullscreen);\n    }\n\n    if (!isCardboard) {\n      this.playerRig.removeAttribute(\"cardboard-controls\");\n    }\n\n    if (isMobile || qsTruthy(\"mobile\")) {\n      this.playerRig.setAttribute(\"virtual-gamepad-controls\", {});\n    }\n\n    this._setupPlayerRig();\n    this._setupBlocking();\n    this._setupMedia(mediaStream);\n    this._setupCamera();\n\n    if (qsTruthy(\"offline\")) return;\n\n    this._spawnAvatar();\n\n    if (isBotMode) {\n      this._runBot(mediaStream);\n      return;\n    }\n\n    this.scene.setAttribute(\"motion-capture-replayer\", \"enabled\", false);\n    this.scene.systems[\"motion-capture-replayer\"].remove();\n\n    if (mediaStream) {\n      NAF.connection.adapter.setLocalMediaStream(mediaStream);\n    }\n\n    this.scene.classList.remove(\"hand-cursor\");\n    this.scene.classList.add(\"no-cursor\");\n\n    this.cursorController.components[\"cursor-controller\"].enabled = true;\n    this._entered = true;\n\n    // Delay sending entry event telemetry until VR display is presenting.\n    (async () => {\n      while (enterInVR && !(await navigator.getVRDisplays()).find(d => d.isPresenting)) {\n        await nextTick();\n      }\n\n      this.hubChannel.sendEntryEvent().then(() => {\n        this.store.update({ activity: { lastEnteredAt: new Date().toISOString() } });\n      });\n    })();\n\n    this.scene.addState(\"entered\");\n  };\n\n  whenSceneLoaded = callback => {\n    if (this.scene.hasLoaded) {\n      callback();\n    } else {\n      this.scene.addEventListener(\"loaded\", callback);\n    }\n  };\n\n  enterSceneWhenLoaded = (mediaStream, enterInVR) => {\n    this.whenSceneLoaded(() => this.enterScene(mediaStream, enterInVR));\n  };\n\n  exitScene = () => {\n    if (NAF.connection.adapter && NAF.connection.adapter.localMediaStream) {\n      NAF.connection.adapter.localMediaStream.getTracks().forEach(t => t.stop());\n    }\n    if (this.hubChannel) {\n      this.hubChannel.disconnect();\n    }\n    if (this.scene.renderer) {\n      this.scene.renderer.setAnimationLoop(null); // Stop animation loop, TODO A-Frame should do this\n    }\n    document.body.removeChild(this.scene);\n    document.body.removeEventListener(\"touchend\", requestFullscreen);\n  };\n\n  _setupPlayerRig = () => {\n    this._updatePlayerRigWithProfile();\n    this.store.addEventListener(\"statechanged\", this._updatePlayerRigWithProfile);\n\n    const avatarScale = parseInt(qs.get(\"avatar_scale\"), 10);\n\n    if (avatarScale) {\n      this.playerRig.setAttribute(\"scale\", { x: avatarScale, y: avatarScale, z: avatarScale });\n    }\n  };\n\n  _updatePlayerRigWithProfile = () => {\n    const { avatarId, displayName } = this.store.state.profile;\n    this.playerRig.setAttribute(\"player-info\", {\n      displayName,\n      avatarSrc: avatarId && avatarId.startsWith(\"http\") ? proxiedUrlFor(avatarId) : `#${avatarId || \"botdefault\"}`\n    });\n    const hudController = this.playerRig.querySelector(\"[hud-controller]\");\n    hudController.setAttribute(\"hud-controller\", { showTip: !this.store.state.activity.hasFoundFreeze });\n    this.scene.emit(\"username-changed\", { username: displayName });\n  };\n\n  _setupBlocking = () => {\n    document.body.addEventListener(\"blocked\", ev => {\n      NAF.connection.entities.removeEntitiesOfClient(ev.detail.clientId);\n    });\n\n    document.body.addEventListener(\"unblocked\", ev => {\n      NAF.connection.entities.completeSync(ev.detail.clientId);\n    });\n  };\n\n  _pinElement = el => {\n    const { networkId } = el.components.networked.data;\n\n    const { fileId, src } = el.components[\"media-loader\"].data;\n\n    let fileAccessToken, promotionToken;\n    if (fileId) {\n      fileAccessToken = new URL(src).searchParams.get(\"token\");\n      const storedPromotionToken = getPromotionTokenForFile(fileId);\n      if (storedPromotionToken) {\n        promotionToken = storedPromotionToken.promotionToken;\n      }\n    }\n\n    const gltfNode = pinnedEntityToGltf(el);\n    if (!gltfNode) return;\n    el.setAttribute(\"networked\", { persistent: true });\n    el.setAttribute(\"media-loader\", { fileIsOwned: true });\n\n    this.hubChannel.pin(networkId, gltfNode, fileId, fileAccessToken, promotionToken);\n  };\n\n  _setupMedia = mediaStream => {\n    const offset = { x: 0, y: 0, z: -1.5 };\n    const spawnMediaInfrontOfPlayer = (src, contentOrigin) => {\n      const { entity, orientation } = addMedia(\n        src,\n        \"#interactable-media\",\n        contentOrigin,\n        !(src instanceof MediaStream),\n        true\n      );\n\n      orientation.then(or => {\n        entity.setAttribute(\"offset-relative-to\", {\n          target: \"#player-camera\",\n          offset,\n          orientation: or\n        });\n      });\n\n      return entity;\n    };\n\n    this.scene.addEventListener(\"add_media\", e => {\n      const contentOrigin = e.detail instanceof File ? ObjectContentOrigins.FILE : ObjectContentOrigins.URL;\n\n      spawnMediaInfrontOfPlayer(e.detail, contentOrigin);\n    });\n\n    this.scene.addEventListener(\"pinned\", e => {\n      if (this.hubChannel.signedIn) {\n        this._pinElement(e.detail.el);\n      } else {\n        const wasInVR = this.scene.is(\"vr-mode\");\n        if (wasInVR) this.scene.exitVR();\n        const continueTextId = wasInVR ? \"entry.return-to-vr\" : \"dialog.close\";\n\n        this.onRequestAuthentication(\"sign-in.pin\", \"sign-in.pin-complete\", continueTextId, () => {\n          if (this.hubChannel.signedIn) {\n            this._pinElement(e.detail.el);\n          } else {\n            // UI pins the entity optimistically, so we undo that here.\n            e.detail.el.setAttribute(\"pinnable\", \"pinned\", false);\n          }\n\n          if (wasInVR) this.scene.enterVR();\n        });\n      }\n    });\n\n    this.scene.addEventListener(\"unpinned\", e => {\n      const el = e.detail.el;\n      const components = el.components;\n      const networked = components.networked;\n\n      if (!networked || !networked.data || !NAF.utils.isMine(el)) return;\n\n      const networkId = components.networked.data.networkId;\n      el.setAttribute(\"networked\", { persistent: false });\n\n      const mediaLoader = components[\"media-loader\"];\n      const fileId = mediaLoader.data && mediaLoader.data.fileId;\n\n      this.hubChannel.unpin(networkId, fileId);\n    });\n\n    this.scene.addEventListener(\"object_spawned\", e => {\n      this.hubChannel.sendObjectSpawnedEvent(e.detail.objectType);\n    });\n\n    document.addEventListener(\"paste\", e => {\n      if (e.target.matches(\"input, textarea\") && document.activeElement === e.target) return;\n\n      const url = e.clipboardData.getData(\"text\");\n      const files = e.clipboardData.files && e.clipboardData.files;\n      if (url) {\n        spawnMediaInfrontOfPlayer(url, ObjectContentOrigins.URL);\n      } else {\n        for (const file of files) {\n          spawnMediaInfrontOfPlayer(file, ObjectContentOrigins.CLIPBOARD);\n        }\n      }\n    });\n\n    document.addEventListener(\"dragover\", e => e.preventDefault());\n\n    document.addEventListener(\"drop\", e => {\n      e.preventDefault();\n      const url = e.dataTransfer.getData(\"url\");\n      const files = e.dataTransfer.files;\n      if (url) {\n        spawnMediaInfrontOfPlayer(url, ObjectContentOrigins.URL);\n      } else {\n        for (const file of files) {\n          spawnMediaInfrontOfPlayer(file, ObjectContentOrigins.FILE);\n        }\n      }\n    });\n\n    let currentVideoShareEntity;\n    let isHandlingVideoShare = false;\n\n    const shareVideoMediaStream = async constraints => {\n      if (isHandlingVideoShare) return;\n      isHandlingVideoShare = true;\n\n      const newStream = await navigator.mediaDevices.getUserMedia(constraints);\n      const videoTracks = newStream ? newStream.getVideoTracks() : [];\n\n      if (videoTracks.length > 0) {\n        newStream.getVideoTracks().forEach(track => mediaStream.addTrack(track));\n        NAF.connection.adapter.setLocalMediaStream(mediaStream);\n        currentVideoShareEntity = spawnMediaInfrontOfPlayer(mediaStream, undefined);\n\n        // Wire up custom removal event which will stop the stream.\n        currentVideoShareEntity.setAttribute(\"emit-scene-event-on-remove\", \"event:action_end_video_sharing\");\n      }\n\n      this.scene.emit(\"share_video_enabled\", { source: constraints.video.mediaSource });\n      isHandlingVideoShare = false;\n    };\n\n    this.scene.addEventListener(\"action_share_camera\", () => {\n      shareVideoMediaStream({\n        video: {\n          mediaSource: \"camera\",\n          width: 720,\n          frameRate: 30\n        }\n      });\n    });\n\n    this.scene.addEventListener(\"action_share_window\", () => {\n      shareVideoMediaStream({\n        video: {\n          mediaSource: \"window\",\n          // Work around BMO 1449832 by calculating the width. This will break for multi monitors if you share anything\n          // other than your current monitor that has a different aspect ratio.\n          width: 720 * (screen.width / screen.height),\n          height: 720,\n          frameRate: 30\n        }\n      });\n    });\n\n    this.scene.addEventListener(\"action_share_screen\", () => {\n      shareVideoMediaStream({\n        video: {\n          mediaSource: \"screen\",\n          // Work around BMO 1449832 by calculating the width. This will break for multi monitors if you share anything\n          // other than your current monitor that has a different aspect ratio.\n          width: 720 * (screen.width / screen.height),\n          height: 720,\n          frameRate: 30\n        }\n      });\n    });\n\n    this.scene.addEventListener(\"action_end_video_sharing\", () => {\n      if (isHandlingVideoShare) return;\n      isHandlingVideoShare = true;\n\n      if (currentVideoShareEntity && currentVideoShareEntity.parentNode) {\n        currentVideoShareEntity.parentNode.removeChild(currentVideoShareEntity);\n      }\n\n      for (const track of mediaStream.getVideoTracks()) {\n        mediaStream.removeTrack(track);\n      }\n\n      NAF.connection.adapter.setLocalMediaStream(mediaStream);\n      currentVideoShareEntity = null;\n\n      this.scene.emit(\"share_video_disabled\");\n      isHandlingVideoShare = false;\n    });\n  };\n\n  _setupCamera = () => {\n    this.scene.addEventListener(\"action_spawn_camera\", () => {\n      const entity = document.createElement(\"a-entity\");\n      entity.setAttribute(\"networked\", { template: \"#interactable-camera\" });\n      entity.setAttribute(\"offset-relative-to\", {\n        target: \"#player-camera\",\n        offset: { x: 0, y: 0, z: -1.5 }\n      });\n      this.scene.appendChild(entity);\n    });\n\n    this.scene.addEventListener(\"photo_taken\", e => {\n      this.hubChannel.sendMessage({ src: e.detail }, \"spawn\");\n    });\n  };\n\n  _spawnAvatar = () => {\n    this.playerRig.setAttribute(\"networked\", \"template: #remote-avatar-template; attachTemplateToLocal: false;\");\n    this.playerRig.setAttribute(\"networked-avatar\", \"\");\n    this.playerRig.emit(\"entered\");\n  };\n\n  _runBot = async mediaStream => {\n    console.log(\"Running bot\");\n\n    this.playerRig.setAttribute(\"avatar-replay\", {\n      camera: \"#player-camera\",\n      leftController: \"#player-left-controller\",\n      rightController: \"#player-right-controller\"\n    });\n\n    const audioEl = document.createElement(\"audio\");\n    const audioInput = document.querySelector(\"#bot-audio-input\");\n    audioInput.onchange = () => {\n      audioEl.loop = true;\n      audioEl.muted = true;\n      audioEl.crossorigin = \"anonymous\";\n      audioEl.src = URL.createObjectURL(audioInput.files[0]);\n      document.body.appendChild(audioEl);\n    };\n    const dataInput = document.querySelector(\"#bot-data-input\");\n    dataInput.onchange = () => {\n      const url = URL.createObjectURL(dataInput.files[0]);\n      this.playerRig.setAttribute(\"avatar-replay\", { recordingUrl: url });\n    };\n    await new Promise(resolve => audioEl.addEventListener(\"canplay\", resolve));\n    mediaStream.addTrack(audioEl.captureStream().getAudioTracks()[0]);\n    NAF.connection.adapter.setLocalMediaStream(mediaStream);\n    audioEl.play();\n  };\n}\n","export default function pinnedEntityToGltf(el) {\n  if (!NAF.utils.isMine(el)) return;\n\n  // Construct a GLTF node from this entity\n  const object3D = el.object3D;\n  const components = el.components;\n  const networkId = components.networked.data.networkId;\n\n  const gltfComponents = {};\n  const gltfNode = { name: networkId, extensions: { HUBS_components: gltfComponents } };\n\n  // Adapted from three.js GLTFExporter\n  const equalArray = (x, y) => x.length === y.length && x.every((v, i) => v === y[i]);\n  const rotation = object3D.quaternion.toArray();\n  const position = object3D.position.toArray();\n  const scale = object3D.scale.toArray();\n\n  if (!equalArray(rotation, [0, 0, 0, 1])) gltfNode.rotation = rotation;\n  if (!equalArray(position, [0, 0, 0])) gltfNode.translation = position;\n  if (!equalArray(scale, [1, 1, 1])) gltfNode.scale = scale;\n\n  if (components[\"media-loader\"]) {\n    const mediaSrc = components[\"media-loader\"].data.src;\n\n    if (mediaSrc.startsWith(\"hubs://\") && mediaSrc.endsWith(\"/video\")) {\n      // Do not persist hubs client video urls\n      return null;\n    }\n\n    gltfComponents.media = { src: mediaSrc, id: networkId };\n\n    if (components[\"media-pager\"]) {\n      gltfComponents.media.pageIndex = components[\"media-pager\"].data.index;\n    }\n\n    if (components[\"media-video\"] && components[\"media-video\"].data.videoPaused) {\n      gltfComponents.media.paused = true;\n      gltfComponents.media.time = components[\"media-video\"].data.time;\n    }\n  }\n\n  gltfComponents.pinnable = { pinned: true };\n\n  return gltfNode;\n}\n","import nextTick from \"./utils/next-tick.js\";\n\n// Manages web push subscriptions\n//\nfunction urlBase64ToUint8Array(base64String) {\n  const padding = \"=\".repeat((4 - (base64String.length % 4)) % 4);\n  const base64 = (base64String + padding).replace(/-/g, \"+\").replace(/_/g, \"/\");\n\n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n  return outputArray;\n}\n\nexport default class Subscriptions {\n  constructor(hubId) {\n    this.hubId = hubId;\n  }\n\n  setHubChannel = hubChannel => {\n    this.hubChannel = hubChannel;\n  };\n\n  setRegistration = registration => {\n    this.registration = registration;\n  };\n\n  setRegistrationFailed = () => {\n    this.registration = null;\n  };\n\n  setVapidPublicKey = vapidPublicKey => {\n    this.vapidPublicKey = vapidPublicKey;\n  };\n\n  setSubscribed = isSubscribed => {\n    this._isSubscribed = isSubscribed;\n  };\n\n  isSubscribed = () => {\n    return this._isSubscribed;\n  };\n\n  getCurrentEndpoint = async () => {\n    if (!navigator.serviceWorker) return null;\n\n    // registration becomes null if failed, non null if registered\n    while (this.registration === undefined) await nextTick();\n    if (!this.registration || !this.registration.pushManager) return null;\n\n    while (this.vapidPublicKey === undefined) await nextTick();\n    if (this.vapidPublicKey === null) return null;\n\n    try {\n      const convertedVapidKey = urlBase64ToUint8Array(this.vapidPublicKey);\n\n      if (\n        (await this.registration.pushManager.permissionState({\n          userVisibleOnly: true,\n          applicationServerKey: convertedVapidKey\n        })) !== \"granted\"\n      )\n        return null;\n    } catch (e) {\n      return null; // Chrome can throw here complaining about userVisible if push is not right\n    }\n    const sub = await this.registration.pushManager.getSubscription();\n    if (!sub) return null;\n\n    return sub.endpoint;\n  };\n\n  toggle = async () => {\n    if (!this.registration) return;\n\n    if (this._isSubscribed) {\n      const pushSubscription = await this.registration.pushManager.getSubscription();\n      const res = await this.hubChannel.unsubscribe(pushSubscription);\n\n      if (res && res.has_remaining_subscriptions === false) {\n        pushSubscription.unsubscribe();\n      }\n    } else {\n      let pushSubscription = await this.registration.pushManager.getSubscription();\n\n      if (!pushSubscription) {\n        const convertedVapidKey = urlBase64ToUint8Array(this.vapidPublicKey);\n\n        pushSubscription = await this.registration.pushManager.subscribe({\n          userVisibleOnly: true,\n          applicationServerKey: convertedVapidKey\n        });\n      }\n\n      this.hubChannel.subscribe(pushSubscription);\n    }\n\n    this._isSubscribed = !this._isSubscribed;\n  };\n}\n","const invaderPos = new AFRAME.THREE.Vector3();\nconst bubblePos = new AFRAME.THREE.Vector3();\n\n/**\n * Iterates through bubbles and invaders on every tick and sets invader state accordingly.\n * testing multiline things\n * @namespace avatar/personal-space-bubble\n * @system personal-space-bubble\n */\nAFRAME.registerSystem(\"personal-space-bubble\", {\n  schema: {\n    debug: { default: false },\n    enabled: { default: true }\n  },\n\n  init() {\n    this.invaders = [];\n    this.bubbles = [];\n\n    this.el.addEventListener(\"action_space_bubble\", () => {\n      this.el.setAttribute(\"personal-space-bubble\", { enabled: !this.data.enabled });\n    });\n  },\n\n  registerBubble(bubble) {\n    this.bubbles.push(bubble);\n  },\n\n  unregisterBubble(bubble) {\n    const index = this.bubbles.indexOf(bubble);\n\n    if (index !== -1) {\n      this.bubbles.splice(index, 1);\n    }\n  },\n\n  registerInvader(invader) {\n    NAF.utils.getNetworkedEntity(invader.el).then(networkedEl => {\n      const owner = NAF.utils.getNetworkOwner(networkedEl);\n\n      if (owner !== NAF.clientId) {\n        this.invaders.push(invader);\n      }\n    });\n  },\n\n  unregisterInvader(invader) {\n    const index = this.invaders.indexOf(invader);\n\n    if (index !== -1) {\n      this.invaders.splice(index, 1);\n    }\n  },\n\n  update() {\n    for (let i = 0; i < this.bubbles.length; i++) {\n      this.bubbles[i].updateDebug();\n    }\n\n    for (let i = 0; i < this.invaders.length; i++) {\n      this.invaders[i].updateDebug();\n      if (!this.data.enabled) {\n        this.invaders[i].setInvading(false);\n      }\n    }\n\n    if (this.data.enabled) {\n      this.el.addState(\"spacebubble\");\n    } else {\n      this.el.removeState(\"spacebubble\");\n    }\n  },\n\n  tick() {\n    if (!this.data.enabled) return;\n\n    // precondition for this stuff -- the bubbles and invaders need updated world matrices.\n    // right now this is satisfied because we update the world matrices in the character controller\n\n    for (let i = 0; i < this.invaders.length; i++) {\n      this.invaders[i].setInvading(false);\n    }\n\n    // Loop through all of the space bubbles (usually one)\n    for (let i = 0; i < this.bubbles.length; i++) {\n      const bubble = this.bubbles[i];\n\n      bubblePos.setFromMatrixPosition(bubble.el.object3D.matrixWorld);\n\n      // Hide the invader if inside the bubble\n      for (let j = 0; j < this.invaders.length; j++) {\n        const invader = this.invaders[j];\n\n        invaderPos.setFromMatrixPosition(invader.el.object3D.matrixWorld);\n\n        const distanceSquared = bubblePos.distanceToSquared(invaderPos);\n        const radiusSum = bubble.data.radius + invader.data.radius;\n        if (distanceSquared < radiusSum * radiusSum) {\n          invader.setInvading(true);\n        }\n      }\n    }\n  }\n});\n\nfunction createSphereGizmo(radius) {\n  const geometry = new THREE.SphereBufferGeometry(radius, 10, 10);\n  const wireframe = new THREE.WireframeGeometry(geometry);\n  const line = new THREE.LineSegments(wireframe);\n  line.material.opacity = 0.5;\n  line.material.transparent = true;\n  return line;\n}\n\n// TODO: we need to come up with a more generic way of doing this as this is very specific to our avatars.\n/**\n * Specifies a mesh associated with an invader.\n * @namespace avatar/personal-space-bubble\n * @component space-invader-mesh\n */\nAFRAME.registerComponent(\"space-invader-mesh\", {\n  schema: {\n    meshName: { type: \"string\" }\n  },\n  update() {\n    this.targetMesh = this.el.object3D.getObjectByName(this.data.meshName);\n  }\n});\n\nfunction findInvaderMesh(entity) {\n  while (entity && !(entity.components && entity.components[\"space-invader-mesh\"])) {\n    entity = entity.parentNode;\n  }\n  return entity && entity.components[\"space-invader-mesh\"].targetMesh;\n}\n\nconst DEBUG_OBJ = \"psb-debug\";\n\n/**\n * Represents an entity that can invade a personal space bubble\n * @namespace avatar/personal-space-bubble\n * @component personal-space-invader\n */\nAFRAME.registerComponent(\"personal-space-invader\", {\n  schema: {\n    radius: { type: \"number\", default: 0.1 },\n    useMaterial: { default: false },\n    debug: { default: false },\n    invadingOpacity: { default: 0.3 }\n  },\n\n  init() {\n    const system = this.el.sceneEl.systems[\"personal-space-bubble\"];\n    system.registerInvader(this);\n    if (this.data.useMaterial) {\n      const mesh = findInvaderMesh(this.el);\n      if (mesh) {\n        this.targetMesh = mesh;\n      }\n    }\n    this.invading = false;\n  },\n\n  update() {\n    this.radiusSquared = this.data.radius * this.data.radius;\n    this.updateDebug();\n  },\n\n  updateDebug() {\n    const system = this.el.sceneEl.systems[\"personal-space-bubble\"];\n    if (system.data.debug || this.data.debug) {\n      !this.el.object3DMap[DEBUG_OBJ] && this.el.setObject3D(DEBUG_OBJ, createSphereGizmo(this.data.radius));\n    } else if (this.el.object3DMap[DEBUG_OBJ]) {\n      this.el.removeObject3D(DEBUG_OBJ);\n    }\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"personal-space-bubble\"].unregisterInvader(this);\n  },\n\n  setInvading(invading) {\n    if (this.targetMesh && this.targetMesh.material) {\n      this.targetMesh.material.opacity = invading ? this.data.invadingOpacity : 1;\n      this.targetMesh.material.transparent = invading;\n    } else {\n      this.el.object3D.visible = !invading;\n    }\n    this.invading = invading;\n  }\n});\n\n/**\n * Represents a personal space bubble on an entity.\n * @namespace avatar/personal-space-bubble\n * @component personal-space-bubble\n */\nAFRAME.registerComponent(\"personal-space-bubble\", {\n  schema: {\n    radius: { type: \"number\", default: 0.8 },\n    debug: { default: false }\n  },\n  init() {\n    this.system.registerBubble(this);\n  },\n\n  update() {\n    this.radiusSquared = this.data.radius * this.data.radius;\n    this.updateDebug();\n  },\n\n  updateDebug() {\n    if (this.system.data.debug || this.data.debug) {\n      !this.el.object3DMap[DEBUG_OBJ] && this.el.setObject3D(DEBUG_OBJ, createSphereGizmo(this.data.radius));\n    } else if (this.el.object3DMap[DEBUG_OBJ]) {\n      this.el.removeObject3D(DEBUG_OBJ);\n    }\n  },\n\n  remove() {\n    this.system.unregisterBubble(this);\n  }\n});\n","/**\n * Emits an \"exit\" event when a user has stopped using the app for a certain period of time\n * @system exit-on-blur\n */\nAFRAME.registerSystem(\"exit-on-blur\", {\n  init() {\n    this.onBlur = this.onBlur.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onTimeout = this.onTimeout.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n\n    this.isOculusBrowser = navigator.userAgent.match(/Oculus/);\n    this.enteredVR = false;\n\n    window.addEventListener(\"blur\", this.onBlur);\n    window.addEventListener(\"focus\", this.onFocus);\n    this.el.addEventListener(\"enter-vr\", this.onEnterVR);\n\n    this.lastTimeoutCheck = 0;\n    this.exitTimeout = null;\n  },\n\n  tick(t) {\n    // This is a hack to detect when an Oculus Go user has taken off the headset and the headset has\n    // entered standby mode. Currently Oculus Browser is not emitting a blur, vrdisplaydeactivate,\n    // vrdisplayblur, visibilitychange, or vrdisplaypresentchange event, so we wait 15 seconds after\n    // the last requestAnimationFrame callback to determine if the headset has gone into standby mode.\n    // We also check that you have entered VR so that this timeout does not occur in the setup UI.\n    if (\n      this.isOculusBrowser &&\n      this.enteredVR &&\n      (this.lastTimeoutCheck === 0 || t - this.lastTimeoutCheck >= 1000.0) // Don't do this clear every frame, slow.\n    ) {\n      this.lastTimeoutCheck = t;\n      clearTimeout(this.exitTimeout);\n      this.exitTimeout = setTimeout(this.onTimeout, 15 * 1000);\n    }\n  },\n\n  onEnterVR() {\n    this.enteredVR = true;\n  },\n\n  onBlur() {\n    if (this.el.isMobile) {\n      clearTimeout(this.exitTimeout);\n      this.exitTimeout = setTimeout(this.onTimeout, 30 * 1000);\n    }\n  },\n\n  onFocus() {\n    if (this.el.isMobile) {\n      clearTimeout(this.exitTimeout);\n    }\n  },\n\n  onTimeout() {\n    this.el.dispatchEvent(new CustomEvent(\"exit\"));\n  },\n\n  remove() {\n    clearTimeout(this.exitTimeout);\n    window.removeEventListener(\"blur\", this.onBlur);\n  }\n});\n","// Used for tracking and managing camera tools in the scene\nAFRAME.registerSystem(\"camera-tools\", {\n  init() {\n    this.cameraEls = [];\n  },\n\n  register(el) {\n    this.cameraEls.push(el);\n    el.addEventListener(\"ownership-changed\", this._onOwnershipChange);\n    this.myCamera = null;\n  },\n\n  deregister(el) {\n    this.cameraEls = this.cameraEls.filter(c => c !== el);\n    el.removeEventListener(\"ownership-changed\", this._onOwnershipChange);\n    this.myCamera = null;\n  },\n\n  getMyCamera() {\n    if (this.myCamera) return this.myCamera;\n    this.myCamera = this.cameraEls.find(NAF.utils.isMine);\n    return this.myCamera;\n  },\n\n  _onOwnershipChange() {\n    this.myCamera = null;\n  }\n});\n","import { sets } from \"./sets\";\nimport { paths } from \"./paths\";\n\nimport { MouseDevice } from \"./devices/mouse\";\nimport { KeyboardDevice } from \"./devices/keyboard\";\nimport { HudDevice } from \"./devices/hud\";\nimport { XboxControllerDevice } from \"./devices/xbox-controller\";\nimport { OculusGoControllerDevice } from \"./devices/oculus-go-controller\";\nimport { GearVRControllerDevice } from \"./devices/gear-vr-controller\";\nimport { OculusTouchControllerDevice } from \"./devices/oculus-touch-controller\";\nimport { DaydreamControllerDevice } from \"./devices/daydream-controller\";\nimport { ViveControllerDevice } from \"./devices/vive-controller\";\nimport { WindowsMixedRealityControllerDevice } from \"./devices/windows-mixed-reality-controller\";\nimport { GyroDevice } from \"./devices/gyro\";\n\nimport { AppAwareMouseDevice } from \"./devices/app-aware-mouse\";\nimport { AppAwareTouchscreenDevice } from \"./devices/app-aware-touchscreen\";\n\nimport { keyboardMouseUserBindings } from \"./bindings/keyboard-mouse-user\";\nimport { touchscreenUserBindings } from \"./bindings/touchscreen-user\";\nimport { keyboardDebuggingBindings } from \"./bindings/keyboard-debugging\";\nimport { oculusTouchUserBindings } from \"./bindings/oculus-touch-user\";\nimport { viveUserBindings } from \"./bindings/vive-user\";\nimport { wmrUserBindings } from \"./bindings/windows-mixed-reality-user\";\nimport { xboxControllerUserBindings } from \"./bindings/xbox-controller-user\";\nimport { daydreamUserBindings } from \"./bindings/daydream-user\";\n\nimport generate3DOFTriggerBindings from \"./bindings/oculus-go-user\";\nconst oculusGoUserBindings = generate3DOFTriggerBindings(paths.device.oculusgo);\nconst gearVRControllerUserBindings = generate3DOFTriggerBindings(paths.device.gearVRController);\n\nimport { resolveActionSets } from \"./resolve-action-sets\";\nimport { GamepadDevice } from \"./devices/gamepad\";\nimport { gamepadBindings } from \"./bindings/generic-gamepad\";\nimport { detectInHMD } from \"../../utils/vr-caps-detect\";\n\nfunction intersection(setA, setB) {\n  const _intersection = new Set();\n  for (const elem of setB) {\n    if (setA.has(elem)) {\n      _intersection.add(elem);\n    }\n  }\n  return _intersection;\n}\n\nconst satisfiesPath = (binding, path) => {\n  for (const key in binding.dest) {\n    if (binding.dest[key].indexOf(path) !== -1) {\n      return true;\n    }\n  }\n  return false;\n};\n\nconst satisfyPath = (bindings, path) => {\n  for (const binding of bindings) {\n    if (satisfiesPath(binding, path)) {\n      return true;\n    }\n  }\n  return false;\n};\n\nconst satisfiedBy = (binding, bindings) => {\n  for (const path of Object.values(binding.src)) {\n    if (path.startsWith(\"/device/\")) continue;\n    if (!satisfyPath(bindings, path)) return false;\n  }\n  return true;\n};\n\nfunction dependencySort(mappings) {\n  const unsorted = [];\n  for (const mapping of mappings) {\n    for (const setName in mapping) {\n      for (const binding of mapping[setName]) {\n        unsorted.push(binding);\n      }\n    }\n  }\n\n  const sorted = [];\n  while (unsorted.length > 0) {\n    const binding = unsorted.shift();\n    if (satisfiedBy(binding, sorted)) {\n      sorted.push(binding);\n    } else {\n      unsorted.push(binding);\n    }\n  }\n\n  return sorted;\n}\n\nfunction canMask(masker, masked) {\n  if (masker.priority === undefined) {\n    masker.priority = 0;\n  }\n  if (masked.priority === undefined) {\n    masked.priority = 0;\n  }\n  if (masked.priority >= masker.priority) return false;\n  for (const maskerKey in masker.src) {\n    const maskerPath = masker.src[maskerKey];\n    for (const maskedKey in masked.src) {\n      const maskedPath = masked.src[maskedKey];\n      if (maskedPath.indexOf(maskerPath) !== -1) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nfunction computeMasks(bindings) {\n  const masks = [];\n  for (let row = 0; row < bindings.length; row++) {\n    for (let col = 0; col < bindings.length; col++) {\n      masks[row] = masks[row] || [];\n      if (canMask(bindings[col], bindings[row])) {\n        masks[row].push(col);\n      }\n    }\n  }\n  return masks;\n}\n\nfunction isActive(binding, sets) {\n  for (let i = 0; i < binding.sets.length; i++) {\n    if (sets.has(binding.sets[i])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction computeExecutionStrategy(sortedBindings, masks, activeSets) {\n  const actives = [];\n  for (let row = 0; row < sortedBindings.length; row++) {\n    actives[row] = isActive(sortedBindings[row], activeSets);\n  }\n\n  const masked = [];\n  for (let row = 0; row < sortedBindings.length; row++) {\n    for (let col = 0; col < sortedBindings.length; col++) {\n      masked[row] = masked[row] || [];\n      if (masks[row].indexOf(col) !== -1 && isActive(sortedBindings[col], activeSets)) {\n        masked[row].push(col);\n      }\n    }\n  }\n\n  return { actives, masked };\n}\n\nAFRAME.registerSystem(\"userinput\", {\n  get(path) {\n    return this.frame && this.frame[path];\n  },\n\n  toggleSet(set, value) {\n    this.pendingSetChanges.push({ set, value });\n  },\n\n  init() {\n    this.frame = {};\n\n    this.prevActiveSets = new Set();\n    this.activeSets = new Set([sets.global]);\n    this.pendingSetChanges = [];\n    this.xformStates = new Map();\n    this.activeDevices = new Set([new HudDevice()]);\n\n    if (!AFRAME.utils.device.isMobile()) {\n      this.activeDevices.add(new MouseDevice());\n      this.activeDevices.add(new AppAwareMouseDevice());\n      this.activeDevices.add(new KeyboardDevice());\n    } else if (!detectInHMD()) {\n      this.activeDevices.add(new AppAwareTouchscreenDevice());\n      this.activeDevices.add(new KeyboardDevice());\n      this.activeDevices.add(new GyroDevice());\n    }\n\n    this.registeredMappings = new Set([keyboardDebuggingBindings]);\n    this.registeredMappingsChanged = true;\n\n    const vrGamepadMappings = new Map();\n    vrGamepadMappings.set(WindowsMixedRealityControllerDevice, wmrUserBindings);\n    vrGamepadMappings.set(ViveControllerDevice, viveUserBindings);\n    vrGamepadMappings.set(OculusTouchControllerDevice, oculusTouchUserBindings);\n    vrGamepadMappings.set(OculusGoControllerDevice, oculusGoUserBindings);\n    vrGamepadMappings.set(GearVRControllerDevice, gearVRControllerUserBindings);\n    vrGamepadMappings.set(DaydreamControllerDevice, daydreamUserBindings);\n\n    const nonVRGamepadMappings = new Map();\n    nonVRGamepadMappings.set(XboxControllerDevice, xboxControllerUserBindings);\n    nonVRGamepadMappings.set(GamepadDevice, gamepadBindings);\n\n    const updateBindingsForVRMode = () => {\n      const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n      const isMobile = AFRAME.utils.device.isMobile();\n\n      if (inVRMode) {\n        console.log(\"Using VR bindings.\");\n        this.registeredMappings.delete(isMobile ? touchscreenUserBindings : keyboardMouseUserBindings);\n        // add mappings for all active VR input devices\n        for (const activeDevice of this.activeDevices) {\n          const mapping = vrGamepadMappings.get(activeDevice.constructor);\n          mapping && this.registeredMappings.add(mapping);\n        }\n      } else {\n        console.log(\"Using Non-VR bindings.\");\n        // remove mappings for all active VR input devices\n        for (const activeDevice of this.activeDevices) {\n          this.registeredMappings.delete(vrGamepadMappings.get(activeDevice.constructor));\n        }\n        this.registeredMappings.add(isMobile ? touchscreenUserBindings : keyboardMouseUserBindings);\n      }\n\n      for (const activeDevice of this.activeDevices) {\n        const mapping = nonVRGamepadMappings.get(activeDevice.constructor);\n        mapping && this.registeredMappings.add(mapping);\n      }\n\n      this.registeredMappingsChanged = true;\n    };\n\n    const gamepadConnected = e => {\n      let gamepadDevice;\n      for (const activeDevice of this.activeDevices) {\n        if (activeDevice.gamepad && activeDevice.gamepad.index === e.gamepad.index) {\n          console.warn(\"connected already fired for gamepad\", e.gamepad);\n          return; // multiple connect events without a disconnect event\n        }\n      }\n      if (e.gamepad.id === \"OpenVR Gamepad\") {\n        gamepadDevice = new ViveControllerDevice(e.gamepad);\n      } else if (e.gamepad.id.startsWith(\"Oculus Touch\")) {\n        gamepadDevice = new OculusTouchControllerDevice(e.gamepad);\n      } else if (e.gamepad.id.startsWith(\"Spatial Controller\")) {\n        gamepadDevice = new WindowsMixedRealityControllerDevice(e.gamepad);\n      } else if (e.gamepad.id === \"Oculus Go Controller\") {\n        gamepadDevice = new OculusGoControllerDevice(e.gamepad);\n        // Note that FXR reports Vive Focus' controller as GearVR, so this is primarily to support that\n      } else if (e.gamepad.id === \"Gear VR Controller\") {\n        gamepadDevice = new GearVRControllerDevice(e.gamepad);\n      } else if (e.gamepad.id === \"Daydream Controller\") {\n        gamepadDevice = new DaydreamControllerDevice(e.gamepad);\n      } else if (e.gamepad.id.includes(\"Xbox\")) {\n        gamepadDevice = new XboxControllerDevice(e.gamepad);\n      } else {\n        gamepadDevice = new GamepadDevice(e.gamepad);\n      }\n\n      this.activeDevices.add(gamepadDevice);\n\n      updateBindingsForVRMode();\n    };\n\n    const gamepadDisconnected = e => {\n      for (const device of this.activeDevices) {\n        if (device.gamepad && device.gamepad.index === e.gamepad.index) {\n          this.registeredMappings.delete(\n            vrGamepadMappings.get(device.constructor) || nonVRGamepadMappings.get(device.constructor)\n          );\n          this.activeDevices.delete(device);\n          return;\n        }\n      }\n\n      updateBindingsForVRMode();\n    };\n\n    window.addEventListener(\"gamepadconnected\", gamepadConnected, false);\n    window.addEventListener(\"gamepaddisconnected\", gamepadDisconnected, false);\n    for (const gamepad of navigator.getGamepads()) {\n      gamepad && gamepadConnected({ gamepad });\n    }\n\n    this.el.sceneEl.addEventListener(\"enter-vr\", updateBindingsForVRMode);\n    this.el.sceneEl.addEventListener(\"exit-vr\", updateBindingsForVRMode);\n\n    updateBindingsForVRMode();\n  },\n\n  tick() {\n    const registeredMappingsChanged = this.registeredMappingsChanged;\n    if (registeredMappingsChanged) {\n      this.registeredMappingsChanged = false;\n      this.prevSortedBindings = this.sortedBindings;\n      this.sortedBindings = dependencySort(this.registeredMappings);\n      if (!this.prevSortedBindings) {\n        this.prevSortedBindings = this.sortedBindings;\n      }\n      this.masks = computeMasks(this.sortedBindings);\n    }\n\n    this.prevActiveSets.clear();\n    for (const item of this.activeSets) {\n      this.prevActiveSets.add(item);\n    }\n    resolveActionSets();\n    for (const { set, value } of this.pendingSetChanges) {\n      this.activeSets[value ? \"add\" : \"delete\"](set);\n    }\n    const activeSetsChanged =\n      this.prevActiveSets.size !== this.activeSets.size ||\n      intersection(this.prevActiveSets, this.activeSets).size !== this.activeSets.size;\n    this.pendingSetChanges.length = 0;\n    if (registeredMappingsChanged || activeSetsChanged || (!this.actives && !this.masked)) {\n      this.prevActives = this.actives;\n      this.prevMasked = this.masked;\n      const { actives, masked } = computeExecutionStrategy(this.sortedBindings, this.masks, this.activeSets);\n      this.actives = actives;\n      this.masked = masked;\n    }\n\n    this.frame = {};\n    for (const device of this.activeDevices) {\n      device.write(this.frame);\n    }\n\n    for (let i = 0; i < this.sortedBindings.length; i++) {\n      if (!this.actives[i] || this.masked[i].length > 0) continue;\n\n      const binding = this.sortedBindings[i];\n\n      let bindingExistedLastFrame = true;\n      if (!registeredMappingsChanged && activeSetsChanged && this.prevSortedBindings) {\n        const j = this.prevSortedBindings.indexOf(binding);\n        bindingExistedLastFrame = j > -1 && this.prevActives[j] && this.prevMasked[j].length === 0;\n      }\n      if (!bindingExistedLastFrame) {\n        this.xformStates.delete(binding);\n      }\n\n      const { src, dest, xform } = binding;\n      const newState = xform(this.frame, src, dest, this.xformStates.get(binding));\n      if (newState !== undefined) {\n        this.xformStates.set(binding, newState);\n      }\n    }\n\n    this.prevSortedBindings = this.sortedBindings;\n    this.prevFrame = this.frame;\n  }\n});\n","import { paths } from \"../paths\";\n\n// TODO: Where do these values (500, 10, 2) come from?\nconst modeMod = {\n  [WheelEvent.DOM_DELTA_PIXEL]: 500,\n  [WheelEvent.DOM_DELTA_LINE]: 10,\n  [WheelEvent.DOM_DELTA_PAGE]: 2\n};\n\nexport class MouseDevice {\n  constructor() {\n    this.events = [];\n    this.coords = [0, 0]; // normalized screenspace coordinates in [(-1, 1), (-1, 1)]\n    this.movementXY = [0, 0]; // deltas\n    this.buttonLeft = false;\n    this.buttonRight = false;\n    this.wheel = 0; // delta\n\n    const queueEvent = this.events.push.bind(this.events);\n    const canvas = document.querySelector(\"canvas\");\n    [\"mousedown\", \"wheel\"].map(x => canvas.addEventListener(x, queueEvent));\n    [\"mousemove\", \"mouseup\"].map(x => window.addEventListener(x, queueEvent));\n    document.addEventListener(\"wheel\", e => {\n      e.preventDefault();\n    });\n  }\n\n  process(event) {\n    if (event.type === \"wheel\") {\n      this.wheel += (event.deltaX + event.deltaY) / modeMod[event.deltaMode];\n      return;\n    }\n\n    const left = event.button === 0;\n    const right = event.button === 2;\n    this.coords[0] = (event.clientX / window.innerWidth) * 2 - 1;\n    this.coords[1] = -(event.clientY / window.innerHeight) * 2 + 1;\n    this.movementXY[0] += event.movementX;\n    this.movementXY[1] += event.movementY;\n    if (event.type === \"mousedown\" && left) {\n      this.buttonLeft = true;\n    } else if (event.type === \"mousedown\" && right) {\n      this.buttonRight = true;\n    } else if (event.type === \"mouseup\" && left) {\n      this.buttonLeft = false;\n    } else if (event.type === \"mouseup\" && right) {\n      this.buttonRight = false;\n    }\n  }\n\n  write(frame) {\n    this.movementXY = [0, 0]; // deltas\n    this.wheel = 0; // delta\n    this.events.forEach(event => {\n      this.process(event, frame);\n    });\n\n    while (this.events.length) {\n      this.events.pop();\n    }\n\n    frame[paths.device.mouse.coords] = this.coords;\n    frame[paths.device.mouse.movementXY] = this.movementXY;\n    frame[paths.device.mouse.buttonLeft] = this.buttonLeft;\n    frame[paths.device.mouse.buttonRight] = this.buttonRight;\n    frame[paths.device.mouse.wheel] = this.wheel;\n  }\n}\n\nwindow.oncontextmenu = e => {\n  e.preventDefault();\n};\n","import { paths } from \"../paths\";\nexport class KeyboardDevice {\n  constructor() {\n    this.keys = {};\n    this.events = [];\n\n    [\"keydown\", \"keyup\"].map(x => document.addEventListener(x, this.events.push.bind(this.events)));\n    [\"blur\"].map(x => window.addEventListener(x, this.events.push.bind(this.events)));\n  }\n\n  write(frame) {\n    this.events.forEach(event => {\n      if (event.type === \"blur\") {\n        this.keys = {};\n        return;\n      }\n      this.keys[paths.device.keyboard.key(event.key)] = event.type === \"keydown\";\n    });\n    while (this.events.length) {\n      this.events.pop();\n    }\n    Object.assign(frame, this.keys);\n  }\n}\n","import { paths } from \"../paths\";\n\nexport class HudDevice {\n  constructor() {\n    this.events = [];\n    document.querySelector(\"a-scene\").addEventListener(\"penButtonPressed\", this.events.push.bind(this.events));\n  }\n\n  write(frame) {\n    frame[paths.device.hud.penButton] = this.events.length !== 0;\n    while (this.events.length) {\n      this.events.pop();\n    }\n  }\n}\n","import { paths } from \"../paths\";\n\nexport class XboxControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n    this.buttonMap = [\n      { name: \"a\", buttonId: 0 },\n      { name: \"b\", buttonId: 1 },\n      { name: \"x\", buttonId: 2 },\n      { name: \"y\", buttonId: 3 },\n      { name: \"leftBumper\", buttonId: 4 },\n      { name: \"rightBumper\", buttonId: 5 },\n      { name: \"leftTrigger\", buttonId: 6 },\n      { name: \"rightTrigger\", buttonId: 7 },\n      { name: \"back\", buttonId: 8 },\n      { name: \"start\", buttonId: 9 },\n      { name: \"leftJoystick\", buttonId: 10 },\n      { name: \"rightJoystick\", buttonId: 11 },\n      { name: \"dpadUp\", buttonId: 12 },\n      { name: \"dpadDown\", buttonId: 13 },\n      { name: \"dpadLeft\", buttonId: 14 },\n      { name: \"dpadRight\", buttonId: 15 }\n    ];\n    this.axisMap = [\n      { name: \"leftJoystickHorizontal\", axisId: 0 },\n      { name: \"leftJoystickVertical\", axisId: 1 },\n      { name: \"rightJoystickHorizontal\", axisId: 2 },\n      { name: \"rightJoystickVertical\", axisId: 3 }\n    ];\n  }\n\n  write(frame) {\n    if (this.gamepad.connected) {\n      this.gamepad.buttons.forEach((button, i) => {\n        const buttonPath = paths.device.gamepad(this.gamepad.index).button(i);\n        frame[buttonPath.pressed] = !!button.pressed;\n        frame[buttonPath.touched] = !!button.touched;\n        frame[buttonPath.value] = button.value;\n      });\n      this.gamepad.axes.forEach((axis, i) => {\n        frame[paths.device.gamepad(this.gamepad.index).axis(i)] = axis;\n      });\n\n      this.buttonMap.forEach(button => {\n        const outpath = paths.device.xbox.button(button.name);\n        frame[outpath.pressed] = !!frame[paths.device.gamepad(this.gamepad.index).button(button.buttonId).pressed];\n        frame[outpath.touched] = !!frame[paths.device.gamepad(this.gamepad.index).button(button.buttonId).touched];\n        frame[outpath.value] = frame[paths.device.gamepad(this.gamepad.index).button(button.buttonId).value];\n      });\n      this.axisMap.forEach(axis => {\n        frame[paths.device.xbox.axis(axis.name)] = frame[paths.device.gamepad(this.gamepad.index).axis(axis.axisId)];\n      });\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\n\nexport class OculusGoControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.pose = new Pose();\n  }\n\n  write(frame) {\n    if (this.gamepad.connected) {\n      frame[paths.device.oculusgo.touchpad.axisX] = this.gamepad.axes[0];\n      frame[paths.device.oculusgo.touchpad.axisY] = this.gamepad.axes[1];\n      frame[paths.device.oculusgo.touchpad.pressed] = this.gamepad.buttons[0].pressed;\n      frame[paths.device.oculusgo.touchpad.touched] = this.gamepad.buttons[0].touched;\n      frame[paths.device.oculusgo.touchpad.value] = this.gamepad.buttons[0].value;\n      frame[paths.device.oculusgo.trigger.pressed] = this.gamepad.buttons[1].pressed;\n      frame[paths.device.oculusgo.trigger.touched] = this.gamepad.buttons[1].touched;\n      frame[paths.device.oculusgo.trigger.value] = this.gamepad.buttons[1].value;\n\n      // TODO ideally we should just be getting pose from the gamepad\n      if (!this.rayObject) {\n        this.rayObject = document.querySelector(`#player-${this.gamepad.hand}-controller`).object3D;\n      }\n      if (this.rayObject.updateMatricies) {\n        this.rayObject.updateMatricies();\n      } else {\n        this.rayObject.updateMatrixWorld();\n      }\n      const rayMatrixWorld = this.rayObject.matrixWorld;\n      this.rayObjectRotation.setFromRotationMatrix(rayMatrixWorld);\n      this.pose.position.setFromMatrixPosition(rayMatrixWorld);\n      this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n      this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n      frame[paths.device.oculusgo.pose] = this.pose;\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\n\nexport class GearVRControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n    this.buttonMap = [{ name: \"touchpad\", buttonId: 0 }, { name: \"trigger\", buttonId: 1 }];\n    this.axisMap = [{ name: \"touchpadX\", axisId: 0 }, { name: \"touchpadY\", axisId: 1 }];\n\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.selector = `#player-${gamepad.hand}-controller`;\n    this.pose = new Pose();\n  }\n\n  write(frame) {\n    if (this.gamepad.connected) {\n      this.gamepad.buttons.forEach((button, i) => {\n        const buttonPath = paths.device.gamepad(this.gamepad.index).button(i);\n        frame[buttonPath.pressed] = !!button.pressed;\n        frame[buttonPath.touched] = !!button.touched;\n        frame[buttonPath.value] = button.value;\n      });\n      this.gamepad.axes.forEach((axis, i) => {\n        frame[paths.device.gamepad(this.gamepad.index).axis(i)] = axis;\n      });\n\n      this.buttonMap.forEach(button => {\n        const outpath = paths.device.gearVRController.button(button.name);\n        frame[outpath.pressed] = !!frame[paths.device.gamepad(this.gamepad.index).button(button.buttonId).pressed];\n        frame[outpath.touched] = !!frame[paths.device.gamepad(this.gamepad.index).button(button.buttonId).touched];\n        frame[outpath.value] = frame[paths.device.gamepad(this.gamepad.index).button(button.buttonId).value];\n      });\n      this.axisMap.forEach(axis => {\n        frame[paths.device.gearVRController.axis(axis.name)] =\n          frame[paths.device.gamepad(this.gamepad.index).axis(axis.axisId)];\n      });\n\n      // TODO ideally we should just be getting pose from the gamepad\n      if (!this.rayObject) {\n        this.rayObject = document.querySelector(this.selector).object3D;\n      }\n      this.rayObject.updateMatrixWorld();\n      this.rayObjectRotation.setFromRotationMatrix(this.rayObject.matrixWorld);\n      this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n      this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n      this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n      frame[paths.device.gearVRController.pose] = this.pose;\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\n\nexport const leftOculusTouchButtonMap = [\n  { name: \"thumbStick\", buttonId: 0 },\n  { name: \"trigger\", buttonId: 1 },\n  { name: \"grip\", buttonId: 2 },\n  { name: \"x\", buttonId: 3 },\n  { name: \"y\", buttonId: 4 }\n];\nexport const rightOculusTouchButtonMap = [\n  { name: \"thumbStick\", buttonId: 0 },\n  { name: \"trigger\", buttonId: 1 },\n  { name: \"grip\", buttonId: 2 },\n  { name: \"a\", buttonId: 3 },\n  { name: \"b\", buttonId: 4 }\n];\n\nexport class OculusTouchControllerDevice {\n  constructor(gamepad) {\n    this.rayObjectRotation = new THREE.Quaternion();\n\n    // wake the gamepad api up. otherwise it does not report touch controllers.\n    // in chrome it still won't unless you enter vr.\n    navigator.getVRDisplays();\n\n    const buttonMaps = {\n      left: leftOculusTouchButtonMap,\n      right: rightOculusTouchButtonMap\n    };\n\n    const devicePaths = {\n      left: paths.device.leftOculusTouch,\n      right: paths.device.rightOculusTouch\n    };\n\n    this.gamepad = gamepad;\n    this.pose = new Pose();\n    this.buttonMap = buttonMaps[gamepad.hand];\n    this.axisMap = [{ name: \"joyX\", axisId: 0 }, { name: \"joyY\", axisId: 1 }];\n    this.path = devicePaths[gamepad.hand];\n    this.selector = `#player-${gamepad.hand}-controller`;\n  }\n  write(frame) {\n    if (!this.gamepad.connected) return;\n\n    for (let i = 0; i < this.gamepad.buttons.length; i++) {\n      const buttonPath = paths.device.gamepad(this.gamepad.index).button(i);\n      const button = this.gamepad.buttons[i];\n      frame[buttonPath.pressed] = !!button.pressed;\n      frame[buttonPath.touched] = !!button.touched;\n      frame[buttonPath.value] = button.value;\n    }\n    for (let i = 0; i < this.gamepad.axes.length; i++) {\n      const axis = this.gamepad.axes[i];\n      frame[paths.device.gamepad(this.gamepad.index).axis(i)] = axis;\n    }\n\n    this.buttonMap.forEach(button => {\n      const outpath = this.path.button(button.name);\n      frame[outpath.pressed] = !!frame[paths.device.gamepad(this.gamepad.index).button(button.buttonId).pressed];\n      frame[outpath.touched] = !!frame[paths.device.gamepad(this.gamepad.index).button(button.buttonId).touched];\n      frame[outpath.value] = frame[paths.device.gamepad(this.gamepad.index).button(button.buttonId).value];\n    });\n    this.axisMap.forEach(axis => {\n      frame[this.path.axis(axis.name)] = frame[paths.device.gamepad(this.gamepad.index).axis(axis.axisId)];\n    });\n\n    this.rayObject = this.rayObject || document.querySelector(this.selector).object3D;\n    this.rayObject.updateMatrixWorld();\n    this.rayObjectRotation.setFromRotationMatrix(this.rayObject.matrixWorld);\n    this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n    this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n    this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n    frame[this.path.pose] = this.pose;\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\n\nexport class DaydreamControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n    this.buttonMap = [{ name: \"touchpad\", buttonId: 0 }];\n    this.axisMap = [{ name: \"touchpadX\", axisId: 0 }, { name: \"touchpadY\", axisId: 1 }];\n\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.selector = `#player-${gamepad.hand}-controller`;\n    this.pose = new Pose();\n  }\n\n  write(frame) {\n    if (this.gamepad.connected) {\n      this.gamepad.buttons.forEach((button, i) => {\n        const buttonPath = paths.device.gamepad(this.gamepad.index).button(i);\n        frame[buttonPath.pressed] = !!button.pressed;\n        frame[buttonPath.touched] = !!button.touched;\n        frame[buttonPath.value] = button.value;\n      });\n      this.gamepad.axes.forEach((axis, i) => {\n        frame[paths.device.gamepad(this.gamepad.index).axis(i)] = axis;\n      });\n\n      this.buttonMap.forEach(button => {\n        const outpath = paths.device.daydream.button(button.name);\n        frame[outpath.pressed] = !!frame[paths.device.gamepad(this.gamepad.index).button(button.buttonId).pressed];\n        frame[outpath.touched] = !!frame[paths.device.gamepad(this.gamepad.index).button(button.buttonId).touched];\n        frame[outpath.value] = frame[paths.device.gamepad(this.gamepad.index).button(button.buttonId).value];\n      });\n      this.axisMap.forEach(axis => {\n        frame[paths.device.daydream.axis(axis.name)] =\n          frame[paths.device.gamepad(this.gamepad.index).axis(axis.axisId)];\n      });\n\n      // TODO ideally we should just be getting pose from the gamepad\n      if (!this.rayObject) {\n        this.rayObject = document.querySelector(this.selector).object3D;\n      }\n      this.rayObject.updateMatrixWorld();\n      this.rayObjectRotation.setFromRotationMatrix(this.rayObject.matrixWorld);\n      this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n      this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n      this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n      frame[paths.device.daydream.pose] = this.pose;\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\n\nexport class ViveControllerDevice {\n  constructor(gamepad) {\n    this.rayObjectRotation = new THREE.Quaternion();\n\n    // wake the gamepad api up. otherwise it does not report touch controllers.\n    // in chrome it still won't unless you enter vr.\n    navigator.getVRDisplays();\n\n    this.buttonMap = [\n      { name: \"touchpad\", buttonId: 0 },\n      { name: \"trigger\", buttonId: 1 },\n      { name: \"grip\", buttonId: 2 },\n      { name: \"top\", buttonId: 3 }\n    ];\n\n    this.gamepad = gamepad;\n    this.pose = new Pose();\n    this.axisMap = [{ name: \"joyX\", axisId: 0 }, { name: \"joyY\", axisId: 1 }];\n    this.path = paths.device.vive[gamepad.hand || \"right\"];\n    if (!gamepad.hand) {\n      console.warn(\"gamepad detected without hand specified\");\n    } else {\n      this.selector = `[super-hands]#player-${gamepad.hand}-controller`;\n    }\n  }\n  write(frame) {\n    if (!this.gamepad.connected) return;\n\n    this.gamepad.buttons.forEach((button, i) => {\n      const buttonPath = paths.device.gamepad(this.gamepad.index).button(i);\n      frame[buttonPath.pressed] = !!button.pressed;\n      frame[buttonPath.touched] = !!button.touched;\n      frame[buttonPath.value] = button.value;\n    });\n    this.gamepad.axes.forEach((axis, i) => {\n      frame[paths.device.gamepad(this.gamepad.index).axis(i)] = axis;\n    });\n\n    this.buttonMap.forEach(button => {\n      const outpath = this.path.button(button.name);\n      frame[outpath.pressed] = !!frame[paths.device.gamepad(this.gamepad.index).button(button.buttonId).pressed];\n      frame[outpath.touched] = !!frame[paths.device.gamepad(this.gamepad.index).button(button.buttonId).touched];\n      frame[outpath.value] = frame[paths.device.gamepad(this.gamepad.index).button(button.buttonId).value];\n    });\n    this.axisMap.forEach(axis => {\n      frame[this.path.axis(axis.name)] = frame[paths.device.gamepad(this.gamepad.index).axis(axis.axisId)];\n    });\n\n    if (!this.selector) {\n      if (this.gamepad.hand) {\n        this.path = paths.device.vive[this.gamepad.hand];\n        this.selector = `[super-hands]#player-${this.gamepad.hand}-controller`;\n        console.warn(\"gamepad hand eventually specified\");\n      } else {\n        return;\n      }\n    }\n    const el = document.querySelector(this.selector);\n    if (el.components[\"tracked-controls\"].controller !== this.gamepad) {\n      el.components[\"tracked-controls\"].controller = this.gamepad;\n      el.setAttribute(\"tracked-controls\", \"controller\", this.gamepad.index);\n    }\n    const rayObject = el.object3D;\n    rayObject.updateMatrixWorld();\n    this.rayObjectRotation.setFromRotationMatrix(rayObject.matrixWorld);\n    this.pose.position.setFromMatrixPosition(rayObject.matrixWorld);\n    this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n    this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n    frame[this.path.pose] = this.pose;\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\n\nexport class WindowsMixedRealityControllerDevice {\n  constructor(gamepad) {\n    this.rayObject = null;\n    this.rayObjectRotation = new THREE.Quaternion();\n\n    // wake the gamepad api up. otherwise it does not report touch controllers.\n    // in chrome it still won't unless you enter vr.\n    navigator.getVRDisplays();\n\n    this.gamepad = gamepad;\n    this.pose = new Pose();\n\n    if (gamepad.hand) {\n      this.selector = `#player-${gamepad.hand}-controller`;\n    }\n  }\n  write(frame) {\n    if (!this.gamepad.connected) return;\n\n    const path = paths.device.wmr[this.gamepad.hand || \"right\"];\n\n    frame[path.touchpad.pressed] = this.gamepad.buttons[0].pressed;\n    frame[path.touchpad.touched] = this.gamepad.buttons[0].touched;\n    frame[path.touchpad.value] = this.gamepad.buttons[0].value;\n\n    frame[path.trigger.pressed] = this.gamepad.buttons[1].pressed;\n    frame[path.trigger.touched] = this.gamepad.buttons[1].touched;\n    frame[path.trigger.value] = this.gamepad.buttons[1].value;\n\n    frame[path.grip.pressed] = this.gamepad.buttons[2].pressed;\n    frame[path.grip.touched] = this.gamepad.buttons[2].touched;\n    frame[path.grip.value] = this.gamepad.buttons[2].value;\n\n    frame[path.menu.pressed] = this.gamepad.buttons[3].pressed;\n    frame[path.menu.touched] = this.gamepad.buttons[3].touched;\n    frame[path.menu.value] = this.gamepad.buttons[3].value;\n\n    frame[path.touchpad.axisX] = this.gamepad.axes[0];\n    frame[path.touchpad.axisY] = this.gamepad.axes[1];\n    frame[path.joystick.axisX] = this.gamepad.axes[2];\n    frame[path.joystick.axisY] = this.gamepad.axes[3];\n\n    if (!this.selector) {\n      if (!this.gamepad.hand) return;\n      this.selector = `#player-${this.gamepad.hand}-controller`;\n    }\n\n    this.rayObject = this.rayObject || document.querySelector(this.selector).object3D;\n    this.rayObject.updateMatrixWorld();\n    this.rayObjectRotation.setFromRotationMatrix(this.rayObject.matrixWorld);\n\n    this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n    this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n    this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n    frame[path.pose] = this.pose;\n  }\n}\n","import { paths } from \"../paths\";\n\nconst TWOPI = Math.PI * 2;\n\nclass CircularBuffer {\n  constructor(length) {\n    this.items = new Array(length).fill(0);\n    this.writePtr = 0;\n  }\n\n  push(item) {\n    this.items[this.writePtr] = item;\n    this.writePtr = (this.writePtr + 1) % this.items.length;\n  }\n}\n\nconst abs = Math.abs;\n// Input: two numbers between [-Math.PI, Math.PI]\n// Output: difference between them, where -Math.PI === Math.PI\nconst difference = (curr, prev) => {\n  const a = curr - prev;\n  const b = curr + TWOPI - prev;\n  const c = curr - (prev + TWOPI);\n  if (abs(a) < abs(b)) {\n    if (abs(a) < abs(c)) {\n      return a;\n    }\n  }\n  if (abs(b) < abs(c)) {\n    return b;\n  }\n\n  return c;\n};\n\nconst average = a => {\n  let sum = 0;\n  for (let i = 0; i < a.length; i++) {\n    const n = a[i];\n    sum += n;\n  }\n  return sum / a.length;\n};\n\nexport class GyroDevice {\n  constructor() {\n    this.hmdEuler = new THREE.Euler();\n    this.hmdQuaternion = new THREE.Quaternion();\n    this.prevX = this.hmdEuler.x;\n    this.prevY = this.hmdEuler.y;\n    this.dXBuffer = new CircularBuffer(6);\n    this.dYBuffer = new CircularBuffer(6);\n    this.vrDisplay = window.webvrpolyfill.getPolyfillDisplays()[0];\n    this.frameData = new window.webvrpolyfill.constructor.VRFrameData();\n  }\n\n  write(frame) {\n    const hmdEuler = this.hmdEuler;\n    this.vrDisplay.getFrameData(this.frameData);\n    if (this.frameData.pose.orientation !== null) {\n      this.hmdQuaternion.fromArray(this.frameData.pose.orientation);\n      hmdEuler.setFromQuaternion(this.hmdQuaternion, \"YXZ\");\n    }\n\n    const dX = THREE.Math.RAD2DEG * difference(hmdEuler.x, this.prevX);\n    const dY = THREE.Math.RAD2DEG * difference(hmdEuler.y, this.prevY);\n\n    this.dXBuffer.push(Math.abs(dX) < 0.001 ? 0 : dX);\n    this.dYBuffer.push(Math.abs(dY) < 0.001 ? 0 : dY);\n\n    this.averageDeltaX = average(this.dXBuffer.items);\n    this.averageDeltaY = average(this.dYBuffer.items);\n\n    this.prevX = hmdEuler.x;\n    this.prevY = hmdEuler.y;\n    frame[paths.device.gyro.averageDeltaX] = this.averageDeltaX;\n    frame[paths.device.gyro.averageDeltaY] = this.averageDeltaY;\n  }\n}\n","import { sets } from \"../sets\";\nimport { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\n\nconst calculateCursorPose = function(camera, coords, origin, direction, cursorPose) {\n  origin.setFromMatrixPosition(camera.matrixWorld);\n  direction\n    .set(coords[0], coords[1], 0.5)\n    .unproject(camera)\n    .sub(origin)\n    .normalize();\n  cursorPose.fromOriginAndDirection(origin, direction);\n  return cursorPose;\n};\n\nexport class AppAwareMouseDevice {\n  constructor() {\n    this.prevButtonLeft = false;\n    this.clickedOnAnything = false;\n    this.cursorPose = new Pose();\n    this.prevCursorPose = new Pose();\n    this.origin = new THREE.Vector3();\n    this.prevOrigin = new THREE.Vector3();\n    this.direction = new THREE.Vector3();\n    this.prevDirection = new THREE.Vector3();\n  }\n\n  write(frame) {\n    this.prevCursorPose.copy(this.cursorPose);\n    this.prevOrigin.copy(this.origin);\n    this.prevDirection.copy(this.prevDirection);\n\n    if (!this.cursorController) {\n      this.cursorController = document.querySelector(\"[cursor-controller]\").components[\"cursor-controller\"];\n    }\n\n    if (!this.camera) {\n      this.camera = document.querySelector(\"#player-camera\").components.camera.camera;\n    }\n\n    const buttonLeft = frame[paths.device.mouse.buttonLeft];\n    const buttonRight = frame[paths.device.mouse.buttonRight];\n    if (buttonLeft && !this.prevButtonLeft) {\n      const rawIntersections = [];\n      this.cursorController.raycaster.intersectObjects(this.cursorController.targets, true, rawIntersections);\n      const intersection = rawIntersections.find(x => x.object.el);\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      this.clickedOnAnything =\n        (intersection &&\n          intersection.object.el.matches(\".pen, .pen *, .video, .video *, .interactable, .interactable *\")) ||\n        userinput.activeSets.has(sets.cursorHoldingPen) ||\n        userinput.activeSets.has(sets.cursorHoldingInteractable) ||\n        userinput.activeSets.has(sets.cursorHoldingCamera);\n    }\n    this.prevButtonLeft = buttonLeft;\n\n    if (!buttonLeft) {\n      this.clickedOnAnything = false;\n    }\n\n    if ((!this.clickedOnAnything && buttonLeft) || buttonRight) {\n      frame[paths.device.smartMouse.cameraDelta] = frame[paths.device.mouse.movementXY];\n    }\n\n    const coords = frame[paths.device.mouse.coords];\n    frame[paths.device.smartMouse.cursorPose] = calculateCursorPose(\n      this.camera,\n      coords,\n      this.origin,\n      this.direction,\n      this.cursorPose\n    );\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { touchIsAssigned, jobIsAssigned, assign, unassign, findByJob, findByTouch } from \"./touchscreen/assignments\";\n\nconst MOVE_CURSOR_JOB = \"MOVE CURSOR\";\nconst MOVE_CAMERA_JOB = \"MOVE CAMERA\";\nconst FIRST_PINCHER_JOB = \"FIRST PINCHER\";\nconst SECOND_PINCHER_JOB = \"SECOND PINCHER\";\n\nfunction distance(x1, y1, x2, y2) {\n  const dx = x1 - x2;\n  const dy = y1 - y2;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nfunction shouldMoveCursor(touch, raycaster) {\n  const cursorController = document.querySelector(\"[cursor-controller]\").components[\"cursor-controller\"];\n  const isCursorGrabbing = cursorController.data.cursor.components[\"super-hands\"].state.has(\"grab-start\");\n  if (isCursorGrabbing) {\n    return true;\n  }\n  const rawIntersections = [];\n  raycaster.setFromCamera(\n    {\n      x: (touch.clientX / window.innerWidth) * 2 - 1,\n      y: -(touch.clientY / window.innerHeight) * 2 + 1\n    },\n    document.querySelector(\"#player-camera\").components.camera.camera\n  );\n  raycaster.intersectObjects(cursorController.targets, true, rawIntersections);\n  const intersection = rawIntersections.find(x => x.object.el);\n  return intersection && intersection.object.el.matches(\".interactable, .interactable *\");\n}\n\nexport class AppAwareTouchscreenDevice {\n  constructor() {\n    this.raycaster = new THREE.Raycaster(new THREE.Vector3(), new THREE.Vector3(), 0, 3);\n    this.assignments = [];\n    this.pinch = { initialDistance: 0, currentDistance: 0, delta: 0 };\n    this.events = [];\n    [\"touchstart\", \"touchend\", \"touchmove\", \"touchcancel\"].map(x =>\n      document.querySelector(\"canvas\").addEventListener(x, this.events.push.bind(this.events))\n    );\n  }\n\n  end(touch) {\n    if (!touchIsAssigned(touch, this.assignments)) {\n      console.warn(\"touch does not have a job\", touch);\n      return;\n    }\n\n    const assignment = findByTouch(touch, this.assignments);\n    switch (assignment.job) {\n      case MOVE_CURSOR_JOB:\n      case MOVE_CAMERA_JOB:\n        unassign(assignment.touch, assignment.job, this.assignments);\n        break;\n      case FIRST_PINCHER_JOB:\n        unassign(assignment.touch, assignment.job, this.assignments);\n        this.pinch = { initialDistance: 0, currentDistance: 0, delta: 0 };\n\n        if (jobIsAssigned(SECOND_PINCHER_JOB, this.assignments)) {\n          const second = findByJob(SECOND_PINCHER_JOB, this.assignments);\n          unassign(second.touch, second.job, this.assignments);\n          if (jobIsAssigned(MOVE_CAMERA_JOB, this.assignments)) {\n            // reassign secondPincher to firstPincher\n            const first = assign(second.touch, FIRST_PINCHER_JOB, this.assignments);\n            first.clientX = second.clientX;\n            first.clientY = second.clientY;\n          } else {\n            // reassign secondPincher to moveCamera\n            const cameraMover = assign(second.touch, MOVE_CAMERA_JOB, this.assignments);\n            cameraMover.clientX = second.clientX;\n            cameraMover.clientY = second.clientY;\n            cameraMover.delta = [0, 0];\n          }\n        }\n        break;\n      case SECOND_PINCHER_JOB:\n        unassign(assignment.touch, assignment.job, this.assignments);\n        this.pinch = { initialDistance: 0, currentDistance: 0, delta: 0 };\n        if (jobIsAssigned(FIRST_PINCHER_JOB, this.assignments) && !jobIsAssigned(MOVE_CAMERA_JOB, this.assignments)) {\n          //reassign firstPincher to moveCamera\n          const first = findByJob(FIRST_PINCHER_JOB, this.assignments);\n          unassign(first.touch, first.job, this.assignments);\n          const cameraMover = assign(first.touch, MOVE_CAMERA_JOB, this.assignments);\n          cameraMover.clientX = first.clientX;\n          cameraMover.clientY = first.clientY;\n          cameraMover.delta = [0, 0];\n        }\n        break;\n    }\n  }\n\n  move(touch) {\n    if (!touchIsAssigned(touch, this.assignments)) {\n      if (!touch.target.classList[0] || !touch.target.classList[0].startsWith(\"virtual-gamepad-controls\")) {\n        console.warn(\"touch does not have job\", touch);\n      }\n      return;\n    }\n\n    const assignment = findByTouch(touch, this.assignments);\n    switch (assignment.job) {\n      case MOVE_CURSOR_JOB:\n        assignment.cursorPose.fromCameraProjection(\n          document.querySelector(\"#player-camera\").components.camera.camera,\n          (touch.clientX / window.innerWidth) * 2 - 1,\n          -(touch.clientY / window.innerHeight) * 2 + 1\n        );\n        break;\n      case MOVE_CAMERA_JOB:\n        assignment.delta[0] += touch.clientX - assignment.clientX;\n        assignment.delta[1] += touch.clientY - assignment.clientY;\n        assignment.clientX = touch.clientX;\n        assignment.clientY = touch.clientY;\n        break;\n      case FIRST_PINCHER_JOB:\n      case SECOND_PINCHER_JOB:\n        assignment.clientX = touch.clientX;\n        assignment.clientY = touch.clientY;\n        if (jobIsAssigned(FIRST_PINCHER_JOB, this.assignments) && jobIsAssigned(SECOND_PINCHER_JOB, this.assignments)) {\n          const first = findByJob(FIRST_PINCHER_JOB, this.assignments);\n          const second = findByJob(SECOND_PINCHER_JOB, this.assignments);\n          const currentDistance = distance(first.clientX, first.clientY, second.clientX, second.clientY);\n          this.pinch.delta += currentDistance - this.pinch.currentDistance;\n          this.pinch.currentDistance = currentDistance;\n        }\n        break;\n    }\n  }\n\n  start(touch) {\n    if (touchIsAssigned(touch, this.assignments)) {\n      console.error(\"touch already has a job\");\n      return;\n    }\n\n    if (!jobIsAssigned(MOVE_CURSOR_JOB, this.assignments) && shouldMoveCursor(touch, this.raycaster)) {\n      const assignment = assign(touch, MOVE_CURSOR_JOB, this.assignments);\n      assignment.cursorPose = new Pose().fromCameraProjection(\n        document.querySelector(\"#player-camera\").components.camera.camera,\n        (touch.clientX / window.innerWidth) * 2 - 1,\n        -(touch.clientY / window.innerHeight) * 2 + 1\n      );\n      assignment.isFirstFrame = true;\n      return;\n    }\n\n    if (!jobIsAssigned(MOVE_CAMERA_JOB, this.assignments)) {\n      const assignment = assign(touch, MOVE_CAMERA_JOB, this.assignments);\n      assignment.clientX = touch.clientX;\n      assignment.clientY = touch.clientY;\n      assignment.delta = [0, 0];\n      return;\n    }\n\n    if (!jobIsAssigned(SECOND_PINCHER_JOB, this.assignments)) {\n      let first;\n      if (jobIsAssigned(FIRST_PINCHER_JOB, this.assignments)) {\n        first = findByJob(FIRST_PINCHER_JOB, this.assignments);\n      } else {\n        const cameraMover = findByJob(MOVE_CAMERA_JOB, this.assignments);\n        unassign(cameraMover.touch, cameraMover.job, this.assignments);\n\n        first = assign(cameraMover.touch, FIRST_PINCHER_JOB, this.assignments);\n        first.clientX = cameraMover.clientX;\n        first.clientY = cameraMover.clientY;\n      }\n\n      const second = assign(touch, SECOND_PINCHER_JOB, this.assignments);\n      second.clientX = touch.clientX;\n      second.clientY = touch.clientY;\n\n      const initialDistance = distance(first.clientX, first.clientY, second.clientX, second.clientY);\n      this.pinch = {\n        initialDistance,\n        currentDistance: initialDistance,\n        delta: 0\n      };\n      return;\n    }\n\n    console.warn(\"no job suitable for touch\", touch);\n  }\n\n  process(event) {\n    switch (event.type) {\n      case \"touchstart\":\n        for (const touch of event.changedTouches) {\n          this.start(touch);\n        }\n        break;\n      case \"touchmove\":\n        for (const touch of event.touches) {\n          this.move(touch);\n        }\n        break;\n      case \"touchend\":\n      case \"touchcancel\":\n        for (const touch of event.changedTouches) {\n          this.end(touch);\n        }\n        break;\n    }\n  }\n\n  write(frame) {\n    if (this.pinch) {\n      this.pinch.delta = 0;\n    }\n    const cameraMover =\n      jobIsAssigned(MOVE_CAMERA_JOB, this.assignments) && findByJob(MOVE_CAMERA_JOB, this.assignments);\n    if (cameraMover) {\n      cameraMover.delta[0] = 0;\n      cameraMover.delta[1] = 0;\n    }\n\n    this.events.forEach(event => {\n      this.process(event, frame);\n    });\n    while (this.events.length) {\n      this.events.pop();\n    }\n\n    const path = paths.device.touchscreen;\n    if (jobIsAssigned(MOVE_CURSOR_JOB, this.assignments)) {\n      const assignment = findByJob(MOVE_CURSOR_JOB, this.assignments);\n      frame[path.cursorPose] = assignment.cursorPose;\n      // If you touch a grabbable, we want to wait 1 frame before admitting it to anyone else, because we\n      // want to hover on the first frame and grab on the next.\n      frame[path.isTouchingGrabbable] = !assignment.isFirstFrame;\n      assignment.isFirstFrame = false;\n    }\n\n    if (jobIsAssigned(MOVE_CAMERA_JOB, this.assignments)) {\n      frame[path.touchCameraDelta] = findByJob(MOVE_CAMERA_JOB, this.assignments).delta;\n    }\n\n    frame[path.pinch.delta] = this.pinch.delta;\n    frame[path.pinch.initialDistance] = this.pinch.initialDistance;\n    frame[path.pinch.currentDistance] = this.pinch.currentDistance;\n  }\n}\n","export function touchIsAssigned(touch, assignments) {\n  return (\n    assignments.find(assignment => {\n      return assignment.touch.identifier === touch.identifier;\n    }) !== undefined\n  );\n}\n\nexport function jobIsAssigned(job, assignments) {\n  return (\n    assignments.find(assignment => {\n      return assignment.job === job;\n    }) !== undefined\n  );\n}\n\nexport function assign(touch, job, assignments) {\n  if (touchIsAssigned(touch, assignments) || jobIsAssigned(job, assignments)) {\n    console.error(\"cannot reassign touches or jobs. unassign first\");\n    return undefined;\n  }\n  const assignment = { job, touch };\n  assignments.push(assignment);\n  return assignment;\n}\n\nexport function unassign(touch, job, assignments) {\n  function match(assignment) {\n    return assignment.touch.identifier === touch.identifier && assignment.job === job;\n  }\n  assignments.splice(assignments.findIndex(match), 1);\n}\n\nexport function findByJob(job, assignments) {\n  return assignments.find(assignment => {\n    return assignment.job === job;\n  });\n}\n\nexport function findByTouch(touch, assignments) {\n  return assignments.find(assignment => {\n    return assignment.touch.identifier === touch.identifier;\n  });\n}\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst wasd_vec2 = \"/var/mouse-and-keyboard/wasd_vec2\";\nconst keyboardCharacterAcceleration = \"/var/mouse-and-keyboard/keyboardCharacterAcceleration\";\nconst arrows_vec2 = \"/var/mouse-and-keyboard/arrows_vec2\";\nconst dropWithRMB = \"/vars/mouse-and-keyboard/drop_with_RMB\";\nconst dropWithEsc = \"/vars/mouse-and-keyboard/drop_with_esc\";\n\nconst k = name => {\n  return `/keyboard-mouse-user/keyboard-var/${name}`;\n};\n\nexport const keyboardMouseUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: { value: keyboardCharacterAcceleration },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.normalize_vec2\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: paths.actions.boost },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.camera.exitMirror },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: paths.actions.thaw },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.hud.penButton },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.smartMouse.cursorPose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.smartMouse.cameraDelta },\n      dest: { x: \"/var/smartMouseCamDeltaX\", y: \"/var/smartMouseCamDeltaY\" },\n      xform: xforms.split_vec2\n    },\n    {\n      src: { value: \"/var/smartMouseCamDeltaX\" },\n      dest: { value: \"/var/smartMouseCamDeltaXScaled\" },\n      xform: xforms.scale(-0.2)\n    },\n    {\n      src: { value: \"/var/smartMouseCamDeltaY\" },\n      dest: { value: \"/var/smartMouseCamDeltaYScaled\" },\n      xform: xforms.scale(-0.1)\n    },\n    {\n      src: { x: \"/var/smartMouseCamDeltaXScaled\", y: \"/var/smartMouseCamDeltaYScaled\" },\n      dest: { value: paths.actions.cameraDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.mouse.buttonRight\n      },\n      dest: {\n        value: paths.actions.startGazeTeleport\n      },\n      xform: xforms.rising,\n      priority: 100\n    },\n    {\n      src: {\n        value: paths.device.mouse.buttonRight\n      },\n      dest: {\n        value: paths.actions.stopGazeTeleport\n      },\n      xform: xforms.falling,\n      priority: 100\n    }\n  ],\n\n  [sets.cursorHoldingPen]: [\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"q\")\n      },\n      dest: { value: \"/var/shift+q\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+q\" },\n      dest: { value: paths.actions.cursor.penPrevColor },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"e\")\n      },\n      dest: { value: \"/var/shift+e\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+e\" },\n      dest: { value: paths.actions.cursor.penNextColor },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"q\")\n      },\n      dest: { value: \"/var/notshift+q\" },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: { value: \"/var/notshift+q\" },\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"e\")\n      },\n      dest: { value: \"/var/notshift+e\" },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: { value: \"/var/notshift+e\" },\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: k(\"wheelWithShift\")\n      },\n      dest: { value: \"/var/cursorScalePenTipWheel\" },\n      xform: xforms.copy,\n      priority: 200\n    },\n    {\n      src: { value: \"/var/cursorScalePenTipWheel\" },\n      dest: { value: paths.actions.cursor.scalePenTip },\n      xform: xforms.scale(0.03)\n    },\n    {\n      src: { value: paths.device.mouse.buttonRight },\n      dest: { value: dropWithRMB },\n      xform: xforms.falling,\n      priority: 200\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: dropWithEsc },\n      xform: xforms.falling\n    },\n    {\n      src: [dropWithRMB, dropWithEsc],\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.any\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"z\")\n      },\n      dest: { value: paths.actions.cursor.undoDrawing },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.cursorHoldingCamera]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.takeSnapshot },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: paths.device.mouse.buttonRight },\n      dest: { value: dropWithRMB },\n      xform: xforms.falling,\n      priority: 200\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: dropWithEsc },\n      xform: xforms.falling\n    },\n    {\n      src: [dropWithRMB, dropWithEsc],\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.cursorHoldingInteractable]: [\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.mouse.wheel\n      },\n      dest: {\n        value: k(\"wheelWithShift\")\n      },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.mouse.wheel\n      },\n      dest: {\n        value: k(\"wheelWithoutShift\")\n      },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: {\n        value: k(\"wheelWithoutShift\")\n      },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: k(\"wheelWithShift\")\n      },\n      dest: { value: paths.actions.cursor.scaleGrabbedGrabbable },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.falling,\n      priority: 2\n    }\n  ],\n\n  [sets.cursorHoveringOnInteractable]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ],\n\n  [sets.cursorHoveringOnUI]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising\n    }\n  ]\n});\n","export function angleTo4Direction(angle) {\n  angle = (angle * THREE.Math.RAD2DEG + 180 + 45) % 360;\n  if (angle > 0 && angle < 90) {\n    return \"north\";\n  } else if (angle >= 90 && angle < 180) {\n    return \"west\";\n  } else if (angle >= 180 && angle < 270) {\n    return \"south\";\n  } else {\n    return \"east\";\n  }\n}\n\nexport function angleTo8Direction(angle) {\n  angle = (angle * THREE.Math.RAD2DEG + 180 + 45) % 360;\n  let direction = \"\";\n  if ((angle >= 0 && angle < 120) || angle >= 330) {\n    direction += \"north\";\n  }\n  if (angle >= 150 && angle < 300) {\n    direction += \"south\";\n  }\n  if (angle >= 60 && angle < 210) {\n    direction += \"west\";\n  }\n  if ((angle >= 240 && angle < 360) || angle < 30) {\n    direction += \"east\";\n  }\n  return direction;\n}\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst zero = \"/vars/touchscreen/zero\";\nconst forward = \"/vars/touchscreen/pinchDeltaForward\";\nconst touchCamDelta = \"vars/touchscreen/touchCameraDelta\";\nconst touchCamDeltaX = \"vars/touchscreen/touchCameraDelta/x\";\nconst touchCamDeltaY = \"vars/touchscreen/touchCameraDelta/y\";\nconst touchCamDeltaXScaled = \"vars/touchscreen/touchCameraDelta/x/scaled\";\nconst touchCamDeltaYScaled = \"vars/touchscreen/touchCameraDelta/y/scaled\";\nconst gyroCamDelta = \"vars/gyro/gyroCameraDelta\";\nconst gyroCamDeltaXScaled = \"vars/gyro/gyroCameraDelta/x/scaled\";\nconst gyroCamDeltaYScaled = \"vars/gyro/gyroCameraDelta/y/scaled\";\n\nexport const touchscreenUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: { value: paths.device.touchscreen.pinch.delta },\n      dest: { value: forward },\n      xform: xforms.scale(0.25)\n    },\n    {\n      src: {},\n      dest: { value: zero },\n      xform: xforms.always(0)\n    },\n    {\n      src: { x: zero, y: forward },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: paths.device.touchscreen.cursorPose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.touchscreen.touchCameraDelta },\n      dest: { x: touchCamDeltaX, y: touchCamDeltaY },\n      xform: xforms.split_vec2\n    },\n    {\n      src: { value: touchCamDeltaX },\n      dest: { value: touchCamDeltaXScaled },\n      xform: xforms.scale(0.18)\n    },\n    {\n      src: { value: touchCamDeltaY },\n      dest: { value: touchCamDeltaYScaled },\n      xform: xforms.scale(0.35)\n    },\n    {\n      src: { x: touchCamDeltaXScaled, y: touchCamDeltaYScaled },\n      dest: { value: touchCamDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: paths.device.gyro.averageDeltaX },\n      dest: { value: gyroCamDeltaXScaled },\n      xform: xforms.scale(1.0)\n    },\n    {\n      src: { value: paths.device.gyro.averageDeltaY },\n      dest: { value: gyroCamDeltaYScaled },\n      xform: xforms.scale(1.0)\n    },\n    {\n      src: { x: gyroCamDeltaYScaled, y: gyroCamDeltaXScaled },\n      dest: { value: gyroCamDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        first: touchCamDelta,\n        second: gyroCamDelta\n      },\n      dest: { value: paths.actions.cameraDelta },\n      xform: xforms.add_vec2\n    },\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.hud.penButton },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising\n    }\n  ],\n  [sets.cursorHoldingInteractable]: [\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.falling,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnPen]: [],\n  [sets.cursorHoldingPen]: [\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.risingWithFrameDelay(5),\n      priority: 2\n    },\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: { value: paths.device.hud.penButton },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nexport const keyboardDebuggingBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst name = \"/touch/var/\";\n\nconst leftButton = paths.device.leftOculusTouch.button;\nconst leftAxis = paths.device.leftOculusTouch.axis;\nconst leftPose = paths.device.leftOculusTouch.pose;\nconst rightButton = paths.device.rightOculusTouch.button;\nconst rightAxis = paths.device.rightOculusTouch.axis;\nconst rightPose = paths.device.rightOculusTouch.pose;\n\nconst scaledLeftJoyX = `${name}left/scaledJoyX`;\nconst scaledLeftJoyY = `${name}left/scaledJoyY`;\nconst cursorDrop2 = `${name}right/cursorDrop2`;\nconst cursorDrop1 = `${name}right/cursorDrop1`;\nconst rightHandDrop2 = `${name}right/rightHandDrop2`;\nconst rightGripRisingGrab = `${name}right/grip/RisingGrab`;\nconst rightTriggerRisingGrab = `${name}right/trigger/RisingGrab`;\nconst leftGripRisingGrab = `${name}left/grip/RisingGrab`;\nconst leftTriggerRisingGrab = `${name}left/trigger/RisingGrab`;\nconst rightDpadNorth = `${name}rightDpad/north`;\nconst rightDpadSouth = `${name}rightDpad/south`;\nconst rightDpadEast = `${name}rightDpad/east`;\nconst rightDpadWest = `${name}rightDpad/west`;\nconst rightDpadCenter = `${name}rightDpad/center`;\nconst rightJoy = `${name}right/joy`;\nconst rightJoyY1 = `${name}right/joyY1`;\nconst rightJoyY2 = `${name}right/joyY2`;\nconst leftDpadNorth = `${name}leftDpad/north`;\nconst leftDpadSouth = `${name}leftDpad/south`;\nconst leftDpadEast = `${name}leftDpad/east`;\nconst leftDpadWest = `${name}leftDpad/west`;\nconst leftDpadCenter = `${name}leftDpad/center`;\nconst leftJoy = `${name}left/joy`;\nconst leftJoyY = `${name}left/joyY`;\nconst oculusTouchCharacterAcceleration = `${name}characterAcceleration`;\nconst keyboardCharacterAcceleration = \"/var/keyboard/characterAcceleration\";\nconst characterAcceleration = \"/var/oculus-touch/nonNormalizedCharacterAcceleration\";\nconst wasd_vec2 = \"/var/keyboard/wasd_vec2\";\nconst arrows_vec2 = \"/var/keyboard/arrows_vec2\";\nconst keyboardBoost = \"/var/keyboard-oculus/boost\";\nconst rightBoost = \"/var/right-oculus/boost\";\nconst leftBoost = \"/var/left-oculus/boost\";\nconst rightTouchSnapRight = `${name}/right/snap-right`;\nconst rightTouchSnapLeft = `${name}/right/snap-left`;\nconst keyboardSnapRight = `${name}/keyboard/snap-right`;\nconst keyboardSnapLeft = `${name}/keyboard/snap-left`;\n\nconst lowerButtons = `${name}buttons/lower`;\n\nconst ensureFrozenViaButtons = `${name}buttons/ensureFrozen`;\nconst ensureFrozenViaKeyboard = `${name}keyboard/ensureFrozen`;\n\nconst thawViaButtons = `${name}buttons/thaw`;\nconst thawViaKeyboard = `${name}keyboard/thaw`;\n\nconst v = s => {\n  return \"/oculus-touch-user-vars/\" + s;\n};\nconst leftGripPressed1 = v(\"leftGripPressed1\");\nconst leftGripPressed2 = v(\"leftGripPressed2\");\nconst rightGripPressed1 = v(\"rightGripPressed1\");\nconst rightGripPressed2 = v(\"rightGripPressed2\");\nconst leftTriggerPressed1 = v(\"leftTriggerPressed1\");\nconst leftTriggerPressed2 = v(\"leftTriggerPressed2\");\nconst rightTriggerPressed1 = v(\"rightTriggerPressed1\");\nconst rightTriggerPressed2 = v(\"rightTriggerPressed2\");\n\nexport const oculusTouchUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: [ensureFrozenViaButtons, ensureFrozenViaKeyboard],\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.any\n    },\n    {\n      src: [thawViaButtons, thawViaKeyboard],\n      dest: { value: paths.actions.thaw },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: leftButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftGripPressed1\n      },\n      dest: {\n        value: paths.actions.leftHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [leftButton(\"x\").touched, leftButton(\"y\").touched, leftButton(\"thumbStick\").touched],\n      dest: {\n        value: paths.actions.leftHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: { value: leftButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftTriggerPressed1 },\n      dest: {\n        value: paths.actions.leftHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightGripPressed1\n      },\n      dest: {\n        value: paths.actions.rightHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [rightButton(\"a\").touched, rightButton(\"b\").touched, rightButton(\"thumbStick\").touched],\n      dest: {\n        value: paths.actions.rightHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: { value: rightButton(\"trigger\").pressed },\n      dest: {\n        value: rightTriggerPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightButton(\"trigger\").pressed },\n      dest: {\n        value: rightTriggerPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed1 },\n      dest: {\n        value: paths.actions.rightHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: leftAxis(\"joyX\"),\n        y: leftAxis(\"joyY\")\n      },\n      dest: {\n        value: leftJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: leftJoy\n      },\n      dest: {\n        north: leftDpadNorth,\n        south: leftDpadSouth,\n        east: leftDpadEast,\n        west: leftDpadWest,\n        center: leftDpadCenter\n      },\n      xform: xforms.vec2dpad(0.2, false, true)\n    },\n    {\n      src: {\n        value: rightAxis(\"joyY\")\n      },\n      dest: { value: rightJoyY1 },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightAxis(\"joyY\")\n      },\n      dest: { value: rightJoyY2 },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: rightAxis(\"joyX\"),\n        y: rightJoyY1\n      },\n      dest: {\n        value: rightJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: rightJoy\n      },\n      dest: {\n        north: rightDpadNorth,\n        south: rightDpadSouth,\n        east: rightDpadEast,\n        west: rightDpadWest,\n        center: rightDpadCenter\n      },\n      xform: xforms.vec2dpad(0.2, false, true)\n    },\n    {\n      src: {\n        value: rightDpadEast\n      },\n      dest: {\n        value: rightTouchSnapRight\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: keyboardSnapRight },\n      xform: xforms.rising\n    },\n    {\n      src: [rightTouchSnapRight, keyboardSnapRight],\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: ensureFrozenViaKeyboard },\n      xform: xforms.copy\n    },\n    {\n      src: [leftButton(\"x\").pressed, rightButton(\"a\").pressed],\n      dest: { value: lowerButtons },\n      xform: xforms.any\n    },\n    {\n      src: { value: lowerButtons },\n      dest: { value: ensureFrozenViaButtons },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lowerButtons },\n      dest: { value: thawViaButtons },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: thawViaKeyboard },\n      xform: xforms.falling\n    },\n    {\n      src: {\n        value: rightDpadWest\n      },\n      dest: {\n        value: rightTouchSnapLeft\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: keyboardSnapLeft },\n      xform: xforms.rising\n    },\n    {\n      src: [rightTouchSnapLeft, keyboardSnapLeft],\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: leftAxis(\"joyX\")\n      },\n      dest: {\n        value: scaledLeftJoyX\n      },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        value: leftAxis(\"joyY\")\n      },\n      dest: { value: scaledLeftJoyY },\n      xform: xforms.scale(-1.5) // vertical character speed modifier\n    },\n    {\n      src: {\n        x: scaledLeftJoyX,\n        y: scaledLeftJoyY\n      },\n      dest: { value: oculusTouchCharacterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        first: oculusTouchCharacterAcceleration,\n        second: keyboardCharacterAcceleration\n      },\n      dest: {\n        value: characterAcceleration\n      },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        value: characterAcceleration,\n        override: \"/device/overrides/foo\"\n      },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.normalize_vec2\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: keyboardBoost },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftButton(\"y\").pressed\n      },\n      dest: {\n        value: leftBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightButton(\"b\").pressed\n      },\n      dest: {\n        value: rightBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [keyboardBoost, leftBoost, rightBoost],\n      dest: { value: paths.actions.boost },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rightPose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightPose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftPose },\n      dest: { value: paths.actions.leftHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    }\n  ],\n\n  [sets.leftHandHoveringOnNothing]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.cursorHoveringOnNothing]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.leftHandHoveringOnInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: leftTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [leftGripRisingGrab],\n      dest: { value: paths.actions.leftHand.grab },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n\n  [sets.leftHandHoldingInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.falling\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaButtons },\n      priority: 1,\n      xform: xforms.always(false)\n    }\n  ],\n\n  [sets.leftHandHoveringOnPen]: [],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: leftDpadEast,\n        override: \"/device/overrides/foo\"\n      },\n      dest: {\n        value: paths.actions.leftHand.penNextColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: leftDpadWest,\n        override: \"/device/overrides/foo\"\n      },\n      dest: {\n        value: paths.actions.leftHand.penPrevColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: leftAxis(\"joyY\")\n      },\n      dest: { value: leftJoyY },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftJoyY },\n      dest: { value: paths.actions.leftHand.scalePenTip },\n      xform: xforms.scale(-0.005),\n      priority: 1\n    },\n    {\n      src: { value: leftButton(\"y\").pressed },\n      dest: { value: paths.actions.leftHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rightGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rightTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [rightGripRisingGrab],\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n\n  [sets.cursorHoldingInteractable]: [\n    {\n      src: { value: rightAxis(\"joyY\") },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.scale(0.1)\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: cursorDrop1 },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: {\n        value: cursorDrop2\n      },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: [cursorDrop1],\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaButtons },\n      priority: 1,\n      xform: xforms.always(false)\n    }\n  ],\n\n  [sets.cursorHoveringOnPen]: [],\n\n  [sets.cursorHoldingPen]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: rightButton(\"b\").pressed },\n      dest: { value: paths.actions.cursor.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightHandHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rightGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rightTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [rightGripRisingGrab],\n      dest: { value: paths.actions.rightHand.grab },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n\n  [sets.rightHandHoldingInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: {\n        value: rightHandDrop2\n      },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: [rightHandDrop2],\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaButtons },\n      priority: 1,\n      xform: xforms.always(false)\n    }\n  ],\n  [sets.rightHandHoveringOnPen]: [],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: rightDpadEast\n      },\n      dest: {\n        value: paths.actions.rightHand.penNextColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: rightDpadWest\n      },\n      dest: {\n        value: paths.actions.rightHand.penPrevColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: rightJoyY2 },\n      dest: { value: paths.actions.rightHand.scalePenTip },\n      xform: xforms.scale(-0.005),\n      priority: 2\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: rightButton(\"b\").pressed },\n      dest: { value: paths.actions.rightHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnCamera]: [],\n  [sets.rightHandHoveringOnCamera]: [],\n  [sets.leftHandHoveringOnCamera]: [],\n\n  [sets.rightHandHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.takeSnapshot },\n      xform: xforms.rising,\n      priority: 4\n    }\n  ],\n  [sets.leftHandHoldingCamera]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.takeSnapshot },\n      xform: xforms.rising,\n      priority: 4\n    }\n  ],\n  [sets.cursorHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.takeSnapshot },\n      xform: xforms.rising,\n      priority: 4\n    }\n  ],\n\n  [sets.rightHandHoveringOnNothing]: [],\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst v = name => {\n  return `/vive-user/vive-var/${name}`;\n};\n\nconst lButton = paths.device.vive.left.button;\nconst lAxis = paths.device.vive.left.axis;\nconst lPose = paths.device.vive.left.pose;\nconst lJoy = v(\"left/joy\");\nconst lJoyScaled = v(\"left/joy/scaled\");\nconst lJoyXScaled = v(\"left/joyX/scaled\");\nconst lJoyYScaled = v(\"left/joyY/scaled\");\nconst lDpadNorth = v(\"left/dpad/north\");\nconst lDpadSouth = v(\"left/dpad/south\");\nconst lDpadEast = v(\"left/dpad/east\");\nconst lDpadWest = v(\"left/dpad/west\");\nconst lDpadCenter = v(\"left/dpad/center\");\nconst lTriggerFallingStopDrawing = v(\"left/trigger/falling/stopDrawing\");\nconst lGripFallingStopDrawing = v(\"left/grip/falling/stopDrawing\");\nconst lTriggerRisingGrab = v(\"right/trigger/rising/grab\");\nconst lGripRisingGrab = v(\"right/grab/rising/grab\");\nconst lTouchpadRising2 = v(\"left/touchpad/rising2\");\nconst lTouchpadRising1 = v(\"left/touchpad/rising1\");\nconst lCharacterAcceleration = v(\"left/characterAcceleration\");\nconst characterAcceleration = v(\"nonNormalizedCharacterAcceleration\");\nconst leftBoost = v(\"left/boost\");\n\nconst rButton = paths.device.vive.right.button;\nconst rAxis = paths.device.vive.right.axis;\nconst rPose = paths.device.vive.right.pose;\nconst rJoy = v(\"right/joy\");\nconst rDpadNorth = v(\"right/dpad/north\");\nconst rDpadSouth = v(\"right/dpad/south\");\nconst rDpadEast = v(\"right/dpad/east\");\nconst rDpadWest = v(\"right/dpad/west\");\nconst rDpadCenter = v(\"right/dpad/center\");\nconst rDpadCenterStrip = v(\"right/dpad/centerStrip\");\nconst rTouchpadRising = v(\"right/touchpad/rising\");\nconst rTouchpadFalling = v(\"right/touchpad/falling\");\nconst rightBoost = v(\"right/boost\");\nconst rTriggerRisingGrab = v(\"right/trigger/rising/grab\");\nconst rGripRisingGrab = v(\"right/grab/rising/grab\");\nconst cursorDrop1 = v(\"right/cursorDrop1\");\nconst cursorDrop2 = v(\"right/cursorDrop2\");\nconst rHandDrop1 = v(\"right/drop1\");\nconst rHandDrop2 = v(\"right/drop2\");\nconst rTriggerStopTeleport = v(\"right/trigger/stopTeleport\");\nconst rTouchpadStopTeleport = v(\"right/touchpad/stopTeleport\");\nconst rootForFrozenOverrideWhenHolding = \"rootForFrozenOverrideWhenHolding\";\n\nconst ensureFrozenViaDpad = v(\"dpad/ensureFrozen\");\nconst ensureFrozenViaKeyboard = v(\"keyboard/ensureFrozen\");\n\nconst thawViaDpad = v(\"dpad/thaw\");\nconst thawViaKeyboard = v(\"keyboard/thaw\");\n\nconst rSnapRight = v(\"right/snap-right\");\nconst rSnapLeft = v(\"right/snap-left\");\n\nconst k = name => {\n  return `/vive-user/keyboard-var/${name}`;\n};\nconst keyboardSnapRight = k(\"snap-right\");\nconst keyboardSnapLeft = k(\"snap-left\");\nconst keyboardCharacterAcceleration = k(\"characterAcceleration\");\nconst wasd_vec2 = k(\"wasd_vec2\");\nconst arrows_vec2 = k(\"arrows_vec2\");\nconst keyboardBoost = k(\"boost\");\n\nconst leftGripPressed1 = v(\"leftGripPressed1\");\nconst leftGripPressed2 = v(\"leftGripPressed2\");\nconst rightGripPressed1 = v(\"rightGripPressed1\");\nconst rightGripPressed2 = v(\"rightGripPressed2\");\nconst leftTriggerPressed1 = v(\"leftTriggerPressed1\");\nconst leftTriggerPressed2 = v(\"leftTriggerPressed2\");\nconst leftTouchpadPressed1 = v(\"leftTouchpadPressed1\");\nconst leftTouchpadPressed2 = v(\"leftTouchpadPressed2\");\nconst rightTriggerPressed1 = v(\"rightTriggerPressed1\");\nconst rightTriggerPressed2 = v(\"rightTriggerPressed2\");\nconst leftTouchpadFallingStopTeleport = v(\"leftTouchpadFallingStopTeleport\");\nconst leftTriggerFallingStopTeleport = v(\"leftTriggerFallingStopTeleport\");\nconst leftGripFallingWhileHoldingPen = v(\"leftGripFallingWhileHoldingPen\");\n\nexport const viveUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: [ensureFrozenViaDpad, ensureFrozenViaKeyboard],\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.any\n    },\n    {\n      src: [thawViaDpad, thawViaKeyboard],\n      dest: { value: paths.actions.thaw },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: lButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftGripPressed1\n      },\n      dest: {\n        value: paths.actions.leftHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: lButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [lButton(\"touchpad\").touched, lButton(\"top\").touched],\n      dest: {\n        value: paths.actions.leftHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: { value: leftTriggerPressed1 },\n      dest: {\n        value: paths.actions.leftHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightGripPressed1\n      },\n      dest: {\n        value: paths.actions.rightHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [rButton(\"touchpad\").touched, rButton(\"top\").touched],\n      dest: {\n        value: paths.actions.rightHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: rButton(\"trigger\").pressed\n      },\n      dest: { value: rightTriggerPressed1 },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"trigger\").pressed\n      },\n      dest: { value: rightTriggerPressed2 },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed1 },\n      dest: {\n        value: paths.actions.rightHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: lAxis(\"joyX\"),\n        y: lAxis(\"joyY\")\n      },\n      dest: {\n        value: lJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: lJoy\n      },\n      dest: {\n        north: lDpadNorth,\n        south: lDpadSouth,\n        east: lDpadEast,\n        west: lDpadWest,\n        center: lDpadCenter\n      },\n      xform: xforms.vec2dpad(0.35)\n    },\n    {\n      src: {\n        value: lButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: leftTouchpadPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: lButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: leftTouchpadPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: rAxis(\"joyX\"),\n        y: rAxis(\"joyY\")\n      },\n      dest: {\n        value: rJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: rJoy\n      },\n      dest: {\n        north: rDpadNorth,\n        south: rDpadSouth,\n        east: rDpadEast,\n        west: rDpadWest,\n        center: rDpadCenter\n      },\n      xform: xforms.vec2dpad(0.35, false, true)\n    },\n    {\n      src: [rDpadNorth, rDpadSouth, rDpadCenter],\n      dest: { value: rDpadCenterStrip },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: rButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: rTouchpadRising\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: rButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: rTouchpadFalling\n      },\n      xform: xforms.falling\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadEast\n      },\n      dest: {\n        value: rSnapRight\n      },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: keyboardSnapRight },\n      xform: xforms.rising\n    },\n    {\n      src: [rSnapRight, keyboardSnapRight],\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: ensureFrozenViaKeyboard },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: thawViaKeyboard },\n      xform: xforms.falling\n    },\n    {\n      src: { value: rButton(\"touchpad\").pressed, bool: rDpadCenterStrip },\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: rTouchpadFalling },\n      dest: { value: thawViaDpad },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadWest\n      },\n      dest: {\n        value: rSnapLeft\n      },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: keyboardSnapLeft },\n      xform: xforms.rising\n    },\n    {\n      src: [rSnapLeft, keyboardSnapLeft],\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.any\n    },\n\n    {\n      src: {\n        value: lAxis(\"joyX\")\n      },\n      dest: {\n        value: lJoyXScaled\n      },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        value: lAxis(\"joyY\")\n      },\n      dest: { value: lJoyYScaled },\n      xform: xforms.scale(1.5) // vertical character speed modifier\n    },\n    {\n      src: {\n        x: lJoyXScaled,\n        y: lJoyYScaled\n      },\n      dest: { value: lJoyScaled },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        bool: leftTouchpadPressed2,\n        value: lJoyScaled\n      },\n      dest: { value: lCharacterAcceleration },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        first: lCharacterAcceleration,\n        second: keyboardCharacterAcceleration\n      },\n      dest: {\n        value: characterAcceleration\n      },\n      xform: xforms.max_vec2\n    },\n    {\n      src: { value: characterAcceleration },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.normalize_vec2\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: keyboardBoost },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: lButton(\"top\").pressed\n      },\n      dest: {\n        value: leftBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"top\").pressed\n      },\n      dest: {\n        value: rightBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [keyboardBoost, leftBoost, rightBoost],\n      dest: { value: paths.actions.boost },\n      xform: xforms.any\n    },\n    {\n      src: { value: rPose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rPose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lPose },\n      dest: { value: paths.actions.leftHand.pose },\n      xform: xforms.copy\n    }\n  ],\n  [sets.rightHandTeleporting]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rTriggerStopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: rButton(\"touchpad\").pressed },\n      dest: { value: rTouchpadStopTeleport },\n      xform: xforms.falling\n    },\n    {\n      src: [rTriggerStopTeleport, rTouchpadStopTeleport],\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.any\n    }\n  ],\n  [sets.leftHandHoveringOnNothing]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandTeleporting]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: leftTriggerFallingStopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [leftTriggerFallingStopTeleport, leftTouchpadFallingStopTeleport, leftGripFallingWhileHoldingPen],\n      dest: { value: paths.actions.leftHand.stopTeleport },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.rightHandHoveringOnNothing]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnNothing]: [],\n\n  [sets.cursorHoveringOnUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.leftHandHoveringOnInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: lGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: lTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: [lGripRisingGrab],\n      dest: { value: paths.actions.leftHand.grab },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.leftHandHoldingInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.falling,\n      priority: 1\n    }\n  ],\n\n  [sets.leftHandHoveringOnPen]: [],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: { value: leftTouchpadPressed2 },\n      dest: { value: leftTouchpadFallingStopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: {\n        value: leftTouchpadPressed2\n      },\n      dest: {\n        value: lTouchpadRising1\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: lTouchpadRising1,\n        value: lDpadCenter\n      },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startDrawing },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: lTriggerFallingStopDrawing },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: lGripFallingStopDrawing },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftGripFallingWhileHoldingPen },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [lTriggerFallingStopDrawing, lGripFallingStopDrawing],\n      dest: { value: paths.actions.leftHand.stopDrawing },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: leftTouchpadPressed2\n      },\n      dest: {\n        value: lTouchpadRising2\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: lTouchpadRising2,\n        value: lDpadNorth\n      },\n      dest: {\n        value: paths.actions.leftHand.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: lTouchpadRising2,\n        value: lDpadSouth\n      },\n      dest: {\n        value: paths.actions.leftHand.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        value: lAxis(\"joyX\"),\n        touching: lButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.leftHand.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.1)\n    },\n    {\n      src: { value: lButton(\"top\").pressed },\n      dest: { value: paths.actions.leftHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.cursorHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: [rGripRisingGrab],\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.cursorHoldingInteractable]: [\n    {\n      src: {\n        value: rAxis(\"joyY\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.touch_axis_scroll(-1)\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: cursorDrop1 },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: {\n        value: cursorDrop2\n      },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: [cursorDrop1],\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.any\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.always(false)\n    }\n  ],\n\n  [sets.cursorHoveringOnPen]: [],\n\n  [sets.cursorHoldingPen]: [\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadCenter\n      },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: rAxis(\"joyX\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.1)\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadNorth\n      },\n      dest: {\n        value: paths.actions.cursor.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadSouth\n      },\n      dest: {\n        value: paths.actions.cursor.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: { value: rButton(\"top\").pressed },\n      dest: { value: paths.actions.cursor.undoDrawing },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.rightHandHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [rGripRisingGrab],\n      dest: { value: paths.actions.rightHand.grab },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.rightHandHoldingInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rHandDrop1 },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: {\n        value: rHandDrop2\n      },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: [rHandDrop1],\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.any\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.always(false)\n    }\n  ],\n  [sets.rightHandHoveringOnPen]: [],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadCenter\n      },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadNorth\n      },\n      dest: {\n        value: paths.actions.rightHand.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadSouth\n      },\n      dest: {\n        value: paths.actions.rightHand.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        value: rAxis(\"joyX\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.rightHand.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.1)\n    },\n    {\n      src: { value: rButton(\"top\").pressed },\n      dest: { value: paths.actions.rightHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.cursorHoveringOnCamera]: [],\n  [sets.rightHandHoveringOnCamera]: [],\n  [sets.leftHandHoveringOnCamera]: [],\n\n  [sets.rightHandHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.takeSnapshot },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.noop },\n      xform: xforms.falling,\n      priority: 3\n    }\n  ],\n  [sets.leftHandHoldingCamera]: [\n    {\n      src: { value: lButton(\"trigger\").pressed },\n      dest: { value: paths.actions.leftHand.takeSnapshot },\n      xform: xforms.rising\n    }\n  ],\n  [sets.cursorHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.takeSnapshot },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.noop },\n      xform: xforms.falling,\n      priority: 3\n    }\n  ],\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst lGripPressed = paths.device.wmr.left.grip.pressed;\nconst rGripPressed = paths.device.wmr.right.grip.pressed;\nconst rTriggerPressed = paths.device.wmr.right.trigger.pressed;\n\nconst rJoyNorth = paths.device.wmr.v(\"right/joy/north\");\nconst rGripRising = paths.device.wmr.v(\"right/grip/rising\");\nconst rTriggerRising = paths.device.wmr.v(\"right/trigger/rising\");\nconst rGripFalling = paths.device.wmr.v(\"right/grip/falling\");\nconst rTriggerFalling = paths.device.wmr.v(\"right/trigger/falling\");\n\nfunction dpadVariables(hand) {\n  return {\n    padWest: paths.device.wmr.v(hand + \"/pad/west\"),\n    padEast: paths.device.wmr.v(hand + \"/pad/east\"),\n    padNorth: paths.device.wmr.v(hand + \"/pad/north\"),\n    padSouth: paths.device.wmr.v(hand + \"/pad/south\"),\n    padCenter: paths.device.wmr.v(hand + \"/pad/center\"),\n    padCenterStrip: paths.device.wmr.v(hand + \"/pad/centerStrip\")\n  };\n}\n\nfunction dpadBindings(hand) {\n  const { padWest, padEast, padNorth, padSouth, padCenter, padCenterStrip } = dpadVariables(hand);\n  const pad = paths.device.wmr.v(hand + \"/pad\");\n  return [\n    {\n      src: {\n        x: paths.device.wmr[hand].touchpad.axisX,\n        y: paths.device.wmr[hand].touchpad.axisY\n      },\n      dest: { value: pad },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: pad },\n      dest: {\n        west: padWest,\n        east: padEast,\n        north: padNorth,\n        south: padSouth,\n        center: padCenter\n      },\n      xform: xforms.vec2dpad(0.5, false, false)\n    },\n    {\n      src: [padNorth, padCenter, padSouth],\n      dest: { value: padCenterStrip },\n      xform: xforms.any\n    }\n  ];\n}\n\nconst neverFrozenBinding = {\n  src: {},\n  dest: { value: paths.actions.ensureFrozen },\n  xform: xforms.always(false)\n};\n\nfunction penBindings(hand, forCursor) {\n  const padY = paths.device.wmr[hand].touchpad.axisY;\n  const triggerPressed = paths.device.wmr[hand].trigger.pressed;\n  const padPressed = paths.device.wmr[hand].touchpad.pressed;\n  const padTouched = paths.device.wmr[hand].touchpad.touched;\n\n  const padRising = paths.device.wmr.v(hand + \"/pad/rising\");\n  const padCenterStripTouched = paths.device.wmr.v(hand + \"/pad/centerStrip/touched\");\n  const { padWest, padEast, padCenter, padCenterStrip } = dpadVariables(hand);\n\n  const actions = paths.actions[forCursor ? \"cursor\" : hand + \"Hand\"];\n\n  return [\n    neverFrozenBinding,\n    ...dpadBindings(hand),\n    {\n      src: { value: triggerPressed },\n      dest: { value: actions.startDrawing },\n      xform: xforms.rising\n    },\n    {\n      src: { value: triggerPressed },\n      dest: { value: actions.stopDrawing },\n      xform: xforms.falling\n    },\n    {\n      src: { value: padPressed },\n      dest: { value: padRising },\n      xform: xforms.rising\n    },\n    {\n      src: { bool: padRising, value: padWest },\n      dest: { value: actions.penPrevColor },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { bool: padRising, value: padEast },\n      dest: { value: actions.penNextColor },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: [padCenterStrip, padTouched],\n      dest: { value: padCenterStripTouched },\n      xform: xforms.all\n    },\n    {\n      src: { value: padY, touching: padCenterStripTouched },\n      dest: { value: actions.scalePenTip },\n      xform: xforms.touch_axis_scroll(-0.05)\n    },\n    {\n      src: [padRising, padCenter],\n      dest: { value: actions.undoDrawing },\n      xform: xforms.all\n    }\n  ];\n}\n\nfunction handPoseBindings(hand) {\n  const padTouched = paths.device.wmr[hand].touchpad.touched;\n  const triggerPressed = paths.device.wmr[hand].trigger.pressed;\n  const gripPressed = paths.device.wmr[hand].grip.pressed;\n  const actions = paths.actions[hand + \"Hand\"];\n  return [\n    {\n      src: { value: padTouched },\n      dest: { value: actions.thumb },\n      xform: xforms.copy\n    },\n    {\n      src: { value: triggerPressed },\n      dest: { value: actions.index },\n      xform: xforms.copy\n    },\n    {\n      src: { value: gripPressed },\n      dest: { value: actions.middleRingPinky },\n      xform: xforms.copy\n    }\n  ];\n}\n\nfunction freezeBindings() {\n  const leftPadPressed = paths.device.wmr.left.touchpad.pressed;\n  const rightPadPressed = paths.device.wmr.right.touchpad.pressed;\n  const leftPadFalling = paths.device.wmr.v(\"left/touchpad/falling\");\n  const rightPadFalling = paths.device.wmr.v(\"right/touchpad/falling\");\n  const keyboardSaceFalling = paths.device.wmr.k(\"space/falling\");\n  return [\n    {\n      src: [paths.device.keyboard.key(\" \"), leftPadPressed, rightPadPressed],\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: keyboardSaceFalling },\n      xform: xforms.falling\n    },\n    {\n      src: { value: leftPadPressed },\n      dest: { value: leftPadFalling },\n      xform: xforms.falling\n    },\n    {\n      src: { value: rightPadPressed },\n      dest: { value: rightPadFalling },\n      xform: xforms.falling\n    },\n    {\n      src: [keyboardSaceFalling, leftPadFalling, rightPadFalling],\n      dest: { value: paths.actions.thaw },\n      xform: xforms.any\n    }\n  ];\n}\n\nfunction characterAccelerationBindings() {\n  const wasd_vec2 = paths.device.wmr.k(\"wasd_vec2\");\n  const arrows_vec2 = paths.device.wmr.k(\"arrows_vec2\");\n  const keyboardCharacterAcceleration = paths.device.wmr.k(\"characterAcceleration\");\n  const lJoyXDeadzoned = paths.device.wmr.v(\"left/joy/x/deadzoned\");\n  const lJoyYDeadzoned = paths.device.wmr.v(\"left/joy/y/deadzoned\");\n  const lJoyXScaled = paths.device.wmr.v(\"left/joy/x/scaled\");\n  const lJoyYScaled = paths.device.wmr.v(\"left/joy/y/scaled\");\n  const lCharacterAcceleration = paths.device.wmr.v(\"left/characterAcceleration\");\n  return [\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: { value: paths.device.wmr.left.joystick.axisX },\n      dest: { value: lJoyXDeadzoned },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: lJoyXDeadzoned },\n      dest: { value: lJoyXScaled },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: { value: paths.device.wmr.left.joystick.axisY },\n      dest: { value: lJoyYDeadzoned },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: lJoyYDeadzoned },\n      dest: { value: lJoyYScaled },\n      xform: xforms.scale(-1.5) // vertical character speed modifier\n    },\n    {\n      src: { x: lJoyXScaled, y: lJoyYScaled },\n      dest: { value: lCharacterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        first: lCharacterAcceleration,\n        second: keyboardCharacterAcceleration\n      },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: [\n        paths.device.wmr.left.trigger.pressed,\n        paths.device.wmr.right.trigger.pressed,\n        paths.device.keyboard.key(\"shift\")\n      ],\n      dest: { value: paths.actions.boost },\n      xform: xforms.any\n    }\n  ];\n}\n\nfunction cursorModDeltaBindings() {\n  const { padNorth, padSouth } = dpadVariables(\"right\");\n  const rPadNorthOrSouth = paths.device.wmr.v(\"right/pad/northOrSouth\");\n  const rPadNorthOrSouthPressed = paths.device.wmr.v(\"right/pad/northOrSouth/pressed\");\n  const rPadNorthOrSouthPressedY = paths.device.wmr.v(\"right/pad/northOrSouthpressed/y\");\n  return [\n    ...dpadBindings(\"right\"),\n    {\n      src: [padNorth, padSouth],\n      dest: { value: rPadNorthOrSouth },\n      xform: xforms.any\n    },\n    {\n      src: [rPadNorthOrSouth, paths.device.wmr.right.touchpad.pressed],\n      dest: { value: rPadNorthOrSouthPressed },\n      xform: xforms.all\n    },\n    {\n      src: {\n        bool: rPadNorthOrSouthPressed,\n        value: paths.device.wmr.right.touchpad.axisY\n      },\n      dest: { value: rPadNorthOrSouthPressedY },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: rPadNorthOrSouthPressedY },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.scale(0.1)\n    }\n  ];\n}\n\nfunction holdingCameraBindings(hand, forCursor) {\n  const actions = paths.actions[forCursor ? \"cursor\" : hand + \"Hand\"];\n  return [\n    neverFrozenBinding,\n    {\n      src: { value: paths.device.wmr[hand].trigger.pressed },\n      dest: { value: actions.takeSnapshot },\n      xform: xforms.rising\n    }\n  ];\n}\n\nfunction teleportationAndRotationBindings() {\n  const rJoy = paths.device.wmr.v(\"right/joy\");\n  const rJoyWest = paths.device.wmr.v(\"right/joy/west\");\n  const rJoyEast = paths.device.wmr.v(\"right/joy/East\");\n  const rJoyWestRising = paths.device.wmr.v(\"right/joy/west/rising\");\n  const rJoyEastRising = paths.device.wmr.v(\"right/joy/east/rising\");\n  const keyboardQRising = paths.device.wmr.k(\"q/rising\");\n  const keyboardERising = paths.device.wmr.k(\"e/rising\");\n  return [\n    {\n      src: {\n        x: paths.device.wmr.right.joystick.axisX,\n        y: paths.device.wmr.right.joystick.axisY\n      },\n      dest: { value: rJoy },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: rJoy },\n      dest: {\n        north: rJoyNorth,\n        west: rJoyWest,\n        east: rJoyEast\n      },\n      xform: xforms.vec2dpad(0.2, false, false)\n    },\n    {\n      src: { value: rJoyNorth },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rJoyWest },\n      dest: { value: rJoyWestRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rJoyEast },\n      dest: { value: rJoyEastRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: keyboardQRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: keyboardERising },\n      xform: xforms.rising\n    },\n    {\n      src: [rJoyWestRising, keyboardQRising],\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.any\n    },\n    {\n      src: [rJoyEastRising, keyboardERising],\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.any\n    }\n  ];\n}\n\nexport const wmrUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: { value: paths.device.wmr.left.pose },\n      dest: { value: paths.actions.leftHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.right.pose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.right.pose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    },\n    ...handPoseBindings(\"left\"),\n    ...handPoseBindings(\"right\"),\n    ...freezeBindings(),\n    ...teleportationAndRotationBindings(),\n    ...characterAccelerationBindings(),\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandHoveringOnNothing]: [],\n  [sets.cursorHoveringOnNothing]: [],\n  [sets.rightHandHoveringOnNothing]: [],\n\n  [sets.rightHandTeleporting]: [\n    {\n      src: { value: rJoyNorth },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.falling\n    }\n  ],\n\n  [sets.cursorHoveringOnUI]: [\n    {\n      src: { value: rTriggerPressed },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandHoveringOnInteractable]: [\n    {\n      src: { value: lGripPressed },\n      dest: { value: paths.actions.leftHand.grab },\n      xform: xforms.rising\n    }\n  ],\n  [sets.cursorHoveringOnInteractable]: [\n    {\n      src: { value: rGripPressed },\n      dest: { value: rGripRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rTriggerPressed },\n      dest: { value: rTriggerRising },\n      xform: xforms.rising\n    },\n    {\n      src: [rGripRising, rTriggerRising],\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.any\n    }\n  ],\n  [sets.rightHandHoveringOnInteractable]: [\n    {\n      src: { value: rGripPressed },\n      dest: { value: paths.actions.rightHand.grab },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandHoldingInteractable]: [\n    neverFrozenBinding,\n    {\n      src: { value: lGripPressed },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.falling\n    }\n  ],\n  [sets.cursorHoldingInteractable]: [\n    neverFrozenBinding,\n    ...cursorModDeltaBindings(),\n    {\n      src: { value: rGripPressed },\n      dest: { value: rGripFalling },\n      xform: xforms.falling\n    },\n    {\n      src: { value: rTriggerPressed },\n      dest: { value: rTriggerFalling },\n      xform: xforms.falling\n    },\n    {\n      src: [rGripFalling, rTriggerFalling],\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.any\n    }\n  ],\n  [sets.rightHandHoldingInteractable]: [\n    neverFrozenBinding,\n    {\n      src: { value: rGripPressed },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.falling\n    }\n  ],\n\n  [sets.leftHandHoveringOnPen]: [],\n  [sets.cursorHoveringOnPen]: [],\n  [sets.rightHandHoveringOnPen]: [],\n\n  [sets.leftHandHoldingPen]: penBindings(\"left\"),\n  [sets.cursorHoldingPen]: penBindings(\"right\", true),\n  [sets.rightHandHoldingPen]: penBindings(\"right\"),\n\n  [sets.leftHandHoveringOnCamera]: [],\n  [sets.cursorHoveringOnCamera]: [],\n  [sets.rightHandHoveringOnCamera]: [],\n\n  [sets.leftHandHoldingCamera]: holdingCameraBindings(\"left\"),\n  [sets.cursorHoldingCamera]: holdingCameraBindings(\"right\", true),\n  [sets.rightHandHoldingCamera]: holdingCameraBindings(\"right\"),\n\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst xboxUnscaledCursorScalePenTip = \"foobarbazbotbooch\";\n\nconst button = paths.device.xbox.button;\nconst axis = paths.device.xbox.axis;\nconst rightTriggerFalling = \"/vars/xbox/rightTriggerFalling\";\n\nexport const xboxControllerUserBindings = addSetsToBindings({\n  [sets.cursorHoldingInteractable]: [\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.falling,\n      root: rightTriggerFalling,\n      priority: 100\n    },\n    {\n      src: {\n        bool: button(\"leftTrigger\").pressed,\n        value: axis(\"leftJoystickVertical\")\n      },\n      dest: { value: \"/vars/xbox/cursorModDelta\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        value: \"/vars/xbox/cursorModDelta\"\n      },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        bool: button(\"leftTrigger\").pressed,\n        value: axis(\"leftJoystickVertical\")\n      },\n      dest: { value: \"/var/xbox/leftJoystickVertical\" },\n      xform: xforms.copyIfFalse,\n      root: \"xbox/leftJoystick\",\n      priority: 200\n    }\n  ],\n  [sets.cursorHoldingPen]: [\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.rising,\n      root: \"xboxRightTriggerRising\",\n      priority: 200\n    },\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.falling,\n      root: rightTriggerFalling,\n      priority: 200\n    },\n    {\n      src: { value: button(\"b\").pressed },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"y\").pressed },\n      dest: { value: paths.actions.cursor.undoDrawing },\n      xform: xforms.rising,\n      root: \"xbox/y\",\n      priority: 200\n    },\n    {\n      src: { value: button(\"a\").pressed },\n      dest: { value: paths.actions.cursor.penNextColor },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"x\").pressed },\n      dest: { value: paths.actions.cursor.penPrevColor },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: button(\"leftTrigger\").pressed,\n        value: axis(\"rightJoystickVertical\")\n      },\n      dest: { value: xboxUnscaledCursorScalePenTip },\n      xform: xforms.copyIfTrue\n    },\n    {\n      dest: {\n        value: paths.actions.cursorScalePenTip\n      },\n      src: { value: xboxUnscaledCursorScalePenTip },\n      xform: xforms.scale(0.01)\n    }\n  ],\n  [sets.global]: [\n    {\n      src: {\n        value: axis(\"rightJoystickHorizontal\")\n      },\n      dest: { value: \"/var/xbox/scaledRightJoystickHorizontal\" },\n      xform: xforms.scale(-1.5) // horizontal look speed modifier\n    },\n    {\n      src: {\n        value: axis(\"rightJoystickVertical\")\n      },\n      dest: { value: \"/var/xbox/scaledRightJoystickVertical\" },\n      xform: xforms.scale(-1.25) // vertical look speed modifier\n    },\n    {\n      src: {\n        x: \"/var/xbox/scaledRightJoystickHorizontal\",\n        y: \"/var/xbox/scaledRightJoystickVertical\"\n      },\n      dest: { value: paths.actions.cameraDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: axis(\"leftJoystickHorizontal\")\n      },\n      dest: { value: \"/var/xbox/scaledLeftJoystickHorizontal\" },\n      xform: xforms.scale(1.5) // horizontal move speed modifier\n    },\n    {\n      src: { value: axis(\"leftJoystickVertical\") },\n      dest: { value: \"/var/xbox/leftJoystickVertical\" },\n      xform: xforms.copy,\n      root: \"xbox/leftJoystick\",\n      priority: 100\n    },\n    {\n      src: { value: \"/var/xbox/leftJoystickVertical\" },\n      dest: { value: \"/var/xbox/scaledLeftJoystickVertical\" },\n      xform: xforms.scale(-1.25) // vertical move speed modifier\n    },\n    {\n      src: {\n        x: \"/var/xbox/scaledLeftJoystickHorizontal\",\n        y: \"/var/xbox/scaledLeftJoystickVertical\"\n      },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: button(\"leftTrigger\").pressed },\n      dest: { value: paths.actions.boost },\n      xform: xforms.copy\n    },\n    {\n      src: { value: button(\"leftBumper\").pressed },\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"rightBumper\").pressed },\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.rising\n    },\n    {\n      dest: { value: \"var/vec2/zero\" },\n      xform: xforms.vec2Zero\n    },\n    {\n      src: { value: \"var/vec2/zero\" },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.poseFromCameraProjection()\n    },\n    {\n      src: { value: button(\"y\").pressed },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising,\n      root: \"xbox/y\",\n      priority: 100\n    }\n  ],\n  [sets.cursorHoveringOnInteractable]: [\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising,\n      root: \"xboxRightTriggerRising\",\n      priority: 100\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\n// vars\nconst v = s => `/vars/daydream/${s}`;\nconst touchpad = v(\"touchpad/axis\");\nconst touchpadRising = v(\"touchpad/rising\");\nconst touchpadFalling = v(\"touchpad/falling\");\nconst touchpadPressed = v(\"touchpad/pressed\");\nconst dpadNorth = v(\"dpad/north\");\nconst dpadSouth = v(\"dpad/south\");\nconst dpadEast = v(\"dpad/east\");\nconst dpadWest = v(\"dpad/west\");\nconst dpadCenter = v(\"dpad/center\");\nconst brushSizeDelta = v(\"brushSizeDelta\");\nconst cursorModDelta = v(\"cursorModDelta\");\nconst dpadSouthDrop = v(\"dropSouth\");\nconst dpadCenterDrop = v(\"dropCenter\");\n\nconst grabBinding = [\n  {\n    src: { value: dpadCenter, bool: touchpadRising },\n    dest: { value: paths.actions.cursor.grab },\n    xform: xforms.copyIfTrue,\n    priority: 100\n  }\n];\n\nconst dropOnCenterOrSouth = [\n  {\n    src: { value: dpadCenter, bool: touchpadRising },\n    dest: { value: dpadCenterDrop },\n    xform: xforms.copyIfTrue,\n    priority: 100\n  },\n  {\n    src: { value: dpadSouth, bool: touchpadRising },\n    dest: { value: dpadSouthDrop },\n    xform: xforms.copyIfTrue,\n    priority: 100\n  },\n  {\n    src: [dpadCenterDrop, dpadSouthDrop],\n    dest: { value: paths.actions.cursor.drop },\n    xform: xforms.any\n  }\n];\n\nexport const daydreamUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        x: paths.device.daydream.axis(\"touchpadX\"),\n        y: paths.device.daydream.axis(\"touchpadY\")\n      },\n      dest: { value: touchpad },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: paths.device.daydream.button(\"touchpad\").pressed\n      },\n      dest: { value: touchpadRising },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.daydream.button(\"touchpad\").pressed\n      },\n      dest: { value: touchpadFalling },\n      xform: xforms.falling\n    },\n    {\n      src: {\n        value: paths.device.daydream.button(\"touchpad\").pressed\n      },\n      dest: { value: touchpadPressed },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: touchpad\n      },\n      dest: {\n        north: dpadNorth,\n        south: dpadSouth,\n        east: dpadEast,\n        west: dpadWest,\n        center: dpadCenter\n      },\n      xform: xforms.vec2dpad(0.5)\n    },\n    {\n      src: {\n        value: dpadEast,\n        bool: touchpadRising\n      },\n      dest: {\n        value: paths.actions.snapRotateRight\n      },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        value: dpadWest,\n        bool: touchpadRising\n      },\n      dest: {\n        value: paths.actions.snapRotateLeft\n      },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        value: dpadCenter,\n        bool: touchpadRising\n      },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: paths.device.daydream.pose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.daydream.pose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    }\n  ],\n\n  [sets.cursorHoveringOnInteractable]: grabBinding,\n  [sets.cursorHoveringOnUI]: grabBinding,\n\n  [sets.cursorHoldingInteractable]: [\n    {\n      src: { value: touchpadFalling },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.daydream.axis(\"touchpadY\"),\n        touching: paths.device.daydream.button(\"touchpad\").touched\n      },\n      dest: { value: cursorModDelta },\n      xform: xforms.touch_axis_scroll()\n    },\n    {\n      src: { value: cursorModDelta },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.copy\n    }\n  ],\n\n  [sets.rightHandTeleporting]: [\n    {\n      src: { value: touchpadFalling },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.copy\n    }\n  ],\n\n  [sets.cursorHoldingPen]: [\n    {\n      src: { value: dpadNorth, bool: touchpadRising },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    {\n      src: { value: touchpadFalling },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.copy,\n      priority: 100\n    },\n    {\n      src: {\n        value: paths.device.daydream.axis(\"touchpadX\"),\n        touching: paths.device.daydream.button(\"touchpad\").touched\n      },\n      dest: { value: brushSizeDelta },\n      xform: xforms.touch_axis_scroll(-0.1)\n    },\n    {\n      src: {\n        value: brushSizeDelta,\n        bool: touchpadPressed\n      },\n      dest: { value: paths.actions.cursor.scalePenTip },\n      xform: xforms.copyIfFalse,\n      priority: 100\n    },\n    {\n      src: { value: dpadEast, bool: touchpadRising },\n      dest: {\n        value: paths.actions.cursor.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    {\n      src: { value: dpadWest, bool: touchpadRising },\n      dest: {\n        value: paths.actions.cursor.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    {\n      src: {\n        value: cursorModDelta,\n        bool: touchpadPressed\n      },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.copyIfFalse,\n      priority: 100\n    },\n    ...dropOnCenterOrSouth\n  ],\n\n  [sets.cursorHoldingCamera]: [\n    // Don't drop on touchpad release\n    {\n      src: {\n        value: touchpadFalling\n      },\n      xform: xforms.noop,\n      priority: 100\n    },\n    {\n      src: {\n        value: dpadNorth,\n        bool: touchpadRising\n      },\n      dest: { value: paths.actions.cursor.takeSnapshot },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    ...dropOnCenterOrSouth\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nexport default function generate3DOFTriggerBindings(device) {\n  const touchpad = device.v(\"touchpad\");\n  const touchpadRising = device.v(\"touchpad/rising\");\n  const touchpadFalling = device.v(\"touchpad/falling\");\n  const triggerRising = device.v(\"trigger/rising\");\n  const triggerFalling = device.v(\"trigger/falling\");\n  const dpadNorth = device.v(\"dpad/north\");\n  const dpadSouth = device.v(\"dpad/south\");\n  const dpadEast = device.v(\"dpad/east\");\n  const dpadWest = device.v(\"dpad/west\");\n  const dpadCenter = device.v(\"dpad/center\");\n  const dpadCenterStrip = device.v(\"dpad/centerStrip\");\n\n  const grabBinding = {\n    src: {\n      value: triggerRising\n    },\n    dest: { value: paths.actions.cursor.grab },\n    xform: xforms.copy,\n    priority: 200\n  };\n\n  return addSetsToBindings({\n    [sets.global]: [\n      {\n        src: {\n          value: device.button(\"trigger\").pressed\n        },\n        dest: { value: triggerRising },\n        xform: xforms.rising\n      },\n      {\n        src: {\n          value: device.button(\"trigger\").pressed\n        },\n        dest: { value: triggerFalling },\n        xform: xforms.falling\n      },\n      {\n        src: {\n          value: device.button(\"touchpad\").pressed\n        },\n        dest: { value: touchpadRising },\n        xform: xforms.rising,\n        priority: 100\n      },\n      {\n        src: {\n          value: device.button(\"touchpad\").pressed\n        },\n        dest: { value: touchpadFalling },\n        xform: xforms.falling,\n        priority: 100\n      },\n      {\n        src: {\n          x: device.axis(\"touchpadX\"),\n          y: device.axis(\"touchpadY\")\n        },\n        dest: { value: touchpad },\n        xform: xforms.compose_vec2\n      },\n      {\n        src: {\n          value: touchpad\n        },\n        dest: {\n          north: dpadNorth,\n          south: dpadSouth,\n          east: dpadEast,\n          west: dpadWest,\n          center: dpadCenter\n        },\n        xform: xforms.vec2dpad(0.3)\n      },\n      {\n        src: [dpadCenter, dpadSouth],\n        dest: { value: dpadCenterStrip },\n        xform: xforms.any\n      },\n      {\n        src: {\n          value: dpadCenterStrip,\n          bool: device.button(\"touchpad\").pressed\n        },\n        dest: {\n          value: paths.actions.ensureFrozen\n        },\n        priority: 100,\n        xform: xforms.copyIfTrue\n      },\n      {\n        src: { value: touchpadFalling },\n        dest: {\n          value: paths.actions.thaw\n        },\n        xform: xforms.copy\n      },\n      {\n        src: {\n          value: dpadEast,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.snapRotateRight\n        },\n        xform: xforms.copyIfTrue,\n        priority: 100\n      },\n      {\n        src: {\n          value: dpadWest,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.snapRotateLeft\n        },\n        xform: xforms.copyIfTrue,\n        priority: 100\n      },\n\n      {\n        src: {\n          value: triggerRising\n        },\n        dest: { value: paths.actions.rightHand.startTeleport },\n        xform: xforms.copy,\n        priority: 100\n      },\n\n      {\n        src: { value: device.pose },\n        dest: { value: paths.actions.cursor.pose },\n        xform: xforms.copy\n      },\n      {\n        src: { value: device.pose },\n        dest: { value: paths.actions.rightHand.pose },\n        xform: xforms.copy\n      },\n\n      {\n        src: { value: device.button(\"touchpad\").touched },\n        dest: { value: paths.actions.rightHand.thumb },\n        xform: xforms.copy\n      },\n      {\n        src: { value: device.button(\"trigger\").pressed },\n        dest: { value: paths.actions.rightHand.index },\n        xform: xforms.copy\n      },\n      {\n        src: { value: device.button(\"trigger\").pressed },\n        dest: { value: paths.actions.rightHand.middleRingPinky },\n        xform: xforms.copy\n      }\n    ],\n\n    [sets.cursorHoveringOnInteractable]: [grabBinding],\n    [sets.cursorHoveringOnUI]: [grabBinding],\n\n    [sets.cursorHoldingInteractable]: [\n      {\n        src: {\n          value: triggerFalling\n        },\n        dest: { value: paths.actions.cursor.drop },\n        xform: xforms.copy,\n        priority: 200\n      },\n      {\n        src: {\n          value: device.axis(\"touchpadY\"),\n          touching: device.button(\"touchpad\").touched\n        },\n        dest: { value: paths.actions.cursor.modDelta },\n        xform: xforms.touch_axis_scroll()\n      },\n      {\n        src: { value: dpadCenterStrip },\n        priority: 200,\n        xform: xforms.noop\n      }\n    ],\n\n    [sets.rightHandTeleporting]: [\n      {\n        src: {\n          value: triggerFalling\n        },\n        dest: { value: paths.actions.rightHand.stopTeleport },\n        xform: xforms.copy,\n        priority: 100\n      }\n    ],\n\n    [sets.cursorHoldingPen]: [\n      {\n        src: {\n          value: triggerRising\n        },\n        dest: { value: paths.actions.cursor.startDrawing },\n        xform: xforms.copy,\n        priority: 300\n      },\n      {\n        src: {\n          value: triggerFalling\n        },\n        dest: { value: paths.actions.cursor.stopDrawing },\n        xform: xforms.copy,\n        priority: 300\n      },\n      {\n        src: {\n          value: device.axis(\"touchpadX\"),\n          touching: device.button(\"touchpad\").touched\n        },\n        dest: { value: paths.actions.cursor.scalePenTip },\n        xform: xforms.touch_axis_scroll(-0.1)\n      },\n      {\n        src: {\n          value: dpadCenterStrip,\n          bool: touchpadFalling\n        },\n        dest: { value: paths.actions.cursor.drop },\n        xform: xforms.copyIfTrue,\n        priority: 300\n      },\n      {\n        src: {\n          value: dpadEast,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.cursor.penPrevColor\n        },\n        xform: xforms.copyIfTrue,\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadWest,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.cursor.penNextColor\n        },\n        xform: xforms.copyIfTrue,\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadNorth,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.cursor.undoDrawing\n        },\n        xform: xforms.copyIfTrue,\n        priority: 200\n      }\n    ],\n\n    [sets.cursorHoldingCamera]: [\n      {\n        src: {\n          value: triggerRising\n        },\n        dest: { value: paths.actions.cursor.takeSnapshot },\n        xform: xforms.copy,\n        priority: 300\n      },\n      {\n        src: {\n          value: triggerFalling\n        },\n        xform: xforms.noop,\n        priority: 300\n      },\n      {\n        src: {\n          value: dpadCenterStrip,\n          bool: touchpadFalling\n        },\n        dest: { value: paths.actions.cursor.drop },\n        xform: xforms.copyIfTrue,\n        priority: 300\n      }\n    ]\n  });\n}\n","import { sets } from \"./sets\";\n\nlet rightHandState;\nlet leftHandState;\nlet cursorHand;\nlet leftTeleporter;\nlet rightTeleporter;\nlet cursorController;\n\nexport function resolveActionSets() {\n  rightHandState = rightHandState || document.querySelector(\"#player-right-controller\").components[\"super-hands\"].state;\n  leftHandState = leftHandState || document.querySelector(\"#player-left-controller\").components[\"super-hands\"].state;\n  cursorHand = cursorHand || document.querySelector(\"#cursor\").components[\"super-hands\"].state;\n  leftTeleporter = leftTeleporter || document.querySelector(\"#player-left-controller\").components[\"teleport-controls\"];\n  rightTeleporter =\n    rightTeleporter || document.querySelector(\"#player-right-controller\").components[\"teleport-controls\"];\n  cursorController = cursorController || document.querySelector(\"#cursor-controller\").components[\"cursor-controller\"];\n\n  const leftHandHoveringOnInteractable =\n    !leftTeleporter.active &&\n    leftHandState.has(\"hover-start\") &&\n    leftHandState.get(\"hover-start\").matches(\".interactable, .interactable *\");\n  const leftHandHoveringOnPen =\n    !leftTeleporter.active &&\n    leftHandState.has(\"hover-start\") &&\n    leftHandState.get(\"hover-start\").matches(\".pen, .pen *\");\n  const leftHandHoveringOnCamera =\n    !leftTeleporter.active &&\n    leftHandState.has(\"hover-start\") &&\n    leftHandState.get(\"hover-start\").matches(\".icamera, .icamera *\");\n  const leftHandHoldingInteractable =\n    leftHandState.has(\"grab-start\") && leftHandState.get(\"grab-start\").matches(\".interactable, .interactable *\");\n  const leftHandHoldingPen = leftHandState.has(\"grab-start\") && leftHandState.get(\"grab-start\").matches(\".pen, .pen *\");\n  const leftHandHoldingCamera =\n    leftHandState.has(\"grab-start\") && leftHandState.get(\"grab-start\").matches(\".icamera, .icamera *\");\n  const leftHandHovering = !leftTeleporter.active && leftHandState.has(\"hover-start\");\n  const leftHandHoveringOnNothing = !leftHandHovering && !leftHandState.has(\"grab-start\");\n  const leftHandTeleporting = leftTeleporter.active;\n\n  const cursorGrabbing = cursorHand.has(\"grab-start\");\n\n  const rightHandTeleporting = rightTeleporter.active;\n  const rightHandHovering = !rightHandTeleporting && !cursorGrabbing && rightHandState.has(\"hover-start\");\n  const rightHandGrabbing = !rightHandTeleporting && !cursorGrabbing && rightHandState.has(\"grab-start\");\n\n  const rightHandHoveringOnInteractable =\n    !rightHandTeleporting &&\n    !cursorGrabbing &&\n    rightHandState.has(\"hover-start\") &&\n    rightHandState.get(\"hover-start\").matches(\".interactable, .interactable *\");\n  const rightHandHoveringOnPen =\n    !rightHandTeleporting &&\n    !cursorGrabbing &&\n    rightHandState.has(\"hover-start\") &&\n    rightHandState.get(\"hover-start\").matches(\".pen, .pen *\");\n  const rightHandHoveringOnCamera =\n    !rightTeleporter.active &&\n    !cursorGrabbing &&\n    rightHandState.has(\"hover-start\") &&\n    rightHandState.get(\"hover-start\").matches(\".icamera, .icamera *\");\n  const rightHandHoldingInteractable =\n    !cursorGrabbing &&\n    rightHandState.has(\"grab-start\") &&\n    rightHandState.get(\"grab-start\").matches(\".interactable, .interactable *\");\n  const rightHandHoldingPen =\n    !cursorGrabbing && rightHandState.has(\"grab-start\") && rightHandState.get(\"grab-start\").matches(\".pen, .pen *\");\n  const rightHandHoldingCamera =\n    !cursorGrabbing &&\n    rightHandState.has(\"grab-start\") &&\n    rightHandState.get(\"grab-start\").matches(\".icamera, .icamera *\");\n\n  const rightHandHoveringOnNothing =\n    !rightHandTeleporting &&\n    !rightHandHovering &&\n    !cursorHand.has(\"hover-start\") &&\n    !cursorGrabbing &&\n    !rightHandState.has(\"grab-start\");\n\n  // Cursor\n  cursorController.enabled = !(rightHandTeleporting || rightHandHovering || rightHandGrabbing);\n\n  const cursorHoveringOnUI =\n    cursorController.enabled &&\n    !rightHandTeleporting &&\n    !rightHandHovering &&\n    !rightHandGrabbing &&\n    (cursorHand.has(\"hover-start\") && cursorHand.get(\"hover-start\").matches(\".ui, .ui *\"));\n  const cursorHoveringOnInteractable =\n    cursorController.enabled &&\n    !rightHandTeleporting &&\n    !rightHandHovering &&\n    !rightHandGrabbing &&\n    !cursorHoveringOnUI &&\n    cursorHand.has(\"hover-start\") &&\n    cursorHand.get(\"hover-start\").matches(\".interactable, .interactable *\");\n  const cursorHoveringOnCamera =\n    cursorController.enabled &&\n    !rightTeleporter.active &&\n    !rightHandHovering &&\n    !rightHandGrabbing &&\n    !cursorHoveringOnUI &&\n    (cursorHand.has(\"hover-start\") && cursorHand.get(\"hover-start\").matches(\".icamera, .icamera *\"));\n  const cursorHoveringOnPen =\n    cursorController.enabled &&\n    !rightHandTeleporting &&\n    !rightHandHovering &&\n    !rightHandGrabbing &&\n    !cursorHoveringOnUI &&\n    cursorHand.has(\"hover-start\") &&\n    cursorHand.get(\"hover-start\").matches(\".pen, .pen *\");\n  const cursorHoldingInteractable =\n    !rightHandTeleporting &&\n    cursorHand.has(\"grab-start\") &&\n    cursorHand.get(\"grab-start\").matches(\".interactable, .interactable *\");\n  const cursorHoldingPen =\n    !rightHandTeleporting && cursorHand.has(\"grab-start\") && cursorHand.get(\"grab-start\").matches(\".pen, .pen *\");\n\n  const cursorHoldingCamera =\n    !rightTeleporter.active &&\n    cursorHand.has(\"grab-start\") &&\n    cursorHand.get(\"grab-start\").matches(\".icamera, .icamera *\");\n\n  const cursorHoveringOnNothing =\n    !rightHandTeleporting &&\n    !rightHandHovering &&\n    !rightHandGrabbing &&\n    !cursorHand.has(\"hover-start\") &&\n    !cursorHand.has(\"grab-start\") &&\n    !cursorHoveringOnUI;\n\n  const userinput = AFRAME.scenes[0].systems.userinput;\n  userinput.toggleSet(sets.leftHandHoveringOnInteractable, leftHandHoveringOnInteractable);\n  userinput.toggleSet(sets.leftHandHoveringOnPen, leftHandHoveringOnPen);\n  userinput.toggleSet(sets.leftHandHoveringOnCamera, leftHandHoveringOnCamera);\n  userinput.toggleSet(sets.leftHandHoveringOnNothing, leftHandHoveringOnNothing);\n  userinput.toggleSet(sets.leftHandHoldingPen, leftHandHoldingPen);\n  userinput.toggleSet(sets.leftHandHoldingInteractable, leftHandHoldingInteractable);\n  userinput.toggleSet(sets.leftHandHoldingCamera, leftHandHoldingCamera);\n  userinput.toggleSet(sets.leftHandTeleporting, leftHandTeleporting);\n\n  userinput.toggleSet(sets.rightHandHoveringOnInteractable, rightHandHoveringOnInteractable);\n  userinput.toggleSet(sets.rightHandHoveringOnPen, rightHandHoveringOnPen);\n  userinput.toggleSet(sets.rightHandHoveringOnNothing, rightHandHoveringOnNothing);\n  userinput.toggleSet(sets.rightHandHoveringOnCamera, rightHandHoveringOnCamera);\n  userinput.toggleSet(sets.rightHandHoldingPen, rightHandHoldingPen);\n  userinput.toggleSet(sets.rightHandHoldingInteractable, rightHandHoldingInteractable);\n  userinput.toggleSet(sets.rightHandTeleporting, rightHandTeleporting);\n  userinput.toggleSet(sets.rightHandHoldingCamera, rightHandHoldingCamera);\n\n  userinput.toggleSet(sets.cursorHoveringOnPen, cursorHoveringOnPen);\n  userinput.toggleSet(sets.cursorHoveringOnCamera, cursorHoveringOnCamera);\n  userinput.toggleSet(sets.cursorHoveringOnInteractable, cursorHoveringOnInteractable);\n  userinput.toggleSet(sets.cursorHoveringOnUI, cursorHoveringOnUI);\n  userinput.toggleSet(sets.cursorHoveringOnNothing, cursorHoveringOnNothing);\n  userinput.toggleSet(sets.cursorHoldingPen, cursorHoldingPen);\n  userinput.toggleSet(sets.cursorHoldingCamera, cursorHoldingCamera);\n  userinput.toggleSet(sets.cursorHoldingInteractable, cursorHoldingInteractable);\n  userinput.toggleSet(\n    sets.inputFocused,\n    document.activeElement.nodeName === \"INPUT\" || document.activeElement.nodeName === \"TEXTAREA\"\n  );\n}\n","import { paths } from \"../paths\";\n\nexport class GamepadDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n  }\n\n  write(frame) {\n    if (this.gamepad.connected) {\n      this.gamepad.buttons.forEach((button, i) => {\n        const buttonPath = paths.device.gamepad(this.gamepad.index).button(i);\n        frame[buttonPath.pressed] = !!button.pressed;\n        frame[buttonPath.touched] = !!button.touched;\n        frame[buttonPath.value] = button.value;\n      });\n      this.gamepad.axes.forEach((axis, i) => {\n        frame[paths.device.gamepad(this.gamepad.index).axis(i)] = axis;\n      });\n    }\n  }\n}\n","export const gamepadBindings = {};\n","import { paths } from \"./userinput/paths\";\n\nAFRAME.registerSystem(\"camera-mirror\", {\n  init() {\n    this._onWindowResize = this._onWindowResize.bind(this);\n    window.addEventListener(\"resize\", this._onWindowResize, false);\n  },\n\n  tick() {\n    const userinput = this.el.systems.userinput;\n\n    if (userinput.get(paths.actions.camera.exitMirror) && this.mirrorEl) {\n      this.unmirrorCameraAtEl(this.mirrorEl);\n    }\n  },\n\n  // Adds a camera under el, and starts mirroring\n  mirrorCameraAtEl(el) {\n    // TODO probably should explicitly check for immersive mode here.\n    if (AFRAME.utils.device.isMobile()) return;\n    if (this.mirrorEl && this.mirrorEl !== el) this.unmirrorCameraAtEl(this.mirrorEl);\n\n    this.mirrorEl = el;\n    this.mirrorCamera = new THREE.PerspectiveCamera(80, window.innerWidth / window.innerHeight, 0.1, 30000);\n    this.mirrorCamera.rotation.set(0, Math.PI, 0);\n    el.setObject3D(\"mirror-camera\", this.mirrorCamera);\n\n    document.body.classList.add(\"mirrored-camera\");\n\n    if (!this.directRenderFunc) {\n      this._patchRenderFunc();\n    }\n\n    this.mirrorEl.emit(\"mirrored\", { el: this.mirrorEl });\n  },\n\n  unmirrorCameraAtEl(el) {\n    if (this.mirrorEl !== el) return;\n\n    el.removeObject3D(\"mirror-camera\");\n    document.body.classList.remove(\"mirrored-camera\");\n    const oldEl = this.mirrorEl;\n\n    this.mirrorEl = null;\n    this.mirrorCamera = null;\n\n    oldEl.emit(\"unmirrored\", { el: oldEl });\n  },\n\n  getMirroredCameraEl() {\n    return this.mirrorEl;\n  },\n\n  _onWindowResize() {\n    if (!this.mirrorCamera) return;\n    this.mirrorCamera.aspect = window.innerWidth / window.innerHeight;\n    this.mirrorCamera.updateProjectionMatrix();\n    this.el.sceneEl.renderer.setSize(window.innerWidth, window.innerHeight);\n  },\n\n  _patchRenderFunc() {\n    const headEl = document.getElementById(\"player-head\");\n    const hudEl = document.getElementById(\"player-hud\");\n    const tempHeadScale = new THREE.Vector3();\n    const renderer = this.el.renderer;\n    const playerHead = headEl && headEl.object3D;\n    const playerHud = hudEl && hudEl.object3D;\n\n    this.directRenderFunc = renderer.render;\n\n    this.el.sceneEl.renderer.render = (scene, camera, renderTarget) => {\n      const wasVREnabled = renderer.vr.enabled;\n\n      if (wasVREnabled || renderTarget || !this.mirrorCamera) {\n        this.directRenderFunc.call(renderer, scene, camera, renderTarget);\n        if (!this.mirrorCamera || renderTarget) return;\n      }\n\n      if (playerHead) {\n        tempHeadScale.copy(playerHead.scale);\n        playerHead.scale.set(1, 1, 1);\n        playerHead.updateMatrices(true, true);\n        playerHead.updateMatrixWorld(true, true);\n      }\n\n      if (playerHud) {\n        playerHud.visible = false;\n      }\n      renderer.vr.enabled = false;\n      const tmpOnAfterRender = this.el.object3D.onAfterRender;\n      delete this.el.object3D.onAfterRender;\n      this.directRenderFunc.call(renderer, scene, this.mirrorCamera);\n      this.el.object3D.onAfterRender = tmpOnAfterRender;\n      renderer.vr.enabled = wasVREnabled;\n      if (playerHead) {\n        playerHead.scale.copy(tempHeadScale);\n        playerHead.updateMatrices(true, true);\n        playerHead.updateMatrixWorld(true);\n      }\n      if (playerHud) {\n        playerHud.visible = true;\n      }\n    };\n  }\n});\n","import { paths } from \"./paths\";\nAFRAME.registerSystem(\"userinput-debug\", {\n  active: true,\n\n  tick() {\n    if (!this.active) return;\n\n    const userinput = AFRAME.scenes[0].systems.userinput;\n\n    if (this.userinputFrameStatus) {\n      const replacer = (k, v) => {\n        if (typeof v === \"number\") {\n          return `${v >= 0 ? \"+\" : \"\"}${v.toFixed(3)}`;\n        }\n        return v;\n      };\n      const pathsOutput = [];\n      const { frame } = userinput;\n      for (const key in frame) {\n        if (!frame.hasOwnProperty(key)) continue;\n        if (![\"/actions/\"].some(x => key.startsWith(x))) continue;\n        let val = JSON.stringify(frame[key], replacer);\n        if (val) val = val.replace(/{\"(\\w{3,})\":/g, '{\\n  \"$1\":').replace(/,\"(\\w{3,})\":/g, ',\\n  \"$1\":');\n        pathsOutput.push(`${key} -> ${val}`);\n      }\n      this.userinputFrameStatus.textContent = pathsOutput.join(\"\\n\");\n    }\n\n    if (userinput.get(paths.actions.logDebugFrame)) {\n      if (!this.userinputFrameStatus) {\n        this.userinputFrameStatus = document.createElement(\"div\");\n        this.userinputFrameStatus.id = \"userinput-frame-status\";\n        this.userinputFrameStatus.style = `\n          position: absolute;\n          left: 0; bottom: 0;\n          background: white;\n          white-space: pre;\n          font-family: monospace;\n          font-size: 8pt;\n        `;\n        document.body.append(this.userinputFrameStatus);\n      }\n\n      console.log(userinput);\n      console.log(\"sorted\", userinput.sortedBindings);\n      console.log(\"actives\", userinput.actives);\n      console.log(\"masks\", userinput.masks);\n      console.log(\"masked\", userinput.masked);\n      console.log(\"devices\", userinput.activeDevices);\n      console.log(\"activeSets\", userinput.activeSets);\n      console.log(\"frame\", userinput.frame);\n      console.log(\"xformStates\", userinput.xformStates);\n      const { sortedBindings, actives, masked } = userinput;\n      for (const i in sortedBindings) {\n        const sb = [];\n        if (masked[i].length > 0) {\n          for (const j of masked[i]) {\n            sb.push(JSON.stringify(sortedBindings[j]));\n          }\n        }\n\n        if (this.logBindings) {\n          console.log(\n            \"binding: \",\n            i,\n            \"\\n\",\n            sortedBindings[i],\n            \"\\n\",\n            \"dest: \",\n            sortedBindings[i].dest && Object.values(sortedBindings[i].dest),\n            \"\\n\",\n            \"active: \",\n            actives[i],\n            \"\\n\",\n            \"maskedBy: \",\n            masked[i],\n            \"\\n\",\n            sb.join(\"\\n\"),\n            \"\\n\"\n          );\n        }\n      }\n    }\n  }\n});\n","// Given a function and a queue name, schedules things so a single function\n// from a given queue will be called per frame.\nAFRAME.registerSystem(\"frame-scheduler\", {\n  init() {\n    // Registry a map from queue name to list of registered functions.\n    this.registry = new Map();\n    this.queues = [];\n    this.frameIndex = 0;\n  },\n\n  schedule(func, queue) {\n    if (!this.registry.has(queue)) {\n      this.queues.push(queue);\n      this.registry.set(queue, []);\n    }\n\n    this.registry.get(queue).push(func);\n  },\n\n  unschedule(func) {\n    for (let i = 0; i < this.queues.length; i++) {\n      const queue = this.queues[i];\n      const entries = this.registry.get(queue);\n      const idx = entries.indexOf(func);\n\n      if (idx >= 0) {\n        entries.splice(idx, 1);\n      }\n    }\n\n    console.log(this.registry);\n  },\n\n  tick: function() {\n    for (let i = 0; i < this.queues.length; i++) {\n      const queue = this.queues[i];\n      const entries = this.registry.get(queue);\n      if (entries.length === 0) continue;\n\n      entries[this.frameIndex % entries.length]();\n    }\n\n    this.frameIndex++;\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\n\nconst pathsMap = {\n  \"player-right-controller\": {\n    scaleGrabbedGrabbable: paths.actions.rightHand.scaleGrabbedGrabbable\n  },\n  \"player-left-controller\": {\n    scaleGrabbedGrabbable: paths.actions.leftHand.scaleGrabbedGrabbable\n  },\n  cursor: {\n    scaleGrabbedGrabbable: paths.actions.cursor.scaleGrabbedGrabbable\n  }\n};\n\n/**\n * Manages ownership and haptics on an interatable\n * @namespace network\n * @component super-networked-interactable\n */\nAFRAME.registerComponent(\"super-networked-interactable\", {\n  schema: {\n    hapticsMassVelocityFactor: { default: 0.1 },\n    counter: { type: \"selector\" },\n    scrollScaleDelta: { default: 0.1 },\n    minScale: { default: 0.1 },\n    maxScale: { default: 100 }\n  },\n\n  init: function() {\n    this.system = this.el.sceneEl.systems.physics;\n    this.counter = this.data.counter.components[\"networked-counter\"];\n    this.hand = null;\n    this.currentScale = new THREE.Vector3();\n    this.currentScale.copy(this.el.getAttribute(\"scale\"));\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.networkedEl = networkedEl;\n      this._syncCounterRegistration();\n      if (!NAF.utils.isMine(networkedEl)) {\n        this.el.setAttribute(\"body\", { type: \"static\" });\n      }\n    });\n\n    this._onGrabStart = this._onGrabStart.bind(this);\n    this._onGrabEnd = this._onGrabEnd.bind(this);\n    this._onOwnershipLost = this._onOwnershipLost.bind(this);\n    this._syncCounterRegistration = this._syncCounterRegistration.bind(this);\n    this.el.addEventListener(\"grab-start\", this._onGrabStart);\n    this.el.addEventListener(\"grab-end\", this._onGrabEnd);\n    this.el.addEventListener(\"pinned\", this._syncCounterRegistration);\n    this.el.addEventListener(\"unpinned\", this._syncCounterRegistration);\n    this.el.addEventListener(\"ownership-lost\", this._onOwnershipLost);\n    this.system.addComponent(this);\n  },\n\n  remove: function() {\n    this.counter.deregister(this.el);\n    this.el.removeEventListener(\"grab-start\", this._onGrabStart);\n    this.el.removeEventListener(\"grab-end\", this._onGrabEnd);\n    this.el.removeEventListener(\"ownership-lost\", this._onOwnershipLost);\n    this.system.removeComponent(this);\n  },\n\n  _onGrabStart: function(e) {\n    if (!this.el.components.grabbable || this.el.components.grabbable.data.maxGrabbers === 0) return;\n\n    this.hand = e.detail.hand;\n    this.hand.emit(\"haptic_pulse\", { intensity: \"high\" });\n    if (this.networkedEl && !NAF.utils.isMine(this.networkedEl)) {\n      if (NAF.utils.takeOwnership(this.networkedEl)) {\n        this.el.setAttribute(\"body\", { type: \"dynamic\" });\n        this._syncCounterRegistration();\n      } else {\n        this.el.emit(\"grab-end\", { hand: this.hand });\n        this.hand = null;\n      }\n    }\n    this.currentScale.copy(this.el.getAttribute(\"scale\"));\n  },\n\n  _onGrabEnd: function(e) {\n    if (e.detail.hand) e.detail.hand.emit(\"haptic_pulse\", { intensity: \"high\" });\n  },\n\n  _onOwnershipLost: function() {\n    this.el.setAttribute(\"body\", { type: \"static\" });\n    this.el.emit(\"grab-end\", { hand: this.hand });\n    this.hand = null;\n    this._syncCounterRegistration();\n  },\n\n  _changeScale: function(delta) {\n    if (delta && this.el.is(\"grabbed\") && this.el.components.hasOwnProperty(\"stretchable\")) {\n      this.currentScale.addScalar(delta).clampScalar(this.data.minScale, this.data.maxScale);\n      this.el.setAttribute(\"scale\", this.currentScale);\n      this.el.components[\"stretchable\"].stretchBody(this.el, this.currentScale);\n      this.el.object3D.matrixNeedsUpdate = true;\n    }\n  },\n\n  _syncCounterRegistration: function() {\n    const el = this.networkedEl;\n    if (!el || !el.components[\"networked\"]) return;\n\n    const isPinned = el.components[\"pinnable\"] && el.components[\"pinnable\"].data.pinned;\n\n    if (NAF.utils.isMine(el) && !isPinned) {\n      this.counter.register(el);\n    } else {\n      this.counter.deregister(el);\n    }\n  },\n\n  tick: function() {\n    const grabber = this.el.components.grabbable.grabbers[0];\n    if (!(grabber && pathsMap[grabber.id])) return;\n\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    this._changeScale(userinput.get(pathsMap[grabber.id].scaleGrabbedGrabbable));\n  }\n});\n","/**\n * Limits networked interactables to a maximum number at any given time\n * @namespace network\n * @component networked-counter\n */\nAFRAME.registerComponent(\"networked-counter\", {\n  schema: {\n    max: { default: 3 },\n    ttl: { default: 0 },\n    grab_event: { type: \"string\", default: \"grab-start\" },\n    release_event: { type: \"string\", default: \"grab-end\" }\n  },\n\n  init() {\n    this.registeredEls = new Map();\n  },\n\n  remove() {\n    this.registeredEls.forEach(({ onGrabHandler, onReleaseHandler, timeout }, el) => {\n      el.removeEventListener(this.data.grab_event, onGrabHandler);\n      el.removeEventListener(this.data.release_event, onReleaseHandler);\n      clearTimeout(timeout);\n    });\n    this.registeredEls.clear();\n  },\n\n  register(el) {\n    if (this.data.max <= 0 || this.registeredEls.has(el)) return;\n\n    const grabEventListener = this._onGrabbed.bind(this, el);\n    const releaseEventListener = this._onReleased.bind(this, el);\n\n    this.registeredEls.set(el, {\n      ts: Date.now(),\n      onGrabHandler: grabEventListener,\n      onReleaseHandler: releaseEventListener\n    });\n\n    el.addEventListener(this.data.grab_event, grabEventListener);\n    el.addEventListener(this.data.release_event, releaseEventListener);\n\n    if (!el.is(\"grabbed\")) {\n      this._startTimer(el);\n    }\n\n    this._destroyOldest();\n  },\n\n  deregister(el) {\n    if (this.registeredEls.has(el)) {\n      const { onGrabHandler, onReleaseHandler, timeout } = this.registeredEls.get(el);\n      el.removeEventListener(this.data.grab_event, onGrabHandler);\n      el.removeEventListener(this.data.release_event, onReleaseHandler);\n      clearTimeout(timeout);\n      this.registeredEls.delete(el);\n    }\n  },\n\n  _onGrabbed(el) {\n    clearTimeout(this.registeredEls.get(el).timeout);\n  },\n\n  _onReleased(el) {\n    this._startTimer(el);\n    this.registeredEls.get(el).ts = Date.now();\n  },\n\n  _destroyOldest() {\n    if (this.registeredEls.size > this.data.max) {\n      let oldestEl = null,\n        minTs = Number.MAX_VALUE;\n      this.registeredEls.forEach(({ ts }, el) => {\n        if (ts < minTs && !el.is(\"grabbed\")) {\n          oldestEl = el;\n          minTs = ts;\n        }\n      });\n      this._destroy(oldestEl);\n    }\n  },\n\n  _startTimer(el) {\n    if (!this.data.ttl) return;\n    clearTimeout(this.registeredEls.get(el).timeout);\n    this.registeredEls.get(el).timeout = setTimeout(() => {\n      this._destroy(el);\n    }, this.data.ttl * 1000);\n  },\n\n  _destroy(el) {\n    // networked-interactable's remvoe will also call deregister, but it will happen async so we do it here as well.\n    this.deregister(el);\n    el.parentNode.removeChild(el);\n  }\n});\n","AFRAME.registerComponent(\"set-yxz-order\", {\n  init: function() {\n    this.el.object3D.rotation.order = \"YXZ\";\n  }\n});\n","/**\n * Sets all non-positional audio children to not be visible so their world matrices are not updated.\n */\nAFRAME.registerComponent(\"set-sounds-invisible\", {\n  schema: {\n    withinDistance: { type: \"number\" }\n  },\n\n  init() {\n    for (const component of Object.values(this.el.components)) {\n      if (component.attrName !== \"sound\" && !component.attrName.startsWith(\"sound__\")) continue;\n      if (component.data.positional) continue;\n      component.pool.traverse(o => (o.visible = false));\n    }\n  }\n});\n","const CARDBOARD_BUTTON_GAMEPAD_ID = \"Cardboard Button\";\n\n/**\n * Polls the Gamepad API for Cardboard Button input and emits cardboardbutton events.\n * @namespace user-input\n * @component cardboard-controls\n */\nmodule.exports = AFRAME.registerComponent(\"cardboard-controls\", {\n  init: function() {\n    this.buttons = {};\n    this.gamepad = null;\n    this.isMobile = AFRAME.utils.device.isMobile();\n    this.isVR = false;\n\n    this._handleEnterVR = this._handleEnterVR.bind(this);\n    this._handleExitVR = this._handleExitVR.bind(this);\n  },\n\n  play: function() {\n    window.addEventListener(\"enter-vr\", this._handleEnterVR);\n    window.addEventListener(\"exit-vr\", this._handleExitVR);\n  },\n\n  pause: function() {\n    window.removeEventListener(\"enter-vr\", this._handleEnterVR);\n    window.removeEventListener(\"exit-vr\", this._handleExitVR);\n  },\n\n  tick: function() {\n    if (!this.inVR || !this.isMobile) {\n      return;\n    }\n\n    this.gamepad = this.gamepad || this._getGamepad();\n    if (this.gamepad) {\n      for (let i = 0; i < this.gamepad.buttons.length; i++) {\n        if (this.gamepad.buttons[i].pressed && !this.buttons[i]) {\n          this.el.emit(\"cardboardbuttondown\", {});\n        } else if (!this.gamepad.buttons[i].pressed && this.buttons[i]) {\n          this.el.emit(\"cardboardbuttonup\", {});\n        }\n        this.buttons[i] = this.gamepad.buttons[i].pressed;\n      }\n    } else if (Object.keys(this.buttons).length) {\n      this.buttons = {};\n    }\n  },\n\n  _getGamepad: function() {\n    if (!navigator.getGamepads) {\n      return null;\n    }\n\n    const gamepads = navigator.getGamepads();\n    for (let i = 0; i < gamepads.length; i++) {\n      if (gamepads[i] && gamepads[i].id === CARDBOARD_BUTTON_GAMEPAD_ID) {\n        return gamepads[i];\n      }\n    }\n    return null;\n  },\n\n  _handleEnterVR: function() {\n    this.inVR = true;\n  },\n\n  _handleExitVR: function() {\n    this.inVR = false;\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nimport { getLastWorldPosition } from \"../utils/three-utils\";\n\n/**\n * Manages targeting and physical cursor location. Has the following responsibilities:\n *\n * - Tracking which entities in the scene can be targeted by the cursor (`objects`).\n * - Performing a raycast per-frame or on-demand to identify which entity is being currently targeted.\n * - Updating the visual presentation and position of the `cursor` entity and `line` component per frame.\n * - Sending an event when an entity is targeted or un-targeted.\n */\nAFRAME.registerComponent(\"cursor-controller\", {\n  schema: {\n    cursor: { type: \"selector\" },\n    camera: { type: \"selector\" },\n    far: { default: 3 },\n    near: { default: 0.06 },\n    cursorColorHovered: { default: \"#2F80ED\" },\n    cursorColorUnhovered: { default: \"#FFFFFF\" },\n    rayObject: { type: \"selector\" },\n    objects: { default: \"\" }\n  },\n\n  init: function() {\n    this.enabled = true;\n\n    this.data.cursor.addEventListener(\n      \"loaded\",\n      () => {\n        this.data.cursor.object3DMap.mesh.renderOrder = window.APP.RENDER_ORDER.CURSOR;\n      },\n      { once: true }\n    );\n\n    // raycaster state\n    this.setDirty = this.setDirty.bind(this);\n    this.targets = [];\n    this.raycaster = new THREE.Raycaster();\n    this.dirty = true;\n    this.distance = this.data.far;\n    const lineMaterial = new THREE.LineBasicMaterial({\n      color: \"white\",\n      opacity: 0.2,\n      transparent: true,\n      visible: false\n    });\n\n    const lineGeometry = new THREE.BufferGeometry();\n    lineGeometry.addAttribute(\"position\", new THREE.BufferAttribute(new Float32Array(2 * 3), 3));\n\n    this.line = new THREE.Line(lineGeometry, lineMaterial);\n    this.el.setObject3D(\"line\", this.line);\n  },\n\n  update: function() {\n    this.raycaster.far = this.data.far;\n    this.raycaster.near = this.data.near;\n    this.setDirty();\n  },\n\n  play: function() {\n    this.observer = new MutationObserver(this.setDirty);\n    this.observer.observe(this.el.sceneEl, { childList: true, attributes: true, subtree: true });\n    this.el.sceneEl.addEventListener(\"object3dset\", this.setDirty);\n    this.el.sceneEl.addEventListener(\"object3dremove\", this.setDirty);\n  },\n\n  pause: function() {\n    this.observer.disconnect();\n    this.el.sceneEl.removeEventListener(\"object3dset\", this.setDirty);\n    this.el.sceneEl.removeEventListener(\"object3dremove\", this.setDirty);\n  },\n\n  setDirty: function() {\n    this.dirty = true;\n  },\n\n  populateEntities: function(selector, target) {\n    target.length = 0;\n    const els = this.data.objects ? this.el.sceneEl.querySelectorAll(this.data.objects) : this.el.sceneEl.children;\n    for (let i = 0; i < els.length; i++) {\n      if (els[i].object3D) {\n        target.push(els[i].object3D);\n      }\n    }\n  },\n\n  emitIntersectionEvents: function(prevIntersection, currIntersection) {\n    // if we are now intersecting something, and previously we were intersecting nothing or something else\n    if (currIntersection && (!prevIntersection || currIntersection.object.el !== prevIntersection.object.el)) {\n      this.data.cursor.emit(\"raycaster-intersection\", { el: currIntersection.object.el });\n    }\n    // if we were intersecting something, but now we are intersecting nothing or something else\n    if (prevIntersection && (!currIntersection || currIntersection.object.el !== prevIntersection.object.el)) {\n      this.data.cursor.emit(\"raycaster-intersection-cleared\", { el: prevIntersection.object.el });\n    }\n  },\n\n  tick: (() => {\n    const rawIntersections = [];\n    const cameraPos = new THREE.Vector3();\n\n    return function() {\n      if (this.dirty) {\n        // app aware devices cares about this.targets so we must update it even if cursor is not enabled\n        this.populateEntities(this.data.objects, this.targets);\n        this.dirty = false;\n      }\n\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      const cursorPose = userinput.get(paths.actions.cursor.pose);\n      const rightHandPose = userinput.get(paths.actions.rightHand.pose);\n\n      this.data.cursor.object3D.visible = this.enabled && !!cursorPose;\n      this.line.material.visible = !!(this.enabled && rightHandPose);\n\n      if (!this.enabled || !cursorPose) {\n        return;\n      }\n\n      let intersection;\n      const isGrabbing = this.data.cursor.components[\"super-hands\"].state.has(\"grab-start\");\n      if (!isGrabbing) {\n        rawIntersections.length = 0;\n        this.raycaster.ray.origin = cursorPose.position;\n        this.raycaster.ray.direction = cursorPose.direction;\n        this.raycaster.intersectObjects(this.targets, true, rawIntersections);\n        intersection = rawIntersections.find(x => x.object.el);\n        this.emitIntersectionEvents(this.prevIntersection, intersection);\n        this.prevIntersection = intersection;\n        this.distance = intersection ? intersection.distance : this.data.far;\n      }\n\n      const { cursor, near, far, camera, cursorColorHovered, cursorColorUnhovered } = this.data;\n\n      const cursorModDelta = userinput.get(paths.actions.cursor.modDelta);\n      if (isGrabbing && cursorModDelta) {\n        this.distance = THREE.Math.clamp(this.distance - cursorModDelta, near, far);\n      }\n      cursor.object3D.position.copy(cursorPose.position).addScaledVector(cursorPose.direction, this.distance);\n      // The cursor will always be oriented towards the player about its Y axis, so objects held by the cursor will rotate towards the player.\n      getLastWorldPosition(camera.object3D, cameraPos);\n      cameraPos.y = cursor.object3D.position.y;\n      cursor.object3D.lookAt(cameraPos);\n      cursor.object3D.scale.setScalar(Math.pow(this.distance, 0.315) * 0.75);\n      cursor.object3D.matrixNeedsUpdate = true;\n\n      const cursorColor = intersection || isGrabbing ? cursorColorHovered : cursorColorUnhovered;\n\n      if (this.data.cursor.components.material.data.color !== cursorColor) {\n        this.data.cursor.setAttribute(\"material\", \"color\", cursorColor);\n      }\n\n      if (this.line.material.visible) {\n        // Reach into line component for better performance\n        const posePosition = cursorPose.position;\n        const cursorPosition = cursor.object3D.position;\n        const positionArray = this.line.geometry.attributes.position.array;\n\n        positionArray[0] = posePosition.x;\n        positionArray[1] = posePosition.y;\n        positionArray[2] = posePosition.z;\n        positionArray[3] = cursorPosition.x;\n        positionArray[4] = cursorPosition.y;\n        positionArray[5] = cursorPosition.z;\n\n        this.line.geometry.attributes.position.needsUpdate = true;\n        this.line.geometry.computeBoundingSphere();\n      }\n    };\n  })(),\n\n  remove: function() {\n    this.emitIntersectionEvents(this.prevIntersection, null);\n    delete this.prevIntersection;\n  }\n});\n","/**\n * Initializes teleport-controls when the environment bundle has loaded.\n * @namespace environment\n * @component nav-mesh-helper\n */\nAFRAME.registerComponent(\"nav-mesh-helper\", {\n  schema: {\n    teleportControls: { type: \"selectorAll\", default: \"[teleport-controls]\" }\n  },\n\n  init: function() {\n    const teleportControls = this.data.teleportControls;\n    this.el.addEventListener(\"bundleloaded\", () => {\n      if (!teleportControls) return;\n\n      for (let i = 0; i < teleportControls.length; i++) {\n        teleportControls[i].components[\"teleport-controls\"].queryCollisionEntities();\n      }\n    });\n  }\n});\n","import { paths } from \"../../systems/userinput/paths\";\nimport { getLastWorldPosition } from \"../../utils/three-utils\";\n\nconst pathsMap = {\n  \"player-right-controller\": {\n    startDrawing: paths.actions.rightHand.startDrawing,\n    stopDrawing: paths.actions.rightHand.stopDrawing,\n    undoDrawing: paths.actions.rightHand.undoDrawing,\n    penNextColor: paths.actions.rightHand.penNextColor,\n    penPrevColor: paths.actions.rightHand.penPrevColor,\n    scalePenTip: paths.actions.rightHand.scalePenTip\n  },\n  \"player-left-controller\": {\n    startDrawing: paths.actions.leftHand.startDrawing,\n    stopDrawing: paths.actions.leftHand.stopDrawing,\n    undoDrawing: paths.actions.leftHand.undoDrawing,\n    penNextColor: paths.actions.leftHand.penNextColor,\n    penPrevColor: paths.actions.leftHand.penPrevColor,\n    scalePenTip: paths.actions.leftHand.scalePenTip\n  },\n  cursor: {\n    startDrawing: paths.actions.cursor.startDrawing,\n    stopDrawing: paths.actions.cursor.stopDrawing,\n    undoDrawing: paths.actions.cursor.undoDrawing,\n    penNextColor: paths.actions.cursor.penNextColor,\n    penPrevColor: paths.actions.cursor.penPrevColor,\n    scalePenTip: paths.actions.cursor.scalePenTip\n  }\n};\n/**\n * Pen tool\n * A tool that allows drawing on networked-drawing components.\n * @namespace drawing\n * @component pen\n */\n\nfunction almostEquals(epsilon, u, v) {\n  return Math.abs(u.x - v.x) < epsilon && Math.abs(u.y - v.y) < epsilon && Math.abs(u.z - v.z) < epsilon;\n}\n\nAFRAME.registerComponent(\"pen\", {\n  schema: {\n    drawFrequency: { default: 5 }, //frequency of polling for drawing points\n    minDistanceBetweenPoints: { default: 0.01 }, //minimum distance to register new drawing point\n    camera: { type: \"selector\" },\n    drawingManager: { type: \"string\" },\n    color: { type: \"color\", default: \"#FF0033\" },\n    availableColors: {\n      default: [\n        \"#FF0033\",\n        \"#FFFF00\",\n        \"#0099FF\",\n        \"#00FF33\",\n        \"#9900FF\",\n        \"#FF6600\",\n        \"#8D5524\",\n        \"#C68642\",\n        \"#E0AC69\",\n        \"#F1C27D\",\n        \"#FFDBAC\",\n        \"#FFFFFF\",\n        \"#222222\",\n        \"#111111\",\n        \"#000000\"\n      ]\n    },\n    radius: { default: 0.01 }, //drawing geometry radius\n    minRadius: { default: 0.005 },\n    maxRadius: { default: 0.2 }\n  },\n\n  init() {\n    this.timeSinceLastDraw = 0;\n\n    this.lastPosition = new THREE.Vector3();\n    this.lastPosition.copy(this.el.object3D.position);\n\n    this.direction = new THREE.Vector3(1, 0, 0);\n\n    this.currentDrawing = null;\n\n    this.normal = new THREE.Vector3();\n\n    this.worldPosition = new THREE.Vector3();\n\n    this.colorIndex = 0;\n\n    this.grabbed = false;\n  },\n\n  play() {\n    this.drawingManager = document.querySelector(this.data.drawingManager).components[\"drawing-manager\"];\n    this.drawingManager.createDrawing();\n  },\n\n  update(prevData) {\n    if (prevData.color != this.data.color) {\n      this.el.setAttribute(\"color\", this.data.color);\n    }\n    if (prevData.radius != this.data.radius) {\n      this.el.setAttribute(\"radius\", this.data.radius);\n    }\n  },\n\n  tick(t, dt) {\n    const grabber = this.el.parentNode.components.grabbable.grabbers[0];\n    const userinput = AFRAME.scenes[0].systems.userinput;\n\n    getLastWorldPosition(this.el.object3D, this.worldPosition);\n\n    if (grabber && pathsMap[grabber.id]) {\n      const paths = pathsMap[grabber.id];\n      if (userinput.get(paths.startDrawing)) {\n        this._startDraw();\n      }\n      if (userinput.get(paths.stopDrawing)) {\n        this._endDraw();\n      }\n      if (userinput.get(paths.undoDrawing)) {\n        this._undoDraw();\n      }\n      const penScaleMod = userinput.get(paths.scalePenTip);\n      if (penScaleMod) {\n        this._changeRadius(penScaleMod);\n      }\n      if (userinput.get(paths.penNextColor)) {\n        this._changeColor(1);\n      }\n      if (userinput.get(paths.penPrevColor)) {\n        this._changeColor(-1);\n      }\n    }\n\n    if (!almostEquals(0.005, this.worldPosition, this.lastPosition)) {\n      this.direction.subVectors(this.worldPosition, this.lastPosition).normalize();\n      this.lastPosition.copy(this.worldPosition);\n    }\n\n    if (this.currentDrawing) {\n      const time = this.timeSinceLastDraw + dt;\n      if (\n        time >= this.data.drawFrequency &&\n        this.currentDrawing.getLastPoint().distanceTo(this.worldPosition) >= this.data.minDistanceBetweenPoints\n      ) {\n        this._getNormal(this.normal, this.worldPosition, this.direction);\n        this.currentDrawing.draw(this.worldPosition, this.direction, this.normal, this.data.color, this.data.radius);\n      }\n\n      this.timeSinceLastDraw = time % this.data.drawFrequency;\n    }\n\n    if (this.currentDrawing && !grabber) {\n      this._endDraw();\n    }\n  },\n\n  //helper function to get normal of direction of drawing cross direction to camera\n  _getNormal: (() => {\n    const directionToCamera = new THREE.Vector3();\n    return function(normal, position, direction) {\n      directionToCamera.subVectors(position, this.data.camera.object3D.position).normalize();\n      normal.crossVectors(direction, directionToCamera);\n    };\n  })(),\n\n  _startDraw() {\n    this.currentDrawing = this.drawingManager.getDrawing(this);\n    if (this.currentDrawing) {\n      this._getNormal(this.normal, this.worldPosition, this.direction);\n      this.el.emit(\"start_draw\");\n      this.currentDrawing.startDraw(this.worldPosition, this.direction, this.normal, this.data.color, this.data.radius);\n    }\n  },\n\n  _endDraw() {\n    if (this.currentDrawing) {\n      this.el.emit(\"stop_draw\");\n      this.timeSinceLastDraw = 0;\n      this._getNormal(this.normal, this.worldPosition, this.direction);\n      this.currentDrawing.endDraw(this.worldPosition, this.direction, this.normal);\n      this.drawingManager.returnDrawing(this);\n      this.currentDrawing = null;\n    }\n  },\n\n  _undoDraw() {\n    const drawing = this.drawingManager.getDrawing(this);\n    if (drawing) {\n      drawing.undoDraw();\n    }\n  },\n\n  _changeColor(mod) {\n    this.colorIndex = (this.colorIndex + mod + this.data.availableColors.length) % this.data.availableColors.length;\n    this.data.color = this.data.availableColors[this.colorIndex];\n    this.el.setAttribute(\"color\", this.data.color);\n  },\n\n  _changeRadius(mod) {\n    this.data.radius = Math.max(this.data.minRadius, Math.min(this.data.radius + mod, this.data.maxRadius));\n    this.el.setAttribute(\"radius\", this.data.radius);\n  }\n});\n","/* global THREE */\n/**\n * Networked Drawing\n * Creates procedurally generated 'lines' (or tubes) that are networked.\n * @namespace drawing\n * @component networked-drawing\n */\n\nimport SharedBufferGeometryManager from \"../../utils/sharedbuffergeometrymanager\";\n\nconst MSG_CONFIRM_CONNECT = 0;\nconst MSG_BUFFER_DATA = 1;\nconst MSG_BUFFER_DATA_FULL = 2;\n\nfunction copyData(fromArray, toArray, fromIndex, toIndex) {\n  let i = fromIndex - 1;\n  let j = -1;\n  while (i + 1 <= toIndex) {\n    toArray[++j] = fromArray[++i];\n  }\n}\n\nAFRAME.registerComponent(\"networked-drawing\", {\n  schema: {\n    segments: { default: 8 }, //the number of \"sides\" the procedural tube should have\n    defaultRadius: { default: 0.01 }, //the radius of the procedural tube\n    maxDrawTimeout: { default: 600000 }, //the maximum time a drawn line will live\n    maxLines: { default: 50 }, //how many lines can persist before lines older than minDrawTime are removed\n    maxPointsPerLine: { default: 250 } //the max number of points a single line can have\n  },\n\n  init() {\n    this._receiveData = this._receiveData.bind(this);\n\n    this.networkBuffer = [];\n\n    this.sendNetworkBufferQueue = [];\n\n    this.drawStarted = false;\n    this.lineStarted = false;\n    this.remoteLineStarted = false;\n\n    this.receivedBufferParts = 0;\n    this.bufferIndex = 0;\n    this.connectedToOwner = false;\n    this.networkBufferInitialized = false;\n\n    const options = {\n      vertexColors: THREE.VertexColors\n    };\n\n    this.color = new THREE.Color();\n    this.radius = this.data.defaultRadius;\n    this.segments = this.data.segments;\n\n    const material = new THREE.MeshStandardMaterial(options);\n    this.sharedBufferGeometryManager = new SharedBufferGeometryManager();\n    // NOTE: 20 is approximate for how many floats per point are added.\n    // maxLines + 1 because a line can be currently drawing while at maxLines.\n    // Multiply by 1/3 (0.333) because 3 floats per vertex (x, y, z).\n    const maxBufferSize = Math.round(this.data.maxPointsPerLine * 20 * (this.data.maxLines + 1) * 0.333);\n    this.sharedBufferGeometryManager.addSharedBuffer(0, material, THREE.TriangleStripDrawMode, maxBufferSize);\n\n    this.lastPoint = new THREE.Vector3();\n\n    this.lastSegments = [];\n    this.currentSegments = [];\n    for (let x = 0; x < this.segments; x++) {\n      this.lastSegments[x] = {\n        position: new THREE.Vector3(),\n        normal: new THREE.Vector3()\n      };\n      this.currentSegments[x] = {\n        position: new THREE.Vector3(),\n        normal: new THREE.Vector3()\n      };\n    }\n\n    this.sharedBuffer = this.sharedBufferGeometryManager.getSharedBuffer(0);\n    this.drawing = this.sharedBuffer.drawing;\n    const sceneEl = document.querySelector(\"a-scene\");\n    this.scene = sceneEl.object3D;\n    this.scene.add(this.drawing);\n\n    this.prevIdx = Object.assign({}, this.sharedBuffer.idx);\n    this.idx = Object.assign({}, this.sharedBuffer.idx);\n    this.vertexCount = 0; //number of vertices added for current line (used for line deletion).\n    this.networkBufferCount = 0; //number of items added to networkBuffer for current line (used for line deletion).\n    this.currentPointCount = 0; //number of points added for current line (used for maxPointsPerLine).\n    this.networkBufferHistory = []; //tracks vertexCount and networkBufferCount so that lines can be deleted.\n\n    NAF.connection.onConnect(() => {\n      NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n        this.networkedEl = networkedEl;\n        this.networkId = NAF.utils.getNetworkId(this.networkedEl);\n        this.drawingId = \"drawing-\" + this.networkId;\n        NAF.connection.subscribeToDataChannel(this.drawingId, this._receiveData);\n      });\n    });\n  },\n\n  remove() {\n    NAF.connection.unsubscribeToDataChannel(this.drawingId, this._receiveData);\n\n    this.scene.remove(this.drawing);\n  },\n\n  tick(t) {\n    const connected = NAF.connection.isConnected() && this.networkedEl;\n    const isMine = connected && NAF.utils.isMine(this.networkedEl);\n\n    if (!this.connectedToOwner && connected) {\n      const owner = NAF.utils.getNetworkOwner(this.networkedEl);\n      if (!isMine && NAF.connection.hasActiveDataChannel(owner)) {\n        NAF.connection.sendDataGuaranteed(owner, this.drawingId, {\n          type: MSG_CONFIRM_CONNECT,\n          clientId: NAF.clientId\n        });\n        this.connectedToOwner = true;\n      }\n    }\n\n    if (this.networkBuffer.length > 0 && connected) {\n      if (!isMine) {\n        this._drawFromNetwork();\n      } else if (this.bufferIndex < this.networkBuffer.length) {\n        this._broadcastDrawing();\n      }\n    }\n\n    //TODO: handle possibility that a clientId gets stuck in sendNetworkBufferQueue\n    //if that client disconnects before this executes and an activeDataChannel is opened.\n    if (isMine && this.sendNetworkBufferQueue.length > 0) {\n      const connected = [];\n      for (let i = 0; i < this.sendNetworkBufferQueue.length; i++) {\n        if (NAF.connection.hasActiveDataChannel(this.sendNetworkBufferQueue[i])) {\n          connected.push(this.sendNetworkBufferQueue[i]);\n        }\n      }\n      for (let j = 0; j < connected.length; j++) {\n        const pos = this.sendNetworkBufferQueue.indexOf(connected[j]);\n        this._sendNetworkBuffer(connected[j]);\n        this.sendNetworkBufferQueue.splice(pos, 1);\n      }\n    }\n\n    this._deleteExpiredLines(t);\n  },\n\n  _broadcastDrawing: (() => {\n    const copyArray = [];\n    return function() {\n      copyArray.length = 0;\n      copyData(this.networkBuffer, copyArray, this.bufferIndex, this.networkBuffer.length - 1);\n\n      //remove undo's from networkBuffer after they've been sent so that\n      //newly joining clients don't get them\n      let index = -1;\n      while ((index = this.networkBuffer.indexOf(\"-\")) != -1) {\n        this.networkBuffer.splice(index, 1);\n      }\n      this.bufferIndex = this.networkBuffer.length;\n      NAF.connection.broadcastDataGuaranteed(this.drawingId, { type: MSG_BUFFER_DATA, buffer: copyArray });\n    };\n  })(),\n\n  _drawFromNetwork: (() => {\n    const position = new THREE.Vector3();\n    const direction = new THREE.Vector3();\n    const normal = new THREE.Vector3();\n    return function() {\n      let head = this.networkBuffer[0];\n      if (head === \"-\") {\n        this._undoDraw();\n        this.networkBuffer.shift();\n        head = this.networkBuffer[0];\n      }\n      let didWork = false;\n      while (head != null && this.networkBuffer.length >= 10) {\n        position.set(this.networkBuffer[0], this.networkBuffer[1], this.networkBuffer[2]);\n        direction.set(this.networkBuffer[3], this.networkBuffer[4], this.networkBuffer[5]);\n        this.radius = Math.round(direction.length() * 1000) / 1000; //radius is encoded as length of direction vector\n        direction.normalize();\n        normal.set(this.networkBuffer[6], this.networkBuffer[7], this.networkBuffer[8]);\n        this.color.setHex(Math.round(normal.length()) - 1); //color is encoded as length of normal vector\n        normal.normalize();\n\n        this.networkBuffer.splice(0, 9);\n\n        if (!this.remoteLineStarted) {\n          this.startDraw(position, direction, normal);\n          this.remoteLineStarted = true;\n        }\n\n        if (this.networkBuffer[0] === null) {\n          this._endDraw(position, direction, normal);\n          this.remoteLineStarted = false;\n          this.networkBuffer.shift();\n        } else {\n          this._draw(position, direction, normal);\n          didWork = true;\n        }\n      }\n      if (didWork) this._updateBuffer();\n    };\n  })(),\n\n  _deleteExpiredLines(time) {\n    const length = this.networkBufferHistory.length;\n    if (length > 0) {\n      const drawTime = this.networkBufferHistory[0].time;\n      if (length > this.data.maxLines || drawTime + this.data.maxDrawTimeout <= time) {\n        const datum = this.networkBufferHistory[0];\n        if (length > 1) {\n          datum.idxLength += 2 - (this.segments % 2); //account for extra verts added for degenerate triangles\n          this.networkBufferHistory[1].idxLength -= 2 - (this.segments % 2);\n        }\n        this.idx.position = datum.idxLength;\n        this.idx.uv = datum.idxLength;\n        this.idx.normal = datum.idxLength;\n        this.idx.color = datum.idxLength;\n        this.sharedBuffer.remove(this.prevIdx, this.idx);\n        this.networkBufferHistory.shift();\n        if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n          this.networkBuffer.splice(0, datum.networkBufferCount);\n          this.bufferIndex -= datum.networkBufferCount;\n        }\n      }\n    }\n  },\n\n  _sendNetworkBuffer: (() => {\n    const copyArray = [];\n    //This number needs to be approx. < ~6000 based on napkin math\n    //see: https://github.com/webrtc/adapter/blob/682e0f2439e139da6c0c406370eae820637b8sc1a/src/js/common_shim.js#L157\n    const chunkAmount = 3000;\n    return function(clientId) {\n      if (NAF.utils.isMine(this.networkedEl)) {\n        if (this.networkBuffer.length <= chunkAmount) {\n          NAF.connection.sendDataGuaranteed(clientId, this.drawingId, {\n            type: MSG_BUFFER_DATA_FULL,\n            parts: 1,\n            buffer: this.networkBuffer\n          });\n        } else {\n          let start = 0;\n          let end = 0;\n          while (end < this.networkBuffer.length) {\n            end = Math.min(end + chunkAmount, this.networkBuffer.length);\n            copyArray.length = 0;\n            copyData(this.networkBuffer, copyArray, start, end - 1);\n            start = end;\n            NAF.connection.sendDataGuaranteed(clientId, this.drawingId, {\n              type: MSG_BUFFER_DATA_FULL,\n              parts: Math.ceil(this.networkBuffer.length / chunkAmount),\n              buffer: copyArray\n            });\n          }\n        }\n      }\n    };\n  })(),\n\n  _receiveData(_, dataType, data) {\n    switch (data.type) {\n      case MSG_CONFIRM_CONNECT:\n        this.sendNetworkBufferQueue.push(data.clientId);\n        break;\n      case MSG_BUFFER_DATA:\n        if (this.networkBufferInitialized) {\n          this.networkBuffer.push.apply(this.networkBuffer, data.buffer);\n        }\n        break;\n      case MSG_BUFFER_DATA_FULL:\n        this.networkBuffer.push.apply(this.networkBuffer, data.buffer);\n        if (++this.receivedBufferParts >= data.parts) {\n          this.networkBufferInitialized = true;\n        }\n        break;\n    }\n  },\n\n  getLastPoint() {\n    return this.lastPoint;\n  },\n\n  startDraw(position, direction, normal, color, radius) {\n    if (!NAF.connection.isConnected()) {\n      return;\n    }\n\n    this.drawStarted = true;\n\n    if (color) {\n      this.color.set(color);\n    }\n    if (radius) this.radius = radius;\n\n    this.lastPoint.copy(position);\n    this._addToNetworkBuffer(position, direction, normal);\n  },\n\n  draw(position, direction, normal, color, radius) {\n    if (!NAF.connection.isConnected() || !this.drawStarted) {\n      return;\n    }\n\n    if (color && color != \"#\" + this.color.getHexString().toUpperCase()) {\n      this.color.set(color);\n    }\n    if (radius) this.radius = radius;\n\n    this._addToNetworkBuffer(position, direction, normal);\n    this._draw(position, direction, normal);\n\n    this._updateBuffer();\n  },\n\n  _draw: (() => {\n    const capNormal = new THREE.Vector3();\n    return function(position, direction, normal, radiusMultiplier = 1.0) {\n      if (!this.lineStarted) {\n        this._generateSegments(this.lastSegments, position, direction, normal, this.radius * radiusMultiplier);\n\n        if (this.networkBufferHistory.length === 0) {\n          //start with CW faceculling order\n          this._addDegenerateTriangle();\n        } else {\n          //only do the following if the sharedBuffer is not empty\n          this._restartPrimitive();\n          this._addDegenerateTriangle();\n          if (this.segments % 2 === 0) {\n            //flip faceculling order if even numbered segments\n            this._addDegenerateTriangle();\n          }\n        }\n\n        //get normal for tip of cap\n        capNormal.copy(direction).negate();\n        //get normals for rim of cap\n        for (let i = 0; i < this.segments; i++) {\n          this.lastSegments[i].normal.add(capNormal).multiplyScalar(0.5);\n        }\n\n        this._drawCap(this.lastPoint, this.lastSegments, capNormal);\n        if (this.segments % 2 !== 0) {\n          //flip faceculling order if odd numbered segments\n          this._addDegenerateTriangle();\n        }\n\n        this.lineStarted = true;\n      } else {\n        this._generateSegments(this.currentSegments, position, direction, normal, this.radius * radiusMultiplier);\n        this._drawCylinder();\n\n        if (this.currentPointCount > this.data.maxPointsPerLine) {\n          this._drawEndCap(position, direction);\n          this._endLine();\n        }\n      }\n      this.lastPoint.copy(position);\n    };\n  })(),\n\n  undoDraw() {\n    if (!NAF.connection.isConnected() || this.drawStarted) {\n      return;\n    }\n    this._undoDraw();\n    this._pushToNetworkBuffer(\"-\");\n  },\n\n  _undoDraw() {\n    const length = this.networkBufferHistory.length;\n    if (length > 0) {\n      const datum = this.networkBufferHistory.pop();\n      this.idx.position = 0;\n      this.idx.uv = 0;\n      this.idx.normal = 0;\n      this.idx.color = 0;\n      if (length > 1) {\n        datum.idxLength += 1 - (this.segments % 2); //account for extra verts added for degenerate triangles\n        this.idx.position = this.sharedBuffer.idx.position - datum.idxLength;\n        this.idx.uv = this.sharedBuffer.idx.uv - datum.idxLength;\n        this.idx.normal = this.sharedBuffer.idx.normal - datum.idxLength;\n        this.idx.color = this.sharedBuffer.idx.color - datum.idxLength;\n      }\n      this.sharedBuffer.remove(this.idx, this.sharedBuffer.idx);\n      if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n        this.networkBuffer.splice(this.networkBuffer.length - datum.networkBufferCount, datum.networkBufferCount);\n        this.bufferIndex -= datum.networkBufferCount;\n      }\n    }\n  },\n\n  endDraw(position, direction, normal) {\n    this._endDraw(position, direction, normal);\n    this._updateBuffer();\n  },\n\n  _endDraw(position, direction, normal) {\n    if (!this.lineStarted && this.drawStarted) {\n      this._drawPoint(position);\n    } else if (this.lineStarted && this.drawStarted) {\n      this._addToNetworkBuffer(position, direction, normal);\n      this._draw(position, direction, normal);\n      this._drawEndCap(position, direction);\n    }\n    this._endLine();\n  },\n\n  _drawEndCap: (() => {\n    const projectedDirection = new THREE.Vector3();\n    const projectedPoint = new THREE.Vector3();\n    return function(position, direction) {\n      if (this.lineStarted && this.drawStarted) {\n        projectedDirection.copy(direction).multiplyScalar(this.radius);\n        projectedPoint.copy(position).add(projectedDirection);\n        this._addDegenerateTriangle(); //flip faceculling order before drawing end-cap\n        this._drawCap(projectedPoint, this.lastSegments, direction);\n      }\n    };\n  })(),\n\n  _endLine() {\n    this.el.emit(\"stop_draw\");\n    if (!this.drawStarted) return;\n\n    if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) this._pushToNetworkBuffer(null);\n\n    const datum = {\n      networkBufferCount: this.networkBufferCount,\n      idxLength: this.vertexCount - 1,\n      time: this.el.sceneEl.clock.elapsedTime * 1000\n    };\n    this.networkBufferHistory.push(datum);\n    this.vertexCount = 0;\n    this.networkBufferCount = 0;\n    this.currentPointCount = 0;\n    this.lineStarted = false;\n    this.drawStarted = false;\n  },\n\n  _addToNetworkBuffer: (() => {\n    const copyDirection = new THREE.Vector3();\n    const copyNormal = new THREE.Vector3();\n    return function(position, direction, normal) {\n      if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n        ++this.currentPointCount;\n        this._pushToNetworkBuffer(position.x);\n        this._pushToNetworkBuffer(position.y);\n        this._pushToNetworkBuffer(position.z);\n        copyDirection.copy(direction);\n        copyDirection.setLength(this.radius); //encode radius as length of direction vector\n        this._pushToNetworkBuffer(copyDirection.x);\n        this._pushToNetworkBuffer(copyDirection.y);\n        this._pushToNetworkBuffer(copyDirection.z);\n        copyNormal.copy(normal);\n        copyNormal.setLength(this.color.getHex() + 1); //encode color as length, add one in case color is black\n        this._pushToNetworkBuffer(copyNormal.x);\n        this._pushToNetworkBuffer(copyNormal.y);\n        this._pushToNetworkBuffer(copyNormal.z);\n      }\n    };\n  })(),\n\n  _pushToNetworkBuffer(val) {\n    //don't increment networkBufferCount if undo, because the undo character\n    //will be removed in tick() on the next frame\n    if (val !== \"-\") {\n      ++this.networkBufferCount;\n    }\n    this.networkBuffer.push(val);\n  },\n\n  //draw a cylinder from last to current segments\n  _drawCylinder() {\n    //average the normals with the normals from the lastSegment\n    //not a perfect normal calculation, but works well enough\n    for (let i = 0; i < this.segments; i++) {\n      this.currentSegments[i].normal.add(this.lastSegments[i].normal).multiplyScalar(0.5);\n    }\n\n    for (let i = 0; i != this.segments + 1; i++) {\n      this._addVertex(this.lastSegments[i % this.segments]);\n      this._addVertex(this.currentSegments[i % this.segments]);\n    }\n\n    for (let i = 0; i < this.segments; i++) {\n      this.lastSegments[i].position.copy(this.currentSegments[i].position);\n      this.lastSegments[i].normal.copy(this.currentSegments[i].normal);\n    }\n  },\n\n  //draw a standalone point in space\n  _drawPoint: (() => {\n    const up = new THREE.Vector3(0, 1, 0);\n    const down = new THREE.Vector3(0, -1, 0);\n    const left = new THREE.Vector3(1, 0, 0);\n    const projectedDirection = new THREE.Vector3();\n    const projectedPoint = new THREE.Vector3();\n    return function(position) {\n      projectedDirection.copy(up).multiplyScalar(this.radius * 0.75);\n      projectedPoint.copy(position).add(projectedDirection);\n      this.lastPoint.copy(projectedPoint);\n\n      projectedDirection.copy(up).multiplyScalar(this.radius * 0.5);\n      projectedPoint.copy(position).add(projectedDirection);\n      this._draw(projectedPoint, down, left, 0.75);\n\n      this._draw(position, down, left);\n\n      projectedDirection.copy(down).multiplyScalar(this.radius * 0.5);\n      projectedPoint.copy(position).add(projectedDirection);\n      this._draw(projectedPoint, down, left, 0.75);\n\n      projectedDirection.copy(down).multiplyScalar(this.radius * 0.75);\n      projectedPoint.copy(position).add(projectedDirection);\n\n      this._addDegenerateTriangle(); //discarded\n      this._drawCap(projectedPoint, this.lastSegments, down);\n    };\n  })(),\n\n  //draw a cap to start/end a line\n  _drawCap(point, segments, normal) {\n    let segmentIndex = 0;\n    for (let i = 0; i < this.segments * 2 - (this.segments % 2); i++) {\n      if ((i - 2) % 4 === 0) {\n        this._addVertex({ position: point, normal: normal });\n      } else {\n        this._addVertex(segments[segmentIndex % this.segments]);\n        if ((i + 1) % 5 !== 0) {\n          ++segmentIndex;\n        }\n      }\n    }\n  },\n\n  _restartPrimitive() {\n    this.sharedBuffer.restartPrimitive();\n    ++this.vertexCount;\n  },\n\n  _updateBuffer() {\n    this.sharedBuffer.update();\n  },\n\n  _addVertex(segment) {\n    const point = segment.position;\n    const normal = segment.normal;\n    this.sharedBuffer.addVertex(point.x, point.y, point.z);\n    this.sharedBuffer.addColor(this.color.r, this.color.g, this.color.b);\n\n    if (normal) {\n      this.sharedBuffer.addNormal(normal.x, normal.y, normal.z);\n    } else {\n      ++this.sharedBuffer.idx.normal;\n    }\n\n    ++this.sharedBuffer.idx.uv;\n    ++this.vertexCount;\n  },\n\n  _addDegenerateTriangle() {\n    this._addVertex(this.lastSegments[0]);\n  },\n\n  //calculate the segments for a given point\n  _generateSegments(segmentsList, point, forward, up, radius) {\n    const angleIncrement = (Math.PI * 2) / this.segments;\n    for (let i = 0; i < this.segments; i++) {\n      const segment = segmentsList[i].position;\n      this._rotatePointAroundAxis(segment, point, forward, up, angleIncrement * i, radius);\n      segmentsList[i].normal.subVectors(segment, point).normalize();\n    }\n  },\n\n  _rotatePointAroundAxis: (() => {\n    const calculatedDirection = new THREE.Vector3();\n    return function(out, point, axis, up, angle, radius) {\n      calculatedDirection.copy(up);\n      calculatedDirection.applyAxisAngle(axis, angle);\n      out.copy(point).add(calculatedDirection.normalize().multiplyScalar(radius));\n    };\n  })()\n});\n","import SharedBufferGeometry from \"./sharedbuffergeometry\";\n\nexport default class SharedBufferGeometryManager {\n  constructor() {\n    this.sharedBuffers = {};\n  }\n\n  addSharedBuffer(name, material, primitiveMode, maxBufferSize) {\n    this.sharedBuffers[name] = new SharedBufferGeometry(material, primitiveMode, maxBufferSize);\n  }\n\n  getSharedBuffer(name) {\n    return this.sharedBuffers[name];\n  }\n}\n","export default class SharedBufferGeometry {\n  constructor(material, primitiveMode, maxBufferSize) {\n    this.material = material;\n    this.primitiveMode = primitiveMode;\n\n    this.maxBufferSize = maxBufferSize;\n    this.geometries = [];\n    this.current = null;\n    this.drawing = new THREE.Object3D();\n    this.addBuffer();\n  }\n\n  restartPrimitive() {\n    if (this.idx.position >= this.current.attributes.position.count) {\n      console.error(\"maxBufferSize limit exceeded\");\n    } else if (this.idx.position !== 0) {\n      let prev = (this.idx.position - 1) * 3;\n      const position = this.current.attributes.position.array;\n      this.addVertex(position[prev++], position[prev++], position[prev++]);\n\n      this.idx.color++;\n      this.idx.normal++;\n    }\n  }\n\n  remove(prevIdx, idx) {\n    // Loop through all the attributes: position, color, normal,...\n    if (this.idx.position > idx.position) {\n      for (const key in this.idx) {\n        const componentSize = 3;\n        let pos = prevIdx[key] * componentSize;\n        const start = (idx[key] + 1) * componentSize;\n        const end = this.idx[key] * componentSize;\n        for (let i = start; i < end; i++) {\n          this.current.attributes[key].array[pos++] = this.current.attributes[key].array[i];\n        }\n        const diff = idx[key] - prevIdx[key] + 1;\n        this.idx[key] -= diff;\n      }\n    } else {\n      for (const key in this.idx) {\n        const diff = idx[key] - prevIdx[key];\n        this.idx[key] -= diff;\n      }\n    }\n\n    this.update();\n  }\n\n  undo(prevIdx) {\n    this.idx = prevIdx;\n    this.update();\n  }\n\n  addBuffer() {\n    const geometry = new THREE.BufferGeometry();\n\n    const vertices = new Float32Array(this.maxBufferSize * 3);\n    const normals = new Float32Array(this.maxBufferSize * 3);\n    const colors = new Float32Array(this.maxBufferSize * 3);\n\n    const mesh = new THREE.Mesh(geometry, this.material);\n\n    mesh.drawMode = this.primitiveMode;\n\n    mesh.frustumCulled = false;\n    mesh.vertices = vertices;\n\n    const object3D = new THREE.Object3D();\n    this.drawing.add(object3D);\n    object3D.add(mesh);\n\n    geometry.setDrawRange(0, 0);\n    geometry.addAttribute(\"position\", new THREE.BufferAttribute(vertices, 3).setDynamic(true));\n    geometry.addAttribute(\"normal\", new THREE.BufferAttribute(normals, 3).setDynamic(true));\n    geometry.addAttribute(\"color\", new THREE.BufferAttribute(colors, 3).setDynamic(true));\n\n    this.previous = null;\n    if (this.geometries.length > 0) {\n      this.previous = this.current;\n    }\n\n    this.idx = {\n      position: 0,\n      normal: 0,\n      color: 0\n    };\n\n    this.geometries.push(geometry);\n    this.current = geometry;\n  }\n\n  addColor(r, g, b) {\n    this.current.attributes.color.setXYZ(this.idx.color++, r, g, b);\n  }\n\n  addNormal(x, y, z) {\n    this.current.attributes.normal.setXYZ(this.idx.normal++, x, y, z);\n  }\n\n  addVertex(x, y, z) {\n    const buffer = this.current.attributes.position;\n    if (this.idx.position === buffer.count) {\n      console.error(\"maxBufferSize limit exceeded\");\n    }\n    buffer.setXYZ(this.idx.position++, x, y, z);\n  }\n\n  update() {\n    this.current.setDrawRange(0, this.idx.position);\n\n    this.current.attributes.color.needsUpdate = true;\n    this.current.attributes.normal.needsUpdate = true;\n    this.current.attributes.position.needsUpdate = true;\n  }\n}\n","/**\n * Drawing Manager\n * Manages what networked-drawings are available to pen components\n * @namespace drawing\n * @component drawing-manager\n */\nAFRAME.registerComponent(\"drawing-manager\", {\n  init() {\n    this._onComponentInitialized = this._onComponentInitialized.bind(this);\n\n    this.drawingToPen = new Map();\n  },\n\n  remove() {\n    if (this.drawingEl) {\n      this.drawingEl.removeEventListener(\"componentinitialized\", this._onComponentInitialized);\n    }\n  },\n\n  _onComponentInitialized(e) {\n    if (e.detail.name == \"networked-drawing\") {\n      this.drawing = this.drawingEl.components[\"networked-drawing\"];\n    }\n  },\n\n  createDrawing() {\n    if (!this.drawingEl) {\n      this.drawingEl = document.createElement(\"a-entity\");\n      this.drawingEl.setAttribute(\"networked\", \"template: #interactable-drawing\");\n      this.el.sceneEl.appendChild(this.drawingEl);\n\n      this.drawingEl.addEventListener(\"componentinitialized\", this._onComponentInitialized);\n    }\n  },\n\n  getDrawing(pen) {\n    //TODO: future handling of multiple drawings\n    if (this.drawing && (!this.drawingToPen.has(this.drawing) || this.drawingToPen.get(this.drawing) === pen)) {\n      this.drawingToPen.set(this.drawing, pen);\n      return this.drawing;\n    }\n\n    return null;\n  },\n\n  returnDrawing(pen) {\n    if (this.drawingToPen.has(this.drawing) && this.drawingToPen.get(this.drawing) === pen) {\n      this.drawingToPen.delete(this.drawing);\n    }\n  }\n});\n","function registerNetworkSchemas() {\n  const vectorRequiresUpdate = epsilon => {\n    return () => {\n      let prev = null;\n\n      return curr => {\n        if (prev === null) {\n          prev = new THREE.Vector3(curr.x, curr.y, curr.z);\n          return true;\n        } else if (!NAF.utils.almostEqualVec3(prev, curr, epsilon)) {\n          prev.copy(curr);\n          return true;\n        }\n\n        return false;\n      };\n    };\n  };\n\n  NAF.schemas.add({\n    template: \"#remote-avatar-template\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      \"scale\",\n      \"player-info\",\n      \"networked-avatar\",\n      {\n        selector: \".camera\",\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \".camera\",\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        selector: \".left-controller\",\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \".left-controller\",\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        selector: \".left-controller\",\n        component: \"visible\"\n      },\n      {\n        selector: \".right-controller\",\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \".right-controller\",\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        selector: \".right-controller\",\n        component: \"visible\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-media\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      \"scale\",\n      // TODO: Optimize checking mediaOptions with requiresNetworkUpdate.\n      \"media-loader\",\n      {\n        component: \"media-video\",\n        property: \"time\"\n      },\n      {\n        component: \"media-video\",\n        property: \"videoPaused\"\n      },\n      {\n        component: \"media-pager\",\n        property: \"index\"\n      },\n      \"pinnable\"\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#static-media\",\n    components: [\n      // TODO: Optimize checking mediaOptions with requiresNetworkUpdate.\n      \"media-loader\",\n      {\n        component: \"media-video\",\n        property: \"time\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#static-controlled-media\",\n    components: [\n      // TODO: Optimize checking mediaOptions with requiresNetworkUpdate.\n      \"media-loader\",\n      {\n        component: \"media-video\",\n        property: \"time\"\n      },\n      {\n        component: \"media-video\",\n        property: \"videoPaused\"\n      },\n      {\n        component: \"media-pager\",\n        property: \"index\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-drawing\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      \"scale\",\n      \"networked-drawing\"\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-camera\",\n    components: [\"position\", \"rotation\"]\n  });\n\n  NAF.schemas.add({\n    template: \"#pen-interactable\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      \"scale\",\n      \"media-loader\",\n      {\n        selector: \"#pen\",\n        component: \"pen\",\n        property: \"radius\"\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen\",\n        property: \"color\"\n      }\n    ]\n  });\n}\n\nexport default registerNetworkSchemas;\n","// Detects if another instance of ConcurrentLoadDetector is start()'ed by in the same local storage\n// context with the same instance key. Once a duplicate run is detected this will not fire any additional\n// events.\n\nconst LOCAL_STORE_KEY = \"___concurrent_load_detector\";\nimport { EventTarget } from \"event-target-shim\";\n\nexport default class ConcurrentLoadDetector extends EventTarget {\n  constructor(instanceKey) {\n    super();\n\n    this.interval = null;\n    this.startedAt = null;\n    this.instanceKey = instanceKey || \"global\";\n  }\n\n  start = () => {\n    this.startedAt = new Date();\n    localStorage.setItem(this.localStorageKey(), JSON.stringify({ started_at: this.startedAt }));\n\n    // Check for concurrent load every second\n    this.interval = setInterval(this._step, 1000);\n  };\n\n  stop = () => {\n    if (this.interval) {\n      clearInterval(this.interval);\n    }\n  };\n\n  localStorageKey = () => {\n    return `${LOCAL_STORE_KEY}_${this.instanceKey}`;\n  };\n\n  _step = () => {\n    const currentState = JSON.parse(localStorage.getItem(this.localStorageKey()));\n    const maxStartedAt = new Date(currentState.started_at);\n\n    if (maxStartedAt.getTime() !== this.startedAt.getTime()) {\n      this.dispatchEvent(new CustomEvent(\"concurrentload\"));\n      this.stop();\n    }\n  };\n}\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"ui-dialog\":\"hub__ui-dialog__vlyfc\",\"uiDialog\":\"hub__ui-dialog__vlyfc\",\"ui-interactive\":\"hub__ui-interactive__3bdyc\",\"uiInteractive\":\"hub__ui-interactive__3bdyc\",\"invite-container\":\"hub__invite-container__2Zik1\",\"inviteContainer\":\"hub__invite-container__2Zik1\",\"presence-info\":\"hub__presence-info__dqWyo\",\"presenceInfo\":\"hub__presence-info__dqWyo\",\"profile-entry\":\"hub__profile-entry__1RY0R\",\"profileEntry\":\"hub__profile-entry__1RY0R\",\"form-submit\":\"hub__form-submit__12yem\",\"formSubmit\":\"hub__form-submit__12yem\",\"message-entry-submit\":\"hub__message-entry-submit__342-t\",\"messageEntrySubmit\":\"hub__message-entry-submit__342-t\",\"message-entry-in-room\":\"hub__message-entry-in-room__1a9hx\",\"messageEntryInRoom\":\"hub__message-entry-in-room__1a9hx\",\"message-entry-spawn\":\"hub__message-entry-spawn__3feCw\",\"messageEntrySpawn\":\"hub__message-entry-spawn__3feCw\",\"entry-button\":\"hub__entry-button__1e9jM\",\"entryButton\":\"hub__entry-button__1e9jM\",\"entry-panel\":\"hub__entry-panel__cCmIv\",\"entryPanel\":\"hub__entry-panel__cCmIv\",\"button-container\":\"hub__button-container__38FOc\",\"buttonContainer\":\"hub__button-container__38FOc\",\"action-button\":\"hub__action-button__3zqlu\",\"actionButton\":\"hub__action-button__3zqlu\",\"ui\":\"hub__ui__3UYRO\",\"help-icon\":\"hub__help-icon__bbEZr\",\"helpIcon\":\"hub__help-icon__bbEZr\",\"entry-dialog\":\"hub__entry-dialog__2Ljux\",\"entryDialog\":\"hub__entry-dialog__2Ljux\",\"collapse\":\"hub__collapse__3Kqf1\",\"expand\":\"hub__expand__3fi7t\",\"nag-corner-button\":\"hub__nag-corner-button__lNoyE\",\"nagCornerButton\":\"hub__nag-corner-button__lNoyE\",\"message-entry-input\":\"hub__message-entry-input__lUA_h\",\"messageEntryInput\":\"hub__message-entry-input__lUA_h\",\"form-field-text\":\"hub__form-field-text__tR1Lt\",\"formFieldText\":\"hub__form-field-text__tR1Lt\",\"profile-name\":\"hub__profile-name__3AFJU\",\"profileName\":\"hub__profile-name__3AFJU\",\"label\":\"hub__label__1kjp1\",\"title\":\"hub__title__ezGEu\",\"name\":\"hub__name__2umw1\",\"center\":\"hub__center__1Mvfu\",\"wide-button\":\"hub__wide-button__1yqDc\",\"wideButton\":\"hub__wide-button__1yqDc\",\"invite-container-inverted\":\"hub__invite-container-inverted__3zt7S\",\"inviteContainerInverted\":\"hub__invite-container-inverted__3zt7S\",\"screen-sharing\":\"hub__screen-sharing__2VF91\",\"screenSharing\":\"hub__screen-sharing__2VF91\",\"checkbox\":\"hub__checkbox__32dyv\",\"subscribe\":\"hub__subscribe__6Bn_L\",\"ui-dialog-box-contents\":\"hub__ui-dialog-box-contents__PZ5qP\",\"uiDialogBoxContents\":\"hub__ui-dialog-box-contents__PZ5qP\",\"backgrounded\":\"hub__backgrounded__30IfD\",\"hide-small-screens\":\"hub__hide-small-screens__2Fhhu\",\"hideSmallScreens\":\"hub__hide-small-screens__2Fhhu\",\"invite-mini-button\":\"hub__invite-mini-button__fnwYD\",\"inviteMiniButton\":\"hub__invite-mini-button__fnwYD\",\"invite-container-below-hud\":\"hub__invite-container-below-hud__1DhcT\",\"inviteContainerBelowHud\":\"hub__invite-container-below-hud__1DhcT\",\"occupant-count\":\"hub__occupant-count__3eAEj\",\"occupantCount\":\"hub__occupant-count__3eAEj\",\"presence-info-selected\":\"hub__presence-info-selected__FRBSA\",\"presenceInfoSelected\":\"hub__presence-info-selected__FRBSA\",\"message-entry\":\"hub__message-entry__7ORkX\",\"messageEntry\":\"hub__message-entry__7ORkX\",\"message-entry-input-in-room\":\"hub__message-entry-input-in-room__iiQ8c\",\"messageEntryInputInRoom\":\"hub__message-entry-input-in-room__iiQ8c\",\"message-entry-submit-in-room\":\"hub__message-entry-submit-in-room__254Wx\",\"messageEntrySubmitInRoom\":\"hub__message-entry-submit-in-room__254Wx\",\"logo\":\"hub__logo__3kJSj\",\"avatar-selector-container\":\"hub__avatar-selector-container__3QB7G\",\"avatarSelectorContainer\":\"hub__avatar-selector-container__3QB7G\",\"avatar-selector\":\"hub__avatar-selector__2DqUA\",\"avatarSelector\":\"hub__avatar-selector__2DqUA\",\"form\":\"hub__form__3kQXh\",\"box\":\"hub__box__2SMbn\",\"links\":\"hub__links__1C6Ce\",\"darkened\":\"hub__darkened__1gqMQ\",\"display-name\":\"hub__display-name__36hFZ\",\"displayName\":\"hub__display-name__36hFZ\",\"icon\":\"hub__icon__1pzf7\",\"bolded\":\"hub__bolded__2MYLZ\",\"subtitle\":\"hub__subtitle__3kYcd\",\"lobby\":\"hub__lobby__2VW6G\",\"profile-icon\":\"hub__profile-icon__fwSfD\",\"profileIcon\":\"hub__profile-icon__fwSfD\",\"webvr-link-container\":\"hub__webvr-link-container__1Vq5m\",\"webvrLinkContainer\":\"hub__webvr-link-container__1Vq5m\",\"webvr-link\":\"hub__webvr-link__xW04U\",\"webvrLink\":\"hub__webvr-link__xW04U\",\"secondary\":\"hub__secondary__22yt_\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"touchZone\":\"virtual-gamepad-controls__touchZone__1KF_C\",\"left\":\"virtual-gamepad-controls__left__1-URB\",\"right\":\"virtual-gamepad-controls__right__1cgnU\",\"mockJoystickContainer\":\"virtual-gamepad-controls__mockJoystickContainer__1aH3e\",\"mockJoystick\":\"virtual-gamepad-controls__mockJoystick__2CuCG\",\"inner\":\"virtual-gamepad-controls__inner__1Bn3C\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"ui-dialog\":\"ui-root__ui-dialog__2TY9Y\",\"uiDialog\":\"ui-root__ui-dialog__2TY9Y\",\"ui-interactive\":\"ui-root__ui-interactive__2mtC4\",\"uiInteractive\":\"ui-root__ui-interactive__2mtC4\",\"invite-container\":\"ui-root__invite-container__2-3wx\",\"inviteContainer\":\"ui-root__invite-container__2-3wx\",\"presence-info\":\"ui-root__presence-info__3cieq\",\"presenceInfo\":\"ui-root__presence-info__3cieq\",\"message-entry-submit\":\"ui-root__message-entry-submit__1BdF3\",\"messageEntrySubmit\":\"ui-root__message-entry-submit__1BdF3\",\"message-entry-in-room\":\"ui-root__message-entry-in-room__MmydD\",\"messageEntryInRoom\":\"ui-root__message-entry-in-room__MmydD\",\"message-entry-spawn\":\"ui-root__message-entry-spawn__3CbCw\",\"messageEntrySpawn\":\"ui-root__message-entry-spawn__3CbCw\",\"ui\":\"ui-root__ui__33CMU\",\"help-icon\":\"ui-root__help-icon__25aS8\",\"helpIcon\":\"ui-root__help-icon__25aS8\",\"nag-corner-button\":\"ui-root__nag-corner-button__3TFW5\",\"nagCornerButton\":\"ui-root__nag-corner-button__3TFW5\",\"message-entry-input\":\"ui-root__message-entry-input__2_YDd\",\"messageEntryInput\":\"ui-root__message-entry-input__2_YDd\",\"invite-container-inverted\":\"ui-root__invite-container-inverted__3mzfZ\",\"inviteContainerInverted\":\"ui-root__invite-container-inverted__3mzfZ\",\"ui-dialog-box-contents\":\"ui-root__ui-dialog-box-contents__3XWtl\",\"uiDialogBoxContents\":\"ui-root__ui-dialog-box-contents__3XWtl\",\"backgrounded\":\"ui-root__backgrounded__34j0m\",\"hide-small-screens\":\"ui-root__hide-small-screens__LMcne\",\"hideSmallScreens\":\"ui-root__hide-small-screens__LMcne\",\"invite-mini-button\":\"ui-root__invite-mini-button__3dcvR\",\"inviteMiniButton\":\"ui-root__invite-mini-button__3dcvR\",\"invite-container-below-hud\":\"ui-root__invite-container-below-hud__1-gSL\",\"inviteContainerBelowHud\":\"ui-root__invite-container-below-hud__1-gSL\",\"occupant-count\":\"ui-root__occupant-count__34rGX\",\"occupantCount\":\"ui-root__occupant-count__34rGX\",\"presence-info-selected\":\"ui-root__presence-info-selected__1Jhbw\",\"presenceInfoSelected\":\"ui-root__presence-info-selected__1Jhbw\",\"message-entry\":\"ui-root__message-entry__1-vEM\",\"messageEntry\":\"ui-root__message-entry__1-vEM\",\"message-entry-input-in-room\":\"ui-root__message-entry-input-in-room__2n7Dm\",\"messageEntryInputInRoom\":\"ui-root__message-entry-input-in-room__2n7Dm\",\"message-entry-submit-in-room\":\"ui-root__message-entry-submit-in-room__3icfD\",\"messageEntrySubmitInRoom\":\"ui-root__message-entry-submit-in-room__3icfD\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"entry-button\":\"entry__entry-button__G7PQF\",\"entryButton\":\"entry__entry-button__G7PQF\",\"entry-panel\":\"entry__entry-panel__34CD9\",\"entryPanel\":\"entry__entry-panel__34CD9\",\"button-container\":\"entry__button-container__3Blog\",\"buttonContainer\":\"entry__button-container__3Blog\",\"action-button\":\"entry__action-button__3Vnab\",\"actionButton\":\"entry__action-button__3Vnab\",\"entry-dialog\":\"entry__entry-dialog__30kMs\",\"entryDialog\":\"entry__entry-dialog__30kMs\",\"collapse\":\"entry__collapse__3M47R\",\"expand\":\"entry__expand__EJ52K\",\"profile-name\":\"entry__profile-name__1ZWLR\",\"profileName\":\"entry__profile-name__1ZWLR\",\"label\":\"entry__label__fUhpb\",\"title\":\"entry__title__1GITj\",\"name\":\"entry__name__sYOeV\",\"center\":\"entry__center__1105W\",\"wide-button\":\"entry__wide-button__2tfMM\",\"wideButton\":\"entry__wide-button__2tfMM\",\"screen-sharing\":\"entry__screen-sharing__NBXQu\",\"screenSharing\":\"entry__screen-sharing__NBXQu\",\"checkbox\":\"entry__checkbox__3SoPk\",\"subscribe\":\"entry__subscribe__3vddd\",\"icon\":\"entry__icon__3JiUl\",\"bolded\":\"entry__bolded__13B4f\",\"subtitle\":\"entry__subtitle__1BC2y\",\"lobby\":\"entry__lobby__3AxfL\",\"profile-icon\":\"entry__profile-icon__3BAWG\",\"profileIcon\":\"entry__profile-icon__3BAWG\",\"webvr-link-container\":\"entry__webvr-link-container__3scWP\",\"webvrLinkContainer\":\"entry__webvr-link-container__3scWP\",\"webvr-link\":\"entry__webvr-link__3eWuZ\",\"webvrLink\":\"entry__webvr-link__3eWuZ\",\"secondary\":\"entry__secondary__3uhYE\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"profile-entry\":\"profile__profile-entry__1pJKZ\",\"profileEntry\":\"profile__profile-entry__1pJKZ\",\"form-submit\":\"profile__form-submit__2y7xb\",\"formSubmit\":\"profile__form-submit__2y7xb\",\"form-field-text\":\"profile__form-field-text__1bzeV\",\"formFieldText\":\"profile__form-field-text__1bzeV\",\"title\":\"profile__title__Vcynv\",\"logo\":\"profile__logo__1JZAd\",\"avatar-selector-container\":\"profile__avatar-selector-container__1Rw3N\",\"avatarSelectorContainer\":\"profile__avatar-selector-container__1Rw3N\",\"avatar-selector\":\"profile__avatar-selector__1fGh2\",\"avatarSelector\":\"profile__avatar-selector__1fGh2\",\"form\":\"profile__form__1-hBO\",\"box\":\"profile__box__oJXQD\",\"links\":\"profile__links__2hukW\",\"darkened\":\"profile__darkened__1rVba\",\"display-name\":\"profile__display-name__auABh\",\"displayName\":\"profile__display-name__auABh\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"action-button\":\"create-object-dialog__action-button__3OIJQ\",\"actionButton\":\"create-object-dialog__action-button__3OIJQ\",\"buttons\":\"create-object-dialog__buttons__1zA-b\",\"small-button\":\"create-object-dialog__small-button__7UxXQ\",\"smallButton\":\"create-object-dialog__small-button__7UxXQ\",\"input-border\":\"create-object-dialog__input-border__1N9AV\",\"inputBorder\":\"create-object-dialog__input-border__1N9AV\",\"left-side-of-input\":\"create-object-dialog__left-side-of-input__zyV06\",\"leftSideOfInput\":\"create-object-dialog__left-side-of-input__zyV06\",\"add-media-form\":\"create-object-dialog__add-media-form__10Wh-\",\"addMediaForm\":\"create-object-dialog__add-media-form__10Wh-\",\"cancel-icon\":\"create-object-dialog__cancel-icon__yD-8A\",\"cancelIcon\":\"create-object-dialog__cancel-icon__yD-8A\",\"upload-icon\":\"create-object-dialog__upload-icon__19g9k\",\"uploadIcon\":\"create-object-dialog__upload-icon__19g9k\",\"hide-file-input\":\"create-object-dialog__hide-file-input__2myDe\",\"hideFileInput\":\"create-object-dialog__hide-file-input__2myDe\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"dialog\":\"invite-dialog__dialog__1XbxO\",\"link-button\":\"invite-dialog__link-button__S_o-t\",\"linkButton\":\"invite-dialog__link-button__S_o-t\",\"domain\":\"invite-dialog__domain__2Q8Wr\",\"close\":\"invite-dialog__close__3PAxl\",\"attach-point\":\"invite-dialog__attach-point__otyII\",\"attachPoint\":\"invite-dialog__attach-point__otyII\",\"code\":\"invite-dialog__code__13AIx\",\"keep-open\":\"invite-dialog__keep-open__229sO\",\"keepOpen\":\"invite-dialog__keep-open__229sO\",\"digit\":\"invite-dialog__digit__2w64P\",\"digit_2\":\"invite-dialog__digit_2__pQCJ3\",\"digit2\":\"invite-dialog__digit_2__pQCJ3\",\"digit_3\":\"invite-dialog__digit_3__1bWtt\",\"digit3\":\"invite-dialog__digit_3__1bWtt\",\"code-loading-panel\":\"invite-dialog__code-loading-panel__1gghm\",\"codeLoadingPanel\":\"invite-dialog__code-loading-panel__1gghm\",\"hub-link-link\":\"invite-dialog__hub-link-link__2guVF\",\"hubLinkLink\":\"invite-dialog__hub-link-link__2guVF\",\"buttons\":\"invite-dialog__buttons__1yN_j\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"close-button\":\"link-dialog__close-button__2THTw\",\"closeButton\":\"link-dialog__close-button__2THTw\",\"domain\":\"link-dialog__domain__1WbPJ\",\"dialog\":\"link-dialog__dialog__1zbyG\",\"header\":\"link-dialog__header__1A06x\",\"contents\":\"link-dialog__contents__3ODVz\",\"code\":\"link-dialog__code__259RI\",\"imageHeader\":\"link-dialog__imageHeader__eaJe6\",\"keep-open\":\"link-dialog__keep-open__DYcUI\",\"keepOpen\":\"link-dialog__keep-open__DYcUI\",\"digit\":\"link-dialog__digit___zoC4\",\"code-loading-panel\":\"link-dialog__code-loading-panel__WKkNk\",\"codeLoadingPanel\":\"link-dialog__code-loading-panel__WKkNk\",\"close\":\"link-dialog__close__2TTmg\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"email-field\":\"sign-in-dialog__email-field__g3xRW\",\"emailField\":\"sign-in-dialog__email-field__g3xRW\",\"next-button\":\"sign-in-dialog__next-button__2pGtq\",\"nextButton\":\"sign-in-dialog__next-button__2pGtq\",\"continue-button\":\"sign-in-dialog__continue-button__kFN6Z\",\"continueButton\":\"sign-in-dialog__continue-button__kFN6Z\",\"sign-in-form\":\"sign-in-dialog__sign-in-form__3Muog\",\"signInForm\":\"sign-in-dialog__sign-in-form__3Muog\",\"sign-in-complete\":\"sign-in-dialog__sign-in-complete__3JMkv\",\"signInComplete\":\"sign-in-dialog__sign-in-complete__3JMkv\",\"terms\":\"sign-in-dialog__terms__3TT6i\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"presence-log\":\"presence-log__presence-log__10oFj\",\"presenceLog\":\"presence-log__presence-log__10oFj\",\"presence-log-entry\":\"presence-log__presence-log-entry__dt0t4\",\"presenceLogEntry\":\"presence-log__presence-log-entry__dt0t4\",\"message-body\":\"presence-log__message-body__2L9jA\",\"messageBody\":\"presence-log__message-body__2L9jA\",\"message-body-multi\":\"presence-log__message-body-multi__2e-Sx\",\"messageBodyMulti\":\"presence-log__message-body-multi__2e-Sx\",\"message-body-mono\":\"presence-log__message-body-mono__3zuQE\",\"messageBodyMono\":\"presence-log__message-body-mono__3zuQE\",\"message-wrap\":\"presence-log__message-wrap__2aWCa\",\"messageWrap\":\"presence-log__message-wrap__2aWCa\",\"message-wrap-multi\":\"presence-log__message-wrap-multi__1eA6v\",\"messageWrapMulti\":\"presence-log__message-wrap-multi__1eA6v\",\"message-source\":\"presence-log__message-source__3CI4d\",\"messageSource\":\"presence-log__message-source__3CI4d\",\"icon-button\":\"presence-log__icon-button__2Shbm\",\"iconButton\":\"presence-log__icon-button__2Shbm\",\"spawn-message\":\"presence-log__spawn-message__14Ne8\",\"spawnMessage\":\"presence-log__spawn-message__14Ne8\",\"share\":\"presence-log__share__37U7E\",\"media\":\"presence-log__media__2qG_d\",\"mediaBody\":\"presence-log__mediaBody__1rByA\",\"expired\":\"presence-log__expired__2wMJc\",\"presence-log-entry-with-button\":\"presence-log__presence-log-entry-with-button__1PxTw\",\"presenceLogEntryWithButton\":\"presence-log__presence-log-entry-with-button__1PxTw\",\"presence-log-in-room\":\"presence-log__presence-log-in-room__17h3n\",\"presenceLogInRoom\":\"presence-log__presence-log-in-room__17h3n\",\"presence-log-spawn\":\"presence-log__presence-log-spawn__3jlmT\",\"presenceLogSpawn\":\"presence-log__presence-log-spawn__3jlmT\",\"presence-log-entry-one-line\":\"presence-log__presence-log-entry-one-line__bRXfp\",\"presenceLogEntryOneLine\":\"presence-log__presence-log-entry-one-line__bRXfp\",\"presence-log-emoji\":\"presence-log__presence-log-emoji__1_3Yn\",\"presenceLogEmoji\":\"presence-log__presence-log-emoji__1_3Yn\",\"emoji\":\"presence-log__emoji__10b18\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"attach-point\":\"presence-list__attach-point__kIdfx\",\"attachPoint\":\"presence-list__attach-point__kIdfx\",\"presence-list\":\"presence-list__presence-list__1KERe\",\"presenceList\":\"presence-list__presence-list__1KERe\",\"contents\":\"presence-list__contents__1B7bz\",\"rows\":\"presence-list__rows__1B6KS\",\"row\":\"presence-list__row__1D2j2\",\"device\":\"presence-list__device__2hYme\",\"display-name\":\"presence-list__display-name__3HnOQ\",\"displayName\":\"presence-list__display-name__3HnOQ\",\"self-display-name\":\"presence-list__self-display-name__2pEMs\",\"selfDisplayName\":\"presence-list__self-display-name__2pEMs\",\"presence\":\"presence-list__presence__15DJe\",\"sign-in\":\"presence-list__sign-in__28eVu\",\"signIn\":\"presence-list__sign-in__28eVu\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"container\":\"_2d-hud__container__66GRt\",\"top\":\"_2d-hud__top__3PiNe\",\"column\":\"_2d-hud__column__1y7XY\",\"bottom\":\"_2d-hud__bottom__2jUcT\",\"hide\":\"_2d-hud__hide__3HJO8\",\"panel\":\"_2d-hud__panel__2oM_T\",\"video-share-notify\":\"_2d-hud__video-share-notify__28KgU\",\"videoShareNotify\":\"_2d-hud__video-share-notify__28KgU\",\"attach-point\":\"_2d-hud__attach-point__17FSc\",\"attachPoint\":\"_2d-hud__attach-point__17FSc\",\"video-share-extra-options\":\"_2d-hud__video-share-extra-options__31VMr\",\"videoShareExtraOptions\":\"_2d-hud__video-share-extra-options__31VMr\",\"iconButton\":\"_2d-hud__iconButton__3faJz\",\"up\":\"_2d-hud__up__1lyhr\",\"small\":\"_2d-hud__small__2rqgF\",\"large\":\"_2d-hud__large__2bHqH\",\"video-share\":\"_2d-hud__video-share__38X7W\",\"videoShare\":\"_2d-hud__video-share__38X7W\",\"mute\":\"_2d-hud__mute__25kHI\",\"active\":\"_2d-hud__active__1TMB8\",\"bubble\":\"_2d-hud__bubble__2oTt2\",\"spawn_pen\":\"_2d-hud__spawn_pen__1F_c6\",\"spawnPen\":\"_2d-hud__spawn_pen__1F_c6\",\"spawn_camera\":\"_2d-hud__spawn_camera__goFE4\",\"spawnCamera\":\"_2d-hud__spawn_camera__goFE4\",\"freeze\":\"_2d-hud__freeze__26rlJ\",\"create-object\":\"_2d-hud__create-object__27TcL\",\"createObject\":\"_2d-hud__create-object__27TcL\",\"mobile-media-picker\":\"_2d-hud__mobile-media-picker__3ZXHc\",\"mobileMediaPicker\":\"_2d-hud__mobile-media-picker__3ZXHc\",\"share_camera\":\"_2d-hud__share_camera__v67Il\",\"shareCamera\":\"_2d-hud__share_camera__v67Il\",\"share_screen\":\"_2d-hud__share_screen__1HQ8E\",\"shareScreen\":\"_2d-hud__share_screen__1HQ8E\",\"share_window\":\"_2d-hud__share_window__stsD3\",\"shareWindow\":\"_2d-hud__share_window__stsD3\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"command-help\":\"chat-command-help__command-help__q0Wb8\",\"commandHelp\":\"chat-command-help__command-help__q0Wb8\",\"entry\":\"chat-command-help__entry__1E1un\",\"command\":\"chat-command-help__command__2GMyn\"};"],"sourceRoot":""}