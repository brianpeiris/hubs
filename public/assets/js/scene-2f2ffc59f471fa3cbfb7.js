!function(e){function t(t){for(var o,s,r=t[0],l=t[1],c=t[2],u=0,h=[];u<r.length;u++)s=r[u],n[s]&&h.push(n[s][0]),n[s]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(d&&d(t);h.length;)h.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],o=!0,r=1;r<i.length;r++){var l=i[r];0!==n[l]&&(o=!1)}o&&(a.splice(t--,1),e=s(s.s=i[0]))}return e}var o={},n={4:0},a=[];function s(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=o,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(i,o,function(t){return e[t]}.bind(null,o));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=l;a.push([537,1,0]),i()}({103:function(e,t,i){"use strict";const o=new THREE.Vector3(0,0,0),n=new THREE.Quaternion,a=new THREE.Vector3(1,1,1),s=new THREE.Matrix4;s.identity();const r=THREE.PropertyBinding.prototype.SetterByBindingTypeAndVersioning,l=THREE.PropertyBinding.prototype.Versioning;for(let e=0;e<r.length;e++){const t=r[e][l.MatrixWorldNeedsUpdate];t&&(r[e][l.MatrixWorldNeedsUpdate]=function(){const e=t.apply(this,arguments);return this.targetObject.matrixNeedsUpdate=!0,e})}THREE.Object3D.prototype.getWorldPosition=function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new THREE.Vector3),this.updateMatrices(),e.setFromMatrixPosition(this.matrixWorld)},THREE.Object3D.prototype.getWorldQuaternion=function(){const e=new THREE.Vector3,t=new THREE.Vector3;return function(i){return void 0===i&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),i=new THREE.Quaternion),this.updateMatrices(),this.matrixWorld.decompose(e,i,t),i}}(),THREE.Object3D.getWorldScale=function(){const e=new THREE.Vector3,t=new THREE.Quaternion;return function(i){return void 0===i&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),i=new THREE.Vector3),this.updateMatrices(),this.matrixWorld.decompose(e,t,i),i}}();const c=e=>{e.matrixIsModified||(e.matrixIsModified=!0,e.cachedMatrixWorld&&(e.cachedMatrixWorld.copy(e.matrixWorld),e.matrixWorld=e.cachedMatrixWorld))},d=THREE.Object3D.prototype.updateMatrix;THREE.Object3D.prototype.updateMatrix=function(){d.apply(this,arguments),c(this)};const u=THREE.Object3D.prototype.applyMatrix;THREE.Object3D.prototype.applyMatrix=function(){u.apply(this,arguments),c(this)},THREE.Object3D.prototype.updateMatrices=function(e,t,i){this.hasHadFirstMatrixUpdate?(this.matrixNeedsUpdate||this.matrixAutoUpdate||e)&&(this.updateMatrix(),this.matrixNeedsUpdate&&(this.matrixNeedsUpdate=!1)):(this.position.equals(o)&&this.quaternion.equals(n)&&this.scale.equals(a)&&this.matrix.equals(s)||this.updateMatrix(),this.hasHadFirstMatrixUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.cachedMatrixWorld=this.matrixWorld),!i&&this.parent&&(this.parent.updateMatrices(!1,t,!1),this.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate||this.parent.childrenNeedMatrixWorldUpdate),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixIsModified?this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix):this.matrixWorld=this.parent.matrixWorld,this.childrenNeedMatrixWorldUpdate=!0,this.matrixWorldNeedsUpdate=!1)},THREE.Object3D.prototype.updateMatrixWorld=function(e,t){if(!this.visible&&!t)return;this.updateMatrices(!1,e,!0);const i=this.children,o=this.childrenNeedMatrixWorldUpdate||e;for(let e=0,n=i.length;e<n;e++)i[e].updateMatrixWorld(o,t);this.childrenNeedMatrixWorldUpdate&&(this.childrenNeedMatrixWorldUpdate=!1)}},104:function(e,t,i){"use strict";i(105),i(59),i(60),i(106),i(107),i(109),i(35),i(111),i(112),i(113),i(69),i(70),i(114),i(116),i(117),i(118),i(119),i(120),i(121),i(122),i(123),i(125)},105:function(e,t,i){"use strict";AFRAME.registerComponent("ambient-light",{schema:{color:{type:"color"},intensity:{default:1}},init(){const e=this.el;this.light=new THREE.AmbientLight,this.el.setObject3D("ambient-light",this.light),this.el.sceneEl.systems.light.registerLight(e)},update(e){this.data.color!==e.color&&this.light.color.set(this.data.color),this.data.intensity!==e.intensity&&(this.light.intensity=this.data.intensity)},remove:function(){this.el.removeObject3D("ambient-light")}})},106:function(e,t,i){"use strict";AFRAME.registerComponent("css-class",{schema:{type:"string"},multiple:!0,init(){this.el.classList.add(this.data)},update(e){this.data!==e&&(this.el.classList.remove(e),this.el.classList.add(this.data))},remove(){this.el.classList.remove(this.data)}})},107:function(e,t,i){"use strict";var o,n=i(108),a=(o=n,o&&o.__esModule?o:{default:o});AFRAME.registerComponent("directional-light",{schema:{color:{type:"color"},intensity:{default:1},castShadow:{default:!0},shadowMapResolution:{default:[512,512]}},init(){const e=this.el;this.light=new THREE.DirectionalLight,this.light.position.set(0,0,0),this.light.target.position.set(0,0,1),this.light.add(this.light.target),this.light.matrixNeedsUpdate=!0,this.el.setObject3D("directional-light",this.light),this.el.sceneEl.systems.light.registerLight(e)},update(e){const t=this.light;this.data.color!==e.color&&t.color.set(this.data.color),this.data.intensity!==e.intensity&&(t.intensity=this.data.intensity),this.data.castShadow!==e.castShadow&&(t.castShadow=this.data.castShadow);const[i,o]=this.data.shadowMapResolution,[n,a]=e.shadowMapResolution?e.shadowMapResolution:[512,512];i===n&&o===a||(t.shadow.mapSize.set(i,o),t.shadow.map&&(t.shadow.map.dispose(),t.shadow.map=null))},tick(){window.APP&&"low"===window.APP.quality||(0,a.default)(this.light,this.el.sceneEl.object3D)},remove:function(){this.el.removeObject3D("directional-light")}})},108:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){n.makeEmpty(),o.makeEmpty(),t.traverse(e=>{const t=e.geometry;t&&e.castShadow&&(t.boundingBox||t.computeBoundingBox(),s.copy(t.boundingBox),s.applyMatrix4(e.matrixWorld),o.union(s))});const i=o.min,u=o.max;d[0].set(i.x,i.y,i.z),d[1].set(i.x,i.y,u.z),d[2].set(i.x,u.y,i.z),d[3].set(i.x,u.y,u.z),d[4].set(u.x,i.y,i.z),d[5].set(u.x,i.y,u.z),d[6].set(u.x,u.y,i.z),d[7].set(u.x,u.y,u.z),a.getInverse(e.shadow.camera.matrixWorld);for(let e=0;e<d.length;e++)d[e].applyMatrix4(a),n.expandByPoint(d[e]);const h=e.shadow.camera;h.left=n.min.x-r,h.right=n.max.x+r,h.bottom=n.min.y-r,h.top=n.max.y+r,h.near=n.min.z+l,h.far=n.max.z+c,h.updateProjectionMatrix()};const o=new THREE.Box3,n=new THREE.Box3,a=new THREE.Matrix4,s=new THREE.Box3,r=1,l=-500,c=500,d=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3]},109:function(e,t,i){"use strict";AFRAME.registerComponent("duck",{schema:{initialForce:{default:0},maxForce:{default:6.5},maxScale:{default:5}},init:function(){this.physicsSystem=this.el.sceneEl.systems.physics,this.hasBody=!1,this.position=new CANNON.Vec3,this.force=new CANNON.Vec3(0,this.data.initialForce,0),this.initialScale=this.el.object3D.scale.x,this.maxScale=this.data.maxScale*this.initialScale},play:function(){this.physicsSystem.addComponent(this)},pause:function(){this.physicsSystem.removeComponent(this)},beforeStep:function(){if(this.el.body&&NAF.utils.isMine(this.el)){const e=this.el.object3D.scale.x,t=Math.min(1,(e-this.initialScale)/(this.maxScale-this.initialScale)),i=t*this.data.maxForce;if(i>0){const e=Math.random()*Math.PI*2,t=Math.cos(e),o=Math.sin(e);this.force.set(t,i,o),this.position.set(.01*t,0,.01*o),this.el.object3D.matrixNeedsUpdate=!0,this.el.body.applyForce(this.force,this.position)}}}})},111:function(e,t,i){"use strict";AFRAME.registerComponent("heightfield",{init(){this.el.addEventListener("componentinitialized",e=>{"static-body"===e.detail.name&&this.generateAndAddHeightfield(this.el.components["static-body"])}),this.el.setAttribute("static-body",{shape:"none",mass:0})},generateAndAddHeightfield(e){const{offset:t,distance:i,data:o}=this.data,n=new CANNON.Quaternion;n.setFromAxisAngle(new CANNON.Vec3(1,0,0),-Math.PI/2);const a=new CANNON.Quaternion;a.setFromAxisAngle(new CANNON.Vec3(0,1,0),-Math.PI/2),a.mult(n,n);const s=new CANNON.Vec3(t.x,t.y,t.z),r=new CANNON.Heightfield(o,{elementSize:i});e.addShape(r,s,n)}})},112:function(e,t,i){"use strict";AFRAME.registerComponent("hemisphere-light",{schema:{skyColor:{type:"color"},groundColor:{type:"color"},intensity:{default:1}},init(){const e=this.el;this.light=new THREE.HemisphereLight,this.light.position.set(0,0,0),this.light.matrixNeedsUpdate=!0,this.el.setObject3D("hemisphere-light",this.light),this.el.sceneEl.systems.light.registerLight(e)},update(e){this.data.skyColor!==e.skyColor&&this.light.color.set(this.data.skyColor),this.data.groundColor!==e.groundColor&&this.light.groundColor.set(this.data.groundColor),this.data.intensity!==e.intensity&&(this.light.intensity=this.data.intensity)},remove:function(){this.el.removeObject3D("hemisphere-light")}})},113:function(e,t,i){"use strict";AFRAME.registerComponent("hide-when-quality",{schema:{type:"string",default:"low"},init(){this.onQualityChanged=this.onQualityChanged.bind(this),this.el.sceneEl.addEventListener("quality-changed",this.onQualityChanged)},onQualityChanged(e){this.updateComponentState(e.detail)},update(e){this.data!==e&&this.updateComponentState(window.APP.quality)},updateComponentState(e){this.el.setAttribute("visible",e!==this.data)}})},114:function(e,t,i){"use strict";var o=i(80),n=i(9),a=i(79);i(58);var s,r=i(115),l=(s=r,s&&s.__esModule?s:{default:s});const c=new THREE.GLTFLoader;let d;c.load(l.default,e=>{d=e});const u=new THREE.Box3;AFRAME.registerComponent("media-loader",{schema:{fileId:{type:"string"},fileIsOwned:{type:"boolean"},src:{type:"string"},resize:{default:!1},resolve:{default:!1},contentType:{default:null},mediaOptions:{default:{},parse:e=>"object"==typeof e?e:JSON.parse(e),stringify:JSON.stringify}},init(){this.onError=this.onError.bind(this),this.showLoader=this.showLoader.bind(this),this.clearLoadingTimeout=this.clearLoadingTimeout.bind(this),this.onMediaLoaded=this.onMediaLoaded.bind(this),this.shapeAdded=!1,this.hasBakedShapes=!1},setShapeAndScale(e){const t=this.el.getObject3D("mesh"),i=(0,o.getBox)(this.el,t),n=e?(0,o.getScaleCoefficient)(.5,i):1;if(this.el.object3DMap.mesh.scale.multiplyScalar(n),this.el.body&&this.shapeAdded&&this.el.body.shapes.length>1)this.el.removeAttribute("shape"),this.shapeAdded=!1;else if(!this.hasBakedShapes&&!i.isEmpty()){const e=new THREE.Vector3,{min:o,max:a}=i,s={x:Math.abs(o.x-a.x)/2*n,y:Math.abs(o.y-a.y)/2*n,z:Math.abs(o.z-a.z)/2*n};e.addVectors(o,a).multiplyScalar(.5*n),t.position.sub(e),this.el.setAttribute("shape",{shape:"box",halfExtents:s}),this.shapeAdded=!0}t.matrixNeedsUpdate=!0},tick(e,t){this.loaderMixer&&this.loaderMixer.update(t/1e3)},onError(){this.el.removeAttribute("gltf-model-plus"),this.el.removeAttribute("media-pager"),this.el.removeAttribute("media-video"),this.el.setAttribute("media-image",{src:"error"}),clearTimeout(this.showLoaderTimeout),delete this.showLoaderTimeout},showLoader(){const e=!!d,t=e?d.scene.clone():new THREE.Mesh(new THREE.BoxGeometry,new THREE.MeshBasicMaterial);e&&(this.loaderMixer=new THREE.AnimationMixer(t),this.loadingClip=this.loaderMixer.clipAction(d.animations[0]),this.loadingClip.play()),this.el.setObject3D("mesh",t),this.hasBakedShapes=!!(this.el.body&&this.el.body.shapes.length>0),this.setShapeAndScale(!0),delete this.showLoaderTimeout},clearLoadingTimeout(){clearTimeout(this.showLoaderTimeout),this.loaderMixer&&(this.loadingClip.stop(),delete this.loaderMixer),delete this.showLoaderTimeout},setupHoverableVisuals(){const e=this.el.components["hoverable-visuals"];e&&(e.uniforms=(0,n.injectCustomShaderChunks)(this.el.object3D),u.setFromObject(this.el.object3DMap.mesh),u.getBoundingSphere(e.boundingSphere))},onMediaLoaded(){this.clearLoadingTimeout(),this.setupHoverableVisuals()},async update(e){try{const{src:t}=this.data;if(t===e.src||this.showLoaderTimeout||(this.showLoaderTimeout=setTimeout(this.showLoader,100)),!t)return;let i=t,o=t,s=this.data.contentType;if(this.data.resolve){const e=await(0,n.resolveUrl)(t);i=e.origin,s=e.meta&&e.meta.expected_content_type||s}if(o=(0,n.proxiedUrlFor)(i,null),s=s||(0,n.guessContentType)(i)||await(e=>fetch(e,{method:"HEAD"}).then(e=>e.headers.get("content-type")))(o),t!==e.src&&this.el.emit("media_resolved",{src:t,raw:o,contentType:s}),s.startsWith("video/")||s.startsWith("audio/"))this.el.removeAttribute("gltf-model-plus"),this.el.removeAttribute("media-image"),this.el.addEventListener("video-loaded",this.onMediaLoaded,{once:!0}),this.el.setAttribute("media-video",Object.assign({},this.data.mediaOptions,{src:o})),this.el.components["position-at-box-shape-border"]&&this.el.setAttribute("position-at-box-shape-border",{dirs:["forward","back"]});else if(s.startsWith("image/"))this.el.removeAttribute("gltf-model-plus"),this.el.removeAttribute("media-video"),this.el.addEventListener("image-loaded",this.onMediaLoaded,{once:!0}),this.el.removeAttribute("media-pager"),this.el.setAttribute("media-image",Object.assign({},this.data.mediaOptions,{src:o,contentType:s})),this.el.components["position-at-box-shape-border"]&&this.el.setAttribute("position-at-box-shape-border",{dirs:["forward","back"]});else if(s.startsWith("application/pdf"))this.el.removeAttribute("gltf-model-plus"),this.el.removeAttribute("media-video"),this.el.setAttribute("media-pager",Object.assign({},this.data.mediaOptions,{src:i})),this.el.addEventListener("image-loaded",this.clearLoadingTimeout,{once:!0}),this.el.addEventListener("preview-loaded",this.onMediaLoaded,{once:!0}),this.el.components["position-at-box-shape-border"]&&this.el.setAttribute("position-at-box-shape-border",{dirs:["forward","back"]});else{if(!(s.includes("application/octet-stream")||s.includes("x-zip-compressed")||s.startsWith("model/gltf")))throw new Error(`Unsupported content type: ${s}`);this.el.removeAttribute("media-image"),this.el.removeAttribute("media-video"),this.el.removeAttribute("media-pager"),this.el.addEventListener("model-loaded",()=>{this.clearLoadingTimeout(),this.hasBakedShapes=!!(this.el.body&&this.el.body.shapes.length>(this.shapeAdded?1:0)),this.setShapeAndScale(this.data.resize),this.setupHoverableVisuals(),(0,a.addAnimationComponents)(this.el)},{once:!0}),this.el.addEventListener("model-error",this.onError,{once:!0}),this.el.setAttribute("gltf-model-plus",Object.assign({},this.data.mediaOptions,{src:o,contentType:s,inflate:!0,modelToWorldScale:this.data.resize?1e-4:1}))}}catch(e){console.error("Error adding media",e),this.onError()}}}),AFRAME.registerComponent("media-pager",{schema:{src:{type:"string"},index:{default:0}},init(){this.toolbar=null,this.imageSrc=null,this.onNext=this.onNext.bind(this),this.onPrev=this.onPrev.bind(this),this.el.addEventListener("image-loaded",async e=>{this.imageSrc=e.detail.src,await this._ensureUI(),this.update()})},async _ensureUI(){if(this.toolbar||!this.imageSrc)return;this.maxIndex=await(e=>fetch(e).then(e=>parseInt(e.headers.get("x-max-content-index"))))(this.imageSrc);const e=document.getElementById("paging-toolbar");this.el.querySelector(".interactable-ui").appendChild(document.importNode(e.content,!0)),this.toolbar=this.el.querySelector(".paging-toolbar"),setTimeout(()=>{this.nextButton=this.el.querySelector(".next-button [text-button]"),this.prevButton=this.el.querySelector(".prev-button [text-button]"),this.pageLabel=this.el.querySelector(".page-label"),this.nextButton.addEventListener("grab-start",this.onNext),this.prevButton.addEventListener("grab-start",this.onPrev),this.update(),this.el.emit("preview-loaded")},0)},async update(){if(!this.data.src)return;const e=(0,n.proxiedUrlFor)(this.data.src,this.data.index);this.el.setAttribute("media-image",{src:e,contentType:"image/png"}),await this._ensureUI(),this.pageLabel&&(this.pageLabel.setAttribute("text","value",`${this.data.index+1}/${this.maxIndex+1}`),this.repositionToolbar())},remove(){this.toolbar&&this.toolbar.parentNode.removeChild(this.toolbar)},onNext(){this.el.setAttribute("media-pager","index",Math.min(this.data.index+1,this.maxIndex)),this.el.emit("pager-page-changed")},onPrev(){this.el.setAttribute("media-pager","index",Math.max(this.data.index-1,0)),this.el.emit("pager-page-changed")},repositionToolbar(){this.toolbar.object3D.position.y=-this.el.getAttribute("shape").halfExtents.y-.2,this.toolbar.object3D.matrixNeedsUpdate=!0}})},115:function(e,t,i){e.exports=i.p+"assets/LoadingObject_Atom-7dcc3b81897e68b740c1cf12b6cf4c3f.glb"},116:function(e,t,i){"use strict";AFRAME.registerComponent("point-light",{schema:{color:{type:"color"},intensity:{default:1},range:{default:0},castShadow:{default:!0},shadowMapResolution:{default:[512,512]}},init(){const e=this.el;this.light=new THREE.PointLight,this.light.decay=2,this.light.shadow.camera.matrixAutoUpdate=!0,this.el.setObject3D("point-light",this.light),this.el.sceneEl.systems.light.registerLight(e)},update(e){const t=this.light;this.data.color!==e.color&&t.color.set(this.data.color),this.data.intensity!==e.intensity&&(t.intensity=this.data.intensity),this.data.range!==e.range&&(t.distance=this.data.range),this.data.castShadow!==e.castShadow&&(t.castShadow=this.data.castShadow);const[i,o]=this.data.shadowMapResolution,[n,a]=e.shadowMapResolution?e.shadowMapResolution:[512,512];i===n&&o===a||(t.shadow.mapSize.set(i,o),t.shadow.map&&(t.shadow.map.dispose(),t.shadow.map=null))},remove:function(){this.el.removeObject3D("point-light")}})},117:function(e,t,i){"use strict";AFRAME.registerComponent("quack",{schema:{quackPercentage:{default:1},specialQuackPercentage:{default:.01}},init:function(){this._handleGrabStart=this._handleGrabStart.bind(this)},play:function(){this.el.addEventListener("grab-start",this._handleGrabStart)},pause:function(){this.el.removeEventListener("grab-start",this._handleGrabStart)},_handleGrabStart:function(){const e=Math.random();e<this.data.specialQuackPercentage?this.el.emit("specialquack"):e<this.data.quackPercentage&&this.el.emit("quack")}})},118:function(e,t,i){"use strict";function o(e,t,i){return(1-i)*e+i*t}AFRAME.registerComponent("scene-preview-camera",{schema:{duration:{default:90,type:"number"},positionOnly:{default:!1,type:"boolean"}},init:function(){this.startPoint=this.el.object3D.position.clone(),this.startRotation=new THREE.Quaternion,this.startRotation.setFromEuler(this.el.object3D.rotation),this.targetPoint=new THREE.Vector3(1,.5,-.5),this.targetPoint.applyMatrix4(this.el.object3D.matrix),this.targetPoint.add(new THREE.Vector3(0,0,-2));const e=new THREE.Euler(-.15,0,.15);this.targetRotation=new THREE.Quaternion,this.targetRotation.setFromEuler(e),this.targetRotation.premultiply(this.startRotation),this.startTime=(new Date).getTime(),this.backwards=!1,this.ranOnePass=!1},tick:function(){let e=((new Date).getTime()-this.startTime)/(1e3*this.data.duration);e=Math.min(1,Math.max(0,e)),this.ranOnePass?e=e<.5?2*e*e:(4-2*e)*e-1:e*=2-e;const t=this.backwards?this.targetPoint:this.startPoint,i=this.backwards?this.startPoint:this.targetPoint,n=this.backwards?this.targetRotation:this.startRotation,a=this.backwards?this.startRotation:this.targetRotation,s=new THREE.Quaternion;THREE.Quaternion.slerp(n,a,s,e),this.el.object3D.position.set(o(t.x,i.x,e),o(t.y,i.y,e),o(t.z,i.z,e)),this.data.positionOnly||this.el.object3D.rotation.setFromQuaternion(s),this.el.object3D.matrixNeedsUpdate=!0,e>=.9999&&(this.ranOnePass=!0,this.backwards=!this.backwards,this.startTime=(new Date).getTime())}})},119:function(e,t,i){"use strict";THREE.Sky=function(){const e=THREE.Sky.SkyShader,t=new THREE.ShaderMaterial({fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:THREE.UniformsUtils.clone(e.uniforms),side:THREE.BackSide});THREE.Mesh.call(this,new THREE.BoxBufferGeometry(1,1,1),t)},THREE.Sky.prototype=Object.create(THREE.Mesh.prototype),THREE.Sky.prototype.constructor=THREE.Sky,THREE.Sky.SkyShader={uniforms:{luminance:{value:1},turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new THREE.Vector3}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const vec3 up = vec3( 0.0, 1.0, 0.0 );","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","\tfloat c = ( 0.2 * T ) * 10E-18;","\treturn 0.434 * c * MieConst;","}","void main() {","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvWorldPosition = worldPosition.xyz;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\tvSunDirection = normalize( sunPosition );","\tvSunE = sunIntensity( dot( vSunDirection, up ) );","\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );","\tvBetaR = totalRayleigh * rayleighCoefficient;","\tvBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join("\n"),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float luminance;","uniform float mieDirectionalG;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const vec3 up = vec3( 0.0, 1.0, 0.0 );","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","\tfloat g2 = pow( g, 2.0 );","\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","const float A = 0.15;","const float B = 0.50;","const float C = 0.10;","const float D = 0.20;","const float E = 0.02;","const float F = 0.30;","const float whiteScale = 1.0748724675633854;","vec3 Uncharted2Tonemap( vec3 x ) {","\treturn ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;","}","void main() {","\tfloat zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );","\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","\tfloat sR = rayleighZenithLength * inverse;","\tfloat sM = mieZenithLength * inverse;","\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","\tfloat cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );","\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","\tvec3 betaRTheta = vBetaR * rPhase;","\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );","\tvec3 betaMTheta = vBetaM * mPhase;","\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","\tvec3 direction = normalize( vWorldPosition - cameraPos );","\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]","\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]","\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","\tvec3 L0 = vec3( 0.1 ) * Fex;","\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;","\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","\tvec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );","\tvec3 color = curr * whiteScale;","\tvec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );","\tgl_FragColor = vec4( retColor, 1.0 );","}"].join("\n")},AFRAME.registerComponent("skybox",{schema:{turbidity:{type:"number",default:10},rayleigh:{type:"number",default:2},luminance:{type:"number",default:1},mieCoefficient:{type:"number",default:.005},mieDirectionalG:{type:"number",default:.8},inclination:{type:"number",default:0},azimuth:{type:"number",default:0},distance:{type:"number",default:8e3}},init(){this.sky=new THREE.Sky,this.el.setObject3D("mesh",this.sky)},update(e){const t=this.sky.material.uniforms;if(this.data.turbidity!==e.turbidity&&(t.turbidity.value=this.data.turbidity),this.data.rayleigh!==e.rayleigh&&(t.rayleigh.value=this.data.rayleigh),this.data.luminance!==e.luminance&&(t.luminance.value=this.data.luminance),this.data.mieCoefficient!==e.mieCoefficient&&(t.mieCoefficient.value=this.data.mieCoefficient),this.data.mieDirectionalG!==e.mieDirectionalG&&(t.mieDirectionalG.value=this.data.mieDirectionalG),this.data.inclination!==e.inclination||this.data.azimuth!==e.azimuth||this.data.distance!==e.distance){const e=Math.PI*(this.data.inclination-.5),i=2*Math.PI*(this.data.azimuth-.5),o=this.data.distance,n=o*Math.cos(i),a=o*Math.sin(i)*Math.sin(e),s=o*Math.sin(i)*Math.cos(e);t.sunPosition.value.set(n,a,s).normalize(),1===this.el.object3D.scale.x&&this.sky.scale.set(o,o,o),this.el.object3D.matrixNeedsUpdate=!0}},remove(){this.el.removeObject3D("mesh")}})},12:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connectToReticulum=function(e=!1){const t=new URLSearchParams(location.search),i=t.get("phx_protocol")||("https:"===document.location.protocol?"wss:":"ws:");let o=t.get("phx_host"),n=t.get("phx_port");{const[e,t]="dev.reticulum.io".split(":");o=o||e||"",n=n||t||"443"}const r=`${i}//${o}${n?`:${n}`:""}/socket`;console.log(`Phoenix Socket URL: ${r}`);const l={params:{session_id:(0,a.default)()}};e&&(l.logger=((e,t,i)=>{console.log(`${e}: ${t}`,i)}));const c=new s.Socket(r,l);return c.connect(),c},t.getReticulumFetchUrl=r,t.getLandingPageForPhoto=function(e){const t=new URL(e);return r(t.pathname.replace(".png",".html")+t.search,!0)};var o,n=i(44),a=(o=n,o&&o.__esModule?o:{default:o}),s=i(45);document.createElement("a");function r(e,t=!1){return`https://dev.reticulum.io${e}`}},120:function(e,t,i){"use strict";var o=i(13);AFRAME.registerComponent("spawn-controller",{schema:{target:{type:"selector"},loadedEvent:{type:"string"}},init(){this.onLoad=this.onLoad.bind(this),this.data.target.addEventListener(this.data.loadedEvent,this.onLoad)},onLoad(){const e=document.querySelectorAll("[spawn-point]");if(0===e.length)return;const t=Math.round((e.length-1)*Math.random()),i=e[t];(0,o.getLastWorldPosition)(i.object3D,this.el.object3D.position),this.el.object3D.rotation.copy(i.object3D.rotation),this.el.object3D.matrixNeedsUpdate=!0}}),AFRAME.registerComponent("spawn-point",{})},121:function(e,t,i){"use strict";AFRAME.registerComponent("spot-light",{schema:{color:{type:"color"},intensity:{default:1},range:{default:0},innerConeAngle:{default:0},outerConeAngle:{default:Math.PI/4},castShadow:{default:!0},shadowMapResolution:{default:[512,512]}},init(){const e=this.el;this.light=new THREE.SpotLight,this.light.position.set(0,0,0),this.light.target.position.set(0,0,1),this.light.add(this.light.target),this.light.decay=2,this.light.matrixNeedsUpdate=!0,this.light.target.matrixNeedsUpdate=!0,this.el.setObject3D("spot-light",this.light),this.el.sceneEl.systems.light.registerLight(e)},update(e){const t=this.light;this.data.color!==e.color&&t.color.set(this.data.color),this.data.intensity!==e.intensity&&(t.intensity=this.data.intensity),this.data.range!==e.range&&(t.distance=this.data.range),this.data.innerConeAngle===e.innerConeAngle&&this.data.outerConeAngle===e.outerConeAngle||(t.angle=this.data.outerConeAngle,t.penumbra=1-this.data.innerConeAngle/this.data.outerConeAngle),this.data.castShadow!==e.castShadow&&(t.castShadow=this.data.castShadow);const[i,o]=this.data.shadowMapResolution,[n,a]=e.shadowMapResolution?e.shadowMapResolution:[512,512];i===n&&o===a||(t.shadow.mapSize.set(i,o),t.shadow.map&&(t.shadow.map.dispose(),t.shadow.map=null))},remove:function(){this.el.removeObject3D("spot-light")}})},122:function(e,t,i){"use strict";var o=i(13);AFRAME.registerComponent("sticky-object",{dependencies:["body"],schema:{autoLockOnLoad:{default:!1},autoLockOnRelease:{default:!1},autoLockSpeedLimit:{default:.5}},init(){this._onGrab=this._onGrab.bind(this),this._onRelease=this._onRelease.bind(this),this._onBodyLoaded=this._onBodyLoaded.bind(this)},play(){this.el.addEventListener("grab-start",this._onGrab),this.el.addEventListener("grab-end",this._onRelease),this.hasSetupBodyLoaded||(this.hasSetupBodyLoaded=!0,this.el.body?this._onBodyLoaded():this.el.addEventListener("body-loaded",this._onBodyLoaded,{once:!0}))},pause(){this.el.removeEventListener("grab-start",this._onGrab),this.el.removeEventListener("grab-end",this._onRelease)},setLocked(e){this.el.components.networked&&!NAF.utils.isMine(this.el)||(this.locked=e,this.el.setAttribute("body",{type:e?"static":"dynamic"}))},_onBodyLoaded(){this.data.autoLockOnLoad&&this.setLocked(!0)},_onRelease(){this.el.is("grabbed")||(this.data.autoLockOnRelease&&(0===this.data.autoLockSpeedLimit||this.el.body.velocity.lengthSquared()<this.data.autoLockSpeedLimit*this.data.autoLockSpeedLimit)&&this.setLocked(!0),this.el.body.collisionResponse=!0)},_onGrab(){this.el.components.grabbable&&0!==this.el.components.grabbable.data.maxGrabbers&&(this.setLocked(!1),this.el.body.collisionResponse=!1)},remove(){if(this.el.removeEventListener("body-loaded",this._onBodyLoaded),this.stuckTo){const e=this.stuckTo;delete this.stuckTo,e._unstickObject()}}}),AFRAME.registerComponent("sticky-object-zone",{dependencies:["physics"],init(){this.worldQuaternion=new THREE.Quaternion,this.worldPosition=new THREE.Vector3,(0,o.getLastWorldPosition)(this.el.object3D,this.worldPosition),(0,o.getLastWorldQuaternion)(this.el.object3D,this.worldQuaternion);const e=new THREE.Vector3(0,0,5).applyQuaternion(this.el.object3D.quaternion);this.bootImpulsePosition=new CANNON.Vec3(0,0,0),this.bootImpulse=new CANNON.Vec3,this.bootImpulse.copy(e),this._onCollisions=this._onCollisions.bind(this),this.el.addEventListener("collisions",this._onCollisions)},remove(){this.el.removeEventListener("collisions",this._onCollisions)},_onCollisions(e){e.detail.els.forEach(e=>{const t=e.components["sticky-object"];t&&this._setStuckObject(t)}),this.stuckObject&&e.detail.clearedEls.forEach(e=>{this.stuckObject&&this.stuckObject.el===e&&this._unstickObject()})},_setStuckObject(e){if(e.setLocked(!0),e.el.object3D.position.copy(this.worldPosition),e.el.object3D.quaternion.copy(this.worldQuaternion),e.el.object3D.matrixNeedsUpdate=!0,e.el.body.collisionResponse=!1,e.stuckTo=this,this.stuckObject&&NAF.utils.isMine(this.stuckObject.el)){const e=this.stuckObject.el;this._unstickObject(),e.body.applyImpulse(this.bootImpulse,this.bootImpulsePosition)}this.stuckObject=e},_unstickObject(){this.stuckObject.stuckTo===this&&(this.stuckObject.setLocked(!1),this.stuckObject.el.body.collisionResponse=!0,delete this.stuckObject.stuckTo),delete this.stuckObject}})},123:function(e,t,i){"use strict";var o=i(3),n=i(9),a=i(124),s=i(19),r=i(13);let l=0;AFRAME.registerComponent("super-spawner",{schema:{src:{default:""},resolve:{default:!1},template:{default:""},useCustomSpawnPosition:{default:!1},spawnPosition:{type:"vec3"},useCustomSpawnRotation:{default:!1},spawnRotation:{type:"vec4"},useCustomSpawnScale:{default:!1},spawnScale:{type:"vec3"},grabEvents:{default:["cursor-grab","primary_hand_grab"]},releaseEvents:{default:["cursor-release","primary_hand_release"]},spawnCooldown:{default:1},centerSpawnedObject:{default:!1},spawnEvent:{type:"string"},superHand:{type:"selector"},cursorSuperHand:{type:"selector"}},init(){this.heldEntities=new Map,this.cooldownTimeout=null,this.onGrabStart=this.onGrabStart.bind(this),this.onGrabEnd=this.onGrabEnd.bind(this),this.onSpawnEvent=this.onSpawnEvent.bind(this),this.sceneEl=document.querySelector("a-scene"),this.el.setAttribute("hoverable-visuals",{cursorController:"#cursor-controller",enableSweepingEffect:!1})},play(){this.el.addEventListener("grab-start",this.onGrabStart),this.el.addEventListener("grab-end",this.onGrabEnd),this.data.spawnEvent&&this.sceneEl.addEventListener(this.data.spawnEvent,this.onSpawnEvent)},pause(){this.el.removeEventListener("grab-start",this.onGrabStart),this.el.removeEventListener("grab-end",this.onGrabEnd),this.data.spawnEvent&&this.sceneEl.removeEventListener(this.data.spawnEvent,this.onSpawnEvent),this.cooldownTimeout&&(clearTimeout(this.cooldownTimeout),this.cooldownTimeout=null,this.el.setAttribute("visible",!0),this.el.classList.add("interactable"))},remove(){this.heldEntities.clear()},async onSpawnEvent(){const e=AFRAME.scenes[0].systems.userinput,t=e.get(o.paths.actions.leftHand.pose),i=e.get(o.paths.actions.rightHand.pose),l=t&&i?2:t||i?1:0,c=l>1&&this.el.sceneEl.is("vr-mode"),d=c?this.data.superHand:this.data.cursorSuperHand;if(this.cooldownTimeout||!d)return;const u=(0,n.addMedia)(this.data.src,this.data.template,s.ObjectContentOrigins.SPAWNER,this.data.resolve).entity;if((0,r.getLastWorldPosition)(d.object3D,u.object3D.position),(0,r.getLastWorldQuaternion)(d.object3D,u.object3D.quaternion),this.data.useCustomSpawnScale&&u.object3D.scale.copy(this.data.spawnScale),this.activateCooldown(),await(0,a.waitForEvent)("body-loaded",u),(0,r.getLastWorldPosition)(d.object3D,u.object3D.position),u.object3D.matrixNeedsUpdate=!0,!c)for(let e=0;e<this.data.grabEvents.length;e++)d.emit(this.data.grabEvents[e],{targetEntity:u})},async onGrabStart(e){if(this.cooldownTimeout)return;e.preventDefault();const t=e.detail.hand,i=l++;this.heldEntities.set(t,i);const o=(0,n.addMedia)(this.data.src,this.data.template,s.ObjectContentOrigins.SPAWNER,this.data.resolve).entity;if(o.object3D.position.copy(this.data.useCustomSpawnPosition?this.data.spawnPosition:this.el.object3D.position),o.object3D.rotation.copy(this.data.useCustomSpawnRotation?this.data.spawnRotation:this.el.object3D.rotation),o.object3D.scale.copy(this.data.useCustomSpawnScale?this.data.spawnScale:this.el.object3D.scale),o.object3D.matrixNeedsUpdate=!0,await(0,a.waitForEvent)("body-loaded",o),this.heldEntities.get(t)===i){this.data.centerSpawnedObject&&o.body.position.copy(t.object3D.position);for(let e=0;e<this.data.grabEvents.length;e++)t.emit(this.data.releaseEvents[e]),t.emit(this.data.grabEvents[e],{targetEntity:o})}this.activateCooldown()},onGrabEnd(e){this.heldEntities.delete(e.detail.hand),e.preventDefault()},activateCooldown(){this.data.spawnCooldown>0&&(this.el.setAttribute("visible",!1),this.el.classList.remove("interactable"),this.cooldownTimeout=setTimeout(()=>{this.el.setAttribute("visible",!0),this.el.classList.add("interactable"),this.cooldownTimeout=null},1e3*this.data.spawnCooldown))}})},124:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.waitForEvent=function(e,t){return new Promise(i=>{t.addEventListener(e,i,{once:!0})})}},125:function(e,t,i){"use strict";var o=i(69);function n(e,t){THREE.Mesh.call(this,e);t=t||{};const i=void 0!==t.time?t.time:0,o=void 0!==t.waterNormals?t.waterNormals:null,n=void 0!==t.sunDirection?t.sunDirection:new THREE.Vector3(.70707,.70707,0),a=new THREE.Color(void 0!==t.sunColor?t.sunColor:16777215),s=new THREE.Color(void 0!==t.waterColor?t.waterColor:8355711),r=void 0!==t.eye?t.eye:new THREE.Vector3(0,0,0),l=void 0!==t.distortionScale?t.distortionScale:20,c=void 0!==t.side?t.side:THREE.FrontSide,d=void 0!==t.fog&&t.fog,u={uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.lights,{normalSampler:{value:null},time:{value:0},size:{value:1},distortionScale:{value:20},sunColor:{value:new THREE.Color(8355711)},sunDirection:{value:new THREE.Vector3(.70707,.70707,0)},eye:{value:new THREE.Vector3},waterColor:{value:new THREE.Color(5592405)}}]),vertexShader:"\n      uniform float time;\n      varying vec4 worldPosition;\n\n      void main() {\n      \tworldPosition = modelMatrix * vec4( position, 1.0 );\n      \tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n      \tgl_Position = projectionMatrix * mvPosition;\n\n      }\n    ",fragmentShader:`\n      uniform float time;\n      uniform float size;\n      uniform float distortionScale;\n      uniform sampler2D normalSampler;\n      uniform vec3 sunColor;\n      uniform vec3 sunDirection;\n      uniform vec3 eye;\n      uniform vec3 waterColor;\n\n      varying vec4 worldPosition;\n\n      vec4 getNoise( vec2 uv ) {\n      \tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\n      \tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\n      \tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\n      \tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\n      \tvec4 noise = texture2D( normalSampler, uv0 ) +\n      \t\ttexture2D( normalSampler, uv1 ) +\n      \t\ttexture2D( normalSampler, uv2 ) +\n      \t\ttexture2D( normalSampler, uv3 );\n      \treturn noise * 0.5 - 1.0;\n      }\n\n      void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {\n      \tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n      \tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\n      \tspecularColor += pow( direction, shiny ) * sunColor * spec;\n      \tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n      }\n\n      ${THREE.ShaderChunk.common}\n      ${THREE.ShaderChunk.packing}\n      ${THREE.ShaderChunk.bsdfs}\n      ${THREE.ShaderChunk.lights_pars_begin}\n\n      void main() {\n      \tvec4 noise = getNoise( worldPosition.xz * size );\n      \tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\n\n      \tvec3 diffuseLight = vec3(0.0);\n      \tvec3 specularLight = vec3(0.0);\n\n      \tvec3 worldToEye = eye-worldPosition.xyz;\n      \tvec3 eyeDirection = normalize( worldToEye );\n      \tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n\n      \tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\n      \tfloat rf0 = 0.3;\n      \tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n      \tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\n      \tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ), ( 0.5 + specularLight ), reflectance);\n      \tvec3 outgoingLight = albedo;\n      \tgl_FragColor = vec4( outgoingLight, 1 );\n      }\n    `},h=new THREE.ShaderMaterial({fragmentShader:u.fragmentShader,vertexShader:u.vertexShader,uniforms:THREE.UniformsUtils.clone(u.uniforms),transparent:!1,lights:!0,side:c,fog:d});h.uniforms.time.value=i,h.uniforms.normalSampler.value=o,h.uniforms.sunColor.value=a,h.uniforms.waterColor.value=s,h.uniforms.sunDirection.value=n,h.uniforms.distortionScale.value=l,h.uniforms.eye.value=r,this.material=h}i(159),n.prototype=Object.create(THREE.Mesh.prototype),n.prototype.constructor=THREE.Water,AFRAME.registerComponent("water",{schema:{waterColor:{type:"color",default:"#001e0f"},distortionScale:{type:"number",default:3.7},sunColor:{type:"color",default:"#ffffff"},inclination:{type:"number",default:0},azimuth:{type:"number",default:0},distance:{type:"number",default:1},speed:{type:"number",default:.1},forceMobile:{type:"boolean",default:!1},normalMap:{type:"asset",default:"#water-normal-map"}},init(){const e=this.el.getObject3D("mesh"),t=e.geometry;e.visible=!1;const i=new THREE.Texture(this.data.normalMap);i.wrapS=i.wrapT=THREE.RepeatWrapping,i.needsUpdate=!0;const a={textureWidth:512,textureHeight:512,waterNormals:i,sunDirection:this.data.sunDirection,sunColor:new THREE.Color(this.data.sunColor),waterColor:new THREE.Color(this.data.waterColor),distortionScale:this.data.distortionScale,fog:!1};AFRAME.utils.device.isMobile()||this.data.forceMobile?this.water=new n(t,a):(this.water=new THREE.Water(t,a),this.water.mirrorCamera.layers.set(o.Layers.reflection)),this.el.setObject3D("water",this.water)},update(e){const t=this.water.material.uniforms;if(this.data.forceMobile!==e.forceMobile)return this.el.removeObject3D("water"),void this.init();if(this.data.waterColor!==e.waterColor&&t.waterColor.value.setStyle(this.data.waterColor),this.data.distortionScale!==e.distortionScale&&(t.distortionScale.value=this.data.distortionScale),this.data.sunColor!==e.sunColor&&t.sunColor.value.setStyle(this.data.sunColor),this.data.inclination!==e.inclination||this.data.azimuth!==e.azimuth||this.data.distance!==e.distance){const e=Math.PI*(this.data.inclination-.5),i=2*Math.PI*(this.data.azimuth-.5),o=this.data.distance,n=o*Math.cos(i),a=o*Math.sin(i)*Math.sin(e),s=o*Math.sin(i)*Math.cos(e);t.sunDirection.value.set(n,a,s)}},tick(e){this.water.material.uniforms.time.value=e/1e3*this.data.speed},remove(){this.el.removeObject3D("water");const e=this.el.getObject3D("mesh");e.visible=!0}})},126:function(e,t,i){"use strict";AFRAME.registerComponent("log-events",{init:function(){const e=this.el,t=this.log.bind(this),i=this.el.dispatchEvent;this.el.dispatchEvent=function(){return t(Array.from(arguments)),i.apply(e,arguments)}},log:function([e]){if(["componentchanged"].includes(e.type))return;let t=!0;console.info(`log-events: ${this.el.id} ${e.type} ${JSON.stringify(e.detail,(e,i)=>i&&"object"==typeof i&&void 0===i.length?t?(t=!1,i):"[object]":i)}`)}}),AFRAME.registerComponent("lifecycle-checker",{schema:{name:{type:"string"},tick:{default:!1}},init:function(){this.log("init")},update:function(){this.log("update")},tick:function(){this.data.tick&&this.log("tick")},remove:function(){this.log("remove")},pause:function(){this.log("pause")},play:function(){this.log("play")},log:function(e){console.info(`lifecycle-checker:${this.data.name} ${e}`)}})},13:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastWorldPosition=function(e,t){return t.setFromMatrixPosition(e.matrixWorld),t},t.getLastWorldQuaternion=function(e,t){return e.matrixWorld.decompose(o,t,o),t},t.getLastWorldScale=function(e,t){return e.matrixWorld.decompose(o,n,t),t};const o=new THREE.Vector3,n=new THREE.Quaternion},133:function(e,t,i){e.exports=i.p+"assets/images/hub-preview-white-ccefba3b70ae589a0ca5ae3230c39299.png"},137:function(e,t,i){"use strict";const{Pathfinding:o}=i(171);AFRAME.registerSystem("nav",{init:function(){this.pathfinder=new o},loadMesh:function(e,t){this.el.object3D.updateMatrixWorld();const i=(new THREE.Geometry).fromBufferGeometry(e.geometry);i.applyMatrix(e.matrixWorld),this.pathfinder.setZoneData(t,o.createZone(i))}})},142:function(e,t,i){"use strict";AFRAME.registerComponent("event-repeater",{schema:{eventSource:{type:"selector"},events:{type:"array"}},play:function(){this.data.eventListeners=[];const e=this.data.events;for(let t=0;t<e.length;t++){const i=e[t];this.data.eventListeners[i]=this._handleEvent.bind(this,i),this.data.eventSource.addEventListener(i,this.data.eventListeners[i])}},pause:function(){const e=this.data.events;for(let t=0;t<e.length;t++){const i=e[t];this.data.eventSource.removeEventListener(i,this.data.eventListeners[i])}this.data.eventListeners=[]},_handleEvent:function(e,t){this.el.emit(e,t.detail)}})},143:function(e,t,i){"use strict";var o=i(81);AFRAME.registerComponent("controls-shape-offset",{schema:{additionalOffset:{type:"vec3",default:{x:0,y:0,z:-.04}}},init:function(){this.controller=null,this.shapeAdded=!1,this.isLeft="left"===this.el.getAttribute("hand-controls2"),this._handleControllerConnected=this._handleControllerConnected.bind(this),this.el.addEventListener("controllerconnected",this._handleControllerConnected)},remove:function(){this.el.removeEventListener("controllerconnected",this._handleControllerConnected)},tick:function(){if(!this.shapeAdded&&this.controller){this.shapeAdded=!0;const e=this.isLeft?o.LEFT_CONTROLLER_OFFSETS:o.RIGHT_CONTROLLER_OFFSETS,t=e.hasOwnProperty(this.controller),i=t?e[this.controller]:e.default,n=new THREE.Vector3,a=new THREE.Quaternion,s=new THREE.Vector3;i.decompose(n,a,s),n.add(this.data.additionalOffset),a.conjugate();const r={shape:"box",halfExtents:{x:.03,y:.04,z:.05},orientation:a,offset:n};this.el.setAttribute("shape",r)}},_handleControllerConnected:function(e){this.controller=e.detail.name}})},15:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){a.default.config("https://013d6a364fed43cdb0539a61d520597a@sentry.prod.mozaws.net/370").install()};var o,n=i(40),a=(o=n,o&&o.__esModule?o:{default:o})},16:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.messages=t.lang=void 0;var o,n=i(17),a=(o=n,o&&o.__esModule?o:{default:o});const s=(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage).toLowerCase().split(/[_-]+/)[0],r=t.lang=a.default[s]&&s||"en";t.messages=a.default[r]||a.default.en},17:function(e){e.exports={en:{"auth.verifying":"Verifying...","auth.verified-title":"E-Mail Verified!","auth.verified":"Your email has been verified!\nYou can now close this browser tab and return to Hubs.","auth.spoke-verified":"You email has been verified!\nYou can now close this browser tab and return to Spoke.","sign-in.prompt":"Sign in to pin objects in rooms.","sign-in.auth-started":"Email sent!\nWaiting for you to click on the link in the email...","sign-in.pin":"You'll need to sign in to pin objects.","sign-in.pin-complete":"You are now signed in.","sign-in.as":"Signed in as","sign-in.in":"Sign In","sign-in.out":"Sign Out","entry.enter-room-title":"Lobby","entry.enter-room":"Enter Room","entry.screen-prefix":"Enter on ","entry.desktop-screen":"Screen","entry.mobile-screen":"Phone","entry.mobile-safari":"Safari","entry.generic-prefix":" ","entry.generic-medium":"Connected Headset","entry.generic-subtitle-desktop":"Oculus or SteamVR","entry.gearvr-prefix":"Enter on ","entry.gearvr-medium":"Gear VR","entry.choose-device":"Choose Device","entry.device-prefix-desktop":" ","entry.device-prefix-mobile":" ","entry.device-medium":"Mobile Headset","entry.device-subtitle-desktop":"Standalone or Mobile VR","entry.device-subtitle-mobile":"Standalone or Mobile VR","entry.device-subtitle-vr":"Phone or PC","entry.cardboard":"Enter on Google Cardboard","entry.daydream-prefix":"Enter on ","entry.daydream-medium":"Daydream","entry.daydream-via-chrome":"Using Google Chrome","entry.invite-others":"invite others","entry.invite-others-nag":"invite","entry.invite-team-nag":"Invite a hubs team member","entry.enable-screen-sharing":"Share my desktop","entry.return-to-vr":"Return to VR","entry.enter-in-vr":"Enter in VR","entry.lobby":"Lobby","entry.notify_me":"Notify me when others are here","profile.save":"Accept","profile.display_name.validation_warning":"Alphanumerics and hyphens. At least 3 characters, no more than 32","profile.header":"Name & Avatar","profile.avatar-selector.loading":"Loading Avatars...","profile.terms_of_use":"Terms of Use","profile.privacy_notice":"Privacy Notice","audio.title":"Audio Setup","audio.subtitle-desktop":"Confirm HMD speaker output","audio.subtitle-mobile":"Earphones are recommended","audio.enter-now":"Enter Now","audio.hmd-mic-warning":"Your HMD mic is not chosen","audio.grant-title":"Grant mic permissions","audio.grant-subtitle":"Mic access needed to be heard by others","audio.granted-title":"Mic permissions granted","audio.granted-subtitle":"You can still mute yourself in-game","audio.granted-next":"Next","exit.subtitle.exited":"Your session has ended. Refresh your browser to start a new one.","exit.subtitle.closed":"This room is no longer available.","exit.subtitle.left":"You have left the room.","exit.subtitle.full":"This room is full, please try again later.","exit.subtitle.connect_error":"Unable to connect to this room, please try again later.","exit.subtitle.version_mismatch":"The version you deployed is not available yet. Your browser will refresh in 5 seconds.","autoexit.title":"Auto-ending session in ","autoexit.title_units":" seconds","autoexit.subtitle":"You have started another session.","autoexit.cancel":"CANCEL","presence.entered_room":"entered the room.","presence.entered_lobby":"entered the lobby.","presence.join_lobby":"joined the lobby.","presence.leave":"left.","presence.name_change":"is now known as","presence.in_lobby":"Lobby","presence.in_room":"In Room","home.room_create_options":"options","home.room_create_button":"Create Room","home.create_name.validation_warning":"Invalid name, limited to 4 to 64 characters and limited symbols.","home.join_us":"Join the Conversation","home.join_room":"Join Room","home.create_with_spoke":"Create a Scene","home.report_issue":"Report Issues","home.source_link":"Source","home.whats_new_link":"What's New","home.spoke_link":"Spoke","home.about_link":"About","home.community_link":"Community","home.privacy_notice":"Privacy Notice","home.terms_of_use":"Terms of Use","home.get_updates":"Get Updates","home.hero_title":"A new way to get together","home.made_with_love":"made with  by ","home.environment_author_by":" by ","dialog.close":"close","mailing_list.privacy_label":"I'm okay with Mozilla handling my info as explained in","mailing_list.privacy_link":"this Privacy Notice","link.link_page_header_entry":"Enter your code:","link.link_page_header_headset":"Enter headset link code:","link.linking_a_headset":"Linking a Headset?","link.try_again":"We couldn't find that code.\nPlease try again.","help.report_issue":"Report an Issue","scene.logo_tagline":"A new way to get together","scene.create_button":"Create a room with this scene","scene.tweet_button":"Share on Twitter","link.in_your_browser":"In your headset's browser, go to:","link.enter_code":"Then, enter this one-time link code:","link.do_not_close":"Keep this open to use this code.","link.connect_headset":"Link VR Headset","link.cancel":"cancel","invite.enter_via":"Enter via ","invite.tweet":"tweet","invite.and_enter_code":" with code:","invite.or_visit":"or share permalink","spoke.primary_tagline":"make your space","spoke.secondary_tagline":"Create 3D social scenes for ","spoke.thank_you":"Thank you for downloading Spoke!","spoke.download_win":"Download for Windows","spoke.download_macos":"Download for Mac","spoke.download_linux":"Download for Linux","spoke.download_unsupported":"View Releases","spoke.browse_all_versions":"Browse All Versions","spoke.beginner_tutorial_button":"Learn Spoke in 5 Minutes","spoke.advanced_tutorial_button":"Advanced Spoke in 10 minutes","spoke.play_button":"Learn Spoke in 5 Minutes","commands.fly":"Toggle fly mode.","commands.grow":"Increase your avatar's size.","commands.shrink":"Decrease your avatar's size.","commands.help":"Show help.","commands.leave":"Disconnect from the room.","commands.duck":"The duck tested well. Quack.","video_share.notify":"Select again to un-share video."}}},19:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.objectTypeForOriginAndContentType=function(e,t){for(const i in s)if(t.startsWith(i)){const t=s[i];return a(e,...t)}return n.UNKNOWN};const o=t.ObjectContentOrigins={URL:1,FILE:2,CLIPBOARD:3,SPAWNER:4},n=t.ObjectTypes={URL_IMAGE:0,URL_VIDEO:1,URL_MODEL:2,URL_PDF:3,URL_AUDIO:4,FILE_IMAGE:8,FILE_VIDEO:9,FILE_MODEL:10,FILE_PDF:11,FILE_AUDIO:12,CLIPBOARD_IMAGE:16,CLIPBOARD_VIDEO:17,CLIPBOARD_MODEL:18,CLIPBOARD_PDF:19,CLIPBOARD_AUDIO:20,SPAWNER_IMAGE:24,SPAWNER_VIDEO:25,SPAWNER_MODEL:26,SPAWNER_PDF:27,SPAWNER_AUDIO:28,CAMERA:30,UNKNOWN:31};function a(e,t,i,n,a){return e===o.URL?t:e===o.FILE?i:e===o.CLIPBOARD?n:a}const s={"image/":[n.URL_IMAGE,n.FILE_IMAGE,n.CLIPBOARD_IMAGE,n.SPAWNER_IMAGE],"model/":[n.URL_MODEL,n.FILE_MODEL,n.CLIPBOARD_MODEL,n.SPAWNER_MODEL],"application/x-zip-compressed":[n.URL_MODEL,n.FILE_MODEL,n.CLIPBOARD_MODEL,n.SPAWNER_MODEL],"video/":[n.URL_VIDEO,n.FILE_VIDEO,n.CLIPBOARD_VIDEO,n.SPAWNER_VIDEO],"audio/":[n.URL_AUDIO,n.FILE_AUDIO,n.CLIPBOARD_AUDIO,n.SPAWNER_AUDIO],"application/pdf":[n.URL_PDF,n.FILE_PDF,n.CLIPBOARD_PDF,n.SPAWNER_PDF]}},21:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.avatars=[{id:"botdefault",model:"https://asset-bundles-prod.reticulum.io/bots/BotDefault_Avatar-9f71f8ff22.gltf"},{id:"botbobo",model:"https://asset-bundles-prod.reticulum.io/bots/BotBobo_Avatar-f9740a010b.gltf"},{id:"botdom",model:"https://asset-bundles-prod.reticulum.io/bots/BotDom_Avatar-0c48bf15a5.gltf"},{id:"botgreg",model:"https://asset-bundles-prod.reticulum.io/bots/BotGreg_Avatar-98d39797bb.gltf"},{id:"botguest",model:"https://asset-bundles-prod.reticulum.io/bots/BotGuest_Avatar-78cd857332.gltf"},{id:"botjim",model:"https://asset-bundles-prod.reticulum.io/bots/BotJim_Avatar-d28005a687.gltf"},{id:"botkev",model:"https://asset-bundles-prod.reticulum.io/bots/BotKev_Avatar-a95787bb51.gltf"},{id:"botpinky",model:"https://asset-bundles-prod.reticulum.io/bots/BotPinky_Avatar-b0b93f8675.gltf"},{id:"botrobert",model:"https://asset-bundles-prod.reticulum.io/bots/BotRobert_Avatar-e9554880f3.gltf"},{id:"botwoody",model:"https://asset-bundles-prod.reticulum.io/bots/BotWoody_Avatar-0140485a23.gltf"}]},27:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return new Promise(e=>{setTimeout(e,0)})}},28:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SCHEMA=void 0;var o,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},a=i(82),s=i(83),r=(o=s,o&&o.__esModule?o:{default:o}),l=i(72),c=i(37);const d="___hubs_store",u=Symbol(),h=new a.Validator,p=t.SCHEMA={id:"/HubsStore",definitions:{profile:{type:"object",additionalProperties:!1,properties:{displayName:{type:"string",pattern:"^[A-Za-z0-9-]{3,32}$"},avatarId:{type:"string"}}},credentials:{type:"object",additionalProperties:!1,properties:{token:{type:["null","string"]},email:{type:["null","string"]}}},activity:{type:"object",additionalProperties:!1,properties:{hasFoundFreeze:{type:"boolean"},hasChangedName:{type:"boolean"},lastEnteredAt:{type:"string"}}},settings:{type:"object",additionalProperties:!1,properties:{lastUsedMicDeviceId:{type:"string"}}},uploadPromotionTokens:{type:"array",items:{type:"object",additionalProperties:!1,properties:{fileId:{type:"string"},promotionToken:{type:"string"}}}}},type:"object",properties:{profile:{$ref:"#/definitions/profile"},credentials:{$ref:"#/definitions/credentials"},activity:{$ref:"#/definitions/activity"},settings:{$ref:"#/definitions/settings"},uploadPromotionTokens:{$ref:"#/definitions/uploadPromotionTokens"}},additionalProperties:!1};t.default=class extends l.EventTarget{constructor(){super(),this.init=(()=>{this.update({profile:n({},(0,c.generateDefaultProfile)(),this.state.profile||{})}),this.state.activity.hasChangedName||this.update({profile:{displayName:(0,c.generateRandomName)()}})}),null===localStorage.getItem(d)&&localStorage.setItem(d,JSON.stringify({})),this.update({activity:{},settings:{},credentials:{},profile:{},uploadPromotionTokens:[]})}get state(){return this.hasOwnProperty(u)||(this[u]=JSON.parse(localStorage.getItem(d))),this[u]}update(e){const t=(0,r.default)(this.state,e),{valid:i}=h.validate(t,p);if(!i)throw new Error("Write to store failed schema validation.");return localStorage.setItem(d,JSON.stringify(t)),delete this[u],this.dispatchEvent(new CustomEvent("statechanged")),t}}},3:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e};const n=t.paths={};n.noop="/noop",n.actions={},n.actions.log="/actions/log",n.actions.toggleScreenShare="/actions/toggleScreenShare",n.actions.snapRotateLeft="/actions/snapRotateLeft",n.actions.snapRotateRight="/actions/snapRotateRight",n.actions.logDebugFrame="/actions/logDebugFrame",n.actions.cameraDelta="/actions/cameraDelta",n.actions.characterAcceleration="/actions/characterAcceleration",n.actions.boost="/actions/boost",n.actions.startGazeTeleport="/actions/startTeleport",n.actions.stopGazeTeleport="/actions/stopTeleport",n.actions.spawnPen="/actions/spawnPen",n.actions.ensureFrozen="/actions/ensureFrozen",n.actions.thaw="/actions/thaw",n.actions.muteMic="/actions/muteMic",n.actions.focusChat="/actions/focusChat",n.actions.cursor={},n.actions.cursor.pose="/actions/cursorPose",n.actions.cursor.grab="/actions/cursorGrab",n.actions.cursor.drop="/actions/cursorDrop",n.actions.cursor.modDelta="/actions/cursorModDelta",n.actions.cursor.startDrawing="/actions/cursorStartDrawing",n.actions.cursor.stopDrawing="/actions/cursorStopDrawing",n.actions.cursor.undoDrawing="/actions/cursorUndoDrawing",n.actions.cursor.penNextColor="/actions/cursorPenNextColor",n.actions.cursor.penPrevColor="/actions/cursorPenPrevColor",n.actions.cursor.scalePenTip="/actions/cursorScalePenTip",n.actions.cursor.scaleGrabbedGrabbable="/actions/cursorScaleGrabbedGrabbable",n.actions.cursor.takeSnapshot="/actions/cursorTakeSnapshot",n.actions.rightHand={},n.actions.rightHand.pose="/actions/rightHandPose",n.actions.rightHand.grab="/actions/rightHandGrab",n.actions.rightHand.drop="/actions/rightHandDrop",n.actions.rightHand.modDelta="/actions/rightHandModDelta",n.actions.rightHand.startDrawing="/actions/rightHandStartDrawing",n.actions.rightHand.stopDrawing="/actions/rightHandStopDrawing",n.actions.rightHand.undoDrawing="/actions/rightHandUndoDrawing",n.actions.rightHand.penNextColor="/actions/rightHandPenNextColor",n.actions.rightHand.penPrevColor="/actions/rightHandPenPrevColor",n.actions.rightHand.scalePenTip="/actions/rightHandScalePenTip",n.actions.rightHand.startTeleport="/actions/rightHandStartTeleport",n.actions.rightHand.stopTeleport="/actions/rightHandStopTeleport",n.actions.rightHand.takeSnapshot="/actions/rightHandTakeSnapshot",n.actions.rightHand.thumb="/actions/rightHand/thumbDown",n.actions.rightHand.index="/actions/rightHand/indexDown",n.actions.rightHand.middleRingPinky="/actions/rightHand/middleRingPinkyDown",n.actions.leftHand={},n.actions.leftHand.pose="/actions/leftHandPose",n.actions.leftHand.grab="/actions/leftHandGrab",n.actions.leftHand.drop="/actions/leftHandDrop",n.actions.leftHand.modDelta="/actions/leftHandModDelta",n.actions.leftHand.startDrawing="/actions/leftHandStartDrawing",n.actions.leftHand.stopDrawing="/actions/leftHandStopDrawing",n.actions.leftHand.undoDrawing="/actions/leftHandUndoDrawing",n.actions.leftHand.penNextColor="/actions/leftHandPenNextColor",n.actions.leftHand.penPrevColor="/actions/leftHandPenPrevColor",n.actions.leftHand.scalePenTip="/actions/leftHandScalePenTip",n.actions.leftHand.startTeleport="/actions/leftHandStartTeleport",n.actions.leftHand.stopTeleport="/actions/leftHandStopTeleport",n.actions.leftHand.takeSnapshot="/actions/leftHandTakeSnapshot",n.actions.leftHand.thumb="/actions/leftHand/thumbDown",n.actions.leftHand.index="/actions/leftHand/indexDown",n.actions.leftHand.middleRingPinky="/actions/leftHand/middleRingPinkyDown",n.actions.camera={},n.actions.camera.exitMirror="/actions/cameraExitMirror",n.device={},n.device.mouse={},n.device.mouse.coords="/device/mouse/coords",n.device.mouse.movementXY="/device/mouse/movementXY",n.device.mouse.buttonLeft="/device/mouse/buttonLeft",n.device.mouse.buttonRight="/device/mouse/buttonRight",n.device.mouse.wheel="/device/mouse/wheel",n.device.smartMouse={},n.device.smartMouse.cursorPose="/device/smartMouse/cursorPose",n.device.smartMouse.cameraDelta="/device/smartMouse/cameraDelta",n.device.touchscreen={},n.device.touchscreen.cursorPose="/device/touchscreen/cursorPose",n.device.touchscreen.touchCameraDelta="/device/touchscreen/touchCameraDelta",n.device.touchscreen.gyroCameraDelta="/device/touchscreen/gyroCameraDelta",n.device.touchscreen.cameraDelta="/device/touchscreen/cameraDelta",n.device.touchscreen.pinch={},n.device.touchscreen.pinch.delta="/device/touchscreen/pinch/delta",n.device.touchscreen.pinch.initialDistance="/device/touchscreen/pinch/initialDistance",n.device.touchscreen.pinch.currentDistance="/device/touchscreen/pinch/currentDistance",n.device.touchscreen.isTouchingGrabbable="/device/touchscreen/isTouchingGrabbable",n.device.gyro={},n.device.gyro.averageDeltaX="/device/gyro/averageDeltaX",n.device.gyro.averageDeltaY="/device/gyro/averageDeltaY",n.device.hud={},n.device.hud.penButton="/device/hud/penButton",n.device.keyboard={key:e=>`/device/keyboard/${e.toLowerCase()}`},n.device.gamepad=(e=>({button:t=>({pressed:`/device/gamepad/${e}/button/${t}/pressed`,touched:`/device/gamepad/${e}/button/${t}/touched`,value:`/device/gamepad/${e}/button/${t}/value`}),axis:t=>`/device/gamepad/${e}/axis/${t}`}));const a="/device/xbox/";n.device.xbox={button:e=>({pressed:`${a}button/${e}/pressed`,touched:`${a}button/${e}/touched`,value:`${a}button/${e}/value`}),axis:e=>`${a}axis/${e}`};const s="/device/oculusgo/";n.device.oculusgo={button:e=>({pressed:`${s}button/${e}/pressed`,touched:`${s}button/${e}/touched`,value:`${s}button/${e}/value`}),axis:e=>`${s}axis/${e}`,trigger:{pressed:`${s}button/trigger/pressed`,touched:`${s}button/trigger/touched`,value:`${s}button/trigger/value`},touchpad:{pressed:`${s}button/touchpad/pressed`,touched:`${s}button/touchpad/touched`,value:`${s}button/touchpad/value`,axisX:`${s}axis/touchpadX`,axisY:`${s}axis/touchpadY`},pose:`${s}pose`,v:e=>`/vars/oculusgo/${e}`};const r="/device/gearVRController/";n.device.gearVRController={button:e=>({pressed:`${r}button/${e}/pressed`,touched:`${r}button/${e}/touched`,value:`${r}button/${e}/value`}),axis:e=>`${r}axis/${e}`,pose:`${r}pose`,v:e=>`/vars/gearVRController/${e}`};const l="/device/daydream/";n.device.daydream={button:e=>({pressed:`${l}button/${e}/pressed`,touched:`${l}button/${e}/touched`,value:`${l}button/${e}/value`}),axis:e=>`${l}axis/${e}`,pose:`${l}pose`};const c="/device/rightOculusTouch/";n.device.rightOculusTouch={button:e=>({pressed:`${c}button/${e}/pressed`,touched:`${c}button/${e}/touched`,value:`${c}button/${e}/value`}),axis:e=>`${c}axis/${e}`,pose:`${c}pose`};const d="/device/leftOculusTouch/";function u(e,t,i){return{pressed:`${e}${t}/button/${i}/pressed`,touched:`${e}${t}/button/${i}/touched`,value:`${e}${t}/button/${i}/value`}}function h(e,t,i){return{axisX:`${e}${t}/axis/${i}X`,axisY:`${e}${t}/axis/${i}Y`}}function p(e){const t="/device/wmr/";return{touchpad:o({},u(t,e,"touchpad"),h(t,e,"touchpad")),trigger:u(t,e,"trigger"),grip:u(t,e,"grip"),menu:u(t,e,"menu"),joystick:h(t,e,"joystick"),pose:`${t}${e}/pose`}}n.device.leftOculusTouch={button:e=>({pressed:`${d}button/${e}/pressed`,touched:`${d}button/${e}/touched`,value:`${d}button/${e}/value`}),axis:e=>`${d}axis/${e}`,pose:`${d}pose`},n.device.vive={},n.device.vive.left={button:e=>({pressed:`/device/vive/left/button/${e}/pressed`,touched:`/device/vive/left/button/${e}/touched`,value:`/device/vive/left/button/${e}/value`}),axis:e=>`/device/vive/left/axis/${e}`,pose:"/device/vive/left/pose"},n.device.vive.right={button:e=>({pressed:`/device/vive/right/button/${e}/pressed`,touched:`/device/vive/right/button/${e}/touched`,value:`/device/vive/right/button/${e}/value`}),axis:e=>`/device/vive/right/axis/${e}`,pose:"/device/vive/right/pose"},n.device.wmr={},n.device.wmr.v=(e=>`/vars/wmr/${e}`),n.device.wmr.k=(e=>`/vars/wmr/keyboard/${e}`),n.device.wmr.left=p("left"),n.device.wmr.right=p("right")},35:function(e,t,i){"use strict";var o=i(27),n=_(o),a=i(110),s=_(a),r=i(61),l=_(r),c=i(62),d=_(c),u=i(63),h=_(u),p=i(64),m=_(p),f=i(65),g=_(f),v=i(66),b=_(v),y=i(67),E=_(y),w=i(9);function _(e){return e&&e.__esModule?e:{default:e}}const R={};let x=null;function M(e,t,i){if(!AFRAME.components[t])throw new Error(`Inflator failed. "${t}" component does not exist.`);if(AFRAME.components[t].multiple&&Array.isArray(i))for(let o=0;o<i.length;o++)e.setAttribute(t+"__"+o,i[o]);else e.setAttribute(t,i)}function A(e){const t=new Map,i=e.clone();return function e(t,i,o){o(t,i);for(let n=0;n<t.children.length;n++)e(t.children[n],i.children[n],o)}(e,i,function(e,i){t.set(e,i)}),e.traverse(function(e){if(!e.isSkinnedMesh)return;const i=e.skeleton.bones,o=t.get(e);o.skeleton=e.skeleton.clone(),o.skeleton.bones=i.map(function(e){if(!t.has(e))throw new Error("Required bones are not descendants of the given object.");return t.get(e)}),o.bind(o.skeleton,e.bindMatrix)}),i}AFRAME.GLTFModelPlus={components:{},registerComponent(e,t,i){i=i||M,AFRAME.GLTFModelPlus.components[e]={inflator:i,componentName:t}}};const S=function(e,t,i,o){"Chest"===e.name?e.name="Spine":"Root Scene"===e.name?e.name="AvatarRoot":"Bot_Skinned"===e.name&&(e.name="AvatarMesh");const n=[],a=e.children.slice(0);for(const e of a){const i=S(e,t);i&&n.push(i)}const s=e.userData.gltfExtensions&&e.userData.gltfExtensions.HUBS_components,r=e.userData.components,l=s||r,c=!!l||e.name in t;if(!c&&!n.length&&!i)return null;const d=document.createElement("a-entity");d.append.apply(d,n);const u=(e.name||e.uuid).replace(/[^\w-]/g,"");if(d.classList.add(u),"YXZ"!==e.rotation.order&&e.rotation.setFromQuaternion(e.quaternion,"YXZ"),d.setAttribute("position",{x:e.position.x,y:e.position.y,z:e.position.z}),d.setAttribute("rotation",{x:e.rotation.x*THREE.Math.RAD2DEG,y:e.rotation.y*THREE.Math.RAD2DEG,z:e.rotation.z*THREE.Math.RAD2DEG}),d.setAttribute("scale",{x:e.scale.x*(void 0!==o?o:1),y:e.scale.y*(void 0!==o?o:1),z:e.scale.z*(void 0!==o?o:1)}),e.matrixAutoUpdate=!1,e.matrix.identity(),e.matrix.decompose(e.position,e.rotation,e.scale),d.object3D.matrixNeedsUpdate=!0,d.setObject3D(e.type.toLowerCase(),e),l&&"nav-mesh"in l&&d.setObject3D("mesh",e),d.object3D.name=e.name,e.animations&&(e.parent.animations=e.animations),l)for(const e in l)if(l.hasOwnProperty(e)&&AFRAME.GLTFModelPlus.components.hasOwnProperty(e)){const{componentName:t,inflator:i}=AFRAME.GLTFModelPlus.components[e];i(d,t,l[e],l)}return d};function T(e,t,i){const o=e.querySelectorAll("."+t);for(const e of o){const t=i.cloneNode(!0);for(const i of t.attributes){const{name:t,value:o}=i;e.setAttribute(t,o)}for(;t.children.length>0;)e.appendChild(t.children[0])}}async function C(e,t,i,o){let n,a=e;(t.includes("model/gltf+zip")||t.includes("application/x-zip-compressed"))&&(n=await function(e){return new Promise((t,i)=>{const o=new s.default;o.onmessage=(e=>{const[o,n]=e.data;(o?t:i)(n)}),o.postMessage(e)})}(a),a=n["scene.gtlf"]);const r=new THREE.GLTFLoader;r.customURLResolver=(0,w.getCustomGLTFParserURLResolver)(a),r.setLazy(!0);const{parser:c}=await new Promise((e,t)=>r.load(a,e,o,t)),u=c.json.materials;if(u)for(let e=0;e<u.length;e++){const t=u[e];if(t.extensions&&t.extensions.MOZ_alt_materials&&void 0!==t.extensions.MOZ_alt_materials[i]){const o=t.extensions.MOZ_alt_materials[i];u[e]=u[o]}}x||(x=async function(){const e=[d.default,h.default,m.default,g.default,b.default,E.default],t=await(new THREE.CubeTextureLoader).load(e);return t.format=THREE.RGBFormat,t}());const p=await new Promise((e,t)=>c.parse((t,i,o,n,a)=>{e({scene:t,scenes:i,cameras:o,animations:n,json:a})},e=>{t(e)})),f=await x;return p.scene.traverse(e=>{e.matrixAutoUpdate=THREE.Object3D.DefaultMatrixAutoUpdate,e.material&&"MeshStandardMaterial"===e.material.type&&("KHR_materials_unlit"===i?e.material=l.default.fromStandardMaterial(e.material):(e.material.envMap=f,e.material.needsUpdate=!0))}),n&&Object.keys(n).forEach(URL.revokeObjectURL),p}AFRAME.registerComponent("gltf-model-plus",{schema:{src:{type:"string"},contentType:{type:"string"},useCache:{default:!0},inflate:{default:!1},modelToWorldScale:{type:"number",default:1}},init(){this.preferredTechnique=window.APP&&"low"===window.APP.quality?"KHR_materials_unlit":"pbrMetallicRoughness",this.loadTemplates()},update(){this.applySrc(this.data.src,this.data.contentType)},loadTemplates(){this.templates={},this.el.querySelectorAll(":scope > template").forEach(e=>{const t=document.importNode(e.firstElementChild||e.content.firstElementChild,!0);this.templates[e.getAttribute("data-name")]=t})},async loadModel(e,t,i,o){return o?(R[e]||(R[e]=await C(e,t,i)),n=R[e],{animations:n.animations,scene:A(n.scene)}):await C(e,t,i);var n},async applySrc(e,t){try{if(e&&"#"===e.charAt(0)){const t=document.getElementById(e.substring(1));e=t.getAttribute("src")}if(e===this.lastSrc)return;if(this.lastSrc=e,!e)return void(this.inflatedEl&&(console.warn("gltf-model-plus set to an empty source, unloading inflated model."),this.removeInflatedEl()));const i=await this.loadModel(e,t,this.preferredTechnique,this.data.useCache);if(e!=this.lastSrc)return;this.removeInflatedEl(),this.model=i.scene||i.scenes[0],this.model.animations=i.animations,i.animations.length>0&&(this.el.setAttribute("animation-mixer",{}),this.el.components["animation-mixer"].initMixer(i.animations));let o=this.model;if(this.data.inflate&&(this.inflatedEl=S(this.model,this.templates,!0,this.data.modelToWorldScale))){if(this.el.appendChild(this.inflatedEl),o=this.inflatedEl.object3D,await(0,n.default)(),e!=this.lastSrc)return;for(const e in this.templates)T(this.el,e,this.templates[e])}const a=[];o.traverse(e=>{const t=e.el;t&&a.push(()=>e.el=t)}),this.el.setObject3D("mesh",o),a.forEach(e=>e()),this.el.emit("model-loaded",{format:"gltf",model:this.model})}catch(t){delete R[e],console.error("Failed to load glTF model",t,this),this.el.emit("model-error",{format:"gltf",src:e})}},removeInflatedEl(){this.inflatedEl&&(this.inflatedEl.parentNode.removeChild(this.inflatedEl),delete this.inflatedEl)}})},36:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findAncestorWithComponent=function(e,t){for(;e&&(!e.components||!e.components[t]);)e=e.parentNode;return e}},37:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.avatarIds=void 0,t.generateRandomName=function(){return`${a(n)}-${Math.floor(1e4+1e4*Math.random())}`},t.generateDefaultProfile=function(){return{avatarId:a(s)}};var o=i(21);const n=["Baers-Pochard","Baikal-Teal","Barrows-Goldeneye","Blue-Billed","Blue-Duck","Blue-Winged","Brown-Teal","Bufflehead","Canvasback","Cape-Shoveler","Chestnut-Teal","Chiloe-Wigeon","Cinnamon-Teal","Comb-Duck","Common-Eider","Common-Goldeneye","Common-Merganser","Common-Pochard","Common-Scoter","Common-Shelduck","Cotton-Pygmy","Crested-Duck","Crested-Shelduck","Eatons-Pintail","Falcated","Ferruginous","Freckled-Duck","Gadwall","Garganey","Greater-Scaup","Green-Pygmy","Grey-Teal","Hardhead","Harlequin","Hartlaubs","Hooded-Merganser","Hottentot-Teal","Kelp-Goose","King-Eider","Lake-Duck","Laysan-Duck","Lesser-Scaup","Long-Tailed","Maccoa-Duck","Mallard","Mandarin","Marbled-Teal","Mellers-Duck","Merganser","Northern-Pintail","Orinoco-Goose","Paradise-Shelduck","Plumed-Whistler","Puna-Teal","Pygmy-Goose","Radjah-Shelduck","Red-Billed","Red-Crested","Red-Shoveler","Ring-Necked","Ringed-Teal","Rosy-Billed","Ruddy-Shelduck","Salvadoris-Teal","Scaly-Sided","Shelduck","Shoveler","Silver-Teal","Smew","Spectacled-Eider","Spot-Billed","Spotted-Whistler","Steamerduck","Stellers-Eider","Sunda-Teal","Surf-Scoter","Tufted-Duck","Velvet-Scoter","Wandering-Whistler","Whistling-duck","White-Backed","White-Cheeked","White-Winged","Wigeon","Wood-Duck","Yellow-Billed"];function a(e){return e[Math.floor(Math.random()*e.length)]}const s=t.avatarIds=o.avatars.map(e=>e.id)},38:function(e,t){},41:function(e,t){},42:function(e,t){},46:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=o.get(e);return""===t||/1|on|true/i.test(t)};const o=new URLSearchParams(location.search)},5:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WithHoverSound=t.hudHoverSound=t.ReactAudioContext=void 0;var o=i(1),n=r(o),a=i(0),s=r(a);function r(e){return e&&e.__esModule?e:{default:e}}const l=t.ReactAudioContext=n.default.createContext({}),c=t.hudHoverSound="play_sound-hud_hover_start",d=t.WithHoverSound=(({sound:e,children:t})=>n.default.createElement(l.Consumer,null,i=>n.default.cloneElement(t,{onMouseEnter:o=>{i&&i.playSound&&i.playSound(e||c),t.props.onMouseEnter&&t.props.onMouseEnter(o)}})));d.propTypes={children:s.default.object,sound:s.default.string}},537:function(e,t,i){"use strict";var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e};i(680),i(96),i(97),i(103);var n=i(57);i(58),i(104),i(126),i(137);var a=i(12),s=i(26),r=g(s),l=i(1),c=g(l),d=i(538),u=g(d),h=i(73);i(74);var p=i(75);i(172),i(188),i(142),i(143);var m=i(15),f=g(m);function g(e){return e&&e.__esModule?e:{default:e}}console.log(`Hubs version: ${{NODE_ENV:"production",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:""}.BUILD_VERSION||"?"}`),(0,n.patchWebGLRenderingContext)(),window.APP=new p.App;const v=new URLSearchParams(location.search),b=AFRAME.utils.device.isMobile();function y(e,t={}){r.default.render(c.default.createElement(u.default,o({scene:e},t)),document.getElementById("ui-root"))}window.APP.quality=v.get("quality")||b?"low":"high",(0,f.default)(),(0,h.disableiOSZoom)();document.addEventListener("DOMContentLoaded",async()=>{const e=document.querySelector("a-scene");window.APP.scene=e;const t=v.get("scene_id")||document.location.pathname.substring(1).split("/")[1];console.log(`Scene ID: ${t}`),e.setAttribute("shadow",{enabled:"low"!==window.APP.quality});let i={sceneId:t};y(e);const n=t=>{i=o({},i,t),y(e,i)},s=document.querySelector("#scene-root"),r=document.createElement("a-entity"),l=document.createElement("a-entity"),c=document.getElementById("camera");r.addEventListener("scene-loaded",()=>{n({sceneLoaded:!0});const e=l.object3D.getObjectByName("scene-preview-camera");e&&(c.object3D.position.copy(e.position),c.object3D.rotation.copy(e.rotation),c.object3D.matrixNeedsUpdate=!0),c.setAttribute("scene-preview-camera","")});const d=await fetch((0,a.getReticulumFetchUrl)(`/api/v1/scenes/${t}`)).then(e=>e.json()),u=d.scenes[0],h=u.model_url;console.log(`Scene Model URL: ${h}`),l.setAttribute("gltf-model-plus",{src:h,useCache:!1,inflate:!0}),l.addEventListener("model-loaded",()=>r.emit("scene-loaded")),r.appendChild(l),s.appendChild(r),n({sceneName:u.name,sceneDescription:u.description,sceneAttributions:u.attributions,sceneScreenshotURL:u.screenshot_url})})},538:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(539),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(o),a=i(1),s=T(a),r=i(0),l=T(r),c=i(11),d=T(c),u=i(6),h=i(43),p=T(h),m=i(682),f=T(m),g=i(133),v=T(g),b=i(540),y=T(b),E=i(12),w=i(94),_=i(5),R=i(95),x=T(R),M=i(56),A=i(541),S=i(16);function T(e){return e&&e.__esModule?e:{default:e}}(0,u.addLocaleData)([...p.default]);class C extends a.Component{constructor(e){super(e),this.state={showScreenshot:!1,showCustomRoomDialog:!1},this.createRoom=(async()=>{const e={hub:{name:this.state.customRoomName||(0,w.generateHubName)(),scene_id:this.props.sceneId}},t=(0,E.getReticulumFetchUrl)("/api/v1/hubs"),i=await fetch(t,{body:JSON.stringify(e),headers:{"content-type":"application/json"},method:"POST"}),o=await i.json();"dev.reticulum.io"===document.location.host?document.location=o.url:document.location=`/hub.html?hub_id=${o.hub_id}`}),setTimeout(()=>{this.props.sceneLoaded||this.setState({showScreenshot:!0})},5e3)}componentDidMount(){this.props.scene.addEventListener("loaded",this.onSceneLoaded)}componentWillUnmount(){this.props.scene.removeEventListener("loaded",this.onSceneLoaded)}render(){const e=[location.protocol,"//",location.host,location.pathname].join(""),t=`${this.props.sceneName} in #hubs`,i=`https://twitter.com/share?url=${encodeURIComponent(e)}&text=${encodeURIComponent(t)}`;let o;const a=e=>{if(e.url){const t=e.url.indexOf("sketchfab.com")>=0?"on Sketchfab":e.url.indexOf("poly.google.com")>=0?"on Google Poly":"";return s.default.createElement("span",{key:e.url},s.default.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.name," by ",e.author," ",t),"")}return s.default.createElement("span",{key:`${e.name} ${e.author}`},e.name," by ",e.author,"")};return this.props.sceneAttributions&&(o=this.props.sceneAttributions.extras?s.default.createElement("span",null,this.props.sceneAttributions.extras):s.default.createElement("span",null,s.default.createElement("span",null,this.props.sceneAttributions.creator?`by ${this.props.sceneAttributions.creator}`:""),"",s.default.createElement("br",null),this.props.sceneAttributions.content&&this.props.sceneAttributions.content.map(a))),s.default.createElement(u.IntlProvider,{locale:S.lang,messages:S.messages},s.default.createElement("div",{className:f.default.ui},s.default.createElement("div",{className:(0,d.default)({[f.default.screenshot]:!0,[f.default.screenshotHidden]:this.props.sceneLoaded})},this.state.showScreenshot&&s.default.createElement("img",{src:this.props.sceneScreenshotURL})),s.default.createElement("div",{className:f.default.whiteOverlay}),s.default.createElement("div",{className:f.default.grid},s.default.createElement("div",{className:f.default.mainPanel},s.default.createElement(_.WithHoverSound,null,s.default.createElement("a",{href:"/",className:f.default.logo},s.default.createElement("img",{src:v.default}))),s.default.createElement("div",{className:f.default.logoTagline},s.default.createElement(u.FormattedMessage,{id:"scene.logo_tagline"})),s.default.createElement("div",{className:f.default.createButtons},s.default.createElement(_.WithHoverSound,null,s.default.createElement("button",{className:f.default.createButton,onClick:this.createRoom},s.default.createElement(u.FormattedMessage,{id:"scene.create_button"}))),s.default.createElement(_.WithHoverSound,null,s.default.createElement("button",{className:f.default.optionsButton,onClick:()=>this.setState({showCustomRoomDialog:!0})},s.default.createElement(M.FontAwesomeIcon,{icon:A.faEllipsisH})))),s.default.createElement(_.WithHoverSound,null,s.default.createElement("a",{href:i,rel:"noopener noreferrer",target:"_blank",className:f.default.tweetButton},s.default.createElement("img",{src:n.default}),s.default.createElement("div",null,s.default.createElement(u.FormattedMessage,{id:"scene.tweet_button"})))))),s.default.createElement("div",{className:f.default.info},s.default.createElement("div",{className:f.default.name},this.props.sceneName),s.default.createElement("div",{className:f.default.attribution},o)),s.default.createElement("div",{className:f.default.spoke},s.default.createElement("div",{className:f.default.madeWith},"made with"),s.default.createElement("a",{href:"/spoke"},s.default.createElement("img",{src:y.default}))),this.state.showCustomRoomDialog&&s.default.createElement(x.default,{includeScenePrompt:!1,onClose:()=>this.setState({showCustomRoomDialog:!1}),onCustomScene:e=>{this.setState({showCustomRoomDialog:!1,customRoomName:e},()=>this.createRoom())}})))}}C.propTypes={scene:l.default.object,sceneLoaded:l.default.bool,sceneId:l.default.string,sceneName:l.default.string,sceneDescription:l.default.string,sceneAttributions:l.default.object,sceneScreenshotURL:l.default.string},t.default=C},539:function(e,t,i){e.exports=i.p+"assets/images/twitter-b2e343d39bc8d3294292e506c7173f71.svg"},540:function(e,t,i){e.exports=i.p+"assets/images/spoke_logo_black-9011a0dad952669b6c27dcdd3f3568dd.png"},57:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patchWebGLRenderingContext=function(){if(/Android.+Firefox/.test(navigator.userAgent)){const e=WebGLRenderingContext.prototype.getExtension,t=function(){const e=new o.WebGLRenderer,t=new o.Scene,i=new Float32Array(16),n=new o.DataTexture(i,2,2,o.RGBAFormat,o.FloatType),a=new o.Mesh(new o.PlaneBufferGeometry(1,1),new o.MeshBasicMaterial({map:n}));a.material.map.needsUpdate=!0,t.add(a),e.render(t,new o.Camera);const s=0===e.context.getError();return e.dispose(),s}();WebGLRenderingContext.prototype.getExtension=function(i){return"OES_texture_float"!==i||t?e.call(this,i):null}}};const o=AFRAME.THREE},59:function(e,t,i){"use strict";AFRAME.registerComponent("animation-mixer",{initMixer(e){this.mixer=new THREE.AnimationMixer(this.el.object3D),this.el.object3D.animations=e,this.animations=e},tick:function(e,t){this.mixer&&this.mixer.update(t/1e3)}})},60:function(e,t,i){"use strict";AFRAME.registerComponent("networked-audio-analyser",{async init(){this.volume=0,this.prevVolume=0,this.smoothing=.3,this.threshold=.01,this.el.addEventListener("sound-source-set",e=>{const t=THREE.AudioContext.getContext();this.analyser=t.createAnalyser(),this.analyser.fftSize=32,this.levels=new Uint8Array(this.analyser.frequencyBinCount),e.detail.soundSource.connect(this.analyser)})},tick:function(){if(!this.analyser)return;this.analyser.getByteTimeDomainData(this.levels);let e=0;for(let t=0;t<this.levels.length;t++){const i=(this.levels[t]-128)/128;e+=i*i}let t=Math.sqrt(e/this.levels.length);t<this.threshold&&(t=0),this.volume=this.smoothing*t+(1-this.smoothing)*this.prevVolume,this.prevVolume=this.volume}}),AFRAME.registerComponent("scale-audio-feedback",{schema:{minScale:{default:1},maxScale:{default:1.5}},tick(){if(!this.el.object3D.visible)return;const{minScale:e,maxScale:t}=this.data,i=this.el.components["networked-audio-analyser"];if(!i)return;const o=Math.min(t,e+(t-e)*i.volume*8);this.el.object3D.scale.setScalar(o),this.el.object3D.matrixNeedsUpdate=!0}})},61:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o="\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n  #include <uv_vertex>\n  #include <uv2_vertex>\n  #include <color_vertex>\n  #include <skinbase_vertex>\n\n  #include <begin_vertex>\n  #include <morphtarget_vertex>\n  #include <skinning_vertex>\n  #include <project_vertex>\n  #include <logdepthbuf_vertex>\n\n  #include <worldpos_vertex>\n  #include <clipping_planes_vertex>\n  #include <fog_vertex>\n}\n",n="\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <aomap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n  #include <clipping_planes_fragment>\n\n  vec4 diffuseColor = vec4(diffuse, opacity);\n  ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n  vec3 totalEmissiveRadiance = emissive;\n\n  #include <logdepthbuf_fragment>\n  #include <map_fragment>\n  #include <color_fragment>\n  #include <alphatest_fragment>\n  #include <emissivemap_fragment>\n\n  reflectedLight.indirectDiffuse += vec3(1.0);\n\n  #include <aomap_fragment>\n\n  reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n  vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n  gl_FragColor = vec4(outgoingLight, diffuseColor.a);\n\n  #include <premultiplied_alpha_fragment>\n  #include <tonemapping_fragment>\n  #include <encodings_fragment>\n  #include <fog_fragment>\n}\n";class a extends THREE.ShaderMaterial{constructor(...e){var t;return t=super(...e),this.type="MobileStandardMaterial",this.isMobileStandardMaterial=!0,t}static fromStandardMaterial(e){const t={vertexShader:o,fragmentShader:n,uniforms:{uvTransform:{value:new THREE.Matrix3},diffuse:{value:e.color},opacity:{value:e.opacity},map:{value:e.map},aoMapIntensity:{value:e.aoMapIntensity},aoMap:{value:e.aoMap},emissive:{value:e.emissive},emissiveMap:{value:e.emissiveMap}},fog:!0,lights:!1,opacity:e.opacity,transparent:e.transparent,skinning:e.skinning,morphTargets:e.morphTargets},i=new a(t);return i.color=e.color,i.map=e.map,i.aoMap=e.aoMap,i.aoMapIntensity=e.aoMapIntensity,i.emissive=e.emissive,i.emissiveMap=e.emissiveMap,i}clone(){return a.fromStandardMaterial(this)}}t.default=a},62:function(e,t,i){e.exports=i.p+"assets/images/cubemap/posx-d235fb97df77b607be04b84125f40e7c.jpg"},63:function(e,t,i){e.exports=i.p+"assets/images/cubemap/negx-35034574e114423babdea92b6a2eb97a.jpg"},64:function(e,t,i){e.exports=i.p+"assets/images/cubemap/posy-d0c4e1e7979d75923d4d8b49c191bc6e.jpg"},65:function(e,t,i){e.exports=i.p+"assets/images/cubemap/negy-35808d21d1d17ac1b84d3184e365093b.jpg"},66:function(e,t,i){e.exports=i.p+"assets/images/cubemap/posz-de29aa8396196e4b040cd5305e351dbe.jpg"},67:function(e,t,i){e.exports=i.p+"assets/images/cubemap/negz-d73d18a8b7994524dc39a6ea3fcf43fc.jpg"},68:function(e,t){e.exports="if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo) {\n  float ratio = 0.0;\n\n  if (hubs_EnableSweepingEffect) {\n    float size = hubs_SweepParams.t - hubs_SweepParams.s;\n    float line = mod(hubs_Time / 3000.0 * size, size * 2.0) + hubs_SweepParams.s - size / 2.0;\n\n    if (hubs_WorldPosition.y < line) {\n      // Highlight with a sweeping gradient.\n      ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / size * 3.0);\n    }\n  }\n\n  // Highlight with a gradient falling off with distance.\n  float pulse = 9.0 + 3.0 * (sin(hubs_Time / 1000.0) + 1.0);\n\n  if (hubs_HighlightInteractorOne) {\n    float dist1 = distance(hubs_WorldPosition, hubs_InteractorOnePos);\n    ratio += -min(1.0, pow(dist1 * pulse, 3.0)) + 1.0;\n  } \n\n  if (hubs_HighlightInteractorTwo) {\n    float dist2 = distance(hubs_WorldPosition, hubs_InteractorTwoPos);\n    ratio += -min(1.0, pow(dist2 * pulse, 3.0)) + 1.0;\n  }\n\n  ratio = min(1.0, ratio);\n\n  // Gamma corrected highlight color\n  vec3 highlightColor = vec3(0.184, 0.499, 0.933);\n\n  gl_FragColor.rgb = (gl_FragColor.rgb * (1.0 - ratio)) + (highlightColor * ratio);\n}\n"},680:function(e,t){},682:function(e,t){e.exports={tweetButton:"scene-ui__tweetButton__NAR59",createButton:"scene-ui__createButton__1DQtQ",optionsButton:"scene-ui__optionsButton__lzUHO",ui:"scene-ui__ui__3JHPz",logoTagline:"scene-ui__logoTagline___LR3I",whiteOverlay:"scene-ui__whiteOverlay__1Pz3I",grid:"scene-ui__grid__34j9h",mainPanel:"scene-ui__mainPanel__IuYxi",logo:"scene-ui__logo__26JnS",info:"scene-ui__info__3Nznh",name:"scene-ui__name__2-7V_",attribution:"scene-ui__attribution__3nlIi",screenshot:"scene-ui__screenshot__279rF",screenshotHidden:"scene-ui__screenshotHidden__3nHWx",spoke:"scene-ui__spoke___KrWT",madeWith:"scene-ui__madeWith__A5stW",createButtons:"scene-ui__createButtons__1COLQ"}},69:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=t.Layers={reflection:3};AFRAME.registerComponent("layers",{schema:{reflection:{type:"boolean",default:!1},inWorldHud:{type:"boolean",default:!1},exclusive:{type:"boolean",default:!1}},init(){this.update=this.update.bind(this),this.el.addEventListener("model-loaded",this.update)},update(e){const t=this.el.object3D;this.data.exclusive&&t.traverse(e=>e.layers.mask=0);for(const[i,n]of Object.entries(o)){const o=e[i],a=this.data[i];o!==a&&(a?t.traverse(e=>e.layers.enable(n)):t.traverse(e=>e.layers.disable(n)))}},remove(){this.el.removeEventListener("model-loaded",this.update)}})},70:function(e,t,i){"use strict";var o=i(36);AFRAME.registerComponent("loop-animation",{schema:{clip:{type:"string"}},init(){this.mixerEl=(0,o.findAncestorWithComponent)(this.el,"animation-mixer"),this.mixerEl?this.updateClip():console.warn("loop-animation component could not find an animation-mixer in its ancestors.")},update(e){e.clip!==this.data.clip&&this.mixerEl&&this.updateClip()},updateClip(){const{mixer:e,animations:t}=this.mixerEl.components["animation-mixer"],i=this.data.clip;if(0===t.length)return;let o;if(o=i?t.find(({name:e})=>e===i):t[0],!o)return;const n=e.clipAction(o,this.el.object3D);n.enabled=!0,n.setLoop(THREE.LoopRepeat,1/0).play(),this.currentAction=n},destroy(){this.currentAction&&(this.currentAction.enabled=!1,this.currentAction.stop())}})},73:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disableiOSZoom=function(){if("iOS"!==(0,o.detectOS)(navigator.userAgent))return;let e=0;document.addEventListener("touchmove",e=>{1!==e.scale&&e.preventDefault()}),document.addEventListener("touchend",t=>{const i=(new Date).getTime(),o=i-e<=300;e=i,o&&t.preventDefault()})};var o=i(34)},74:function(e,t,i){"use strict";function o(e,t,i,o){o.networked&&e.setAttribute("networked",{template:i.controls?"#static-controlled-media":"#static-media",owner:"scene",persistent:!0,networkId:o.networked.id});const n={projection:i.projection};"video"===t&&(n.videoPaused=!i.autoPlay,n.volume=i.volume,n.loop=i.loop,n.audioType=i.audioType,"pannernode"===i.audioType&&(n.distanceModel=i.distanceModel,n.rolloffFactor=i.rolloffFactor,n.refDistance=i.refDistance,n.maxDistance=i.maxDistance,n.coneInnerAngle=i.coneInnerAngle,n.coneOuterAngle=i.coneOuterAngle,n.coneOuterGain=i.coneOuterGain)),e.setAttribute("media-loader",{src:i.src,resize:!0,resolve:!0,fileIsOwned:!0,mediaOptions:n})}i(35),AFRAME.GLTFModelPlus.registerComponent("duck","duck"),AFRAME.GLTFModelPlus.registerComponent("quack","quack"),AFRAME.GLTFModelPlus.registerComponent("sound","sound"),AFRAME.GLTFModelPlus.registerComponent("collision-filter","collision-filter"),AFRAME.GLTFModelPlus.registerComponent("css-class","css-class"),AFRAME.GLTFModelPlus.registerComponent("interactable","css-class",(e,t)=>{e.setAttribute(t,"interactable")}),AFRAME.GLTFModelPlus.registerComponent("super-spawner","super-spawner"),AFRAME.GLTFModelPlus.registerComponent("gltf-model-plus","gltf-model-plus"),AFRAME.GLTFModelPlus.registerComponent("media-loader","media-loader"),AFRAME.GLTFModelPlus.registerComponent("body","body"),AFRAME.GLTFModelPlus.registerComponent("hide-when-quality","hide-when-quality"),AFRAME.GLTFModelPlus.registerComponent("light","light"),AFRAME.GLTFModelPlus.registerComponent("ambient-light","ambient-light"),AFRAME.GLTFModelPlus.registerComponent("directional-light","directional-light"),AFRAME.GLTFModelPlus.registerComponent("hemisphere-light","hemisphere-light"),AFRAME.GLTFModelPlus.registerComponent("point-light","point-light"),AFRAME.GLTFModelPlus.registerComponent("spot-light","spot-light"),AFRAME.GLTFModelPlus.registerComponent("skybox","skybox"),AFRAME.GLTFModelPlus.registerComponent("layers","layers"),AFRAME.GLTFModelPlus.registerComponent("shadow","shadow"),AFRAME.GLTFModelPlus.registerComponent("water","water"),AFRAME.GLTFModelPlus.registerComponent("scale-audio-feedback","scale-audio-feedback"),AFRAME.GLTFModelPlus.registerComponent("animation-mixer","animation-mixer"),AFRAME.GLTFModelPlus.registerComponent("loop-animation","loop-animation"),AFRAME.GLTFModelPlus.registerComponent("shape","shape"),AFRAME.GLTFModelPlus.registerComponent("heightfield","heightfield"),AFRAME.GLTFModelPlus.registerComponent("box-collider","shape",(()=>{const e=new THREE.Euler;return(t,i,o)=>{const{scale:n,rotation:a}=o;e.set(a.x,a.y,a.z);const s=(new THREE.Quaternion).setFromEuler(e);t.setAttribute(i,{shape:"box",offset:o.position,halfExtents:{x:n.x/2,y:n.y/2,z:n.z/2},orientation:s})}})()),AFRAME.GLTFModelPlus.registerComponent("visible","visible",(e,t,i)=>{"object"==typeof i?e.setAttribute(t,i.visible):e.setAttribute(t,i)}),AFRAME.GLTFModelPlus.registerComponent("spawn-point","spawn-point"),AFRAME.GLTFModelPlus.registerComponent("hoverable","hoverable"),AFRAME.GLTFModelPlus.registerComponent("sticky-zone","sticky-zone"),AFRAME.GLTFModelPlus.registerComponent("nav-mesh","nav-mesh",(e,t,i)=>{const o=AFRAME.scenes[0].systems.nav,n=i.zone||"character";let a=!1;e.object3D.traverse(e=>{e.isMesh&&!a&&(a=!0,o.loadMesh(e,n))}),e.setAttribute("nav-mesh")}),AFRAME.GLTFModelPlus.registerComponent("pinnable","pinnable"),AFRAME.GLTFModelPlus.registerComponent("media","media",(e,t,i)=>{i.id&&e.setAttribute("networked",{template:"#interactable-media",owner:"scene",persistent:!0,networkId:i.id}),e.setAttribute("media-loader",{src:i.src,resize:!0,resolve:!0,fileIsOwned:!0}),i.pageIndex&&e.setAttribute("media-pager",{index:i.pageIndex}),void 0!==i.paused&&e.setAttribute("media-video",{videoPaused:i.paused}),i.time&&e.setAttribute("media-video",{time:i.time})}),AFRAME.GLTFModelPlus.registerComponent("image","image",o),AFRAME.GLTFModelPlus.registerComponent("video","video",o)},75:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var o,n=i(28),a=(o=n,o&&o.__esModule?o:{default:o});t.App=class{constructor(){this.scene=null,this.quality="low",this.store=new a.default}setQuality(e){return this.quality!==e&&(this.quality=e,this.scene&&this.scene.dispatchEvent(new CustomEvent("quality-changed",{detail:e})),!0)}}},79:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addAnimationComponents=function(e){if(!e.components["animation-mixer"])return;e.querySelector("[loop-animation]")||e.setAttribute("loop-animation","")}},8:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(1),n=l(o),a=i(0),s=l(a),r=i(5);function l(e){return e&&e.__esModule?e:{default:e}}class c extends o.Component{constructor(e){super(e),this.onContainerClicked=(e=>{this.props.closable&&e.currentTarget===e.target&&this.props.onClose()}),this.onKeyDown=this.onKeyDown.bind(this),this.onContainerClicked=this.onContainerClicked.bind(this)}componentDidMount(){window.addEventListener("keydown",this.onKeyDown)}componentWillUnmount(){window.removeEventListener("keydown",this.onKeyDown)}onKeyDown(e){this.props.closable&&"Escape"===e.key&&this.props.onClose()}render(){return n.default.createElement("div",{className:"dialog-overlay"},n.default.createElement("div",{className:"dialog",onClick:this.onContainerClicked},n.default.createElement("div",{className:"dialog__box"},n.default.createElement("div",{className:"dialog__box__contents"},this.props.closable&&this.props.onClose&&n.default.createElement(r.WithHoverSound,null,n.default.createElement("button",{className:"dialog__box__contents__close",onClick:this.props.onClose},n.default.createElement("span",null,""))),n.default.createElement("div",{className:"dialog__box__contents__title"},this.props.title),n.default.createElement("div",{className:"dialog__box__contents__body"},this.props.children),n.default.createElement("div",{className:"dialog__box__contents__button-container"})))))}}t.default=c,c.propTypes={title:s.default.node,children:s.default.node.isRequired,onClose:s.default.func,closable:s.default.bool},c.defaultProps={closable:!0}},80:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBox=function(e,t){const i=new THREE.Box3;o.copy(e.object3D.rotation),e.object3D.rotation.set(0,0,0),e.object3D.updateMatrices(!0,!0),t.updateMatrices(!0,!0),i.setFromObject(t),i.isEmpty()||(e.object3D.worldToLocal(i.min),e.object3D.worldToLocal(i.max),e.object3D.rotation.copy(o),e.object3D.matrixNeedsUpdate=!0);return i},t.getScaleCoefficient=function(e,t){if(t.isEmpty())return 1;const{max:i,min:o}=t,n=Math.abs(i.x-o.x),a=Math.abs(i.y-o.y),s=Math.abs(i.z-o.z),r=Math.max(n,a,s);return e/r};const o=new THREE.Euler},81:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RIGHT_CONTROLLER_OFFSETS=t.LEFT_CONTROLLER_OFFSETS=void 0;var o=i(3);const n="open",a="point",s="fist",r="thumbUp",l="thumbDown",c="indexDown",d="pinch",u="mrpDown",h=t.LEFT_CONTROLLER_OFFSETS={default:new THREE.Matrix4,"oculus-touch-controls":(new THREE.Matrix4).makeTranslation(-.025,-.03,.1),"oculus-go-controls":new THREE.Matrix4,"vive-controls":(new THREE.Matrix4).compose(new THREE.Vector3(0,0,.13),(new THREE.Quaternion).setFromEuler(new THREE.Euler(-40*THREE.Math.DEG2RAD,0,0)),new THREE.Vector3(1,1,1)),"windows-motion-controls":(new THREE.Matrix4).compose(new THREE.Vector3(0,-.017,.13),(new THREE.Quaternion).setFromEuler(new THREE.Euler(-40*THREE.Math.DEG2RAD,0,0)),new THREE.Vector3(1,1,1)),"daydream-controls":(new THREE.Matrix4).makeTranslation(0,0,-.04),"gearvr-controls":new THREE.Matrix4},p=t.RIGHT_CONTROLLER_OFFSETS={default:new THREE.Matrix4,"oculus-touch-controls":(new THREE.Matrix4).makeTranslation(.025,-.03,.1),"oculus-go-controls":new THREE.Matrix4,"vive-controls":(new THREE.Matrix4).compose(new THREE.Vector3(0,0,.13),(new THREE.Quaternion).setFromEuler(new THREE.Euler(-40*THREE.Math.DEG2RAD,0,0)),new THREE.Vector3(1,1,1)),"windows-motion-controls":(new THREE.Matrix4).compose(new THREE.Vector3(0,-.017,.13),(new THREE.Quaternion).setFromEuler(new THREE.Euler(-40*THREE.Math.DEG2RAD,0,0)),new THREE.Vector3(1,1,1)),"daydream-controls":(new THREE.Matrix4).makeTranslation(0,0,-.04),"gearvr-controls":new THREE.Matrix4};AFRAME.registerComponent("hand-controls2",{schema:{default:"left"},getLeftControllerOffset(){return void 0===h[this.connectedController]?h.default:h[this.connectedController]},getRightControllerOffset(){return void 0===p[this.connectedController]?p.default:p[this.connectedController]},init(){this.pose=n,this.el.setAttribute("visible",!1),this.connectedController=null,this.onControllerConnected=this.onControllerConnected.bind(this),this.onControllerDisconnected=this.onControllerDisconnected.bind(this),this.el.addEventListener("controllerconnected",this.onControllerConnected),this.el.addEventListener("controllerdisconnected",this.onControllerDisconnected)},update(e){const t=this.el,i=this.data,o={hand:i,model:!1,orientationOffset:{x:0,y:0,z:0}};i!==e&&(t.setAttribute("vive-controls",o),t.setAttribute("oculus-touch-controls",o),t.setAttribute("oculus-go-controls",o),t.setAttribute("windows-motion-controls",o),t.setAttribute("daydream-controls",o),t.setAttribute("gearvr-controls",o))},poseForFingers:(e,t,i)=>e||t||i?e&&t&&i?s:!e&&t&&i?r:e||t||!i?e||!t||i?!e||t||i?e&&t&&!i?d:e&&!t&&i?a:(console.warn(`Did not find matching pose for thumb ${e}, index ${t}, middleRingPinky ${i}`),n):l:c:u:n,tick(){const e=this.data,t=AFRAME.scenes[0].systems.userinput,i="left"===e?o.paths.actions.leftHand:o.paths.actions.rightHand,n=t.get(i.pose),a=t.get(i.thumb),s=t.get(i.index),r=t.get(i.middleRingPinky),l=this.poseForFingers(a,s,r);l!==this.pose&&(this.el.emit("hand-pose",{previous:this.pose,current:l}),this.pose=l),this.el.object3D.visible=!!n},onControllerConnected(e){this.connectedController=e.detail.name,this.el.setAttribute("visible",!0)},onControllerDisconnected(){this.connectedController=null,this.el.setAttribute("visible",!1)}})},9:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addMedia=t.upload=t.guessContentType=t.getCustomGLTFParserURLResolver=t.resolveUrl=t.proxiedUrlFor=void 0,t.injectCustomShaderChunks=function(e){const t=/\bskinning_vertex\b/,i=/\bgl_FragColor\b/,o=["MeshStandardMaterial","MeshBasicMaterial","MobileStandardMaterial"],n=new Map;return e.traverse(e=>{e.material&&o.includes(e.material.type)&&(e.el.classList.contains("ui")||e.el.classList.contains("hud")||e.el.getAttribute("text-button")||(e.material=e.material.clone(),e.material.onBeforeCompile=(o=>{if(!t.test(o.vertexShader))return;o.uniforms.hubs_EnableSweepingEffect={value:!1},o.uniforms.hubs_SweepParams={value:[0,0]},o.uniforms.hubs_InteractorOnePos={value:[0,0,0]},o.uniforms.hubs_InteractorTwoPos={value:[0,0,0]},o.uniforms.hubs_HighlightInteractorOne={value:!1},o.uniforms.hubs_HighlightInteractorTwo={value:!1},o.uniforms.hubs_Time={value:0};const a=o.vertexShader.split("\n"),s=a.findIndex(e=>t.test(e));a.splice(s+1,0,"\n        if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo) {\n          vec4 wt = modelMatrix * vec4(transformed, 1);\n\n          // Used in the fragment shader below.\n          hubs_WorldPosition = wt.xyz;\n        }\n      "),a.unshift("varying vec3 hubs_WorldPosition;"),a.unshift("uniform bool hubs_HighlightInteractorOne;"),a.unshift("uniform bool hubs_HighlightInteractorTwo;"),o.vertexShader=a.join("\n");const l=o.fragmentShader.split("\n"),c=l.findIndex(e=>i.test(e));l.splice(c+1,0,r.default),l.unshift("varying vec3 hubs_WorldPosition;"),l.unshift("uniform bool hubs_EnableSweepingEffect;"),l.unshift("uniform vec2 hubs_SweepParams;"),l.unshift("uniform bool hubs_HighlightInteractorOne;"),l.unshift("uniform vec3 hubs_InteractorOnePos;"),l.unshift("uniform bool hubs_HighlightInteractorTwo;"),l.unshift("uniform vec3 hubs_InteractorTwoPos;"),l.unshift("uniform float hubs_Time;"),o.fragmentShader=l.join("\n"),n.set(e.material.uuid,o.uniforms)}),e.material.needsUpdate=!0))}),n},t.getPromotionTokenForFile=function(e){return window.APP.store.state.uploadPromotionTokens.find(t=>t.fileId===e)};var o,n=i(19),a=i(12),s=i(68),r=(o=s,o&&o.__esModule?o:{default:o});const l="hubs.local,reticulum.io".split(","),c=(0,a.getReticulumFetchUrl)("/api/v1/media"),d={gltf:"model/gltf",glb:"model/gltf-binary",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",pdf:"application/pdf",mp4:"video/mp4",mp3:"audio/mpeg"};t.proxiedUrlFor=((e,t)=>{if(!e.startsWith("http:")&&!e.startsWith("https:"))return e;try{const t=new URL(e);if(l.find(e=>t.hostname.endsWith(e)))return e}catch(e){}const i=(u=e,btoa(encodeURIComponent(u).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode("0x"+t)))).replace(/=+$/g,"");if(null==t&&{NODE_ENV:"production",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:""}.CORS_PROXY_SERVER){const t=encodeURIComponent(e);return`https://${{NODE_ENV:"production",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:""}.CORS_PROXY_SERVER}/${t}`}{const e=i.replace(/\+/g,"-").replace(/\//g,"_"),o=null!=t?"extract":"raw";return`https://farspark-dev.reticulum.io/0/${o}/0/0/0/${t||0}/${e}`}});var u;const h=new Map,p=(t.resolveUrl=(async(e,t)=>{const i=`${e}|${t}`;if(h.has(i))return h.get(i);const o=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({media:{url:e,index:t}})}).then(e=>e.json());return h.set(i,o),o}),t.getCustomGLTFParserURLResolver=(e=>(t,i)=>{if("string"!=typeof t||""===t)return"";if(/^(https?:)?\/\//i.test(t))return t;if(/^data:.*,.*$/i.test(t))return t;if(/^blob:.*$/i.test(t))return t;if({NODE_ENV:"production",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:""}.CORS_PROXY_SERVER){const i=`https://${{NODE_ENV:"production",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:""}.CORS_PROXY_SERVER}/`;if(e.startsWith(i)){const o=decodeURIComponent(e.substring(i.length)),n=o.split("/"),a=n.slice(0,n.length-1).join("/")+"/"+t;return i+encodeURIComponent(a)}}return i+t}),t.guessContentType=(e=>{if(e.startsWith("hubs://")&&e.endsWith("/video"))return"video/vnd.hubs-webrtc";const t=new URL(e).pathname.split(".").pop();return d[t]}),t.upload=(e=>{const t=new FormData;return t.append("media",e),t.append("promotion_mode","with_token"),fetch(c,{method:"POST",body:t}).then(e=>e.json())}));let m=0;t.addMedia=((e,t,i,o=!1,a=!1)=>{const s=AFRAME.scenes[0],r=document.createElement("a-entity");r.id="interactable-media-"+m++,r.setAttribute("networked",{template:t});const l=e instanceof File;r.setAttribute("media-loader",{resize:a,resolve:o,src:"string"==typeof e?e:"",fileIsOwned:!l}),s.appendChild(r);const c=setTimeout(()=>{s.emit("media-loading",{src:e})},100);["model-loaded","video-loaded","image-loaded"].forEach(t=>{r.addEventListener(t,()=>{clearTimeout(c),r.classList.contains("pen")||r.getAttribute("animation__spawn-start")||(r.object3D.scale.setScalar(.5),r.matrixNeedsUpdate=!0,r.setAttribute("animation__spawn-start",{property:"scale",delay:50,dur:300,from:{x:.5,y:.5,z:.5},to:{x:1,y:1,z:1},easing:"easeOutElastic"})),s.emit("media-loaded",{src:e})})});const d=new Promise(function(t){l?function(e,t){const i=new FileReader;i.onload=function(e){const i=new DataView(e.target.result);if(65496!=i.getUint16(0,!1))return t(-2);const o=i.byteLength;let n=2;for(;n<o;){if(i.getUint16(n+2,!1)<=8)return t(-1);const e=i.getUint16(n,!1);if(n+=2,65505==e){if(1165519206!=i.getUint32(n+=2,!1))return t(-1);const e=18761==i.getUint16(n+=6,!1);n+=i.getUint32(n+4,e);const o=i.getUint16(n,e);n+=2;for(let a=0;a<o;a++)if(274==i.getUint16(n+12*a,e))return t(i.getUint16(n+12*a+8,e))}else{if(65280!=(65280&e))break;n+=i.getUint16(n,!1)}}return t(-1)},i.readAsArrayBuffer(e)}(e,e=>{t(e)}):t(1)});return l?p(e).then(e=>{const t=new URL(e.raw);t.searchParams.set("token",e.meta.access_token),r.setAttribute("media-loader",{resolve:!1,src:t.href,fileId:e.file_id}),window.APP.store.update({uploadPromotionTokens:[{fileId:e.file_id,promotionToken:e.meta.promotion_token}]})}).catch(e=>{console.error("Media upload failed",e),r.setAttribute("media-loader",{src:"error"})}):e instanceof MediaStream&&r.setAttribute("media-loader",{src:`hubs://clients/${NAF.clientId}/video`}),i&&r.addEventListener("media_resolved",({detail:e})=>{const t=(0,n.objectTypeForOriginAndContentType)(i,e.contentType);s.emit("object_spawned",{objectType:t})}),{entity:r,orientation:d}})},94:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateHubName=function(){const e=e=>{const t=e[Math.floor(Math.random()*e.length)];return t.charAt(0).toUpperCase()+t.slice(1)};return`${e(o)} ${e(o)} ${e(n)}`};const o=["able","absolute","acceptable","acclaimed","accomplished","accurate","aching","acrobatic","adorable","adventurous","basic","belated","beloved","calm","candid","capital","carefree","caring","cautious","celebrated","charming","daring","darling","dearest","each","eager","early","earnest","easy","easygoing","ecstatic","edible","fabulous","fair","faithful","familiar","famous","fancy","fantastic","far","generous","gentle","genuine","giant","handmade","handsome","handy","happy","icy","ideal","identical","keen","lasting","lavish","magnificent","majestic","mammoth","marvelous","natural","obedient","palatable","parched","passionate","pastel","peaceful","perfect","perfumed","quaint","qualified","radiant","rapid","rare","safe","sandy","satisfied","scaly","scarce","scared","scary","scented","scientific","secret","sentimental","talkative","tangible","tart","tasty","tattered","teeming","ultimate","uncommon","unconscious","understated","warm","active","adept","admirable","admired","adorable","adored","advanced","affectionate","beneficial","best","better","big","cheerful","cheery","chief","chilly","classic","clean","clear","clever","decent","decisive","deep","defiant","definitive","delectable","delicious","elaborate","elastic","elated","elegant","elementary","elliptical","fast","favorable","favorite","fearless","gifted","glamorous","gleaming","glittering","harmonious","imaginative","immense","jealous","kind","leafy","legal","mature","mean","meaty","nautical","neat","necessary","needy","oddball","offbeat","periodic","perky","personal","pertinent","petty","quarterly","ready","real","realistic","reasonable","regal","serene","shabby","sharp","shiny","showy","shy","silky","tempting","tense","terrific","testy","thankful","uniform","unique","vast","weary","wee","welcome","agile","alarmed","alert","alive","bleak","blissful","blushing","coarse","colorful","colossal","comfortable","compassionate","complete","delightful","dense","dependable","dependent","descriptive","detailed","determined","devoted","different","eminent","emotional","enchanted","enchanting","energetic","enormous","fine","finished","firm","firsthand","fixed","flashy","flawless","glorious","glossy","golden","good","gorgeous","graceful","healthy","heartfelt","hearty","helpful","impartial","impressive","jolly","jovial","lighthearted","likable","lined","mellow","melodic","memorable","mild","new","opulent","playful","pleasant","pleasing","plump","plush","polished","polite","reliable","relieved","remarkable","remote","respectful","responsible","simple","simplistic","sizzling","sleepy","slight","slim","smart","smooth","snappy","snoopy","thirsty","this","thorough","those","thoughtful","united","vibrant","vicious","wellmade","whimsical","whirlwind","zesty","amazing","ambitious","ample","amused","amusing","ancient","angelic","antique","bold","bossy","both","bouncy","bountiful","complex","conscious","considerate","constant","content","conventional","cooked","cool","cooperative","diligent","dimwitted","direct","discrete","envious","essential","ethical","euphoric","flippant","fluffy","fluid","flustered","focused","fond","gracious","grand","grandiose","granular","grateful","grave","great","hidden","high","hilarious","homely","incomparable","incredible","infamous","joyful","lively","loathsome","lonely","long","milky","mindless","miniature","minor","misty","next","nice","nifty","nimble","orderly","organic","ornate","popular","posh","positive","potable","powerful","powerless","precious","present","prestigious","quick","rewarding","rich","right","sociable","soft","solid","some","sophisticated","soulful","sparkling","spectacular","speedy","spicy","spiffy","spirited","spiteful","splendid","spotless","spry","thrifty","tidy","tight","timely","tinted","unruly","untimely","violet","wicked","wide","wild","willing","winding","windy","zigzag","apprehensive","appropriate","artistic","assured","astonishing","bright","brilliant","bronze","coordinated","courageous","courteous","crafty","crazy","creamy","creative","crisp","distant","distinct","downright","evergreen","everlasting","every","evil","excellent","excitable","exemplary","exhausted","forthright","fortunate","fragrant","frank","free","frequent","fresh","friendly","frightened","frigid","gripping","grounded","honest","honorable","honored","hopeful","hospitable","hot","huge","infatuated","infinite","informal","insistent","instructive","juicy","jumbo","knowing","knowledgeable","longterm","loud","lovable","loving","modern","modest","moist","monumental","normal","notable","outgoing","precious","pretty","prickly","primary","pristine","private","prize","productive","profitable","quiet","quintessential","roasted","robust","square","squiggly","stable","staid","starry","steel","stimulating","striking","striped","strong","studious","stunning","tough","trained","treasured","tremendous","triangular","tricky","unused","unusual","upbeat","virtual","witty","wonderful","wooden","worldly","youthful","attached","attentive","attractive","austere","authentic","automatic","aware","awesome","bubbly","bustling","busy","buttery","cuddly","cultured","curly","curvy","cute","cylindrical","downright","dramatic","excited","exciting","exotic","experienced","expert","frosty","fruitful","full","fumbling","funny","fussy","growing","grown","gummy","humble","humongous","hungry","intelligent","interesting","known","kooky","kosher","loyal","lucky","luminous","lustrous","luxurious","multicolored","mysterious","noteworthy","numb","nutritious","outstanding","overjoyed","proper","proud","prudent","punctual","puny","pure","puzzled","puzzling","quirky","stupendous","sturdy","stylish","subdued","subtle","sunny","super","superb","supportive","surprised","sweet","swift","sympathetic","trivial","trusting","trustworthy","trusty","truthful","twin","usable","used","useful","utilized","vital","vivid","worried","worthwhile","worthy","writhing","wry","yummy","chocolate","crimson","cyan","fuchsia","gold","honeydew","lime","linen","magenta","olive","peru","salmon","seashell","sienna","snow","thistle","tomato","transparent","turquoise","violet"],n=["space","land","world","universe","plane","room","nation","plaza","gathering","meetup","get together","conclave","party","powwow","domain","dominion","realm","square","commons","park","cosmos","sphere","terrain","spot","zone","area","tract","turf","place","territory","volume","camp","picnic","outing","vacation","adventure","exploration","outing","walkabout","safari","venture","roundtable","barbecue","celebration","festivity","gala","shindig","social","convention","assembly","congregation","rendezvous","huddle","meet","soiree"]},95:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},n=i(1),a=u(n),s=i(0),r=u(s),l=i(8),c=u(l),d=i(5);function u(e){return e&&e.__esModule?e:{default:e}}const h="^[A-Za-z0-9-'\":!@#$%^&*(),.?~ ]{4,64}$";class p extends n.Component{constructor(...e){var t;return t=super(...e),this.state={customRoomName:"",customSceneUrl:""},t}render(){const e=this.props,{onCustomScene:t,onClose:i}=e,n=function(e,t){var i={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o]);return i}(e,["onCustomScene","onClose"]);return a.default.createElement(c.default,o({title:"Create a Room",onClose:i},n),a.default.createElement("div",null,this.props.includeScenePrompt?a.default.createElement("div",null,"Choose a name and GLTF URL for your room's scene:"):a.default.createElement("div",null,"Choose a name for your room:"),a.default.createElement("form",{onSubmit:()=>{t(this.state.customRoomName,this.state.customSceneUrl),i()}},a.default.createElement("div",{className:"custom-scene-form"},a.default.createElement("input",{type:"text",placeholder:"Room name",className:"custom-scene-form__link_field",value:this.state.customRoomName,pattern:h,title:"Invalid name, limited to 4 to 64 characters and limited symbols.",onChange:e=>this.setState({customRoomName:e.target.value}),required:!0}),this.props.includeScenePrompt&&a.default.createElement("input",{type:"url",placeholder:"URL to Scene GLTF or GLB (Optional)",className:"custom-scene-form__link_field",value:this.state.customSceneUrl,onChange:e=>this.setState({customSceneUrl:e.target.value})}),a.default.createElement("div",{className:"custom-scene-form__buttons"},a.default.createElement(d.WithHoverSound,null,a.default.createElement("button",{className:"custom-scene-form__action-button"},a.default.createElement("span",null,"Create Room"))))))))}}t.default=p,p.propTypes={includeScenePrompt:r.default.bool,onCustomScene:r.default.func,onClose:r.default.func}},97:function(e,t,i){"use strict";var o=i(98),n=r(o),a=i(46),s=r(a);function r(e){return e&&e.__esModule?e:{default:e}}const l=new URLSearchParams(location.search),c=(0,s.default)("debug"),d=l.get("log_filter")||c&&"naf-janus-adapter:*";d&&n.default.enable(d)}});
//# sourceMappingURL=scene-2f2ffc59f471fa3cbfb7.js.map